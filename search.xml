<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>JWTç”Ÿæˆã€è®¤è¯</title>
      <link href="2021/02/27/drf-jwt-sheng-cheng-ren-zheng/"/>
      <url>2021/02/27/drf-jwt-sheng-cheng-ren-zheng/</url>
      
        <content type="html"><![CDATA[<p>DRFæ¡†æ¶çš„ä¸€ç³»åˆ—åŠŸèƒ½ï¼šè®¤è¯ã€æƒé™ã€é™æµï¼Œéƒ½æ˜¯ä¾èµ–äºJWTã€‚</p><p>æ•´ä¸ªæµç¨‹å°±æ˜¯è¿™æ ·çš„:</p><ul><li><p>å®¢æˆ·ç«¯å‘é€ç”¨æˆ·åå’Œå¯†ç åˆ°æœåŠ¡ç«¯ï¼Œ</p></li><li><p>éªŒè¯é€šè¿‡ï¼Œç”ŸæˆJWT</p></li><li><p>è¿”å›JWTç»™å®¢æˆ·ç«¯</p></li><li><p>ä¸‹æ¬¡ï¼Œå®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œæºå¸¦JWTï¼Œä¸€èˆ¬æ˜¯åœ¨è¯·æ±‚å¤´é‡ŒåŠ å…¥<code>Authorization</code>ï¼Œå¹¶åŠ ä¸Š<code>JWT</code>æ ‡æ³¨ï¼š</p></li></ul><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">&#123;<br>  headers: &#123;<br>    <span class="hljs-string">&#x27;Authorization&#x27;</span>: <span class="hljs-string">&#x27;JWT &#x27;</span> + token<br>&#125;<br></code></pre></div></td></tr></table></figure><ul><li>æœåŠ¡ç«¯ä¼šéªŒè¯ tokenï¼Œå¦‚æœéªŒè¯é€šè¿‡å°±ä¼šè¿”å›ç›¸åº”çš„èµ„æº</li><li>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¯ä»¥å®ç°æƒé™å’Œé™æµ</li></ul><p>æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/10/1821058-2e28fe6c997a60c9.png" alt="jwt-diagram"> </p><p>è€Œç›®å‰ï¼Œåœ¨DRFé¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œtokençš„ç”Ÿæˆã€è®¤è¯æ–¹å¼ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š<code>pyjwt</code>å’Œ<code>rest_framework_jwt</code></p><h2 id="pyjwt"><a href="#pyjwt" class="headerlink" title="pyjwt"></a>pyjwt</h2><h3 id="é…ç½®ä¿¡æ¯"><a href="#é…ç½®ä¿¡æ¯" class="headerlink" title="é…ç½®ä¿¡æ¯"></a>é…ç½®ä¿¡æ¯</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> datetime <br><br>JWT_EXPIRATION_DELTA = datetime.timedelta(seconds=<span class="hljs-number">300</span>)  <span class="hljs-comment"># æŒ‡æ˜jwtçš„è¿‡æœŸæ—¶é—´</span><br><br>REST_FRAMEWORK = &#123; <span class="hljs-comment"># å¯ä»¥å…¨å±€é…ç½®ï¼Œä¹Ÿå¯ä»¥å±€éƒ¨é…ç½®</span><br>    <span class="hljs-comment"># æŒ‡å®šè§†å›¾æƒé™</span><br>    <span class="hljs-string">&#x27;DEFAULT_PERMISSION_CLASSES&#x27;</span>: (<br>        <span class="hljs-string">&#x27;rest_framework.permissions.AllowAny&#x27;</span>,  <span class="hljs-comment"># é»˜è®¤æ¯ä¸ªè§†å›¾ï¼Œæ˜¯åªæœ‰è®¤è¯ç”¨æˆ·å¯ä»¥è®¿é—®</span><br>    ),<br>    <span class="hljs-comment"># æŒ‡å®šdrfè®¤è¯æœºåˆ¶</span><br>    <span class="hljs-string">&#x27;DEFAULT_AUTHENTICATION_CLASSES&#x27;</span>: (<br>        <span class="hljs-string">&#x27;user.tools.auth.JSONWebTokenAuthentication&#x27;</span>,  <span class="hljs-comment"># æŒ‡æ˜ jwtè®¤è¯ç±»</span><br>        <span class="hljs-string">&#x27;rest_framework.authentication.SessionAuthentication&#x27;</span>,  <span class="hljs-comment"># sessionè®¤è¯</span><br>        <span class="hljs-string">&#x27;rest_framework.authentication.BasicAuthentication&#x27;</span>,  <span class="hljs-comment"># åŸºæœ¬è®¤è¯</span><br>    ),<br>&#125;<br></code></pre></div></td></tr></table></figure><h3 id="å·¥å…·ç±»"><a href="#å·¥å…·ç±»" class="headerlink" title="å·¥å…·ç±»"></a>å·¥å…·ç±»</h3><p>è‡ªå®šä¹‰æ–¹æ³•ï¼Œç”Ÿæˆtokenï¼Œè§£ætoken</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<br><br><span class="hljs-keyword">import</span> jwt<br><span class="hljs-keyword">from</span> django.conf <span class="hljs-keyword">import</span> settings<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">jwt_encode_handler</span>(<span class="hljs-params">user</span>):</span><br>   <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    :param user: ç”¨æˆ·å¯¹è±¡</span><br><span class="hljs-string">    :return: ç”Ÿæˆçš„token</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    payload = &#123;<br>        <span class="hljs-string">&#x27;user_id&#x27;</span>: user.pk,<br>        <span class="hljs-string">&#x27;username&#x27;</span>: user.username,<br>        <span class="hljs-string">&#x27;exp&#x27;</span>: datetime.utcnow() + settings.JWT_EXPIRATION_DELTA<br>    &#125;<br>    token = jwt.encode(payload=payload, key=settings.SECRET_KEY).decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><br>    <span class="hljs-keyword">return</span> token<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">jwt_decode_handler</span>(<span class="hljs-params">token</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    :param token: ç”Ÿæˆçš„token</span><br><span class="hljs-string">    :return: è§£æåçš„æ•°æ®</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    data = jwt.decode(token, key=settings.SECRET_KEY, algorithms=<span class="hljs-string">&#x27;HS256&#x27;</span>)<br><br>    <span class="hljs-keyword">return</span> data<br><br></code></pre></div></td></tr></table></figure><p>è‡ªå®šä¹‰ç”¨æˆ·è®¤è¯ç±»</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.contrib.auth <span class="hljs-keyword">import</span> get_user_model<br><span class="hljs-keyword">from</span> rest_framework.authentication <span class="hljs-keyword">import</span> BaseAuthentication<br><span class="hljs-keyword">from</span> user.tools.jwt <span class="hljs-keyword">import</span> jwt_decode_handler<br><br>USER = get_user_model()<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JSONWebTokenAuthentication</span>(<span class="hljs-params">BaseAuthentication</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">authenticate</span>(<span class="hljs-params">self, request</span>):</span><br>        token = request.META.get(<span class="hljs-string">&#x27;HTTP_AUTHORIZATION&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br><br>        <span class="hljs-keyword">try</span>:<br>            data = jwt_decode_handler(token)<br>        <span class="hljs-keyword">except</span> Exception:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span><br><br>        user_id = data.get(<span class="hljs-string">&#x27;user_id&#x27;</span>)<br>        <span class="hljs-keyword">try</span>:<br>            user = USER.objects.get(<span class="hljs-built_in">id</span>=user_id)<br>        <span class="hljs-keyword">except</span> USER.DoesNotExist:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span><br><br>        <span class="hljs-keyword">return</span> user, <span class="hljs-literal">None</span><br></code></pre></div></td></tr></table></figure><h3 id="ç”Ÿæˆtoken"><a href="#ç”Ÿæˆtoken" class="headerlink" title="ç”Ÿæˆtoken"></a>ç”Ÿæˆtoken</h3><h4 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h4><p>ç™»å½•æ—¶ï¼Œè°ƒç”¨<code>authenticate</code>æ–¹æ³•ï¼Œè®¤è¯ç”¨æˆ·ï¼Œæ ¹æ®ç”¨æˆ·,è‡ªå·±ç”Ÿæˆjwt</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.contrib.auth <span class="hljs-keyword">import</span> authenticate<br><span class="hljs-keyword">from</span> rest_framework.views <span class="hljs-keyword">import</span> APIView<br><span class="hljs-keyword">from</span> rest_framework.response <span class="hljs-keyword">import</span> Response<br><span class="hljs-keyword">from</span> rest_framework.permissions <span class="hljs-keyword">import</span> IsAuthenticated<br><br><span class="hljs-keyword">from</span> user.tools.jwt <span class="hljs-keyword">import</span> jwt_encode_handler<br><br><br><span class="hljs-comment"># Create your views here.</span><br><span class="hljs-comment"># rest framework jwt</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginAPIView</span>(<span class="hljs-params">APIView</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">post</span>(<span class="hljs-params">self, request</span>):</span><br>        <span class="hljs-comment"># 1. è·å–ç”¨æˆ·ä¿¡æ¯</span><br>        username = request.data.get(<span class="hljs-string">&#x27;username&#x27;</span>)<br>        password = request.data.get(<span class="hljs-string">&#x27;password&#x27;</span>)<br><br>        <span class="hljs-comment"># 2. è®¤è¯ç”¨æˆ·</span><br>        user = authenticate(request, username=username, password=password)<br><br>        <span class="hljs-comment"># 3. åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è®¤è¯é€šè¿‡</span><br>        <span class="hljs-keyword">if</span> user:<br>            <span class="hljs-comment"># ä½¿ç”¨pyjwtï¼Œ ç”Ÿæˆjwt</span><br>            token = jwt_encode_handler(user)<br><br>            <span class="hljs-keyword">return</span> Response(&#123;<br>                <span class="hljs-string">&#x27;user&#x27;</span>: user.username,<br>                <span class="hljs-string">&#x27;token&#x27;</span>: token<br>            &#125;)<br><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> Response(&#123;<span class="hljs-string">&#x27;msg&#x27;</span>: <span class="hljs-string">&#x27;ç™»å½•å¤±è´¥&#x27;</span>&#125;, status=<span class="hljs-number">400</span>)<br></code></pre></div></td></tr></table></figure><h4 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> user.views <span class="hljs-keyword">import</span> LoginAPIView<br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;login/&#x27;</span>, LoginAPIView.as_view())<br>]<br><br></code></pre></div></td></tr></table></figure><h3 id="è®¤è¯token"><a href="#è®¤è¯token" class="headerlink" title="è®¤è¯token"></a>è®¤è¯token</h3><blockquote><p>  è¯·æ±‚æ—¶ï¼Œéœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ å‚æ•° ,æ ¼å¼ä¸ºï¼š <code>&#123;&#39;Authorization&#39; : token&#125;</code></p></blockquote><h4 id="è§†å›¾-1"><a href="#è§†å›¾-1" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h4><p>ç”¨æˆ·è®¤è¯æ—¶ï¼Œè‡ªå·±æ ¡éªŒjwtï¼Œé‡å†™è®¤è¯ç±»</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.contrib.auth <span class="hljs-keyword">import</span> authenticate<br><span class="hljs-keyword">from</span> rest_framework.views <span class="hljs-keyword">import</span> APIView<br><span class="hljs-keyword">from</span> rest_framework.response <span class="hljs-keyword">import</span> Response<br><span class="hljs-keyword">from</span> rest_framework.permissions <span class="hljs-keyword">import</span> IsAuthenticated<br><br><span class="hljs-keyword">from</span> user.tools.auth <span class="hljs-keyword">import</span> JSONWebTokenAuthentication<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserInfoAPIView</span>(<span class="hljs-params">APIView</span>):</span><br>    <span class="hljs-comment"># é’ˆå¯¹è§†å›¾ç±»ï¼Œå±€éƒ¨é…ç½®è®¤è¯ç±»å’Œæƒé™ç±»</span><br>    authentication_classes = [JSONWebTokenAuthentication]<br>    permission_classes = [IsAuthenticated]<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>        user = request.user<br>        <span class="hljs-keyword">return</span> Response(&#123;<br>            <span class="hljs-string">&#x27;username&#x27;</span>: user.username,<br>            <span class="hljs-string">&#x27;email&#x27;</span>: user.email,<br>        &#125;)<br><br></code></pre></div></td></tr></table></figure><h4 id="è·¯ç”±-1"><a href="#è·¯ç”±-1" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> user.views <span class="hljs-keyword">import</span> UserInfoAPIView<br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;userinfo/&#x27;</span>, UserInfoAPIView.as_view())<br>]<br></code></pre></div></td></tr></table></figure><h2 id="rest-framework-jwt"><a href="#rest-framework-jwt" class="headerlink" title="rest_framework_jwt"></a>rest_framework_jwt</h2><h3 id="é…ç½®ä¿¡æ¯-1"><a href="#é…ç½®ä¿¡æ¯-1" class="headerlink" title="é…ç½®ä¿¡æ¯"></a>é…ç½®ä¿¡æ¯</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># é’ˆå¯¹ drf çš„é…ç½®ä¿¡æ¯ï¼Œ å…¨å±€é…ç½® drfçš„è§†å›¾çš„è®¤è¯å’Œæƒé™</span><br>REST_FRAMEWORK = &#123;<br>    <span class="hljs-comment"># æŒ‡å®šè§†å›¾æƒé™</span><br>    <span class="hljs-string">&#x27;DEFAULT_PERMISSION_CLASSES&#x27;</span>: (<br>        <span class="hljs-string">&#x27;rest_framework.permissions.AllowAny&#x27;</span>,  <span class="hljs-comment"># é»˜è®¤æ¯ä¸ªè§†å›¾ï¼Œå…è®¸ä»»ä½•ç”¨æˆ·è®¿é—®</span><br>    ),<br>    <span class="hljs-comment"># æŒ‡å®šdrfè®¤è¯æœºåˆ¶</span><br>    <span class="hljs-string">&#x27;DEFAULT_AUTHENTICATION_CLASSES&#x27;</span>: (<br>        <span class="hljs-string">&#x27;rest_framework_jwt.authentication.JSONWebTokenAuthentication&#x27;</span>,  <span class="hljs-comment"># rest_framework_jwtè®¤è¯ï¼Œ ä¹Ÿå¯ä»¥åœ¨æ¯ä¸ªè§†å›¾ä¸­æŒ‡æ˜è®¤è¯ç±»</span><br>    )<br>&#125;<br><br><span class="hljs-comment"># é’ˆå¯¹ rest_framework_jwt çš„é…ç½®ä¿¡æ¯</span><br>JWT_AUTH = &#123;<br>    <span class="hljs-string">&#x27;JWT_RESPONSE_PAYLOAD_HANDLER&#x27;</span>:<br>    <span class="hljs-comment"># &#x27;rest_framework_jwt.utils.jwt_response_payload_handler&#x27;, # é»˜è®¤jwtè®¤è¯æˆåŠŸè¿”å›æ•°æ® </span><br>      <span class="hljs-string">&#x27;user.utils.jwt_response_payload_handler&#x27;</span>, <span class="hljs-comment"># è‡ªå®šä¹‰jwtè®¤è¯æˆåŠŸè¿”å›æ•°æ®</span><br>    <span class="hljs-string">&#x27;JWT_EXPIRATION_DELTA&#x27;</span>: datetime.timedelta(seconds=<span class="hljs-number">300</span>),  <span class="hljs-comment"># æŒ‡æ˜tokençš„æœ‰æ•ˆæœŸï¼Œ é»˜è®¤5åˆ†</span><br>    <span class="hljs-string">&#x27;JWT_ALLOW_REFRESH&#x27;</span>: <span class="hljs-literal">True</span>, <span class="hljs-comment"># å…è®¸åˆ·æ–°</span><br>    <span class="hljs-string">&#x27;JWT_REFRESH_EXPIRATION_DELTA&#x27;</span>: datetime.timedelta(days=<span class="hljs-number">7</span>),  <span class="hljs-comment"># åœ¨å¤šä¹…é—´éš”å†…å¯ä»¥ç”¨æ—§tokenæ¥åˆ·æ–°ä»¥ä¾¿è·å–æ–°çš„tokenï¼Œé»˜è®¤æ˜¯7å¤©</span><br>&#125;<br></code></pre></div></td></tr></table></figure><h3 id="ç”Ÿæˆtoken-1"><a href="#ç”Ÿæˆtoken-1" class="headerlink" title="ç”Ÿæˆtoken"></a>ç”Ÿæˆtoken</h3><h4 id="é»˜è®¤æ–¹å¼"><a href="#é»˜è®¤æ–¹å¼" class="headerlink" title="é»˜è®¤æ–¹å¼"></a>é»˜è®¤æ–¹å¼</h4><p>ç™»å½•æ—¶ï¼Œè°ƒç”¨ å°è£…å¥½çš„ <code>obtain_jwt_token</code>ï¼Œé»˜è®¤è¿”å› <code>&#123;&#39;token&#39;: token&#125;</code>; å¦‚æœè¿˜æƒ³è¦è¿”å›å…¶ä»–æ•°æ®ï¼Œéœ€è¦è‡ªå®šä¹‰å“åº”è¿”å›äº‹ä»¶</p><h5 id="è‡ªå®šä¹‰å“åº”"><a href="#è‡ªå®šä¹‰å“åº”" class="headerlink" title="è‡ªå®šä¹‰å“åº”"></a>è‡ªå®šä¹‰å“åº”</h5><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">jwt_response_payload_handler</span>(<span class="hljs-params">token, user=<span class="hljs-literal">None</span>, request=<span class="hljs-literal">None</span></span>):</span><br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-string">&#x27;token&#x27;</span>: token,<br>        <span class="hljs-string">&#x27;username&#x27;</span>: user.username<br>    &#125;<br><br><span class="hljs-comment"># è‡ªå®šä¹‰å“åº”ä¹‹åï¼Œéœ€è¦åœ¨ rest_framework_jwt çš„é…ç½®ä¿¡æ¯ä¸­ æŒ‡æ˜å“åº”äº‹ä»¶</span><br></code></pre></div></td></tr></table></figure><h5 id="è§†å›¾ç±»"><a href="#è§†å›¾ç±»" class="headerlink" title="è§†å›¾ç±»"></a>è§†å›¾ç±»</h5><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># ç™»å½•è§†å›¾ï¼Œä¸éœ€è¦è‡ªå·±å®ç°</span><br></code></pre></div></td></tr></table></figure><h5 id="è·¯ç”±-2"><a href="#è·¯ç”±-2" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h5><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> rest_framework_jwt.views <span class="hljs-keyword">import</span> obtain_jwt_token<br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;login/&#x27;</span>, obtain_jwt_token),<br>]<br></code></pre></div></td></tr></table></figure><h4 id="è‡ªå®šä¹‰token"><a href="#è‡ªå®šä¹‰token" class="headerlink" title="è‡ªå®šä¹‰token"></a>è‡ªå®šä¹‰token</h4><p>æœ‰æ—¶å¯èƒ½éœ€è¦æ‰‹åŠ¨ç”Ÿæˆä»¤ç‰Œï¼Œå¯ä»¥è°ƒç”¨å†…ç½®çš„æ–¹æ³• <code>jwt_payload_handler</code>  å’Œ <code>jwt_encode_handler</code>æ¥äº§ç”Ÿtoken</p><h5 id="è§†å›¾ç±»-1"><a href="#è§†å›¾ç±»-1" class="headerlink" title="è§†å›¾ç±»"></a>è§†å›¾ç±»</h5><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.contrib.auth <span class="hljs-keyword">import</span> authenticate<br><span class="hljs-keyword">from</span> rest_framework.views <span class="hljs-keyword">import</span> APIView<br><span class="hljs-keyword">from</span> rest_framework.response <span class="hljs-keyword">import</span> Response<br><span class="hljs-keyword">from</span> rest_framework_jwt.settings <span class="hljs-keyword">import</span> api_settings<br><br>jwt_payload_handler = api_settings.JWT_PAYLOAD_HANDLER<br>jwt_encode_handler = api_settings.JWT_ENCODE_HANDLER<br><br><span class="hljs-comment"># è‡ªå®šä¹‰ç™»å½•è§†å›¾</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginAPIView</span>(<span class="hljs-params">APIView</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">post</span>(<span class="hljs-params">self, request</span>):</span><br>        <span class="hljs-comment"># 1. è·å–ç”¨æˆ·ä¿¡æ¯</span><br>        username = request.data.get(<span class="hljs-string">&#x27;username&#x27;</span>)<br>        password = request.data.get(<span class="hljs-string">&#x27;password&#x27;</span>)<br><br>        <span class="hljs-comment"># 2. è®¤è¯ç”¨æˆ·</span><br>        user = authenticate(request, username=username, password=password)<br><br>        <span class="hljs-comment"># 3. åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è®¤è¯é€šè¿‡</span><br>        <span class="hljs-keyword">if</span> user:<br>            <span class="hljs-comment"># ç”Ÿæˆjwt</span><br>            payload = jwt_payload_handler(user)<br>            token = jwt_encode_handler(payload)<br>       <br>            <span class="hljs-keyword">return</span> Response(&#123;<br>                <span class="hljs-string">&#x27;user&#x27;</span>: user.username,<br>                <span class="hljs-string">&#x27;token&#x27;</span>: token<br>            &#125;)<br><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> Response(&#123;<span class="hljs-string">&#x27;msg&#x27;</span>: <span class="hljs-string">&#x27;ç™»å½•å¤±è´¥&#x27;</span>&#125;, status=<span class="hljs-number">400</span>)<br></code></pre></div></td></tr></table></figure><h5 id="è·¯ç”±-3"><a href="#è·¯ç”±-3" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h5><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> user.views <span class="hljs-keyword">import</span> LoginAPIView<br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;login/&#x27;</span>, LoginAPIView.as_view())<br>]<br></code></pre></div></td></tr></table></figure><h3 id="è®¤è¯token-1"><a href="#è®¤è¯token-1" class="headerlink" title="è®¤è¯token"></a>è®¤è¯token</h3><blockquote><p>  è¯·æ±‚æ—¶ï¼Œéœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ å‚æ•° ,æ ¼å¼ä¸ºï¼š <code>&#123;&#39;Authorization&#39; : &#39;JWT&#39; + &#39; &#39; + token&#125;</code></p></blockquote><p>ç”¨æˆ·è®¤è¯æ—¶ï¼Œç›´æ¥è°ƒç”¨<code>rest_framework_jwt</code>å†…ç½®çš„ <code>JSONWebTokenAuthentication</code> è®¤è¯ç±»å³å¯</p><h4 id="è§†å›¾ç±»-2"><a href="#è§†å›¾ç±»-2" class="headerlink" title="è§†å›¾ç±»"></a>è§†å›¾ç±»</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.views <span class="hljs-keyword">import</span> APIView<br><span class="hljs-keyword">from</span> rest_framework.response <span class="hljs-keyword">import</span> Response<br><span class="hljs-keyword">from</span> rest_framework.permissions <span class="hljs-keyword">import</span> IsAuthenticated<br><span class="hljs-keyword">from</span> rest_framework_jwt.authentication <span class="hljs-keyword">import</span> JSONWebTokenAuthentication<br><br><br><span class="hljs-comment"># ä¸ªäººä¸­å¿ƒ</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserInfoAPIView</span>(<span class="hljs-params">APIView</span>):</span><br>    <span class="hljs-comment"># è®¤è¯ç±»å’Œæƒé™ç±»å¯ä»¥å…¨å±€æŒ‡æ˜ï¼Œä¹Ÿå¯ä»¥å±€éƒ¨æŒ‡å®š</span><br>    authentication_classes = [JSONWebTokenAuthentication] <span class="hljs-comment"># tokenè®¤è¯</span><br>    permission_classes = [IsAuthenticated] <span class="hljs-comment"># æƒé™é™åˆ¶ï¼Œåªæœ‰è®¤è¯ç”¨æˆ·å¯ä»¥è®¿é—®</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>        user = request.user<br>        <span class="hljs-keyword">return</span> Response(&#123;<br>            <span class="hljs-string">&#x27;username&#x27;</span>: user.username,<br>            <span class="hljs-string">&#x27;email&#x27;</span>: user.email,<br>        &#125;)<br></code></pre></div></td></tr></table></figure><h4 id="è·¯ç”±-4"><a href="#è·¯ç”±-4" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> user.views <span class="hljs-keyword">import</span> UserInfoAPIView<br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;userinfo/&#x27;</span>, UserInfoAPIView.as_view())<br>]<br><br></code></pre></div></td></tr></table></figure><h3 id="åˆ·æ–°token"><a href="#åˆ·æ–°token" class="headerlink" title="åˆ·æ–°token"></a>åˆ·æ–°token</h3><p>å½“tokenå°†è¦è¿‡æœŸæ—¶ï¼Œå…è®¸å®¢æˆ·ç«¯æä¾›æ—§token,æ¢å–æ–°tokenï¼›å½“ç„¶åˆ·æ–°tokenä¹‹å‰ï¼Œéœ€è¦åœ¨ é…ç½®ä¸­æŒ‡æ˜</p><h4 id="è§†å›¾-2"><a href="#è§†å›¾-2" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># å½“ç„¶ï¼Œåˆ·æ–°tokençš„è§†å›¾ï¼Œä¹Ÿä¸éœ€è¦è‡ªå·±å®ç°;ä½†æ˜¯ï¼Œå®¢æˆ·ç«¯éœ€è¦ä½¿ç”¨postæ–¹å¼æäº¤ &#123;&quot;token&quot;: token&#125;æ¥æ¢å–æ–°token</span><br></code></pre></div></td></tr></table></figure><h4 id="è·¯ç”±-5"><a href="#è·¯ç”±-5" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> rest_framework_jwt.views <span class="hljs-keyword">import</span> refresh_jwt_token<br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;refresh/&#x27;</span>, refresh_jwt_token),<br>]<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> DRF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JWTç”Ÿæˆ </tag>
            
            <tag> è®¤è¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DjangoåŸºç¡€(å…­)-ORMæ“ä½œ</title>
      <link href="2021/01/23/django-6-orm-cao-zuo/"/>
      <url>2021/01/23/django-6-orm-cao-zuo/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ORMæ“ä½œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DjangoåŸºç¡€(äºŒ)-è§†å›¾</title>
      <link href="2021/01/23/django-2-shi-tu/"/>
      <url>2021/01/23/django-2-shi-tu/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†å›¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¥½ç”¨çš„CLIå·¥å…·</title>
      <link href="2020/12/27/gong-ju-hao-yong-de-cli-gong-ju/"/>
      <url>2020/12/27/gong-ju-hao-yong-de-cli-gong-ju/</url>
      
        <content type="html"><![CDATA[<h2 id="1-Starship"><a href="#1-Starship" class="headerlink" title="1 Starship"></a>1 Starship</h2><p>å¦‚æœå¿…é¡»è¦ä»æœ¬ç¯‡æ–‡ç« ä¸­é€‰æ‹©ä¸€ä¸ªæˆ‘æœ€å–œæ¬¢çš„ç»ˆç«¯å·¥å…·â€”â€”é‚£é <code>Starship</code> è«å±ã€‚<code>Starship</code> å¯ä»¥é€‚ç”¨äºä»»ä½• Shellã€‚ä½ åªéœ€è¦å®‰è£…å®ƒï¼Œç„¶ååœ¨ç›¸åº”çš„é…ç½®æ–‡ä»¶<code>.bashrc</code>/<code>.zshrc</code>æ·»åŠ ä¸€è¡Œé…ç½®ï¼Œå‰©ä¸‹çš„å·¥ä½œäº¤ç»™å®ƒæ¥å®Œæˆå°±å¥½äº†ã€‚  </p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(starship init bash)</span>&quot;</span><br></code></pre></div></td></tr></table></figure><p>å®ƒå¯ä»¥åšåˆ°ï¼š</p><ul><li><p>æ ¹æ®ä½ æ˜¯å¦åœ¨ä»£ç ä»“åº“ä¸­æ·»åŠ äº†æ–°æ–‡ä»¶ã€æ˜¯å¦ä¿®æ”¹äº†æ–‡ä»¶ã€æ˜¯å¦æš‚å­˜äº†æ–‡ä»¶ç­‰æƒ…å†µï¼Œç”¨ç›¸åº”çš„ç¬¦å·è¡¨ç¤º <code>git</code> ä»“åº“çš„çŠ¶æ€ã€‚</p></li><li><p>æ ¹æ®ä½ æ‰€åœ¨çš„ <code>Python</code> é¡¹ç›®ç›®å½•ï¼Œå±•ç¤º Python çš„ç‰ˆæœ¬å·ï¼Œè¿™ä¹Ÿé€‚ç”¨äº <code>Go</code>/<code>Node</code>/<code>Rust</code>/<code>Elm</code> ç­‰å…¶ä»–ç¼–ç¨‹è¯­è¨€ç¯å¢ƒã€‚</p></li><li><p>å±•ç¤ºä¸Šä¸€ä¸ªå‘½ä»¤æ‰§è¡Œæ‰€ç”¨çš„æ—¶é—´ï¼ŒæŒ‡ä»¤è¿è¡Œæ—¶é—´å¿…é¡»åœ¨æ¯«ç§’çº§åˆ«ã€‚</p></li><li><p>å¦‚æœä¸Šä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œä¼šå±•ç¤ºç›¸åº”çš„é”™è¯¯æç¤ºç¬¦ã€‚</p></li></ul><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640.jpeg" alt="">  </p><p>è¿˜æœ‰ä¸è®¡å…¶æ•°çš„å…¶ä»–ä¿¡æ¯å¯ä»¥å±•ç¤ºã€‚ä½†æ˜¯ï¼Œå®ƒèƒ½ä»¥æ›´åŠ å‹å¥½çš„å½¢å¼æ™ºèƒ½åœ°ç»™ä½ å‘ˆç°!</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># startship ä¸ªæ€§åŒ–é…ç½®</span><br>[character]      <span class="hljs-comment"># æ­£åœ¨é…ç½®çš„ç»„ä»¶åç§°æ˜¯â€œcharacterâ€</span><br>symbol = <span class="hljs-string">&quot;&gt;&quot;</span>  <span class="hljs-comment"># æç¤ºç¬¦ä¸­åœ¨è¾“å…¥æ–‡æœ¬ä¹‹å‰æ˜¾ç¤ºçš„ç¬¦å·</span><br>error_symbol = <span class="hljs-string">&quot;âœ—&quot;</span> <span class="hljs-comment"># å¦‚æœä¸Šä¸€æ¡å‘½ä»¤å¤±è´¥ï¼Œæç¤ºç¬¦ä¸­åœ¨è¾“å…¥æ–‡æœ¬ä¹‹å‰æ˜¾ç¤ºçš„ç¬¦å·</span><br>use_symbol_for_status = <span class="hljs-literal">true</span> <span class="hljs-comment"># æŒ‡ç¤ºæ˜¯å¦æ”¹å˜æ˜¾ç¤ºç¬¦å·æ¥æŒ‡å‡ºé”™è¯¯çŠ¶æ€</span><br>style_success = <span class="hljs-string">&quot;bold green&quot;</span><span class="hljs-comment"># ä¸Šæ¬¡å‘½ä»¤æˆåŠŸæ—¶ä½¿ç”¨çš„æ ·å¼</span><br>style_failure = <span class="hljs-string">&quot;bold red&quot;</span><span class="hljs-comment"># ä¸Šæ¬¡å‘½ä»¤å¤±è´¥æ—¶ä½¿ç”¨çš„æ ·å¼</span><br><br><span class="hljs-comment"># å½“ starship æ‰«æå½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ—¶ï¼Œæœ€å¤šä½¿ç”¨ 10 æ¯«ç§’</span><br>scan_timeout = 10<br><br>[battery]<br>full_symbol = <span class="hljs-string">&quot;ğŸ”‹&quot;</span> <span class="hljs-comment"># ç”µé‡æ»¡æ ‡å¿—</span><br>charging_symbol = <span class="hljs-string">&quot;âš¡ï¸&quot;</span> <span class="hljs-comment"># å……ç”µæ ‡å¿—</span><br>discharging_symbol = <span class="hljs-string">&quot;ğŸ’€&quot;</span> <span class="hljs-comment"># æ”¾ç”µæ ‡å¿—</span><br><br>[[battery.display]]  <span class="hljs-comment"># å½“ç”µé‡åœ¨ 0% åˆ° 30% æ—¶ä»¥ &quot;bold red&quot; æ ·å¼æ˜¾ç¤º</span><br>threshold = 30<br>style = <span class="hljs-string">&quot;bold red&quot;</span><br><br>[[battery.display]]  <span class="hljs-comment"># å½“ç”µé‡åœ¨ 30% åˆ° 100% æ—¶ä»¥ &quot;bold yellow&quot; æ ·å¼æ˜¾ç¤º</span><br>threshold = 100<br>style = <span class="hljs-string">&quot;bold yellow&quot;</span><br><br><br>[cmd_duration]<br>min_time = 100 <span class="hljs-comment"># æ˜¾ç¤ºæ­¤ç»„ä»¶æ‰€éœ€çš„æœ€çŸ­æ‰§è¡Œæ—¶é•¿</span><br>prefix = <span class="hljs-string">&quot;underwent &quot;</span> <span class="hljs-comment"># ç›´æ¥åœ¨æ‰§è¡Œæ—¶é•¿å‰æ˜¾ç¤ºçš„å‰ç¼€</span><br>style = <span class="hljs-string">&quot;bold yellow&quot;</span> <span class="hljs-comment"># æ­¤ç»„ä»¶çš„æ ·å¼</span><br><br>[directory] <span class="hljs-comment"># æ˜¾ç¤ºå½“å‰ç›®å½•çš„è·¯å¾„</span><br>truncation_length = 8 <span class="hljs-comment"># å½“å‰ç›®å½•è·¯å¾„è¢«æˆªæ–­åæœ€å¤šä¿ç•™çš„çˆ¶ç›®å½•æ•°é‡ã€‚</span><br>truncate_to_repo = <span class="hljs-literal">true</span> <span class="hljs-comment"># æ˜¯å¦åªæˆªæ–­åˆ°æ‚¨å½“å‰å¤„äºçš„ git ä»“åº“æ ¹ç›®å½•ä¸‹ã€‚</span><br>prefix = <span class="hljs-string">&quot;in&quot;</span> <span class="hljs-comment"># ç›´æ¥åœ¨æ˜¾ç¤ºè·¯å¾„å‰æ˜¾ç¤ºçš„å‰ç¼€ã€‚</span><br>style = <span class="hljs-string">&quot;bold cyan&quot;</span> <span class="hljs-comment"># æ­¤ç»„ä»¶çš„æ ·å¼ã€‚</span><br><br>[time]<br>disabled = <span class="hljs-literal">false</span> <span class="hljs-comment"># å¯ç”¨æ—¶é—´ç»„ä»¶</span><br>use_12hr = <span class="hljs-literal">false</span> <span class="hljs-comment"># ç¦ç”¨12å°æ—¶åˆ¶</span><br>format = <span class="hljs-string">&quot;ğŸ•™[ %T ]&quot;</span> <span class="hljs-comment"># æ—¶é—´æ ¼å¼</span><br>time_range = <span class="hljs-string">&quot;-&quot;</span> <span class="hljs-comment"># æ˜¾ç¤ºæ—¶é—´çš„èŒƒå›´ï¼Œå¿…é¡»æ˜¯24å°æ—¶åˆ¶</span><br></code></pre></div></td></tr></table></figure><p>å®˜ç½‘åœ°å€ï¼š<a href="https://starship.rs/">https://starship.rs/</a></p><h2 id="2-fzf"><a href="#2-fzf" class="headerlink" title="2 fzf"></a>2 fzf</h2><p>fzfâ€” fuzzy finderï¼Œå³æ¨¡ç³ŠæŸ¥æ‰¾å™¨ã€‚å®ƒæ˜¯ä¸€ç§é€šç”¨å·¥å…·ï¼Œå¯è®©ä½ ä½¿ç”¨æ¨¡ç³Šæœç´¢æ¥æŸ¥æ‰¾æ–‡ä»¶ã€å†å²å‘½ä»¤ã€è¿›ç¨‹ã€git æäº¤ç­‰ã€‚ä½ é”®å…¥ä¸€äº›å­—æ¯ï¼Œå®ƒä¼šå°è¯•åŒ¹é…ç»“æœåˆ—è¡¨ä¸­ä»»ä½•ä½ç½®çš„å­—æ¯ã€‚è¾“å…¥çš„å­—æ¯è¶Šå¤šï¼Œç»“æœä¹Ÿå°±è¶Šå‡†ç¡®ã€‚ä½ å¯èƒ½åœ¨å…¶ä»–çš„ä»£ç ç¼–è¾‘å™¨ä¸­æœ‰è¿‡è¿™ç§ç±»å‹çš„æœç´¢ä½¿ç”¨ä½“éªŒâ€”â€”å½“ä½ æƒ³æ‰“å¼€æŸä¸ªæ–‡ä»¶æ—¶ï¼Œåªé”®å…¥æ–‡ä»¶åçš„ä¸€éƒ¨åˆ†è€Œä¸ç”¨è¾“å…¥å®Œæ•´è·¯å¾„å°±èƒ½è¿›è¡ŒæŸ¥æ‰¾â€”â€”è¿™å°±æ˜¯æ¨¡ç³Šæœç´¢ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640-20201227220059861.jpeg" alt="">  </p><p>æˆ‘é€šè¿‡ fish fzf æ’ä»¶æ’ä»¶ä½¿ç”¨å®ƒï¼Œå› æ­¤æˆ‘å¯ä»¥æœç´¢å‘½ä»¤å†å²è®°å½•æˆ–å¿«é€Ÿæ‰“å¼€æ–‡ä»¶ã€‚è¿™æ˜¯å¯ä»¥æ¯å¤©ä¸ºæˆ‘èŠ‚çœä¸å°‘æ—¶é—´çš„ä¸€ä¸ªéå¸¸æ£’çš„å·¥å…·ã€‚</p><p>fzfé»˜è®¤ä¼šä»¥â€œextened-searchâ€æ¨¡å¼å¯åŠ¨ï¼Œ è¿™ç§æ¨¡å¼ä¸‹ä½ å¯ä»¥è¾“å…¥å¤šä¸ªä»¥ç©ºæ ¼åˆ†éš”çš„æœç´¢å…³é”®è¯ï¼Œ å¦‚<code>^music .mp3$</code>, <code>sbtrkt !fire</code>.</p><table><thead><tr><th>Token</th><th>Match type</th><th>Description</th></tr></thead><tbody><tr><td>sbtrkt</td><td>fuzzy-match</td><td>åŒ¹é…sbtrkt</td></tr><tr><td>^music</td><td>prefix-exact-match</td><td>ä»¥musicå¼€å¤´</td></tr><tr><td>.mp3^</td><td>suffix-exact-match</td><td>ä»¥.mp3ç»“å°¾</td></tr><tr><td>â€˜wild</td><td>exact-match(quoted)</td><td>ç²¾ç¡®åŒ…å«wild</td></tr><tr><td>!fire</td><td>inverse-exact-match</td><td>ä¸åŒ…å«fire</td></tr><tr><td>!.mp3$</td><td>inverse-suffix-exact-match</td><td>ä¸ä»¥.mp3ç»“å°¾</td></tr></tbody></table><p>å¦‚æœä½ ä¸æƒ³ç”¨fuzzy matchï¼Œ å¯ä»¥ç”¨<code>fzf -e</code>åšç²¾ç¡®åŒ¹é…<br>ç¬¦å·â€|â€å¯ä»¥åšoråŒ¹é…ï¼Œ æ¯”å¦‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">^core go$|rb$|py$<br></code></pre></div></td></tr></table></figure><p>è¡¨ç¤ºä»¥coreå¼€å¤´ï¼Œä»¥goæˆ–rbæˆ–pyç»“å°¾çš„</p><p>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/junegunn/fzf">https://github.com/junegunn/fzf</a></p><h2 id="3-fd"><a href="#3-fd" class="headerlink" title="3 fd"></a>3 fd</h2><p>ç±»ä¼¼äºç³»ç»Ÿè‡ªå¸¦çš„ <code>find</code> å‘½ä»¤ï¼Œä½†ä½¿ç”¨èµ·æ¥æ›´ç®€å•ï¼ŒæŸ¥æ‰¾é€Ÿåº¦æ›´å¿«ï¼Œå¹¶ä¸”å…·æœ‰è‰¯å¥½çš„é»˜è®¤è®¾ç½®ã€‚</p><h3 id="ç®€å•æœç´¢"><a href="#ç®€å•æœç´¢" class="headerlink" title="ç®€å•æœç´¢"></a>ç®€å•æœç´¢</h3><p><em>fd<em>è®¾è®¡ç”¨äºæŸ¥æ‰¾æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ¡ç›®. ä½ å¯ä»¥æ‰§è¡Œçš„æœ€åŸºæœ¬çš„æœç´¢å°±æ˜¯è¿è¡Œä¸€ä¸ªå‚æ•°:æœç´¢æ¨¡å¼çš„</em>fd</em>. ä¾‹å¦‚,å‡è®¾æ‚¨æƒ³æŸ¥æ‰¾æ‚¨çš„æ—§è„šæœ¬ (åŒ…æ‹¬<code>netflix</code>) :</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">&gt; fd netfl<br>Software/python/imdb-ratings/netflix-details.py<br></code></pre></div></td></tr></table></figure><p>å¦‚æœåªè°ƒç”¨ä¸€ä¸ªè¿™æ ·çš„å‚æ•°,<em>fd</em>é€’å½’æ£€ç´¢å½“å‰ç›®å½•ä¸­, <em>åŒ…å«</em>æ¨¡å¼<code>netfl</code>çš„ä»»ä½•æ¡ç›®.</p><h3 id="æ­£åˆ™è¡¨è¾¾å¼æœç´¢"><a href="#æ­£åˆ™è¡¨è¾¾å¼æœç´¢" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼æœç´¢"></a>æ­£åˆ™è¡¨è¾¾å¼æœç´¢</h3><p>æœç´¢æ¨¡å¼è¢«è§†ä¸ºæ­£åˆ™è¡¨è¾¾å¼. è¿™é‡Œ,æˆ‘ä»¬æœç´¢å¼€å§‹<code>x</code>å¹¶ä»¥<code>rc</code>ç»“æŸçš„æ¡ç›®. :</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">&gt; <span class="hljs-built_in">cd</span> /etc<br>&gt; fd <span class="hljs-string">&#x27;^x.*rc$&#x27;</span><br>X11/xinit/xinitrc<br>X11/xinit/xserverrc<br></code></pre></div></td></tr></table></figure><h3 id="æŒ‡å®šæ ¹ç›®å½•"><a href="#æŒ‡å®šæ ¹ç›®å½•" class="headerlink" title="æŒ‡å®šæ ¹ç›®å½•"></a>æŒ‡å®šæ ¹ç›®å½•</h3><p>å¦‚æœæˆ‘ä»¬æƒ³æœç´¢ä¸€ä¸ªç‰¹å®šçš„ç›®å½•,å®ƒå¯ä»¥ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°<em>fd</em>:</p><figure class="highlight gradle"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs gradle">&gt; fd passwd /etc<br><span class="hljs-regexp">/etc/</span><span class="hljs-keyword">default</span>/passwd<br><span class="hljs-regexp">/etc/</span>pam.d/passwd<br><span class="hljs-regexp">/etc/</span>passwd<br></code></pre></div></td></tr></table></figure><h3 id="ä»…è¿è¡Œfd"><a href="#ä»…è¿è¡Œfd" class="headerlink" title="ä»…è¿è¡Œfd"></a>ä»…è¿è¡Œ<em>fd</em></h3><p><em>fd</em>å¯ä»¥ä¸å¸¦å‚æ•°è°ƒç”¨. è¿™æ˜¯éå¸¸æœ‰ç”¨çš„,ä»¥ä¾¿å¿«é€Ÿåœ°æŸ¥çœ‹å½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ¡ç›®,é€’å½’åœ° (ç±»ä¼¼äº<code>ls -R</code>) :</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">&gt; <span class="hljs-built_in">cd</span> fd/tests<br>&gt; fd<br>testenv<br>testenv/mod.rs<br>tests.rs<br></code></pre></div></td></tr></table></figure><h3 id="æœç´¢ç‰¹å®šçš„æ–‡ä»¶æ‰©å±•å"><a href="#æœç´¢ç‰¹å®šçš„æ–‡ä»¶æ‰©å±•å" class="headerlink" title="æœç´¢ç‰¹å®šçš„æ–‡ä»¶æ‰©å±•å"></a>æœç´¢ç‰¹å®šçš„æ–‡ä»¶æ‰©å±•å</h3><p>é€šå¸¸,æˆ‘ä»¬å¯¹ç‰¹å®šç±»å‹çš„æ‰€æœ‰æ–‡ä»¶æ„Ÿå…´è¶£. è¿™å¯ä»¥ç”¨<code>-e</code> (æˆ–) <code>--extension</code>é€‰æ‹©æƒ. åœ¨è¿™é‡Œ,æˆ‘ä»¬æœç´¢FDä»“åº“ä¸­çš„æ‰€æœ‰mdæ–‡ä»¶:</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">&gt; <span class="hljs-built_in">cd</span> fd<br>&gt; fd -e md<br>CONTRIBUTING.md<br>README.md<br></code></pre></div></td></tr></table></figure><p>è¿™ä¸ª<code>-e</code>é€‰é¡¹å¯ä»¥ä¸æœç´¢æ¨¡å¼ç»“åˆä½¿ç”¨:</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">&gt; fd -e rs mod<br>src/fshelper/mod.rs<br>src/lscolors/mod.rs<br>tests/testenv/mod.rs<br></code></pre></div></td></tr></table></figure><p>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/sharkdp/fd">https://github.com/sharkdp/fd</a></p><h2 id="4-ripgrep"><a href="#4-ripgrep" class="headerlink" title="4 ripgrep"></a>4 ripgrep</h2><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640-20201227220618373.gif" alt=""></p><p>ä¸Šå›¾ä¸º grepï¼ˆå·¦ï¼‰ä¸ rgï¼ˆå³ï¼‰å‘½ä»¤æ‰§è¡Œæ—¶çš„å¯¹æ¯”ã€‚</p><p>ä¸ä¸Šè¿°<code>fd</code>æŒ‡ä»¤ç±»ä¼¼ï¼Œ<code>ripgrep</code>æ˜¯<code>grep</code>å‘½ä»¤çš„æ›¿ä»£æ–¹æ³•ï¼Œ ä¸è¿‡<code>ripgrep</code>çš„æ‰§è¡Œé€Ÿåº¦æ›´å¿«ï¼Œè€Œä¸”å…·æœ‰å¥å…¨çš„é»˜è®¤é…ç½®ä»¥åŠä¸°å¯Œçš„å½©è‰²è¾“å‡ºã€‚</p><p>å®ƒåŒæ ·ä¼šè·³è¿‡è¢«<code>.gitignore</code>å¿½ç•¥ä»¥åŠéšè—çš„æ–‡ä»¶ï¼Œå› æ­¤å¦‚æœæœ‰ç‰¹æ®Šéœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æŒ‡ä»¤åˆ«åï¼š<code>rga =&#39;rg -uuu&#39;</code>ã€‚å®ƒä¼šç¦ç”¨æ‰€æœ‰æ™ºèƒ½ç­›é€‰ï¼Œå¹¶ä½¿<code>ripgrep</code>çš„è¡¨ç°ä¸æ ‡å‡†çš„ grep æŒ‡ä»¤ä¸€è‡´ã€‚</p><h3 id="ç®€å•æœç´¢-1"><a href="#ç®€å•æœç´¢-1" class="headerlink" title="ç®€å•æœç´¢"></a>ç®€å•æœç´¢</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">ls | rg App<br></code></pre></div></td></tr></table></figure><h3 id="æ­£åˆ™è¡¨è¾¾å¼æœç´¢-1"><a href="#æ­£åˆ™è¡¨è¾¾å¼æœç´¢-1" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼æœç´¢"></a>æ­£åˆ™è¡¨è¾¾å¼æœç´¢</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">ls | rg ^App.*$<br></code></pre></div></td></tr></table></figure><h3 id="æŒ‡å®šæ–‡ä»¶æœç´¢"><a href="#æŒ‡å®šæ–‡ä»¶æœç´¢" class="headerlink" title="æŒ‡å®šæ–‡ä»¶æœç´¢"></a>æŒ‡å®šæ–‡ä»¶æœç´¢</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">rg  ^def.*$ 01_two-sum.py<br></code></pre></div></td></tr></table></figure><p>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/BurntSushi/ripgrep">https://github.com/BurntSushi/ripgrep</a></p><h2 id="5-htop-å’Œ-glances"><a href="#5-htop-å’Œ-glances" class="headerlink" title="5 htop å’Œ glances"></a>5 htop å’Œ glances</h2><p>åœ¨ Linux æˆ– Mac ä¸Šæ˜¾ç¤ºè¿›ç¨‹è¿è¡ŒçŠ¶æ€ä¿¡æ¯æœ€å¸¸ç”¨å·¥å…·æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„<code>top</code>ï¼Œå®ƒæ˜¯æ¯ä½ç³»ç»Ÿç®¡ç†å‘˜çš„å¥½å¸®æ‰‹ã€‚è€Œä¸”ï¼Œå³ä½¿æ˜¯åƒæˆ‘ä¸€æ ·ä¸»è¦ä»äº‹ç½‘ç»œå¼€å‘ï¼ŒæŸ¥çœ‹è®¡ç®—æœºçš„è¿è¡ŒçŠ¶å†µä¹Ÿå¾ˆæœ‰ç”¨ã€‚ä½ çŸ¥é“ï¼Œåªæ˜¯çœ‹ä¸€ä¸‹å½“å‰åˆ°åº•æ˜¯ Docker è¿›ç¨‹è¿˜æ˜¯ Chrome è¿›ç¨‹åƒæ‰äº†ä½ æ‰€æœ‰çš„ RAMï¼Œåº”è¯¥å¦‚ä½•åšå—ï¼Ÿ</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640-20201227220647892.jpeg" alt="">  </p><p><code>htop</code>å·¥å…·æ˜¯<code>top</code>å·¥å…·çš„ç»ä½³æ›¿ä»£å“ã€‚</p><p><code>top</code>å·¥å…·æ˜¯éå¸¸åŸºç¡€çš„ç›‘æ§å·¥å…·ï¼Œæä¾›çš„åŠŸèƒ½æœ‰é™ï¼Œå› æ­¤å¾ˆå¤šäººè½¬å»ä½¿ç”¨ htopã€‚<code>htop</code>æ¯”èµ·<code>top</code>ï¼Œä¼˜åŠ¿å¾ˆæ˜æ˜¾â€”â€”é™¤äº†åŠŸèƒ½æ›´åŠ å®Œå–„ä»¥å¤–ï¼Œå®ƒçš„è‰²å½©æ­é…ä¹Ÿå¾ˆä¸°å¯Œï¼Œæ•´ä½“ä¸Šä½¿ç”¨èµ·æ¥æ›´åŠ å‹å¥½ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640-20201227220657583.jpeg" alt="">  </p><p>å€ŸåŠ© glancesï¼Œè¿˜å¯ä»¥è®©ä½ ä¸€ç›®äº†ç„¶åœ°å¿«é€Ÿäº†è§£ç³»ç»Ÿå½“å‰çŠ¶æ€ã€‚</p><p>glances æ˜¯<code>htop</code>çš„è¡¥å……å·¥å…·ã€‚é™¤äº†åˆ—å‡ºæ‰€æœ‰è¿›ç¨‹åŠå…¶ CPU å’Œå†…å­˜ä½¿ç”¨æƒ…å†µä¹‹å¤–ï¼Œå®ƒè¿˜å¯ä»¥æ˜¾ç¤ºæœ‰å…³ç³»ç»Ÿçš„å…¶ä»–ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š</p><ul><li><p>ç½‘ç»œåŠç£ç›˜ä½¿ç”¨æƒ…å†µ</p></li><li><p>æ–‡ä»¶ç³»ç»Ÿå·²ä½¿ç”¨çš„ç©ºé—´å’Œæ€»ç©ºé—´</p></li><li><p>æ¥è‡ªä¸åŒä¼ æ„Ÿå™¨ï¼ˆä¾‹å¦‚ç”µæ± ï¼‰çš„æ•°æ®</p></li><li><p>ä»¥åŠæœ€è¿‘æ¶ˆè€—è¿‡å¤šèµ„æºçš„è¿›ç¨‹åˆ—è¡¨</p></li></ul><p>æˆ‘é€‰æ‹©ä½¿ç”¨<code>htop</code>æ¥ç­›é€‰å’Œç»ˆæ­¢è¿›ç¨‹ï¼Œå› ä¸ºå¯¹æˆ‘æ¥è®²ï¼Œæ•ˆç‡æé«˜äº†ä¸å°‘ï¼Œæˆ‘ä¹Ÿä½¿ç”¨ <code>glances</code>å¯ä»¥å¿«é€Ÿæµè§ˆä¸€ä¸‹è®¡ç®—æœºçš„è¿è¡ŒçŠ¶å†µã€‚å®ƒæä¾› API æ¥å£ã€Web UI ä»¥åŠæ”¯æŒå„ç§å¯¼å‡ºæ ¼å¼ï¼Œå› æ­¤ä½ å¯ä»¥å°†ç³»ç»Ÿç›‘è§†æé«˜åˆ°ä¸€ä¸ªæ–° Levelã€‚å› æ­¤æˆ‘åœ¨è¿™é‡Œå¼ºçƒˆæ¨èä¸€æ³¢ï¼</p><p>htop ä¸‹è½½åœ°å€ï¼š<a href="https://hisham.hm/htop/">https://hisham.hm/htop/</a></p><p>glances ä¸‹è½½åœ°å€ï¼š<a href="https://nicolargo.github.io/glances/">https://nicolargo.github.io/glances/</a></p><h2 id="6-virtualenv"><a href="#6-virtualenv" class="headerlink" title="6 virtualenv"></a>6 virtualenv</h2><p>Virtualenv æ˜¯ç”¨äºåœ¨ Python ä¸­åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„å·¥å…·ï¼ˆæ¯”èµ·å†…ç½®çš„<code>venv</code>æ¨¡å—ï¼Œæˆ‘æ›´å–œæ¬¢ Virtualenvï¼‰ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640-20201227220804528.jpeg" alt="">  </p><p>virtualenvwrapper æ˜¯ virtualenv çš„è™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨ã€‚å®ƒæä¾›äº†è®¸å¤šå‘½ä»¤æ¥æ‰§è¡Œå¿«é€Ÿåˆ›å»ºã€åˆ—å‡ºæˆ–åˆ é™¤è™šæ‹Ÿç¯å¢ƒç­‰æ“ä½œã€‚</p><p>virtualenv ä¸‹è½½åœ°å€ï¼š</p><p><a href="https://pypi.org/project/virtualenv/">https://pypi.org/project/virtualenv/</a></p><h2 id="7-Homebrew"><a href="#7-Homebrew" class="headerlink" title="7 Homebrew"></a>7 Homebrew</h2><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640-20201227220810324.jpeg" alt=""></p><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Macï¼Œé‚£æˆ‘å°±æ— éœ€å†ä»‹ç» Homebrew äº†ã€‚å®ƒæ˜¯ macOS ä¸Šè¢«ä¸šç•Œæ™®éè®¤å¯çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚</p><p>ä¸‹è½½åœ°å€ï¼š<a href="https://brew.sh/">https://brew.sh/</a>  </p><p>åœ¨Macä¸‹é¢å®‰è£…Mysqlã€Redisã€Nodeä¹‹ç±»è½¯ä»¶çš„æ—¶å€™ï¼Œæ¯”è¾ƒæ–¹ä¾¿çš„æ–¹å¼æ˜¯ä½¿ç”¨Homebrewï¼ˆå·ç§°æ˜¯The missing package manager for OS Xï¼‰ã€‚ä¸è¿‡Homebrewæ˜¯å‘½ä»¤è¡Œæ–¹å¼ï¼Œç”¨èµ·æ¥ä¸æ˜¯é‚£ä¹ˆçš„å‹å¥½ï¼Œæ‰€ä»¥å°±æœ‰äº†Cakebrewã€‚</p><p>ç½‘ç«™ï¼š<a href="https://www.cakebrew.com/">https://www.cakebrew.com/</a></p><p>éå¸¸å‹å¥½çš„å›¾å½¢ç•Œé¢ï¼Œä½¿ç”¨èµ·æ¥ç®€å•å¿«æ·ã€‚</p><p>è€ŒLaunchRocketå‘¢ï¼Œåˆ™æ˜¯ä¸€ä¸ªå¸®åŠ©ç®¡ç†Homebrewå®‰è£…çš„æœåŠ¡çš„è½¯ä»¶ï¼Œæ¯”å¦‚ä½ ä½¿ç”¨Homebrewå®‰è£…çš„Mysqlã€Redisã€MongoDBï¼Œæ˜¯è®©å®ƒè‡ªå¯åŠ¨å‘¢ï¼Œè¿˜æ˜¯æ‰‹åŠ¨å¯åŠ¨ï¼Œä¼ ç»Ÿæ–¹å¼éœ€è¦ä½¿ç”¨å‘½ä»¤è¡Œçš„å‘½ä»¤ï¼Œè€Œä½¿ç”¨LaunchRocketåˆ™å¯ä»¥åœ¨å›¾å½¢ç•Œé¢ä¸­è¿›è¡Œç®¡ç†äº†ï¼</p><p>ç½‘ç«™ï¼š<a href="https://github.com/jimbojsb/launchrocket">https://github.com/jimbojsb/launchrocket</a></p><h2 id="8-tree"><a href="#8-tree" class="headerlink" title="8 tree"></a>8 tree</h2><p>ä½ å¯ä»¥é€šè¿‡<code>brew install tree</code>å®‰è£…è¯¥å·¥å…·ã€‚å¦‚æœè¦æŸ¥çœ‹ç»™å®šç›®å½•çš„å†…å®¹ï¼Œé‚£ä¹ˆ tree æ˜¯æ‰§è¡Œæ­¤æ“ä½œçš„å¿…å¤‡å·¥å…·ã€‚å®ƒèƒ½ä»¥æ¼‚äº®çš„æ ‘çŠ¶ç»“æ„æ˜¾ç¤ºæ‰€æœ‰å­ç›®å½•åŠæ–‡ä»¶ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs reasonml">$ tree .<br>.<br>â”œâ”€â”€ recovery.md<br>â”œâ”€â”€ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">README</span>.</span></span>md<br>â”œâ”€â”€ archive<br>â”œâ”€â”€ automator<br>â”‚   â”œâ”€â”€ Open\\ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Iterm2</span>.</span></span>workflow<br>â”‚   â”‚   â””â”€â”€ Contents<br>â”‚   â”‚       â”œâ”€â”€ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Info</span>.</span></span>plist<br>â”‚   â”‚       â”œâ”€â”€ QuickLook<br>â”‚   â”‚       â”‚   â””â”€â”€ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thumbnail</span>.</span></span>png<br>â”‚   â”‚       â””â”€â”€ document.wflow<br>â”‚   â””â”€â”€ Start\\ Screen\\ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Saver</span>.</span></span>workflow<br>â”œâ”€â”€ brew-cask.sh<br></code></pre></div></td></tr></table></figure><h2 id="9-bat"><a href="#9-bat" class="headerlink" title="9 bat"></a>9 bat</h2><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640-20201227220820634.jpeg" alt=""></p><p>ç±»ä¼¼äºåœ¨ç»ˆç«¯ä¸­å¸¸ç”¨çš„ç”¨äºæ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„<code>cat</code>å‘½ä»¤ï¼Œä½†æ˜¯<code>bat</code>æ•ˆæœæ›´ä½³ã€‚</p><p>å®ƒå¢åŠ äº†è¯­æ³•é«˜äº®æ˜¾ç¤ºï¼Œgit gutter æ ‡è®°ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ï¼Œè‡ªåŠ¨åˆ†é¡µï¼ˆå¦‚æœæ–‡ä»¶å¾ˆå¤§ï¼‰ç­‰åŠŸèƒ½ï¼Œå¹¶ä¸”ä½¿å¾—è¾“å‡ºçš„å†…å®¹é˜…è¯»èµ·æ¥æ›´åŠ å‹å¥½ã€‚</p><p>bat ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/sharkdp/bat">https://github.com/sharkdp/bat</a></p><h2 id="10-httpie"><a href="#10-httpie" class="headerlink" title="10 httpie"></a>10 httpie</h2><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640-20201227220827622.gif" alt=""></p><p>å¦‚æœä½ éœ€è¦å‘é€ä¸€äº› HTTP è¯·æ±‚ï¼Œä½†å‘ç°ä½¿ç”¨<code>curl</code>ä¸å¤Ÿç›´è§‚ï¼Œé‚£ä¹ˆè¯·å°è¯•ä¸€ä¸‹<code>httpie</code>ã€‚è¿™æ˜¯ä¸€æ¬¾éå¸¸å¥½ç”¨çš„<code>curl</code>æ›¿ä»£å·¥å…·ã€‚åˆç†çš„é»˜è®¤é…ç½®ä»¥åŠç®€æ´çš„è¯­æ³•ä½¿å®ƒæ›´æ˜“äºä½¿ç”¨ï¼Œå‘½ä»¤è¿”å›ä¹Ÿæ˜¯å½©è‰²è¾“å‡ºï¼Œç”šè‡³æ”¯æŒä¸ºä¸åŒç±»å‹çš„èº«ä»½éªŒè¯å®‰è£…ç›¸åº”çš„æ’ä»¶ã€‚</p><p>httpie ä¸‹è½½åœ°å€ï¼š<a href="https://httpie.org/">https://httpie.org/</a></p><h2 id="11-tldr"><a href="#11-tldr" class="headerlink" title="11 tldr"></a>11 tldr</h2><p>ç®€åŒ–ç‰ˆçš„å‘½ä»¤å¸®åŠ©æ‰‹å†Œã€‚â€œman pagesâ€ åŒ…å«äº† Linux è½¯ä»¶çš„æ‰‹å†Œï¼Œè¿™äº›æ‰‹å†Œè§£é‡Šäº†å¦‚ä½•ä½¿ç”¨ç»™å®šçš„å‘½ä»¤ã€‚ä½ å¯ä»¥å°è¯•è¿è¡Œ<code>man cat</code>æˆ–<code>man grep</code>æ¥æŸ¥çœ‹ç›¸å…³å‘½ä»¤çš„å¸®åŠ©æ‰‹å†Œã€‚å®ƒä»¬æè¿°çš„éå¸¸è¯¦ç»†ï¼Œæœ‰æ—¶å¯èƒ½éš¾ä»¥æŒæ¡ã€‚å› æ­¤ï¼Œ<code>tldr</code>ç¤¾åŒºçš„ç›®çš„ï¼Œå°±æ˜¯å°†æ¯ä¸ªå‘½ä»¤çš„å¸®åŠ©æ‰‹å†Œè¿›è¡Œç®€åŒ–ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥é˜…ã€‚</p><p><code>tldr</code>é€‚ç”¨äºå‡ ä¹æ‰€æœ‰çš„å—æ¬¢è¿çš„è½¯ä»¶ã€‚æ­£å¦‚æˆ‘æåˆ°çš„ï¼Œè¿™æ˜¯ç¤¾åŒºçš„åŠªåŠ›å’ŒåŠŸåŠ³ï¼Œè™½ç„¶ä¸å¤ªå¯èƒ½åŒ…å«æ‰€æœ‰çš„è½¯ä»¶çš„ç®€åŒ–å¸®åŠ©æ‰‹å†Œã€‚ä½†æ˜¯å½“æŸä¸ªå¸®åŠ©æ‰‹å†Œè¢«çº³å…¥ç®¡ç†å¹¶èµ·ä½œç”¨æ—¶ï¼Œå®ƒæä¾›çš„ä¿¡æ¯é€šå¸¸å°±æ˜¯ä½ è¦æŸ¥æ‰¾çš„å†…å®¹ã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœä½ è¦åˆ›å»ºä¸€äº›æ–‡ä»¶çš„ gzip å‹ç¼©å­˜æ¡£ï¼Œ<code>man tar</code>å¯ä»¥ä¸ºä½ æä¾›å¯èƒ½çš„å‚æ•°é€‰æ‹©ã€‚è€Œ<code>tldr tar</code>ä¼šåˆ—å‡ºä¸€äº›æˆ‘ä»¬å¸¸è§çš„ç¤ºä¾‹â€”â€”å¦‚å›¾æ‰€ç¤ºï¼Œç¬¬äºŒä¸ªç¤ºä¾‹æ­£æ˜¯ä½ è¦æ‰§è¡Œçš„æ“ä½œï¼š</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640-20201227220836708.jpeg" alt="">  </p><p>â€œman pagesâ€ å±•ç¤ºçš„ä¿¡æ¯å¤ªå…¨é¢äº†ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ä½¿ç”¨<code>tldr</code>å¯ä»¥æ›´å¿«åœ°å¸®ä½ æ‰¾åˆ°ç‰¹å®šä¿¡æ¯ï¼Œè¿™æ‰æ˜¯ç”¨æˆ·çœŸæ­£æƒ³è¦çš„ã€‚</p><p>tldr ä¸‹è½½åœ°å€ï¼š<a href="https://tldr.sh/">https://tldr.sh/</a></p><h2 id="12-exa"><a href="#12-exa" class="headerlink" title="12 exa"></a>12 exa</h2><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640-20201227220843370.jpeg" alt=""></p><p><code>exa</code>æ˜¯<code>ls</code>å‘½ä»¤çš„ä¸€ä¸ªå¯æ›¿ä»£æ–¹æ¡ˆã€‚</p><p>å®ƒè‰²å½©è‰³ä¸½ï¼Œè¿˜å¯ä»¥æ˜¾ç¤º git çŠ¶æ€ç­‰å…¶ä»–ä¿¡æ¯ï¼Œè‡ªåŠ¨å°†æ–‡ä»¶å¤§å°è½¬æ¢ä¸ºæ–¹ä¾¿äººä»¬é˜…è¯»çš„å•ä½ï¼Œå¹¶ä¸”æ‰€æœ‰è¿™äº›éƒ½ä¿æŒä¸<code>ls</code>å‡ ä¹ç›¸åŒçš„æ‰§è¡Œé€Ÿåº¦ã€‚è™½ç„¶æˆ‘å¾ˆå–œæ¬¢è¿™ä¸ªå·¥å…·å¹¶æ¨èç»™ä½ ä»¬ï¼Œä½†ç”±äºæŸç§åŸå› ï¼Œæˆ‘ä»ç„¶åšæŒä½¿ç”¨ lsã€‚</p><p>exa ä¸‹è½½åœ°å€ï¼š<a href="https://the.exa.website/">https://the.exa.website/</a></p><h2 id="13-litecli-å’Œ-mycli"><a href="#13-litecli-å’Œ-mycli" class="headerlink" title="13 litecli å’Œ mycli"></a>13 litecli å’Œ mycli</h2><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640-20201227220850333.gif" alt=""></p><p>è¿™æ˜¯æˆ‘é¦–é€‰çš„ SQLite å’Œ mysqlçš„è§£å†³æ–¹æ¡ˆã€‚å€ŸåŠ©è‡ªåŠ¨æç¤ºå’Œè¯­æ³•çªå‡ºæ˜¾ç¤ºï¼Œå®ƒä»¬æ¯”é»˜è®¤çš„<code>sqlite3</code>å’Œ<code>mysql</code>å·¥å…·è¦å¥½ç”¨å¾ˆå¤šã€‚</p><p>litecli ä¸‹è½½åœ°å€ï¼š<a href="https://litecli.com/">https://litecli.com/</a></p><p>mycli ä¸‹è½½åœ°å€ï¼š<a href="https://www.mycli.net/">https://www.mycli.net/</a></p><h2 id="14-ncdu"><a href="#14-ncdu" class="headerlink" title="14 ncdu"></a>14 ncdu</h2><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/640-20201227220855650.jpeg" alt=""></p><p>è¿™æ˜¯åœ¨ç»ˆç«¯è¿›è¡Œç£ç›˜åˆ†ææ—¶ä½¿ç”¨çš„å·¥å…·ï¼Œå®ƒä½¿ç”¨èµ·æ¥ç®€å•å¿«æ·ã€‚å½“æˆ‘éœ€è¦é‡Šæ”¾ä¸€äº›ç¡¬ç›˜ç©ºé—´æ—¶ï¼Œä¼šé»˜è®¤ä½¿ç”¨è¿™æ¬¾å·¥å…·ã€‚</p><p>ncdu ä¸‹è½½åœ°å€ï¼š<a href="https://dev.yorhel.nl/ncdu">https://dev.yorhel.nl/ncdu</a></p>]]></content>
      
      
      <categories>
          
          <category> ç³»ç»Ÿ </category>
          
          <category> Mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CLI </tag>
            
            <tag> ç»ˆç«¯å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueç»„ä»¶é—´é€šä¿¡æ–¹å¼</title>
      <link href="2020/12/27/vue-zu-jian-jian-tong-xin-liu-chong-fang-shi-wan-zheng-ban/"/>
      <url>2020/12/27/vue-zu-jian-jian-tong-xin-liu-chong-fang-shi-wan-zheng-ban/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç»„ä»¶æ˜¯ vue.js æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œè€Œç»„ä»¶å®ä¾‹çš„ä½œç”¨åŸŸæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œè¿™å°±æ„å‘³ç€ä¸åŒç»„ä»¶ä¹‹é—´çš„æ•°æ®æ— æ³•ç›¸äº’å¼•ç”¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç»„ä»¶å¯ä»¥æœ‰ä»¥ä¸‹å‡ ç§å…³ç³»ï¼š</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/1460000019208629.png" alt="1460000019208629">  </p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒA å’Œ Bã€B å’Œ Cã€B å’Œ D éƒ½æ˜¯çˆ¶å­å…³ç³»ï¼ŒC å’Œ D æ˜¯å…„å¼Ÿå…³ç³»ï¼ŒA å’Œ C æ˜¯éš”ä»£å…³ç³»ï¼ˆå¯èƒ½éš”å¤šä»£ï¼‰ã€‚</p><p>é’ˆå¯¹ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼Œå¦‚ä½•é€‰æ‹©è¡Œä¹‹æœ‰æ•ˆçš„é€šä¿¡æ–¹å¼ï¼Ÿè¿™æ˜¯æˆ‘ä»¬æ‰€è¦æ¢è®¨çš„ä¸»é¢˜ã€‚æœ¬æ–‡æ€»ç»“äº† vue ç»„ä»¶é—´é€šä¿¡çš„å‡ ç§æ–¹å¼ï¼Œå¦‚ <code>props</code>/<code>$emit</code>ã€<code>$emit</code>/<code>$on</code>ã€<code>vuex</code>ã€<code>$parent</code> / <code>$children</code>ã€<code>$attrs</code>/<code>$listeners</code>å’Œ <code>provide</code>/<code>inject</code>ï¼Œä»¥é€šä¿—æ˜“æ‡‚çš„å®ä¾‹è®²è¿°è¿™å…¶ä¸­çš„å·®åˆ«åŠä½¿ç”¨åœºæ™¯ï¼Œå¸Œæœ›å¯¹å°ä¼™ä¼´æœ‰äº›è®¸å¸®åŠ©ã€‚</p><h2 id="æ–¹æ³•ä¸€ã€props-emit"><a href="#æ–¹æ³•ä¸€ã€props-emit" class="headerlink" title="æ–¹æ³•ä¸€ã€props/$emit"></a>æ–¹æ³•ä¸€ã€<code>props</code>/<code>$emit</code></h2><p>çˆ¶ç»„ä»¶ A é€šè¿‡ <code>props</code> çš„æ–¹å¼å‘å­ç»„ä»¶ B ä¼ é€’ï¼ŒB to A é€šè¿‡åœ¨ B ç»„ä»¶ä¸­ <code>$emit</code>, A ç»„ä»¶ä¸­ <code>v-on</code> çš„æ–¹å¼å®ç°ã€‚</p><h3 id="1-çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼"><a href="#1-çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼" class="headerlink" title="1. çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼"></a>1. çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œè¯´æ˜çˆ¶ç»„ä»¶å¦‚ä½•å‘å­ç»„ä»¶ä¼ é€’å€¼ï¼šåœ¨å­ç»„ä»¶ <em>Users.vue</em> ä¸­å¦‚ä½•è·å–çˆ¶ç»„ä»¶ <em>App.vue</em> ä¸­çš„æ•°æ® <code>users:[&quot;Henry&quot;,&quot;Bucky&quot;,&quot;Emily&quot;]</code></p><h4 id="1-1-App-vueçˆ¶ç»„ä»¶"><a href="#1-1-App-vueçˆ¶ç»„ä»¶" class="headerlink" title="1.1 App.vueçˆ¶ç»„ä»¶"></a>1.1 <em>App.vue</em>çˆ¶ç»„ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">&lt;template&gt;<br>  &lt;div id=<span class="hljs-string">&quot;app&quot;</span>&gt;<br>    &lt;!-- å‰è€…è‡ªå®šä¹‰åç§°ä¾¿äºå­ç»„ä»¶è°ƒç”¨ï¼Œåè€…è¦ä¼ é€’æ•°æ®å --&gt;<br>    &lt;users v-bind:users=<span class="hljs-string">&quot;users&quot;</span>&gt;&lt;/users&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br><span class="hljs-keyword">import</span> Users <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Users&quot;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  name: <span class="hljs-string">&#x27;App&#x27;</span>,<br>  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-keyword">return</span>&#123;<br>      users:[<span class="hljs-string">&quot;Henry&quot;</span>,<span class="hljs-string">&quot;Bucky&quot;</span>,<span class="hljs-string">&quot;Emily&quot;</span>]<br>    &#125;<br>  &#125;,<br>  components:&#123;<br>    <span class="hljs-string">&quot;users&quot;</span>:Users<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h4 id="1-2-Users-vueå­ç»„ä»¶"><a href="#1-2-Users-vueå­ç»„ä»¶" class="headerlink" title="1.2 Users.vueå­ç»„ä»¶"></a>1.2 <em>Users.vue</em>å­ç»„ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">&lt;template&gt;<br>  &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;hello&quot;</span>&gt;<br>    &lt;ul&gt;<br>      &lt;li v-<span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;user in users&quot;</span>&gt;&#123;&#123;user&#125;&#125;&lt;<span class="hljs-regexp">/li&gt;/</span><span class="hljs-regexp">/éå†ä¼ é€’è¿‡æ¥çš„å€¼ï¼Œç„¶åå‘ˆç°åˆ°é¡µé¢</span><br><span class="hljs-regexp">    &lt;/u</span>l&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  name: <span class="hljs-string">&#x27;HelloWorld&#x27;</span>,<br>  props:&#123;<br>    users:&#123;           <span class="hljs-comment">//è¿™ä¸ªå°±æ˜¯çˆ¶ç»„ä»¶ä¸­å­æ ‡ç­¾è‡ªå®šä¹‰åå­—</span><br>      type:<span class="hljs-built_in">Array</span>,<br>      required:<span class="hljs-literal">true</span><br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><blockquote><p><strong>æ€»ç»“ï¼šçˆ¶ç»„ä»¶é€šè¿‡ props å‘ä¸‹ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ã€‚æ³¨ï¼šç»„ä»¶ä¸­çš„æ•°æ®å…±æœ‰ä¸‰ç§å½¢å¼ï¼š<code>data</code>ã€<code>props</code>ã€<code>computed</code></strong></p></blockquote><h3 id="2-å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼ï¼ˆé€šè¿‡äº‹ä»¶å½¢å¼ï¼‰"><a href="#2-å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼ï¼ˆé€šè¿‡äº‹ä»¶å½¢å¼ï¼‰" class="headerlink" title="2. å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼ï¼ˆé€šè¿‡äº‹ä»¶å½¢å¼ï¼‰"></a>2. å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼ï¼ˆé€šè¿‡äº‹ä»¶å½¢å¼ï¼‰</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œè¯´æ˜å­ç»„ä»¶å¦‚ä½•å‘çˆ¶ç»„ä»¶ä¼ é€’å€¼ï¼šå½“æˆ‘ä»¬ç‚¹å‡» â€œ<em>Vue.js Demo</em>â€ åï¼Œå­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’å€¼ï¼Œæ–‡å­—ç”±åŸæ¥çš„ â€œä¼ é€’çš„æ˜¯ä¸€ä¸ªå€¼â€ å˜æˆâ€œå­å‘çˆ¶ç»„ä»¶ä¼ å€¼â€ï¼Œå®ç°å­ç»„ä»¶å‘çˆ¶ç»„ä»¶å€¼çš„ä¼ é€’ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/1460000019208630.png" alt="1460000019208630"></p><h4 id="2-1-Header-vue-å­ç»„ä»¶"><a href="#2-1-Header-vue-å­ç»„ä»¶" class="headerlink" title="2.1 Header.vue å­ç»„ä»¶"></a>2.1 <em>Header.vue</em> å­ç»„ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">&lt;template&gt;<br>  &lt;header&gt;<br>    &lt;h1 @click=<span class="hljs-string">&quot;changeTitle&quot;</span>&gt;&#123;&#123;title&#125;&#125;&lt;<span class="hljs-regexp">/h1&gt;/</span><span class="hljs-regexp">/ç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶</span><br><span class="hljs-regexp">  &lt;/</span>header&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  name: <span class="hljs-string">&#x27;app-header&#x27;</span>,<br>  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      title:<span class="hljs-string">&quot;Vue.js Demo&quot;</span><br>    &#125;<br>  &#125;,<br>  methods:&#123;<br>    <span class="hljs-function"><span class="hljs-title">changeTitle</span>(<span class="hljs-params"></span>)</span> &#123;<br>      <span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&quot;titleChanged&quot;</span>,<span class="hljs-string">&quot;å­å‘çˆ¶ç»„ä»¶ä¼ å€¼&quot;</span>);<span class="hljs-comment">//è‡ªå®šä¹‰äº‹ä»¶  ä¼ é€’å€¼â€œå­å‘çˆ¶ç»„ä»¶ä¼ å€¼â€</span><br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><h4 id="2-2-App-vue-çˆ¶ç»„ä»¶"><a href="#2-2-App-vue-çˆ¶ç»„ä»¶" class="headerlink" title="2.2 App.vue çˆ¶ç»„ä»¶"></a>2.2 <em>App.vue</em> çˆ¶ç»„ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">&lt;template&gt;<br>  &lt;div id=<span class="hljs-string">&quot;app&quot;</span>&gt;<br>    &lt;app-header v-on:titleChanged=<span class="hljs-string">&quot;updateTitle&quot;</span> &gt;&lt;/app-header&gt;<br>    &lt;!-- ä¸å­ç»„ä»¶titleChangedè‡ªå®šä¹‰äº‹ä»¶ä¿æŒä¸€è‡´ --&gt;<br>    &lt;!-- updateTitle($event)æ¥å—ä¼ é€’è¿‡æ¥çš„æ–‡å­— --&gt;<br>    &lt;h2&gt;&#123;&#123;title&#125;&#125;&lt;/h2&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br><span class="hljs-keyword">import</span> Header <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Header&quot;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  name: <span class="hljs-string">&#x27;App&#x27;</span>,<br>  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-keyword">return</span>&#123;<br>      title:<span class="hljs-string">&quot;ä¼ é€’çš„æ˜¯ä¸€ä¸ªå€¼&quot;</span><br>    &#125;<br>  &#125;,<br>  methods:&#123;<br>    <span class="hljs-function"><span class="hljs-title">updateTitle</span>(<span class="hljs-params">e</span>)</span>&#123;   <span class="hljs-comment">//å£°æ˜è¿™ä¸ªå‡½æ•°</span><br>      <span class="hljs-built_in">this</span>.title = e;<br>    &#125;<br>  &#125;,<br>  components:&#123;<br>   <span class="hljs-string">&quot;app-header&quot;</span>:Header,<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><blockquote><p><strong>æ€»ç»“ï¼šå­ç»„ä»¶é€šè¿‡ <code>events</code> ç»™çˆ¶ç»„ä»¶å‘é€æ¶ˆæ¯ï¼Œå®é™…ä¸Šå°±æ˜¯å­ç»„ä»¶æŠŠè‡ªå·±çš„æ•°æ®å‘é€åˆ°çˆ¶ç»„ä»¶ã€‚</strong></p></blockquote><h2 id="æ–¹æ³•äºŒã€-emit-on"><a href="#æ–¹æ³•äºŒã€-emit-on" class="headerlink" title="æ–¹æ³•äºŒã€$emit/$on"></a>æ–¹æ³•äºŒã€<code>$emit</code>/<code>$on</code></h2><p><strong>è¿™ç§æ–¹æ³•é€šè¿‡ä¸€ä¸ªç©ºçš„ Vue å®ä¾‹ä½œä¸ºä¸­å¤®äº‹ä»¶æ€»çº¿ï¼ˆäº‹ä»¶ä¸­å¿ƒï¼‰ï¼Œç”¨å®ƒæ¥è§¦å‘äº‹ä»¶å’Œç›‘å¬äº‹ä»¶, å·§å¦™è€Œè½»é‡åœ°å®ç°äº†ä»»ä½•ç»„ä»¶é—´çš„é€šä¿¡ï¼ŒåŒ…æ‹¬çˆ¶å­ã€å…„å¼Ÿã€è·¨çº§</strong>ã€‚å½“æˆ‘ä»¬çš„é¡¹ç›®æ¯”è¾ƒå¤§æ—¶ï¼Œå¯ä»¥é€‰æ‹©æ›´å¥½çš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆ vuexã€‚</p><h4 id="1-å…·ä½“å®ç°æ–¹å¼ï¼š"><a href="#1-å…·ä½“å®ç°æ–¹å¼ï¼š" class="headerlink" title="1. å…·ä½“å®ç°æ–¹å¼ï¼š"></a>1. å…·ä½“å®ç°æ–¹å¼ï¼š</h4><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> Event=<span class="hljs-keyword">new</span> Vue();<br>Event.$emit(äº‹ä»¶å,æ•°æ®);<br>Event.$on(äº‹ä»¶å,<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;&#125;);<br></code></pre></div></td></tr></table></figure><h4 id="2-ä¸¾ä¸ªä¾‹å­"><a href="#2-ä¸¾ä¸ªä¾‹å­" class="headerlink" title="2. ä¸¾ä¸ªä¾‹å­"></a>2. ä¸¾ä¸ªä¾‹å­</h4><p>å‡è®¾å…„å¼Ÿç»„ä»¶æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯ Aã€Bã€C ç»„ä»¶ï¼ŒC ç»„ä»¶å¦‚ä½•è·å– A æˆ–è€… B ç»„ä»¶çš„æ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">&lt;div id=<span class="hljs-string">&quot;itany&quot;</span>&gt;<br>    &lt;my-a&gt;&lt;/my-a&gt;<br>    &lt;my-b&gt;&lt;/my-b&gt;<br>    &lt;my-c&gt;&lt;/my-c&gt;<br>&lt;/div&gt;<br>&lt;template id=<span class="hljs-string">&quot;a&quot;</span>&gt;<br>  &lt;div&gt;<br>    &lt;h3&gt;Aç»„ä»¶ï¼š&#123;&#123;name&#125;&#125;&lt;/h3&gt;<br>    &lt;button @click=<span class="hljs-string">&quot;send&quot;</span>&gt;å°†æ•°æ®å‘é€ç»™Cç»„ä»¶&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;template id=<span class="hljs-string">&quot;b&quot;</span>&gt;<br>  &lt;div&gt;<br>    &lt;h3&gt;Bç»„ä»¶ï¼š&#123;&#123;age&#125;&#125;&lt;/h3&gt;<br>    &lt;button @click=<span class="hljs-string">&quot;send&quot;</span>&gt;å°†æ•°ç»„å‘é€ç»™Cç»„ä»¶&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;template id=<span class="hljs-string">&quot;c&quot;</span>&gt;<br>  &lt;div&gt;<br>    &lt;h3&gt;Cç»„ä»¶ï¼š&#123;&#123;name&#125;&#125;ï¼Œ&#123;&#123;age&#125;&#125;&lt;/h3&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br><span class="hljs-keyword">var</span> Event = <span class="hljs-keyword">new</span> Vue(); <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªç©ºçš„Vueå®ä¾‹</span><br><span class="hljs-keyword">var</span> A = &#123;<br>    template: <span class="hljs-string">&#x27;#a&#x27;</span>,<br>    <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;<br>      <span class="hljs-keyword">return</span> &#123;<br>        name: <span class="hljs-string">&#x27;tom&#x27;</span><br>      &#125;<br>    &#125;,<br>    methods: &#123;<br>      <span class="hljs-function"><span class="hljs-title">send</span>(<span class="hljs-params"></span>)</span> &#123;<br>        Event.$emit(<span class="hljs-string">&#x27;data-a&#x27;</span>, <span class="hljs-built_in">this</span>.name);<br>      &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">var</span> B = &#123;<br>    template: <span class="hljs-string">&#x27;#b&#x27;</span>,<br>    <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;<br>      <span class="hljs-keyword">return</span> &#123;<br>        age: <span class="hljs-number">20</span><br>      &#125;<br>    &#125;,<br>    methods: &#123;<br>      <span class="hljs-function"><span class="hljs-title">send</span>(<span class="hljs-params"></span>)</span> &#123;<br>        Event.$emit(<span class="hljs-string">&#x27;data-b&#x27;</span>, <span class="hljs-built_in">this</span>.age);<br>      &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">var</span> C = &#123;<br>    template: <span class="hljs-string">&#x27;#c&#x27;</span>,<br>    <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;<br>      <span class="hljs-keyword">return</span> &#123;<br>        name: <span class="hljs-string">&#x27;&#x27;</span>,<br>        age: <span class="hljs-string">&quot;&quot;</span><br>      &#125;<br>    &#125;,<br>    <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;<span class="hljs-comment">//åœ¨æ¨¡æ¿ç¼–è¯‘å®Œæˆåæ‰§è¡Œ</span><br>     Event.$on(<span class="hljs-string">&#x27;data-a&#x27;</span>,<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> &#123;<br>         <span class="hljs-built_in">this</span>.name = name;<span class="hljs-comment">//ç®­å¤´å‡½æ•°å†…éƒ¨ä¸ä¼šäº§ç”Ÿæ–°çš„thisï¼Œè¿™è¾¹å¦‚æœä¸ç”¨=&gt;,thisæŒ‡ä»£Event</span><br>     &#125;)<br>     Event.$on(<span class="hljs-string">&#x27;data-b&#x27;</span>,<span class="hljs-function"><span class="hljs-params">age</span> =&gt;</span> &#123;<br>         <span class="hljs-built_in">this</span>.age = age;<br>     &#125;)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;<br>    el: <span class="hljs-string">&#x27;#itany&#x27;</span>,<br>    components: &#123;<br>      <span class="hljs-string">&#x27;my-a&#x27;</span>: A,<br>      <span class="hljs-string">&#x27;my-b&#x27;</span>: B,<br>      <span class="hljs-string">&#x27;my-c&#x27;</span>: C<br>    &#125;<br>&#125;);    <br>&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/1460000019208631.gif" alt="1460000019208631"><br><code>$on</code> ç›‘å¬äº†è‡ªå®šä¹‰äº‹ä»¶ data-a å’Œ data-bï¼Œå› ä¸ºæœ‰æ—¶ä¸ç¡®å®šä½•æ—¶ä¼šè§¦å‘äº‹ä»¶ï¼Œä¸€èˆ¬ä¼šåœ¨ mounted æˆ– created é’©å­ä¸­æ¥ç›‘å¬ã€‚</p><h2 id="æ–¹æ³•ä¸‰ã€vuex"><a href="#æ–¹æ³•ä¸‰ã€vuex" class="headerlink" title="æ–¹æ³•ä¸‰ã€vuex"></a>æ–¹æ³•ä¸‰ã€vuex</h2><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/1460000019208632.png" alt="1460000019208632"></p><h3 id="1-ç®€è¦ä»‹ç»-Vuex-åŸç†"><a href="#1-ç®€è¦ä»‹ç»-Vuex-åŸç†" class="headerlink" title="1. ç®€è¦ä»‹ç» Vuex åŸç†"></a>1. ç®€è¦ä»‹ç» Vuex åŸç†</h3><p>Vuex å®ç°äº†ä¸€ä¸ªå•å‘æ•°æ®æµï¼Œåœ¨å…¨å±€æ‹¥æœ‰ä¸€ä¸ª State å­˜æ”¾æ•°æ®ï¼Œå½“ç»„ä»¶è¦æ›´æ”¹ State ä¸­çš„æ•°æ®æ—¶ï¼Œå¿…é¡»é€šè¿‡ Mutation è¿›è¡Œï¼ŒMutation åŒæ—¶æä¾›äº†è®¢é˜…è€…æ¨¡å¼ä¾›å¤–éƒ¨æ’ä»¶è°ƒç”¨è·å– State æ•°æ®çš„æ›´æ–°ã€‚è€Œå½“æ‰€æœ‰å¼‚æ­¥æ“ä½œ (å¸¸è§äºè°ƒç”¨åç«¯æ¥å£å¼‚æ­¥è·å–æ›´æ–°æ•°æ®) æˆ–æ‰¹é‡çš„åŒæ­¥æ“ä½œéœ€è¦èµ° Actionï¼Œä½† Action ä¹Ÿæ˜¯æ— æ³•ç›´æ¥ä¿®æ”¹ State çš„ï¼Œè¿˜æ˜¯éœ€è¦é€šè¿‡ Mutation æ¥ä¿®æ”¹ State çš„æ•°æ®ã€‚æœ€åï¼Œæ ¹æ® State çš„å˜åŒ–ï¼Œæ¸²æŸ“åˆ°è§†å›¾ä¸Šã€‚</p><h3 id="2-ç®€è¦ä»‹ç»å„æ¨¡å—åœ¨æµç¨‹ä¸­çš„åŠŸèƒ½ï¼š"><a href="#2-ç®€è¦ä»‹ç»å„æ¨¡å—åœ¨æµç¨‹ä¸­çš„åŠŸèƒ½ï¼š" class="headerlink" title="2. ç®€è¦ä»‹ç»å„æ¨¡å—åœ¨æµç¨‹ä¸­çš„åŠŸèƒ½ï¼š"></a>2. ç®€è¦ä»‹ç»å„æ¨¡å—åœ¨æµç¨‹ä¸­çš„åŠŸèƒ½ï¼š</h3><ul><li>Vue Componentsï¼šVue ç»„ä»¶ã€‚HTML é¡µé¢ä¸Šï¼Œè´Ÿè´£æ¥æ”¶ç”¨æˆ·æ“ä½œç­‰äº¤äº’è¡Œä¸ºï¼Œæ‰§è¡Œ dispatch æ–¹æ³•è§¦å‘å¯¹åº” action è¿›è¡Œå›åº”ã€‚</li><li>dispatchï¼šæ“ä½œè¡Œä¸ºè§¦å‘æ–¹æ³•ï¼Œæ˜¯å”¯ä¸€èƒ½æ‰§è¡Œ action çš„æ–¹æ³•ã€‚</li><li>actionsï¼š<strong>æ“ä½œè¡Œä¸ºå¤„ç†æ¨¡å—, ç”±ç»„ä»¶ä¸­çš„<code>$store.dispatch(&#39;action åç§°&#39;, data1)</code>æ¥è§¦å‘ã€‚ç„¶åç”± commit() æ¥è§¦å‘ mutation çš„è°ƒç”¨ , é—´æ¥æ›´æ–° state</strong>ã€‚è´Ÿè´£å¤„ç† Vue Components æ¥æ”¶åˆ°çš„æ‰€æœ‰äº¤äº’è¡Œä¸ºã€‚åŒ…å«åŒæ­¥ / å¼‚æ­¥æ“ä½œï¼Œæ”¯æŒå¤šä¸ªåŒåæ–¹æ³•ï¼ŒæŒ‰ç…§æ³¨å†Œçš„é¡ºåºä¾æ¬¡è§¦å‘ã€‚å‘åå° API è¯·æ±‚çš„æ“ä½œå°±åœ¨è¿™ä¸ªæ¨¡å—ä¸­è¿›è¡Œï¼ŒåŒ…æ‹¬è§¦å‘å…¶ä»– action ä»¥åŠæäº¤ mutation çš„æ“ä½œã€‚è¯¥æ¨¡å—æä¾›äº† Promise çš„å°è£…ï¼Œä»¥æ”¯æŒ action çš„é“¾å¼è§¦å‘ã€‚</li><li>commitï¼šçŠ¶æ€æ”¹å˜æäº¤æ“ä½œæ–¹æ³•ã€‚å¯¹ mutation è¿›è¡Œæäº¤ï¼Œæ˜¯å”¯ä¸€èƒ½æ‰§è¡Œ mutation çš„æ–¹æ³•ã€‚</li><li>mutationsï¼š<strong>çŠ¶æ€æ”¹å˜æ“ä½œæ–¹æ³•ï¼Œç”± actions ä¸­çš„<code>commit(&#39;mutation åç§°&#39;)</code>æ¥è§¦å‘</strong>ã€‚æ˜¯ Vuex ä¿®æ”¹ state çš„å”¯ä¸€æ¨èæ–¹æ³•ã€‚è¯¥æ–¹æ³•åªèƒ½è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œä¸”æ–¹æ³•ååªèƒ½å…¨å±€å”¯ä¸€ã€‚æ“ä½œä¹‹ä¸­ä¼šæœ‰ä¸€äº› hook æš´éœ²å‡ºæ¥ï¼Œä»¥è¿›è¡Œ state çš„ç›‘æ§ç­‰ã€‚</li><li>stateï¼šé¡µé¢çŠ¶æ€ç®¡ç†å®¹å™¨å¯¹è±¡ã€‚é›†ä¸­å­˜å‚¨ Vue components ä¸­ data å¯¹è±¡çš„é›¶æ•£æ•°æ®ï¼Œå…¨å±€å”¯ä¸€ï¼Œä»¥è¿›è¡Œç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†ã€‚é¡µé¢æ˜¾ç¤ºæ‰€éœ€çš„æ•°æ®ä»è¯¥å¯¹è±¡ä¸­è¿›è¡Œè¯»å–ï¼Œåˆ©ç”¨ Vue çš„ç»†ç²’åº¦æ•°æ®å“åº”æœºåˆ¶æ¥è¿›è¡Œé«˜æ•ˆçš„çŠ¶æ€æ›´æ–°ã€‚</li><li>gettersï¼šstate å¯¹è±¡è¯»å–æ–¹æ³•ã€‚å›¾ä¸­æ²¡æœ‰å•ç‹¬åˆ—å‡ºè¯¥æ¨¡å—ï¼Œåº”è¯¥è¢«åŒ…å«åœ¨äº† render ä¸­ï¼ŒVue Components é€šè¿‡è¯¥æ–¹æ³•è¯»å–å…¨å±€ state å¯¹è±¡ã€‚</li></ul><h3 id="3-Vuex-ä¸-localStorage"><a href="#3-Vuex-ä¸-localStorage" class="headerlink" title="3.Vuex ä¸ localStorage"></a>3.Vuex ä¸ localStorage</h3><p>vuex æ˜¯ vue çš„çŠ¶æ€ç®¡ç†å™¨ï¼Œå­˜å‚¨çš„æ•°æ®æ˜¯å“åº”å¼çš„ã€‚ä½†æ˜¯å¹¶ä¸ä¼šä¿å­˜èµ·æ¥ï¼Œåˆ·æ–°ä¹‹åå°±å›åˆ°äº†åˆå§‹çŠ¶æ€ï¼Œ<strong>å…·ä½“åšæ³•åº”è¯¥åœ¨ vuex é‡Œæ•°æ®æ”¹å˜çš„æ—¶å€™æŠŠæ•°æ®æ‹·è´ä¸€ä»½ä¿å­˜åˆ° localStorage é‡Œé¢ï¼Œåˆ·æ–°ä¹‹åï¼Œå¦‚æœ localStorage é‡Œæœ‰ä¿å­˜çš„æ•°æ®ï¼Œå–å‡ºæ¥å†æ›¿æ¢ store é‡Œçš„ stateã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">let</span> defaultCity = <span class="hljs-string">&quot;ä¸Šæµ·&quot;</span><br><span class="hljs-keyword">try</span> &#123;<br>  <span class="hljs-comment">// ç”¨æˆ·å…³é—­äº†æœ¬åœ°å­˜å‚¨åŠŸèƒ½ï¼Œæ­¤æ—¶åœ¨å¤–å±‚åŠ ä¸ªtry...catch</span><br>  <span class="hljs-keyword">if</span> (!defaultCity) &#123;<br>    defaultCity = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-built_in">window</span>.localStorage.getItem(<span class="hljs-string">&#x27;defaultCity&#x27;</span>))<br>  &#125;<br>&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Vuex.Store(&#123;<br>  state: &#123;<br>    city: defaultCity<br>  &#125;,<br>  mutations: &#123;<br>    <span class="hljs-function"><span class="hljs-title">changeCity</span>(<span class="hljs-params">state, city</span>)</span> &#123;<br>      state.city = city<br>      <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-built_in">window</span>.localStorage.setItem(<span class="hljs-string">&#x27;defaultCity&#x27;</span>, <span class="hljs-built_in">JSON</span>.stringify(state.city));<br>        <span class="hljs-comment">// æ•°æ®æ”¹å˜çš„æ—¶å€™æŠŠæ•°æ®æ‹·è´ä¸€ä»½ä¿å­˜åˆ°localStorageé‡Œé¢</span><br>      &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></div></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šç”±äº vuex é‡Œï¼Œæˆ‘ä»¬ä¿å­˜çš„çŠ¶æ€ï¼Œéƒ½æ˜¯æ•°ç»„ï¼Œè€Œ localStorage åªæ”¯æŒå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥éœ€è¦ç”¨ JSON è½¬æ¢ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-built_in">JSON</span>.stringify(state.subscribeList);   <span class="hljs-comment">// array -&gt; string</span><br><span class="hljs-built_in">JSON</span>.parse(<span class="hljs-built_in">window</span>.localStorage.getItem(<span class="hljs-string">&quot;subscribeList&quot;</span>));    <span class="hljs-comment">// string -&gt; array</span><br></code></pre></div></td></tr></table></figure><h2 id="æ–¹æ³•å››ã€-attrs-listeners"><a href="#æ–¹æ³•å››ã€-attrs-listeners" class="headerlink" title="æ–¹æ³•å››ã€$attrs/$listeners"></a>æ–¹æ³•å››ã€<code>$attrs</code>/<code>$listeners</code></h2><p>å¤šçº§ç»„ä»¶åµŒå¥—éœ€è¦ä¼ é€’æ•°æ®æ—¶ï¼Œé€šå¸¸ä½¿ç”¨çš„æ–¹æ³•æ˜¯é€šè¿‡ vuexã€‚ä½†å¦‚æœä»…ä»…æ˜¯ä¼ é€’æ•°æ®ï¼Œè€Œä¸åšä¸­é—´å¤„ç†ï¼Œä½¿ç”¨ vuex å¤„ç†ï¼Œæœªå…æœ‰ç‚¹å¤§æå°ç”¨ã€‚ä¸ºæ­¤ Vue2.4 ç‰ˆæœ¬æä¾›äº†å¦ä¸€ç§æ–¹æ³• â€”-<code>$attrs</code>/<code>$listeners</code></p><ul><li><code>$attrs</code>ï¼šåŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­ä¸è¢« prop æ‰€è¯†åˆ« (ä¸”è·å–) çš„ç‰¹æ€§ç»‘å®š (class å’Œ style é™¤å¤–)ã€‚å½“ä¸€ä¸ªç»„ä»¶æ²¡æœ‰å£°æ˜ä»»ä½• prop æ—¶ï¼Œè¿™é‡Œä¼šåŒ…å«æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„ç»‘å®š (class å’Œ style é™¤å¤–)ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ v-bind=â€$attrsâ€ ä¼ å…¥å†…éƒ¨ç»„ä»¶ã€‚é€šå¸¸é…åˆ interitAttrs é€‰é¡¹ä¸€èµ·ä½¿ç”¨ã€‚</li><li><code>$listeners</code>ï¼šåŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­çš„ (ä¸å« .native ä¿®é¥°å™¨çš„) v-on äº‹ä»¶ç›‘å¬å™¨ã€‚å®ƒå¯ä»¥é€šè¿‡ v-on=â€$listenersâ€ ä¼ å…¥å†…éƒ¨ç»„ä»¶</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸ªè·¨çº§é€šä¿¡çš„ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// index.vue</span><br>&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;h2&gt;æµªé‡Œè¡ŒèˆŸ&lt;/h2&gt;<br>    &lt;child-com1<br>      :foo=<span class="hljs-string">&quot;foo&quot;</span><br>      :boo=<span class="hljs-string">&quot;boo&quot;</span><br>      :coo=<span class="hljs-string">&quot;coo&quot;</span><br>      :doo=<span class="hljs-string">&quot;doo&quot;</span><br>      title=<span class="hljs-string">&quot;å‰ç«¯å·¥åŒ &quot;</span><br>    &gt;&lt;/child-com1&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br><span class="hljs-keyword">const</span> childCom1 = <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./childCom1.vue&quot;</span>);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  components: &#123; childCom1 &#125;,<br>  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      foo: <span class="hljs-string">&quot;Javascript&quot;</span>,<br>      boo: <span class="hljs-string">&quot;Html&quot;</span>,<br>      coo: <span class="hljs-string">&quot;CSS&quot;</span>,<br>      doo: <span class="hljs-string">&quot;Vue&quot;</span><br>    &#125;;<br>  &#125;<br>&#125;;<br>&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// childCom1.vue</span><br>&lt;template <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;border&quot;</span>&gt;<br>  &lt;div&gt;<br>    &lt;p&gt;foo: &#123;&#123; foo &#125;&#125;&lt;/p&gt;<br>    &lt;p&gt;childCom1çš„$attrs: &#123;&#123; $attrs &#125;&#125;&lt;/p&gt;<br>    &lt;child-com2 v-bind=<span class="hljs-string">&quot;$attrs&quot;</span>&gt;&lt;/child-com2&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br><span class="hljs-keyword">const</span> childCom2 = <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./childCom2.vue&quot;</span>);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  components: &#123;<br>    childCom2<br>  &#125;,<br>  inheritAttrs: <span class="hljs-literal">false</span>, <span class="hljs-comment">// å¯ä»¥å…³é—­è‡ªåŠ¨æŒ‚è½½åˆ°ç»„ä»¶æ ¹å…ƒç´ ä¸Šçš„æ²¡æœ‰åœ¨propså£°æ˜çš„å±æ€§</span><br>  props: &#123;<br>    foo: <span class="hljs-built_in">String</span> <span class="hljs-comment">// fooä½œä¸ºpropså±æ€§ç»‘å®š</span><br>  &#125;,<br>  <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.$attrs); <span class="hljs-comment">// &#123; &quot;boo&quot;: &quot;Html&quot;, &quot;coo&quot;: &quot;CSS&quot;, &quot;doo&quot;: &quot;Vue&quot;, &quot;title&quot;: &quot;å‰ç«¯å·¥åŒ &quot; &#125;</span><br>  &#125;<br>&#125;;<br>&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// childCom2.vue</span><br>&lt;template&gt;<br>  &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;border&quot;</span>&gt;<br>    &lt;p&gt;boo: &#123;&#123; boo &#125;&#125;&lt;/p&gt;<br>    &lt;p&gt;childCom2: &#123;&#123; $attrs &#125;&#125;&lt;/p&gt;<br>    &lt;child-com3 v-bind=<span class="hljs-string">&quot;$attrs&quot;</span>&gt;&lt;/child-com3&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br><span class="hljs-keyword">const</span> childCom3 = <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./childCom3.vue&quot;</span>);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  components: &#123;<br>    childCom3<br>  &#125;,<br>  inheritAttrs: <span class="hljs-literal">false</span>,<br>  props: &#123;<br>    boo: <span class="hljs-built_in">String</span><br>  &#125;,<br>  <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.$attrs); <span class="hljs-comment">// &#123;&quot;coo&quot;: &quot;CSS&quot;, &quot;doo&quot;: &quot;Vue&quot;, &quot;title&quot;: &quot;å‰ç«¯å·¥åŒ &quot; &#125;</span><br>  &#125;<br>&#125;;<br>&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// childCom3.vue</span><br>&lt;template&gt;<br>  &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;border&quot;</span>&gt;<br>    &lt;p&gt;childCom3: &#123;&#123; $attrs &#125;&#125;&lt;/p&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  props: &#123;<br>    coo: <span class="hljs-built_in">String</span>,<br>    title: <span class="hljs-built_in">String</span><br>  &#125;<br>&#125;;<br>&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/1460000019208633.png" alt=""><br>å¦‚ä¸Šå›¾æ‰€ç¤º<code>$attrs</code>è¡¨ç¤ºæ²¡æœ‰ç»§æ‰¿æ•°æ®çš„å¯¹è±¡ï¼Œæ ¼å¼ä¸º {å±æ€§åï¼šå±æ€§å€¼}ã€‚Vue2.4 æä¾›äº†<code>$attrs</code> , <code>$listeners</code> æ¥ä¼ é€’æ•°æ®ä¸äº‹ä»¶ï¼Œè·¨çº§ç»„ä»¶ä¹‹é—´çš„é€šè®¯å˜å¾—æ›´ç®€å•ã€‚</p><p>ç®€å•æ¥è¯´ï¼š<code>$attrs</code>ä¸<code>$listeners</code> æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼Œ<code>$attrs</code> é‡Œå­˜æ”¾çš„æ˜¯çˆ¶ç»„ä»¶ä¸­ç»‘å®šçš„é Props å±æ€§ï¼Œ<code>$listeners</code>é‡Œå­˜æ”¾çš„æ˜¯çˆ¶ç»„ä»¶ä¸­ç»‘å®šçš„éåŸç”Ÿäº‹ä»¶ã€‚</p><h2 id="æ–¹æ³•äº”ã€provide-inject"><a href="#æ–¹æ³•äº”ã€provide-inject" class="headerlink" title="æ–¹æ³•äº”ã€provide/inject"></a>æ–¹æ³•äº”ã€provide/inject</h2><h4 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h4><p>Vue2.2.0 æ–°å¢ API, è¿™å¯¹é€‰é¡¹éœ€è¦ä¸€èµ·ä½¿ç”¨ï¼Œ<strong>ä»¥å…è®¸ä¸€ä¸ªç¥–å…ˆç»„ä»¶å‘å…¶æ‰€æœ‰å­å­™åä»£æ³¨å…¥ä¸€ä¸ªä¾èµ–ï¼Œä¸è®ºç»„ä»¶å±‚æ¬¡æœ‰å¤šæ·±ï¼Œå¹¶åœ¨èµ·ä¸Šä¸‹æ¸¸å…³ç³»æˆç«‹çš„æ—¶é—´é‡Œå§‹ç»ˆç”Ÿæ•ˆ</strong>ã€‚ä¸€è¨€è€Œè”½ä¹‹ï¼šç¥–å…ˆç»„ä»¶ä¸­é€šè¿‡ provider æ¥æä¾›å˜é‡ï¼Œç„¶ååœ¨å­å­™ç»„ä»¶ä¸­é€šè¿‡ inject æ¥æ³¨å…¥å˜é‡ã€‚<br><strong>provide / inject API ä¸»è¦è§£å†³äº†è·¨çº§ç»„ä»¶é—´çš„é€šä¿¡é—®é¢˜ï¼Œä¸è¿‡å®ƒçš„ä½¿ç”¨åœºæ™¯ï¼Œä¸»è¦æ˜¯å­ç»„ä»¶è·å–ä¸Šçº§ç»„ä»¶çš„çŠ¶æ€ï¼Œè·¨çº§ç»„ä»¶é—´å»ºç«‹äº†ä¸€ç§ä¸»åŠ¨æä¾›ä¸ä¾èµ–æ³¨å…¥çš„å…³ç³»</strong>ã€‚</p><h4 id="2-ä¸¾ä¸ªä¾‹å­-1"><a href="#2-ä¸¾ä¸ªä¾‹å­-1" class="headerlink" title="2. ä¸¾ä¸ªä¾‹å­"></a>2. ä¸¾ä¸ªä¾‹å­</h4><p>å‡è®¾æœ‰ä¸¤ä¸ªç»„ä»¶ï¼š A.vue å’Œ B.vueï¼ŒB æ˜¯ A çš„å­ç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// A.vue</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  provide: &#123;<br>    name: <span class="hljs-string">&#x27;æµªé‡Œè¡ŒèˆŸ&#x27;</span><br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// B.vue</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  inject: \[<span class="hljs-string">&#x27;name&#x27;</span>\],<br>  mounted () &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name);  <span class="hljs-comment">// æµªé‡Œè¡ŒèˆŸ</span><br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ A.vue é‡Œï¼Œæˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ª <strong>provide: name</strong>ï¼Œå€¼ä¸º æµªé‡Œè¡ŒèˆŸï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å°† <strong>name</strong> è¿™ä¸ªå˜é‡æä¾›ç»™å®ƒçš„æ‰€æœ‰å­ç»„ä»¶ã€‚è€Œåœ¨ B.vue ä¸­ï¼Œé€šè¿‡ <code>inject</code> æ³¨å…¥äº†ä» A ç»„ä»¶ä¸­æä¾›çš„ <strong>name</strong> å˜é‡ï¼Œé‚£ä¹ˆåœ¨ç»„ä»¶ B ä¸­ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡ <strong>this.name</strong> è®¿é—®è¿™ä¸ªå˜é‡äº†ï¼Œå®ƒçš„å€¼ä¹Ÿæ˜¯ æµªé‡Œè¡ŒèˆŸã€‚è¿™å°±æ˜¯ provide / inject API æœ€æ ¸å¿ƒçš„ç”¨æ³•ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<strong>provide å’Œ inject ç»‘å®šå¹¶ä¸æ˜¯å¯å“åº”çš„ã€‚è¿™æ˜¯åˆ»æ„ä¸ºä¹‹çš„ã€‚ç„¶è€Œï¼Œå¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ªå¯ç›‘å¬çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå…¶å¯¹è±¡çš„å±æ€§è¿˜æ˜¯å¯å“åº”çš„</strong> â€”-vue å®˜æ–¹æ–‡æ¡£<br>æ‰€ä»¥ï¼Œä¸Šé¢ A.vue çš„ name å¦‚æœæ”¹å˜äº†ï¼ŒB.vue çš„ this.name æ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œä»ç„¶æ˜¯ æµªé‡Œè¡ŒèˆŸã€‚</p><h4 id="3-provide-ä¸-inject-æ€ä¹ˆå®ç°æ•°æ®å“åº”å¼"><a href="#3-provide-ä¸-inject-æ€ä¹ˆå®ç°æ•°æ®å“åº”å¼" class="headerlink" title="3.provide ä¸ inject æ€ä¹ˆå®ç°æ•°æ®å“åº”å¼"></a>3.provide ä¸ inject æ€ä¹ˆå®ç°æ•°æ®å“åº”å¼</h4><p>ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰ä¸¤ç§åŠæ³•ï¼š</p><ul><li>provide ç¥–å…ˆç»„ä»¶çš„å®ä¾‹ï¼Œç„¶ååœ¨å­å­™ç»„ä»¶ä¸­æ³¨å…¥ä¾èµ–ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å­å­™ç»„ä»¶ä¸­ç›´æ¥ä¿®æ”¹ç¥–å…ˆç»„ä»¶çš„å®ä¾‹çš„å±æ€§ï¼Œä¸è¿‡è¿™ç§æ–¹æ³•æœ‰ä¸ªç¼ºç‚¹å°±æ˜¯è¿™ä¸ªå®ä¾‹ä¸ŠæŒ‚è½½å¾ˆå¤šæ²¡æœ‰å¿…è¦çš„ä¸œè¥¿æ¯”å¦‚ propsï¼Œmethods</li><li>ä½¿ç”¨ 2.6 æœ€æ–° API Vue.observable ä¼˜åŒ–å“åº”å¼ provide(æ¨è)</li></ul><p>æˆ‘ä»¬æ¥çœ‹ä¸ªä¾‹å­ï¼šå­™ç»„ä»¶ Dã€E å’Œ F è·å– A ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ color å€¼ï¼Œå¹¶èƒ½å®ç°æ•°æ®å“åº”å¼å˜åŒ–ï¼Œå³ A ç»„ä»¶çš„ color å˜åŒ–åï¼Œç»„ä»¶ Dã€Eã€F ä¼šè·Ÿç€å˜ï¼ˆæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼šï¼‰</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/1460000019208634.png" alt=""></p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// A ç»„ä»¶ </span><br>&lt;div&gt;<br>      &lt;h1&gt;A ç»„ä»¶&lt;/h1&gt;<br>      &lt;button @click=<span class="hljs-string">&quot;() =&gt; changeColor()&quot;</span>&gt;æ”¹å˜color&lt;/button&gt;<br>      &lt;ChildrenB /&gt;<br>      &lt;ChildrenC /&gt;<br>&lt;/div&gt;<br>......<br>  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      color: <span class="hljs-string">&quot;blue&quot;</span><br>    &#125;;<br>  &#125;,<br>  <span class="hljs-comment">// provide() &#123;</span><br>  <span class="hljs-comment">//   return &#123;</span><br>  <span class="hljs-comment">//     theme: &#123;</span><br>  <span class="hljs-comment">//       color: this.color //è¿™ç§æ–¹å¼ç»‘å®šçš„æ•°æ®å¹¶ä¸æ˜¯å¯å“åº”çš„</span><br>  <span class="hljs-comment">//     &#125; // å³Aç»„ä»¶çš„colorå˜åŒ–åï¼Œç»„ä»¶Dã€Eã€Fä¸ä¼šè·Ÿç€å˜</span><br>  <span class="hljs-comment">//   &#125;;</span><br>  <span class="hljs-comment">// &#125;,</span><br>  <span class="hljs-function"><span class="hljs-title">provide</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      theme: <span class="hljs-built_in">this</span><span class="hljs-comment">//æ–¹æ³•ä¸€ï¼šæä¾›ç¥–å…ˆç»„ä»¶çš„å®ä¾‹</span><br>    &#125;;<br>  &#125;,<br>  methods: &#123;<br>    <span class="hljs-function"><span class="hljs-title">changeColor</span>(<span class="hljs-params">color</span>)</span> &#123;<br>      <span class="hljs-keyword">if</span> (color) &#123;<br>        <span class="hljs-built_in">this</span>.color = color;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">this</span>.color = <span class="hljs-built_in">this</span>.color === <span class="hljs-string">&quot;blue&quot;</span> ? <span class="hljs-string">&quot;red&quot;</span> : <span class="hljs-string">&quot;blue&quot;</span>;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// æ–¹æ³•äºŒ:ä½¿ç”¨2.6æœ€æ–°API Vue.observable ä¼˜åŒ–å“åº”å¼ provide</span><br>  <span class="hljs-comment">// provide() &#123;</span><br>  <span class="hljs-comment">//   this.theme = Vue.observable(&#123;</span><br>  <span class="hljs-comment">//     color: &quot;blue&quot;</span><br>  <span class="hljs-comment">//   &#125;);</span><br>  <span class="hljs-comment">//   return &#123;</span><br>  <span class="hljs-comment">//     theme: this.theme</span><br>  <span class="hljs-comment">//   &#125;;</span><br>  <span class="hljs-comment">// &#125;,</span><br>  <span class="hljs-comment">// methods: &#123;</span><br>  <span class="hljs-comment">//   changeColor(color) &#123;</span><br>  <span class="hljs-comment">//     if (color) &#123;</span><br>  <span class="hljs-comment">//       this.theme.color = color;</span><br>  <span class="hljs-comment">//     &#125; else &#123;</span><br>  <span class="hljs-comment">//       this.theme.color = this.theme.color === &quot;blue&quot; ? &quot;red&quot; : &quot;blue&quot;;</span><br>  <span class="hljs-comment">//     &#125;</span><br>  <span class="hljs-comment">//   &#125;</span><br>  <span class="hljs-comment">// &#125;</span><br></code></pre></div></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// F ç»„ä»¶ </span><br>&lt;template functional&gt;<br>  &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;border2&quot;</span>&gt;<br>    &lt;h3 :style=<span class="hljs-string">&quot;&#123; color: injections.theme.color &#125;&quot;</span>&gt;F ç»„ä»¶&lt;/h3&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  inject: &#123;<br>    theme: &#123;<br>      <span class="hljs-comment">//å‡½æ•°å¼ç»„ä»¶å–å€¼ä¸ä¸€æ ·</span><br>      <span class="hljs-keyword">default</span>: <span class="hljs-function">() =&gt;</span> (&#123;&#125;)<br>    &#125;<br>  &#125;<br>&#125;;<br>&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><p>è™½è¯´ provide å’Œ inject ä¸»è¦ä¸ºé«˜é˜¶æ’ä»¶ / ç»„ä»¶åº“æä¾›ç”¨ä¾‹ï¼Œä½†å¦‚æœä½ èƒ½åœ¨ä¸šåŠ¡ä¸­ç†Ÿç»ƒè¿ç”¨ï¼Œå¯ä»¥è¾¾åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœï¼</p><h2 id="æ–¹æ³•å…­ã€-parent-childrenä¸-ref"><a href="#æ–¹æ³•å…­ã€-parent-childrenä¸-ref" class="headerlink" title="æ–¹æ³•å…­ã€$parent / $childrenä¸ ref"></a>æ–¹æ³•å…­ã€<code>$parent</code> / <code>$children</code>ä¸ <code>ref</code></h2><ul><li><code>ref</code>ï¼šå¦‚æœåœ¨æ™®é€šçš„ DOM å…ƒç´ ä¸Šä½¿ç”¨ï¼Œå¼•ç”¨æŒ‡å‘çš„å°±æ˜¯ DOM å…ƒç´ ï¼›å¦‚æœç”¨åœ¨å­ç»„ä»¶ä¸Šï¼Œå¼•ç”¨å°±æŒ‡å‘ç»„ä»¶å®ä¾‹</li><li><code>$parent</code> / <code>$children</code>ï¼šè®¿é—®çˆ¶ / å­å®ä¾‹</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™ä¸¤ç§éƒ½æ˜¯ç›´æ¥å¾—åˆ°ç»„ä»¶å®ä¾‹ï¼Œä½¿ç”¨åå¯ä»¥ç›´æ¥è°ƒç”¨ç»„ä»¶çš„æ–¹æ³•æˆ–è®¿é—®æ•°æ®ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªç”¨ <code>ref</code>æ¥è®¿é—®ç»„ä»¶çš„ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// component-a å­ç»„ä»¶</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  data () &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      title: <span class="hljs-string">&#x27;Vue.js&#x27;</span><br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    sayHello () &#123;<br>      <span class="hljs-built_in">window</span>.alert(<span class="hljs-string">&#x27;Hello&#x27;</span>);<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// çˆ¶ç»„ä»¶</span><br>&lt;template&gt;<br>  &lt;component-a ref=<span class="hljs-string">&quot;comA&quot;</span>&gt;&lt;/component-a&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    mounted () &#123;<br>      <span class="hljs-keyword">const</span> comA = <span class="hljs-built_in">this</span>.$refs.comA;<br>      <span class="hljs-built_in">console</span>.log(comA.title);  <span class="hljs-comment">// Vue.js</span><br>      comA.sayHello();  <span class="hljs-comment">// å¼¹çª—</span><br>    &#125;<br>  &#125;<br>&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><p>ä¸è¿‡ï¼Œ<strong>è¿™ä¸¤ç§æ–¹æ³•çš„å¼Šç«¯æ˜¯ï¼Œæ— æ³•åœ¨è·¨çº§æˆ–å…„å¼Ÿé—´é€šä¿¡</strong>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// parent.vue</span><br>&lt;component-a&gt;&lt;/component-a&gt;<br>&lt;component-b&gt;&lt;/component-b&gt;<br>&lt;component-b&gt;&lt;/component-b&gt;<br></code></pre></div></td></tr></table></figure><p>æˆ‘ä»¬æƒ³åœ¨ component-a ä¸­ï¼Œè®¿é—®åˆ°å¼•ç”¨å®ƒçš„é¡µé¢ä¸­ï¼ˆè¿™é‡Œå°±æ˜¯ parent.vueï¼‰çš„ä¸¤ä¸ª component-b ç»„ä»¶ï¼Œé‚£è¿™ç§æƒ…å†µä¸‹ï¼Œå°±å¾—é…ç½®é¢å¤–çš„æ’ä»¶æˆ–å·¥å…·äº†ï¼Œæ¯”å¦‚ Vuex å’Œ Bus çš„è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¸¸è§ä½¿ç”¨åœºæ™¯å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š</p><ul><li>çˆ¶å­é€šä¿¡ï¼š</li></ul><p>çˆ¶å‘å­ä¼ é€’æ•°æ®æ˜¯é€šè¿‡ propsï¼Œå­å‘çˆ¶æ˜¯é€šè¿‡ eventsï¼ˆ<code>$emit</code>ï¼‰ï¼›é€šè¿‡çˆ¶é“¾ / å­é“¾ä¹Ÿå¯ä»¥é€šä¿¡ï¼ˆ<code>$parent</code> / <code>$children</code>ï¼‰ï¼›ref ä¹Ÿå¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ï¼›provide / inject APIï¼›<code>$attrs/$listeners</code></p><ul><li>å…„å¼Ÿé€šä¿¡ï¼š</li></ul><p>Busï¼›Vuex</p><ul><li>è·¨çº§é€šä¿¡ï¼š</li></ul><p>Busï¼›Vuexï¼›provide / inject APIã€<code>$attrs/$listeners</code></p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ul><li><a href="https://juejin.im/book/5bc844166fb9a05cd676ebca">Vue.js ç»„ä»¶ç²¾è®²</a></li><li><a href="https://cn.vuejs.org/v2/api/#inheritAttrs">Vue.js å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://time.geekbang.org/course/detail/163-86419">Vue å¼€å‘å®æˆ˜</a></li><li><a href="https://webcache.googleusercontent.com/search?q=cache:GCLcuCsGrVIJ:https://bingzhe.github.io/2017/08/27/vuex%25E6%2595%25B0%25E6%258D%25AE%25E6%259C%25AC%25E5%259C%25B0%25E5%2582%25A8%25E5%25AD%2598/+&cd=12&hl=zh-CN&ct=clnk&gl=us">Vuex æ•°æ®æœ¬åœ°å‚¨å­˜</a></li><li><a href="https://tech.meituan.com/vuex_code_analysis.html">Vuex æ¡†æ¶åŸç†ä¸æºç åˆ†æ</a></li><li><a href="https://juejin.im/post/5c77c4ae518825407505e262">Vue ç»„ä»¶é€šä¿¡æ–¹å¼å…¨é¢è¯¦è§£</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> ç»„ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django-ä¸­é—´ä»¶</title>
      <link href="2020/12/10/django-zhong-jian-jian/"/>
      <url>2020/12/10/django-zhong-jian-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="1-ä¸­é—´ä»¶ä»‹ç»"><a href="#1-ä¸­é—´ä»¶ä»‹ç»" class="headerlink" title="1 ä¸­é—´ä»¶ä»‹ç»"></a>1 ä¸­é—´ä»¶ä»‹ç»</h1><p>Djangoä¸­çš„ä¸­é—´ä»¶æ˜¯ä¸€ä¸ªè½»é‡çº§ã€åº•å±‚çš„æ’ä»¶ç³»ç»Ÿï¼Œå¯ä»¥ä»‹å…¥Djangoçš„è¯·æ±‚å’Œå“åº”å¤„ç†è¿‡ç¨‹ï¼Œä¿®æ”¹Djangoçš„è¾“å…¥æˆ–è¾“å‡ºã€‚</p><p>ä¸­é—´ä»¶çš„è®¾è®¡ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç§æ— ä¾µå…¥å¼çš„å¼€å‘æ–¹å¼ï¼Œå¢å¼ºäº†Djangoæ¡†æ¶çš„å¥å£®æ€§ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸­é—´ä»¶ï¼Œåœ¨Djangoå¤„ç†è§†å›¾çš„ä¸åŒé˜¶æ®µå¯¹è¾“å…¥æˆ–è¾“å‡ºè¿›è¡Œå¹²é¢„ã€‚</p><blockquote><p>å› ä¸ºæ”¹å˜çš„æ˜¯å…¨å±€ï¼Œæ‰€ä»¥éœ€è¦è°¨æ…å®ç”¨ï¼Œç”¨ä¸å¥½ä¼šå½±å“åˆ°æ€§èƒ½</p></blockquote><h1 id="2-ä¸­é—´ä»¶ä½œç”¨"><a href="#2-ä¸­é—´ä»¶ä½œç”¨" class="headerlink" title="2 ä¸­é—´ä»¶ä½œç”¨"></a>2 ä¸­é—´ä»¶ä½œç”¨</h1><p>å¦‚æœä½ æƒ³ä¿®æ”¹è¯·æ±‚ï¼Œä¾‹å¦‚è¢«ä¼ é€åˆ°<em>view</em>ä¸­çš„<strong><code>HttpRequest</code></strong>å¯¹è±¡ã€‚ æˆ–è€…ä½ æƒ³ä¿®æ”¹<em>view</em>è¿”å›çš„<strong><code>HttpResponse</code></strong>å¯¹è±¡ï¼Œè¿™äº›éƒ½å¯ä»¥é€šè¿‡ä¸­é—´ä»¶æ¥å®ç°ã€‚</p><p>å¯èƒ½ä½ è¿˜æƒ³åœ¨<em>view</em>æ‰§è¡Œä¹‹å‰åšä¸€äº›æ“ä½œï¼Œè¿™ç§æƒ…å†µå°±å¯ä»¥ç”¨ <code>middleware</code>æ¥å®ç°ã€‚</p><p><strong><em>Django</em>é»˜è®¤çš„ä¸­é—´ä»¶</strong>ï¼šï¼ˆåœ¨<em>django</em>é¡¹ç›®çš„<em>settings</em>æ¨¡å—ä¸­ï¼Œæœ‰ä¸€ä¸ª <code>MIDDLEWARE_CLASSES</code> å˜é‡ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ å°±æ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">MIDDLEWARE = [<br>    <span class="hljs-string">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span>,<br>    <span class="hljs-comment"># ä¸ºrequest/responseæä¾›äº†å‡ ç§xssè„šæœ¬è¿‡æ»¤çš„å®‰å…¨æ”¹è¿›ï¼Œæ— å®ƒä¸å®‰å…¨</span><br>    <span class="hljs-string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,<br>    <span class="hljs-comment"># å¼€å¯sessionä¼šè¯æ”¯æŒï¼Œæ— å®ƒæ— session</span><br>    <span class="hljs-string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,<br>    <span class="hljs-comment"># åŸºäºAPPEND_SLASHå’ŒPREPEND_WWWçš„è®¾ç½®æ¥é‡å†™URLï¼Œ</span><br>    <span class="hljs-comment"># å¦‚æœAPPEND_SLASHè®¾ä¸ºTrueï¼Œå¹¶ä¸”åˆå§‹URL æ²¡æœ‰ä»¥æ–œçº¿ç»“å°¾ä»¥åŠåœ¨URLconf ä¸­æ²¡æ‰¾åˆ°å¯¹åº”å®šä¹‰ï¼Œè¿™æ—¶å½¢æˆä¸€ä¸ªæ–œçº¿ç»“å°¾çš„æ–°URLï¼›</span><br>    <span class="hljs-comment"># å¦‚æœPREPEND_WWWè®¾ä¸ºTrueï¼Œå‰é¢ç¼ºå°‘ www.çš„urlå°†ä¼šè¢«é‡å®šå‘åˆ°ç›¸åŒä½†æ˜¯ä»¥ä¸€ä¸ªwww.å¼€å¤´çš„ur</span><br>    <span class="hljs-string">&#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;</span>,<br>    <span class="hljs-comment"># æ·»åŠ è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ çš„ä¿æŠ¤ï¼Œé€šè¿‡å‘POSTè¡¨å•æ·»åŠ ä¸€ä¸ªéšè—çš„è¡¨å•å­—æ®µï¼Œå¹¶æ£€æŸ¥è¯·æ±‚ä¸­æ˜¯å¦æœ‰æ­£ç¡®çš„å€¼ï¼Œæ— å®ƒæ— csrfä¿æŠ¤</span><br>    <span class="hljs-string">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span>,<br>    <span class="hljs-comment"># åœ¨è§†å›¾å‡½æ•°æ‰§è¡Œå‰å‘æ¯ä¸ªæ¥æ”¶åˆ°çš„userå¯¹è±¡æ·»åŠ HttpRequestå±æ€§ï¼Œè¡¨ç¤ºå½“å‰ç™»å½•çš„ç”¨æˆ·ï¼Œæ— å®ƒç”¨ä¸äº†request.user</span><br>    <span class="hljs-string">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,<br>    <span class="hljs-comment"># å¼€å¯åŸºäºCookieå’Œä¼šè¯çš„æ¶ˆæ¯æ”¯æŒï¼Œæ— å®ƒæ— message</span><br>    <span class="hljs-string">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span>,<br>    <span class="hljs-comment"># å¯¹ç‚¹å‡»åŠ«æŒçš„ä¿æŠ¤</span><br>]<br><br></code></pre></div></td></tr></table></figure><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/12/%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%A4%BA%E6%84%8F%E5%9B%BE.png" alt="ä¸­é—´ä»¶ç¤ºæ„å›¾"></p><h1 id="3-è‡ªå®šä¹‰ä¸­é—´ä»¶"><a href="#3-è‡ªå®šä¹‰ä¸­é—´ä»¶" class="headerlink" title="3 è‡ªå®šä¹‰ä¸­é—´ä»¶"></a>3 è‡ªå®šä¹‰ä¸­é—´ä»¶</h1><h2 id="3-1-åˆ›å»ºä¸­é—´ä»¶"><a href="#3-1-åˆ›å»ºä¸­é—´ä»¶" class="headerlink" title="3.1 åˆ›å»ºä¸­é—´ä»¶"></a>3.1 åˆ›å»ºä¸­é—´ä»¶</h2><p>åˆ›å»ºä¸­é—´ä»¶æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><h3 id="3-1-1-é—­åŒ…å‡½æ•°æ„å»º"><a href="#3-1-1-é—­åŒ…å‡½æ•°æ„å»º" class="headerlink" title="3.1.1 é—­åŒ…å‡½æ•°æ„å»º"></a>3.1.1 é—­åŒ…å‡½æ•°æ„å»º</h3><ul><li><p>å®šä¹‰ä¸€ä¸ªä¸­é—´ä»¶é—­åŒ…å‡½æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªå¯ä»¥è¢«è°ƒç”¨çš„ä¸­é—´ä»¶ã€‚</p></li><li><p>ä¸­é—´ä»¶é—­åŒ…å‡½æ•°éœ€è¦æ¥æ”¶ä¸€ä¸ªå¯ä»¥è°ƒç”¨çš„<code>get_response</code>å¯¹è±¡ã€‚</p></li><li><p>è¿”å›çš„ä¸­é—´ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªå¯ä»¥è¢«è°ƒç”¨çš„å¯¹è±¡ï¼Œå¹¶ä¸”åƒè§†å›¾ä¸€æ ·éœ€è¦æ¥æ”¶ä¸€ä¸ª<code>request</code>å¯¹è±¡å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª<code>response</code>å¯¹è±¡ã€‚</p></li></ul><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">my_middleware</span>(<span class="hljs-params">get_response</span>):</span><br>    print(<span class="hljs-string">&#x27;init è¢«è°ƒç”¨&#x27;</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">middleware</span>(<span class="hljs-params">request</span>):</span><br>        print(<span class="hljs-string">&#x27;before request è¢«è°ƒç”¨&#x27;</span>)<br>        response = get_response(request)<br>        print(<span class="hljs-string">&#x27;after response è¢«è°ƒç”¨&#x27;</span>)<br>        <span class="hljs-keyword">return</span> response<br><br>    <span class="hljs-keyword">return</span> middleware<br><br></code></pre></div></td></tr></table></figure><h3 id="3-1-2-ç±»æ„å»º"><a href="#3-1-2-ç±»æ„å»º" class="headerlink" title="3.1.2 ç±»æ„å»º"></a>3.1.2 ç±»æ„å»º</h3><p>éœ€è¦ç»§æ‰¿ <code>django.utils.deprecation.MiddlewareMixin</code>è¿™ä¸ªç±»</p><p>å¯ä»¥é‡å†™çš„5ä¸ªæ–¹æ³•:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-number">1</span>ã€process_request(self,request)<br><br><span class="hljs-number">2</span>ã€process_view(self, request, callback, callback_args, callback_kwargs)<br><br><span class="hljs-number">3</span>ã€process_template_response(self,request,response)<br><br><span class="hljs-number">4</span>ã€process_exception(self, request, exception)<br><br><span class="hljs-number">5</span>ã€process_response(self, request, response)<br></code></pre></div></td></tr></table></figure><p>ä»¥ä¸Šæ–¹æ³•çš„è¿”å›å€¼å¯ä»¥æ˜¯<code>None</code>æˆ–ä¸€ä¸ª<code>HttpResponse</code>å¯¹è±¡ï¼Œå¦‚æœæ˜¯<code>None</code>ï¼Œåˆ™ç»§ç»­æŒ‰ç…§<em>django</em>å®šä¹‰çš„è§„åˆ™å‘åç»§ç»­æ‰§è¡Œï¼Œå¦‚æœæ˜¯<code>HttpResponse</code>å¯¹è±¡ï¼Œåˆ™ç›´æ¥å°†è¯¥å¯¹è±¡è¿”å›ç»™ç”¨æˆ·ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimMiddleware</span>(<span class="hljs-params">MiddlewareMixin</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, get_response</span>):</span><br>        print(<span class="hljs-string">&#x27;init=====&#x27;</span>)<br>        self.get_response = get_response<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">process_request</span>(<span class="hljs-params">self, request</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        å¤„ç†è¯·æ±‚å‰: åœ¨æ¯ä¸ªè¯·æ±‚ä¸Šï¼Œrequestå¯¹è±¡äº§ç”Ÿä¹‹åï¼ŒurlåŒ¹é…ä¹‹å‰è°ƒç”¨,è¿”å›Noneæˆ–HttpResponseå¯¹è±¡</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        print(<span class="hljs-string">&#x27;before request=====&#x27;</span>, request)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">process_view</span>(<span class="hljs-params">self, request, view_func, *view_args, **view_kwargs</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        :param view_func: Djangoå³å°†ä½¿ç”¨çš„è§†å›¾å‡½æ•°,å®ƒæ˜¯å®é™…çš„å‡½æ•°å¯¹è±¡ï¼Œè€Œä¸æ˜¯å‡½æ•°çš„åç§°ä½œä¸ºå­—ç¬¦ä¸²</span><br><span class="hljs-string">        :param view_args: å°†ä¼ é€’ç»™è§†å›¾çš„ä½ç½®å‚æ•°çš„åˆ—è¡¨</span><br><span class="hljs-string">        :param view_kwargs: å°†ä¼ é€’ç»™è§†å›¾çš„å…³é”®å­—å‚æ•°çš„å­—å…¸;</span><br><span class="hljs-string">                            view_argså’Œview_kwargséƒ½ä¸åŒ…å«ç¬¬ä¸€ä¸ªè§†å›¾å‚æ•°ï¼ˆrequestï¼‰</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-comment"># å¤„ç†è§†å›¾å‰ï¼šåœ¨æ¯ä¸ªè¯·æ±‚ä¸Šï¼ŒurlåŒ¹é…ä¹‹åï¼Œè§†å›¾å‡½æ•°è°ƒç”¨ä¹‹å‰è°ƒç”¨ï¼Œè¿”å›Noneæˆ–HttpResponseå¯¹è±¡</span><br>        print(<span class="hljs-string">&#x27;before view=======&#x27;</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">process_template_response</span>(<span class="hljs-params">self, request, response</span>):</span><br>        <span class="hljs-comment"># åœ¨è§†å›¾å‡½æ•°æ‰§è¡Œå®Œåç«‹å³æ‰§è¡Œçš„, æ‰§è¡Œ è¯¥ å‡½æ•°æœ‰ä¸€ä¸ªå‰ææ¡ä»¶ï¼Œé‚£å°±æ˜¯è§†å›¾å‡½æ•°è¿”å›çš„å¯¹è±¡è¦æœ‰ä¸€ä¸ª render() æ–¹æ³•</span><br>        <span class="hljs-comment"># ï¼ˆæˆ–è€…è¡¨æ˜è¯¥å¯¹è±¡æ˜¯ä¸€ä¸ª TemplateResponse å¯¹è±¡æˆ–ç­‰ä»·æ–¹æ³•ï¼‰</span><br>        print(<span class="hljs-string">&quot;render template=======&quot;</span>)<br>        <span class="hljs-keyword">return</span> response<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">process_exception</span>(<span class="hljs-params">self, request, exception</span>):</span><br>        <span class="hljs-comment"># è¿™ä¸ªæ–¹æ³•åªæœ‰åœ¨è§†å›¾å‡½æ•°ä¸­å‡ºç°å¼‚å¸¸äº†æ‰æ‰§è¡Œï¼Œå®ƒè¿”å›çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªNoneä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªHttpResponseå¯¹è±¡</span><br>        print(<span class="hljs-string">&quot;raise exception=======&quot;</span>)<br>        <span class="hljs-keyword">return</span> HttpResponse(exception)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">process_response</span>(<span class="hljs-params">self, request, response</span>):</span><br>        <span class="hljs-comment"># å¤„ç†å“åº”åï¼šè§†å›¾å‡½æ•°è°ƒç”¨ä¹‹åï¼Œæ‰€æœ‰å“åº”è¿”å›æµè§ˆå™¨ä¹‹å‰è¢«è°ƒç”¨ï¼Œåœ¨æ¯ä¸ªè¯·æ±‚ä¸Šè°ƒç”¨ï¼Œè¿”å›HttpResponseå¯¹è±¡</span><br>        print(<span class="hljs-string">&#x27;after response=======&#x27;</span>, response)<br>        <span class="hljs-keyword">return</span> response<br></code></pre></div></td></tr></table></figure><h2 id="3-2-æ³¨å†Œä¸­é—´ä»¶"><a href="#3-2-æ³¨å†Œä¸­é—´ä»¶" class="headerlink" title="3.2 æ³¨å†Œä¸­é—´ä»¶"></a>3.2 æ³¨å†Œä¸­é—´ä»¶</h2><p>åœ¨<em>django</em>é¡¹ç›®çš„<em>settings</em>æ¨¡å—ä¸­ï¼Œåœ¨ <code>MIDDLEWARE_CLASSES</code> å˜é‡ä¸­æ·»åŠ è‡ªå®šä¹‰ä¸­é—´ä»¶</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">MIDDLEWARE = [<br>  ...<br><span class="hljs-string">&#x27;book.middleware.my_middleware&#x27;</span>,  <span class="hljs-comment"># bookä¸ºåº”ç”¨å,middlewareä¸ºæ–‡ä»¶å</span><br>    <span class="hljs-string">&#x27;book.middleware.SimMiddleware&#x27;</span><br>]<br></code></pre></div></td></tr></table></figure><h2 id="3-3-ä¸­é—´ä»¶æ•ˆæœ"><a href="#3-3-ä¸­é—´ä»¶æ•ˆæœ" class="headerlink" title="3.3 ä¸­é—´ä»¶æ•ˆæœ"></a>3.3 ä¸­é—´ä»¶æ•ˆæœ</h2><blockquote><p>é¦–å…ˆæ˜¯ é¡¹ç›®å¯åŠ¨æ—¶ï¼Œä¸­é—´ä»¶çš„åˆå§‹åŒ–</p></blockquote><figure class="highlight kotlin"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs kotlin"><span class="hljs-keyword">init</span>=====<br><span class="hljs-keyword">init</span> è¢«è°ƒç”¨<br></code></pre></div></td></tr></table></figure><h3 id="3-3-1-æ­£å¸¸è§†å›¾"><a href="#3-3-1-æ­£å¸¸è§†å›¾" class="headerlink" title="3.3.1 æ­£å¸¸è§†å›¾"></a>3.3.1 æ­£å¸¸è§†å›¾</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span>(<span class="hljs-params">View</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>        print(<span class="hljs-string">&quot;Index============&quot;</span>)<br>        <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;hello Django&quot;</span>)<br></code></pre></div></td></tr></table></figure><blockquote><p>å½“ç”¨æˆ·å‘èµ·è¯·æ±‚çš„æ—¶å€™ä¼šä¾æ¬¡ç»è¿‡æ‰€æœ‰çš„çš„ä¸­é—´ä»¶ï¼Œè¿™ä¸ªæ—¶å€™çš„è¯·æ±‚ä¼šä¾æ¬¡ç©¿è¿‡æ‰€æœ‰ä¸­é—´ä»¶çš„<code>process_request</code>æ–¹æ³•,æœ€ååˆ°è¾¾<code>views</code>çš„å‡½æ•°ä¸­ï¼Œ<code>views</code>å‡½æ•°å¤„ç†åï¼Œåœ¨ä¾æ¬¡ç©¿è¿‡æ‰€æœ‰ä¸­é—´ä»¶çš„<code>process_response</code>æ–¹æ³•,æœ€åè¿”å›ç»™è¯·æ±‚è€…ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">before request è¢«è°ƒç”¨<br>before request===== &lt;WSGIRequest: GET <span class="hljs-string">&#x27;/&#x27;</span>&gt;<br>before view=======<br>Index============<br>after response======= &lt;HttpResponse status_code=<span class="hljs-number">200</span>, <span class="hljs-string">&quot;text/html; charset=utf-8&quot;</span>&gt;<br>after response è¢«è°ƒç”¨<br>[<span class="hljs-number">21</span>/Sep/<span class="hljs-number">2020</span> <span class="hljs-number">14</span>:<span class="hljs-number">29</span>:<span class="hljs-number">59</span>] <span class="hljs-string">&quot;GET / HTTP/1.1&quot;</span> <span class="hljs-number">200</span> <span class="hljs-number">12</span><br></code></pre></div></td></tr></table></figure><h3 id="3-3-2-é”™è¯¯è§†å›¾"><a href="#3-3-2-é”™è¯¯è§†å›¾" class="headerlink" title="3.3.2 é”™è¯¯è§†å›¾"></a>3.3.2 é”™è¯¯è§†å›¾</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span>(<span class="hljs-params">View</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>        print(<span class="hljs-string">&quot;Index============&quot;</span>)<br>        <span class="hljs-number">3</span>/<span class="hljs-number">0</span><br>        <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;hello Django&quot;</span>)<br></code></pre></div></td></tr></table></figure><blockquote><p>æ­¤æ—¶ï¼Œè§†å›¾å‘ç”Ÿå¼‚å¸¸ï¼Œ ä¼šæ‰§è¡Œä¸­é—´ä»¶çš„ <code>process_exception</code>æ–¹æ³•ï¼Œè€Œåœ¨è¯¥æ–¹æ³•ä¸­ï¼Œå°†å¼‚å¸¸ä¿¡æ¯ä½œä¸ºå“åº”è¿”å›ï¼Œå› æ­¤ï¼Œé¡µé¢æ˜¾ç¤º<code>&quot;division by zero&quot;</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">before request è¢«è°ƒç”¨<br>before request===== &lt;WSGIRequest: GET <span class="hljs-string">&#x27;/&#x27;</span>&gt;<br>before view=======<br>Index============<br><span class="hljs-keyword">raise</span> exception=======<br>after response======= &lt;HttpResponse status_code=<span class="hljs-number">200</span>, <span class="hljs-string">&quot;text/html; charset=utf-8&quot;</span>&gt;<br>after response è¢«è°ƒç”¨<br>[<span class="hljs-number">21</span>/Sep/<span class="hljs-number">2020</span> <span class="hljs-number">14</span>:<span class="hljs-number">34</span>:<span class="hljs-number">15</span>] <span class="hljs-string">&quot;GET / HTTP/1.1&quot;</span> <span class="hljs-number">200</span> <span class="hljs-number">16</span><br></code></pre></div></td></tr></table></figure><h3 id="3-3-3-æ¨¡æ¿è§†å›¾"><a href="#3-3-3-æ¨¡æ¿è§†å›¾" class="headerlink" title="3.3.3 æ¨¡æ¿è§†å›¾"></a>3.3.3 æ¨¡æ¿è§†å›¾</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span>(<span class="hljs-params">View</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>        print(<span class="hljs-string">&quot;Index============&quot;</span>)<br>        <span class="hljs-keyword">return</span> TemplateResponse(request, <span class="hljs-string">&#x27;index.html&#x27;</span>)<br></code></pre></div></td></tr></table></figure><blockquote><p>æ³¨æ„: åªæœ‰è¿”å›çš„å¯¹è±¡æ˜¯<code>TemplateResponse</code> å¯¹è±¡æˆ–ç­‰ä»·æ–¹æ³•æ—¶ï¼Œæ‰æ‰§è¡Œä¸­é—´ä»¶çš„ <code>process_template_response</code>æ–¹æ³•ï¼Œç›´æ¥è°ƒç”¨<code>render</code>æ–¹æ³•æ— æ•ˆã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">before request è¢«è°ƒç”¨<br>before request===== &lt;WSGIRequest: GET <span class="hljs-string">&#x27;/&#x27;</span>&gt;<br>before view=======<br>Index============<br>render template=======<br>after response======= &lt;TemplateResponse status_code=<span class="hljs-number">200</span>, <span class="hljs-string">&quot;text/html; charset=utf-8&quot;</span>&gt;<br>after response è¢«è°ƒç”¨<br>[<span class="hljs-number">21</span>/Sep/<span class="hljs-number">2020</span> <span class="hljs-number">14</span>:<span class="hljs-number">49</span>:05] <span class="hljs-string">&quot;GET / HTTP/1.1&quot;</span> <span class="hljs-number">200</span> <span class="hljs-number">149</span><br></code></pre></div></td></tr></table></figure><blockquote><p><code>TemplateResponse</code> <strong>VS</strong> <code>render</code></p><p><code>TemplateResponse</code>å°†æ¨¡æ¿çš„æ¸²æŸ“å»¶è¿Ÿåˆ°è§†å›¾å®Œæˆä¹‹åã€‚è¿™å…è®¸ä»»ä½•æ¨¡æ¿å“åº”ä¸­é—´ä»¶åœ¨å“åº”ä¸Šè¿è¡Œï¼Œå¹¶æœ‰å¯èƒ½åœ¨å‘ˆç°æ¨¡æ¿ä¹‹å‰æ›´æ”¹æ¨¡æ¿æˆ–ä¸Šä¸‹æ–‡æ•°æ®ã€‚æ¨¡æ¿å“åº”ä¸­é—´ä»¶è¿è¡Œåï¼Œå°†æ¸²æŸ“æ¨¡æ¿ï¼Œå¹¶åœ¨å°†å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ä¹‹å‰å¯¹æ¸²æŸ“çš„å†…å®¹è¿è¡Œå¸¸è§„å“åº”ä¸­é—´ä»¶ã€‚</p><p><code>render()</code>ç«‹å³å‘ˆç°æ¨¡æ¿ï¼Œå¹¶è¿”å›<code>HttpResponse</code>ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸­é—´ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DjangoåŸºç¡€(ä¸‰)-æ¨¡æ¿</title>
      <link href="2020/12/09/django-3-mo-ban/"/>
      <url>2020/12/09/django-3-mo-ban/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¨¡æ¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django-é‚®ä»¶å‘é€</title>
      <link href="2020/12/03/django-you-jian-fa-song/"/>
      <url>2020/12/03/django-you-jian-fa-song/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬å¸¸å¸¸ä¼šç”¨åˆ°ä¸€äº›å‘é€é‚®ä»¶çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼šæœ‰äººæ³¨å†Œç½‘ç«™ä¹‹åï¼Œéœ€è¦å‘å…¶é‚®ç®±ä¸­å‘é€æ¿€æ´»é“¾æ¥ï¼Œåªæœ‰ç‚¹å‡»æ¿€æ´»é“¾æ¥ï¼Œæ¿€æ´»è´¦æˆ·ä¹‹åï¼Œæ‰å…è®¸ç™»å½•ã€‚</p><h2 id="é…ç½®ç›¸å…³å‚æ•°"><a href="#é…ç½®ç›¸å…³å‚æ•°" class="headerlink" title="é…ç½®ç›¸å…³å‚æ•°"></a>é…ç½®ç›¸å…³å‚æ•°</h2><p>åœ¨ settings.py çš„æœ€åé¢åŠ ä¸Šç±»ä¼¼è¿™äº›</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">EMAIL_BACKEND = <span class="hljs-string">&#x27;django.core.mail.backends.smtp.EmailBackend&#x27;</span><br>EMAIL_USE_TLS = <span class="hljs-literal">False</span>   <span class="hljs-comment"># æ˜¯å¦ä½¿ç”¨TLSå®‰å…¨ä¼ è¾“åè®®(ç”¨äºåœ¨ä¸¤ä¸ªé€šä¿¡åº”ç”¨ç¨‹åºä¹‹é—´æä¾›ä¿å¯†æ€§å’Œæ•°æ®å®Œæ•´æ€§ã€‚)</span><br>EMAIL_USE_SSL = <span class="hljs-literal">True</span>    <span class="hljs-comment"># æ˜¯å¦ä½¿ç”¨SSLåŠ å¯†ï¼Œqqä¼ä¸šé‚®ç®±è¦æ±‚ä½¿ç”¨</span><br>EMAIL_HOST = <span class="hljs-string">&#x27;smtp.163.com&#x27;</span>   <span class="hljs-comment"># å‘é€é‚®ä»¶çš„é‚®ç®± çš„ SMTPæœåŠ¡å™¨ï¼Œè¿™é‡Œç”¨äº†163é‚®ç®±</span><br>EMAIL_PORT = <span class="hljs-number">465</span>     <span class="hljs-comment"># å‘ä»¶ç®±çš„SMTPæœåŠ¡å™¨ç«¯å£</span><br>EMAIL_HOST_USER = <span class="hljs-string">&#x27;xxxxx@xmdaren.com&#x27;</span>    <span class="hljs-comment"># å‘é€é‚®ä»¶çš„é‚®ç®±åœ°å€</span><br>EMAIL_HOST_PASSWORD = <span class="hljs-string">&#x27;*********&#x27;</span>         <span class="hljs-comment"># å‘é€é‚®ä»¶çš„é‚®ç®±å¯†ç (è¿™é‡Œä½¿ç”¨çš„æ˜¯æˆæƒç )</span><br>DEFAULT_FROM_EMAIL = EMAIL_HOST_USER  <span class="hljs-comment"># é»˜è®¤çš„å‘é€æ–¹</span><br></code></pre></div></td></tr></table></figure><p>DEFAULT_FROM_EMAIL è¿˜å¯ä»¥å†™æˆè¿™æ ·ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">DEFAULT_FROM_EMAIL = <span class="hljs-string">&#x27;mac &lt;mac@163.com&gt;&#x27;</span><br></code></pre></div></td></tr></table></figure><p>è¿™æ ·åˆ«äººæ”¶åˆ°çš„é‚®ä»¶ä¸­å°±ä¼šæœ‰ä½ è®¾å®šçš„åç§°ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„é‚®ç®±ï¼š</p><p><a href="http://help.163.com/09/1223/14/5R7P3QI100753VB8.html">163 é‚®ç®±</a>   <a href="http://www.126.com/help/client_04.htm">126 é‚®ç®±</a>  <a href="https://service.mail.qq.com/cgi-bin/help?subtype=1&&no=166&&id=28">QQ é‚®ç®±</a></p><p>å…¶å®ƒé‚®ç®±å‚æ•°å¯ä»¥ç™»é™†é‚®ç®±å¯»æ‰¾å¸®åŠ©ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥å°è¯•åœ¨æœç´¢å¼•æ“ä¸­æœç´¢ï¼šâ€SMTP é‚®ç®±åç§°â€ï¼Œæ¯”å¦‚ï¼šâ€163 SMTPâ€ è¿›è¡ŒæŸ¥æ‰¾ã€‚</p><h2 id="å‘é€é‚®ä»¶"><a href="#å‘é€é‚®ä»¶" class="headerlink" title="å‘é€é‚®ä»¶"></a>å‘é€é‚®ä»¶</h2><p> å‘é€æ™®é€šé‚®ä»¶å¯ä»¥ä½¿ç”¨<code>django.core.mail</code>æ¨¡å—ä¸‹çš„<code>send_mail</code>å‡½æ•°è¿›è¡Œ</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">send_mail(subject, message, from_email, recipient_list, fail_silently=<span class="hljs-literal">False</span>, html_message=<span class="hljs-literal">None</span>)<br><span class="hljs-comment"># å°†é‚®ä»¶å‘é€è‡³recipient_listä¸­çš„æ¯ä¸€ä¸ªæ”¶ä»¶äºº</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">subject: å‘é€é‚®ä»¶æ ‡é¢˜</span><br><span class="hljs-string">message: å‘é€é‚®ä»¶æ­£æ–‡</span><br><span class="hljs-string">from_email: å‘ä»¶äººé‚®ç®±åœ°å€</span><br><span class="hljs-string">recipient_list: ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ¯ä¸€ä¸ªæ•°æ®ä¸ºæ¥æ”¶è€…çš„é‚®ç®±åœ°å€</span><br><span class="hljs-string">html_message: å¦‚æœæŒ‡å®šè¯¥å€¼ï¼Œåˆ™å‘é€çš„å†…å®¹ç±»å‹ä¸ºtext/htmlä¸ºä¸€ä¸ªhtmlé‚®ä»¶å†…å®¹</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></div></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.conf <span class="hljs-keyword">import</span> settings<br><span class="hljs-keyword">from</span> django.core.mail <span class="hljs-keyword">import</span> send_mail<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">send_regiser_active_email</span>(<span class="hljs-params">to_email, username, token</span>):</span><br>    <span class="hljs-string">&#x27;&#x27;&#x27;å‘é€æ¿€æ´»é‚®ä»¶&#x27;&#x27;&#x27;</span><br>    active_url = <span class="hljs-string">&quot;&#123;&#125;/user/active/&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(settings.HOST_URL, token)<br>    subject = <span class="hljs-string">&quot;xxxæ¬¢è¿ä¿¡æ¯&quot;</span><br>    message = <span class="hljs-string">&#x27;é‚®ä»¶æ­£æ–‡&#x27;</span><br>    sender = settings.DEFAULT_FROM_EMAIL<br>    receiver = [to_email]<br>    html_message = <span class="hljs-string">&#x27;&lt;h1&gt;&#123;&#125;, æ¬¢è¿æ‚¨æˆä¸ºxxxæ³¨å†Œä¼šå‘˜&lt;/h1&gt;è¯·ç‚¹å‡»ä¸‹é¢é“¾æ¥æ¿€æ´»æ‚¨çš„è´¦æˆ·&lt;br/&gt;&lt;a href=&quot;&#123;&#125;&quot;&gt;&#123;&#125;&lt;/a&gt;&#x27;</span>.<span class="hljs-built_in">format</span>(username, active_url,<br>                                                                                            active_url)<br>    send_mail(subject, message, sender, receiver, html_message=html_message)<br>    <br></code></pre></div></td></tr></table></figure><h2 id="itsdangerous"><a href="#itsdangerous" class="headerlink" title="itsdangerous"></a>itsdangerous</h2><p>æœ‰æ—¶æ‚¨åªæƒ³å°†ä¸€äº›æ•°æ®å‘é€åˆ°ä¸å—ä¿¡ä»»çš„ç¯å¢ƒã€‚ä½†æ˜¯å¦‚ä½•å®‰å…¨åœ°åšåˆ°è¿™ä¸€ç‚¹ï¼Ÿè¯€çªå°±æ˜¯ç­¾åã€‚åªè¦çŸ¥é“ä¸€ä¸ªå¯†é’¥ï¼Œæ‚¨å°±å¯ä»¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ç­¾åå¹¶å°†å…¶ç§»äº¤ç»™å…¶ä»–äººã€‚å½“æ‚¨å–å›æ•°æ®æ—¶ï¼Œå¯ä»¥è½»æ¾ç¡®ä¿æ²¡æœ‰äººç¯¡æ”¹æ•°æ®ã€‚ä½¿ç”¨itsdangerouså¯ä»¥å®ç°æ­¤ç§æ–¹æ¡ˆã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> itsdangerous <span class="hljs-keyword">import</span> TimedJSONWebSignatureSerializer <span class="hljs-keyword">as</span> TJSS<br><br>salt=<span class="hljs-string">&#x27;abcdefg&#x27;</span> <span class="hljs-comment"># è¿™é‡Œå°±æ˜¯é…ç½®åŠ å¯†çš„è§„åˆ™</span><br><br>serializer=TJSS(salt,expires_in=<span class="hljs-number">3600</span>) <span class="hljs-comment"># è¿‡æœŸæ—¶é—´ä¸€å°æ—¶</span><br>user_info = &#123;<span class="hljs-string">&#x27;user_id&#x27;</span>:<span class="hljs-number">1</span>&#125;<br><span class="hljs-comment"># åŠ å¯†é˜¶æ®µ</span><br>res = serializer.dumps(user_info)  <span class="hljs-comment"># å¾—åˆ°åŠ å¯†åçš„æ•°æ®ï¼Œä¼šè¿”å›ä¸€ä¸ªå­—èŠ‚ç±»å‹çš„æ•°æ®</span><br>token = res.decode() <span class="hljs-comment"># è§£ç ä¸ºstr</span><br>print(token)<br><span class="hljs-comment"># å¾—åˆ°çš„æ•°æ®å¦‚ä¸‹ï¼Œå°±æ˜¯åŒ…å«æ•°æ®å’Œç›å€¼çš„tokenäº†ï¼Œåªæœ‰åœ¨çŸ¥é“ç›å€¼çš„æ—¶å€™æ‰èƒ½è¢«è§£å¯†å‡ºæ¥</span><br><span class="hljs-comment">#eyJhbGciOiJIUzUxMiIsImlhdCI6MTU2MjY0Nzg4NCwiZXhwIjoxNTYyNjUxNDg0fQ.eyJjb25maXJtIjo1fQ.93DtXu9vHQDW0lr7saJhDBt-dcBxNNh_IMTR-JhWnrT-ujQ9SwevSUyW0p2txLS-gtyRHPlH1eD9INksIWilkA</span><br><br><span class="hljs-comment"># è§£å¯†é˜¶æ®µ</span><br>res=serializer.loads(token)<br>print(res)<br><span class="hljs-comment"># è¿”å›çš„æ•°æ®å¦‚ä¸‹ï¼š</span><br><span class="hljs-comment"># &#123;&#x27;user_id&#x27;:1&#125;</span><br></code></pre></div></td></tr></table></figure><blockquote><p>å½“tokenè¢«ä¿®æ”¹æ—¶ï¼Œè§£å¯†æ—¶ï¼Œä¼šæŠ›å‡º <code>itsdangerous.Badsignature</code></p><p>å½“tokenè¿‡æœŸæ—¶, è§£å¯†æ—¶ï¼Œä¼šæŠ›å‡º <code>itsdangerous.SignatureExpired: Signature expired</code></p></blockquote><h2 id="é‚®ä»¶æ¿€æ´»"><a href="#é‚®ä»¶æ¿€æ´»" class="headerlink" title="é‚®ä»¶æ¿€æ´»"></a>é‚®ä»¶æ¿€æ´»</h2><p>æ³¨å†ŒæˆåŠŸï¼Œå‘é€æ¿€æ´»é“¾æ¥</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> itsdangerous <span class="hljs-keyword">import</span> TimedJSONWebSignatureSerializer <span class="hljs-keyword">as</span> Serializer<br>    <br>    <br><span class="hljs-comment"># åŠ å¯†ç”¨æˆ·ä¿¡æ¯ï¼Œç”Ÿæˆtoken</span><br>info = &#123;<span class="hljs-string">&#x27;confirm&#x27;</span>: user.<span class="hljs-built_in">id</span>&#125;<br>serializer = Serializer(settings.SECRET_KEY, <span class="hljs-number">3600</span>)<br>token = serializer.dumps(info).decode()<br><br><span class="hljs-comment"># å‘é€é‚®ä»¶</span><br>send_regiser_active_email(email, username, token)<br><br></code></pre></div></td></tr></table></figure><p>ç”¨æˆ·ç‚¹å‡»æ¿€æ´»é“¾æ¥ï¼Œè¿›è¡Œè´¦æˆ·æ¿€æ´»</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># è¿›è¡Œè§£å¯†ï¼Œ è·å–è¦æ¿€æ´»çš„ç”¨æˆ·ä¿¡æ¯</span><br>serializer = Serializer(settings.SECRET_KEY, <span class="hljs-number">3600</span>)<br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-comment"># è·å–ç”¨æˆ·id</span><br>    info = serializer.loads(token)  <span class="hljs-comment"># åœ¨è·¯ç”±åŒ¹é…ä¸­ï¼Œè·å–token</span><br><span class="hljs-keyword">except</span> (SignatureExpired, BadSignature) <span class="hljs-keyword">as</span> error:<br>    <span class="hljs-keyword">return</span> redirect(reverse(<span class="hljs-string">&quot;user:activeemail&quot;</span>))  <span class="hljs-comment"># æ¿€æ´»å¤±è´¥ï¼Œé‡å†™è·³è½¬åˆ°é‚®ç®±æ¿€æ´»é¡µé¢</span><br><br><span class="hljs-keyword">else</span>:<br>    user_id = info.get(<span class="hljs-string">&quot;confirm&quot;</span>)<br>    <span class="hljs-comment"># è·å–ç”¨æˆ·ä¿¡æ¯</span><br>    user = User.objects.get(<span class="hljs-built_in">id</span>=user_id)<br>    user.is_active = <span class="hljs-number">1</span><br>    user.save()<br><br>    <span class="hljs-comment"># è·³è½¬åˆ°ç™»å½•ç•Œé¢</span><br>    <span class="hljs-keyword">return</span> redirect(reverse(<span class="hljs-string">&#x27;user:login&#x27;</span>))  <span class="hljs-comment"># æ¿€æ´»æˆåŠŸï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢      </span><br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é‚®ä»¶ </tag>
            
            <tag> itsdangerous </tag>
            
            <tag> ä¸´æ—¶èº«ä»½ä»¤ç‰Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django-ç¼“å­˜</title>
      <link href="2020/12/01/django-huan-cun/"/>
      <url>2020/12/01/django-huan-cun/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¼“å­˜ç®€ä»‹"><a href="#ç¼“å­˜ç®€ä»‹" class="headerlink" title="ç¼“å­˜ç®€ä»‹"></a>ç¼“å­˜ç®€ä»‹</h2><p>åœ¨åŠ¨æ€ç½‘ç«™ä¸­,ç”¨æˆ·æ‰€æœ‰çš„è¯·æ±‚,æœåŠ¡å™¨éƒ½ä¼šå»æ•°æ®åº“ä¸­è¿›è¡Œç›¸åº”çš„å¢,åˆ ,æŸ¥,æ”¹,æ¸²æŸ“æ¨¡æ¿,æ‰§è¡Œä¸šåŠ¡é€»è¾‘,æœ€åç”Ÿæˆç”¨æˆ·çœ‹åˆ°çš„é¡µé¢.</p><p>å½“ä¸€ä¸ªç½‘ç«™çš„ç”¨æˆ·è®¿é—®é‡å¾ˆå¤§çš„æ—¶å€™,æ¯ä¸€æ¬¡çš„çš„åå°æ“ä½œ,éƒ½ä¼šæ¶ˆè€—å¾ˆå¤šçš„æœåŠ¡ç«¯èµ„æº,æ‰€ä»¥å¿…é¡»ä½¿ç”¨<strong>ç¼“å­˜</strong>æ¥å‡è½»åç«¯æœåŠ¡å™¨çš„å‹åŠ›.</p><p>ç¼“å­˜æ˜¯å°†ä¸€äº›å¸¸ç”¨çš„æ•°æ®ä¿å­˜åˆ°<strong>å†…å­˜</strong>æˆ–è€…<strong>memcache</strong>ä¸­,åœ¨ä¸€å®šçš„æ—¶é—´å†…æœ‰äººæ¥è®¿é—®è¿™äº›æ•°æ®æ—¶,åˆ™ä¸å†å»æ‰§è¡Œæ•°æ®åº“åŠæ¸²æŸ“ç­‰æ“ä½œ,è€Œæ˜¯ç›´æ¥ä»å†…å­˜æˆ–memcacheçš„ç¼“å­˜ä¸­å»å–å¾—æ•°æ®,ç„¶åè¿”å›ç»™ç”¨æˆ·ã€‚</p><h2 id="Djangoç¼“å­˜"><a href="#Djangoç¼“å­˜" class="headerlink" title="Djangoç¼“å­˜"></a>Djangoç¼“å­˜</h2><h3 id="ç¼“å­˜æ–¹å¼"><a href="#ç¼“å­˜æ–¹å¼" class="headerlink" title="ç¼“å­˜æ–¹å¼"></a>ç¼“å­˜æ–¹å¼</h3><blockquote><p>  Djangoæä¾›äº†6ç§ç¼“å­˜æ–¹å¼</p></blockquote><ul><li>å¼€å‘è°ƒè¯•ç¼“å­˜</li><li>å†…å­˜ç¼“å­˜</li><li>æ–‡ä»¶ç¼“å­˜</li><li>æ•°æ®åº“ç¼“å­˜</li><li>Memcacheç¼“å­˜(ä½¿ç”¨<code>python-memcached</code>æ¨¡å—)</li><li>Memcacheç¼“å­˜(ä½¿ç”¨<code>pylibmc</code>æ¨¡å—)</li></ul><p>ç»å¸¸ä½¿ç”¨çš„æœ‰<strong>æ–‡ä»¶ç¼“å­˜</strong>å’Œ<strong>Mencache</strong>ç¼“å­˜, è€Œé€‰ç”¨ä¸åŒçš„ç¼“å­˜æ–¹å¼ï¼Œå®é™…å°±æ˜¯éœ€è¦ç¼“å­˜çš„æ•°æ®ä¿å­˜çš„ä½ç½®ä¸åŒã€‚åªéœ€è¦ä¿®æ”¹djangoé¡¹ç›®çš„é…ç½®æ–‡ä»¶<code>settings.py</code>ï¼Œå³å¯å®ç°ä¸åŒç¼“å­˜æ–¹å¼çš„åˆ‡æ¢ã€‚</p><h4 id="å¼€å‘è°ƒè¯•"><a href="#å¼€å‘è°ƒè¯•" class="headerlink" title="å¼€å‘è°ƒè¯•"></a>å¼€å‘è°ƒè¯•</h4><blockquote><p>  æ­¤æ¨¡å¼ä¸ºå¼€å‘è°ƒè¯•ä½¿ç”¨,å®é™…ä¸Šä¸æ‰§è¡Œä»»ä½•æ“ä½œ</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">CACHES = &#123;<br>    <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;BACKEND&#x27;</span>: <span class="hljs-string">&#x27;django.core.cache.backends.dummy.DummyCache&#x27;</span>,  <span class="hljs-comment"># ç¼“å­˜åå°ä½¿ç”¨çš„å¼•æ“</span><br>        <span class="hljs-string">&#x27;TIMEOUT&#x27;</span>: <span class="hljs-number">300</span>,  <span class="hljs-comment"># ç¼“å­˜è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤300ç§’ï¼ŒNoneè¡¨ç¤ºæ°¸ä¸è¿‡æœŸï¼Œ0è¡¨ç¤ºç«‹å³è¿‡æœŸï¼‰</span><br>        <span class="hljs-string">&#x27;OPTIONS&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;MAX_ENTRIES&#x27;</span>: <span class="hljs-number">300</span>,  <span class="hljs-comment"># æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰</span><br>            <span class="hljs-string">&#x27;CULL_FREQUENCY&#x27;</span>: <span class="hljs-number">3</span>,  <span class="hljs-comment"># ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰</span><br>        &#125;,<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h4 id="å†…å­˜ç¼“å­˜"><a href="#å†…å­˜ç¼“å­˜" class="headerlink" title="å†…å­˜ç¼“å­˜"></a>å†…å­˜ç¼“å­˜</h4><blockquote><p>  å°†ç¼“å­˜å†…å®¹ä¿å­˜è‡³å†…å­˜åŒºåŸŸä¸­</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">CACHES = &#123;<br>    <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;BACKEND&#x27;</span>: <span class="hljs-string">&#x27;django.core.cache.backends.locmem.LocMemCache&#x27;</span>,  <span class="hljs-comment"># æŒ‡å®šç¼“å­˜ä½¿ç”¨çš„å¼•æ“</span><br>        <span class="hljs-string">&#x27;LOCATION&#x27;</span>: <span class="hljs-string">&#x27;unique-snowflake&#x27;</span>,  <span class="hljs-comment"># å†™åœ¨å†…å­˜ä¸­çš„å˜é‡çš„å”¯ä¸€å€¼ </span><br>        <span class="hljs-string">&#x27;TIMEOUT&#x27;</span>: <span class="hljs-number">300</span>,  <span class="hljs-comment"># ç¼“å­˜è¶…æ—¶æ—¶é—´(é»˜è®¤ä¸º300ç§’,Noneè¡¨ç¤ºæ°¸ä¸è¿‡æœŸ)</span><br>        <span class="hljs-string">&#x27;OPTIONS&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;MAX_ENTRIES&#x27;</span>: <span class="hljs-number">300</span>,  <span class="hljs-comment"># æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰</span><br>            <span class="hljs-string">&#x27;CULL_FREQUENCY&#x27;</span>: <span class="hljs-number">3</span>,  <span class="hljs-comment"># ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h4 id="æ–‡ä»¶ç¼“å­˜"><a href="#æ–‡ä»¶ç¼“å­˜" class="headerlink" title="æ–‡ä»¶ç¼“å­˜"></a>æ–‡ä»¶ç¼“å­˜</h4><blockquote><p>  æŠŠç¼“å­˜æ•°æ®å­˜å‚¨åœ¨æ–‡ä»¶ä¸­</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">CACHES = &#123;<br>    <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;BACKEND&#x27;</span>: <span class="hljs-string">&#x27;django.core.cache.backends.filebased.FileBasedCache&#x27;</span>,  <span class="hljs-comment"># æŒ‡å®šç¼“å­˜ä½¿ç”¨çš„å¼•æ“</span><br>        <span class="hljs-string">&#x27;LOCATION&#x27;</span>: <span class="hljs-string">&#x27;/var/tmp/django_cache&#x27;</span>,  <span class="hljs-comment"># æŒ‡å®šç¼“å­˜çš„è·¯å¾„</span><br>        <span class="hljs-string">&#x27;TIMEOUT&#x27;</span>: <span class="hljs-number">300</span>,  <span class="hljs-comment"># ç¼“å­˜è¶…æ—¶æ—¶é—´(é»˜è®¤ä¸º300ç§’,Noneè¡¨ç¤ºæ°¸ä¸è¿‡æœŸ)</span><br>        <span class="hljs-string">&#x27;OPTIONS&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;MAX_ENTRIES&#x27;</span>: <span class="hljs-number">300</span>,  <span class="hljs-comment"># æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰</span><br>            <span class="hljs-string">&#x27;CULL_FREQUENCY&#x27;</span>: <span class="hljs-number">3</span>,  <span class="hljs-comment"># ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h4 id="æ•°æ®åº“ç¼“å­˜"><a href="#æ•°æ®åº“ç¼“å­˜" class="headerlink" title="æ•°æ®åº“ç¼“å­˜"></a>æ•°æ®åº“ç¼“å­˜</h4><blockquote><p>  æŠŠç¼“å­˜æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">CACHES = &#123;<br>    <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;BACKEND&#x27;</span>: <span class="hljs-string">&#x27;django.core.cache.backends.db.DatabaseCache&#x27;</span>,  <span class="hljs-comment"># æŒ‡å®šç¼“å­˜ä½¿ç”¨çš„å¼•æ“</span><br>        <span class="hljs-string">&#x27;LOCATION&#x27;</span>: <span class="hljs-string">&#x27;cache_table&#x27;</span>,  <span class="hljs-comment"># æ•°æ®åº“è¡¨    </span><br>        <span class="hljs-string">&#x27;OPTIONS&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;MAX_ENTRIES&#x27;</span>: <span class="hljs-number">300</span>,  <span class="hljs-comment"># æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰</span><br>            <span class="hljs-string">&#x27;CULL_FREQUENCY&#x27;</span>: <span class="hljs-number">3</span>,  <span class="hljs-comment"># ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>æ³¨æ„,åˆ›å»ºç¼“å­˜çš„æ•°æ®åº“è¡¨ä½¿ç”¨çš„è¯­å¥:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">python manage.py createcachetable<br></code></pre></div></td></tr></table></figure><h4 id="Memcachedç¼“å­˜"><a href="#Memcachedç¼“å­˜" class="headerlink" title="Memcachedç¼“å­˜"></a>Memcachedç¼“å­˜</h4><p>Memcachedæ˜¯DjangoåŸç”Ÿæ”¯æŒçš„ç¼“å­˜ç³»ç»Ÿ.è¦ä½¿ç”¨Memcached,éœ€è¦ä¸‹è½½Memcachedçš„æ”¯æŒåº“<code>python-memcached</code>æˆ–<code>pylibmc</code>.</p><blockquote><p>  ä½¿ç”¨<code>python-memcached</code>æ¨¡å—è¿æ¥memcache</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">CACHES = &#123;<br>    <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;BACKEND&#x27;</span>: <span class="hljs-string">&#x27;django.core.cache.backends.memcached.MemcachedCache&#x27;</span>,  <span class="hljs-comment"># æŒ‡å®šç¼“å­˜ä½¿ç”¨çš„å¼•æ“</span><br>        <span class="hljs-string">&#x27;LOCATION&#x27;</span>: <span class="hljs-string">&#x27;192.168.10.100:11211&#x27;</span>,  <span class="hljs-comment"># æŒ‡å®šMemcacheç¼“å­˜æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£</span><br>        <span class="hljs-string">&#x27;OPTIONS&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;MAX_ENTRIES&#x27;</span>: <span class="hljs-number">300</span>,  <span class="hljs-comment"># æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰</span><br>            <span class="hljs-string">&#x27;CULL_FREQUENCY&#x27;</span>: <span class="hljs-number">3</span>,  <span class="hljs-comment"># ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><blockquote><p>  ä½¿ç”¨<code>pylibmc</code>æ¨¡å—è¿æ¥memcache</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">CACHES = &#123;<br>    <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;BACKEND&#x27;</span>: <span class="hljs-string">&#x27;django.core.cache.backends.memcached.PyLibMCCache&#x27;</span>,  <span class="hljs-comment"># æŒ‡å®šç¼“å­˜ä½¿ç”¨çš„å¼•æ“</span><br>        <span class="hljs-string">&#x27;LOCATION&#x27;</span>: <span class="hljs-string">&#x27;192.168.10.100:11211&#x27;</span>,  <span class="hljs-comment"># æŒ‡å®šæœ¬æœºçš„11211ç«¯å£ä¸ºMemcacheç¼“å­˜æœåŠ¡å™¨</span><br>        <span class="hljs-string">&#x27;OPTIONS&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;MAX_ENTRIES&#x27;</span>: <span class="hljs-number">300</span>,  <span class="hljs-comment"># æœ€å¤§ç¼“å­˜è®°å½•çš„æ•°é‡ï¼ˆé»˜è®¤300ï¼‰</span><br>            <span class="hljs-string">&#x27;CULL_FREQUENCY&#x27;</span>: <span class="hljs-number">3</span>,  <span class="hljs-comment"># ç¼“å­˜åˆ°è¾¾æœ€å¤§ä¸ªæ•°ä¹‹åï¼Œå‰”é™¤ç¼“å­˜ä¸ªæ•°çš„æ¯”ä¾‹ï¼Œå³ï¼š1/CULL_FREQUENCYï¼ˆé»˜è®¤3ï¼‰</span><br>        &#125;,<br>    &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure><p>Memcachedæ˜¯åŸºäºå†…å­˜çš„ç¼“å­˜,æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­.æ‰€ä»¥å¦‚æœæœåŠ¡å™¨æ­»æœºçš„è¯,æ•°æ®å°±ä¼šä¸¢å¤±,æ‰€ä»¥Memcachedä¸€èˆ¬ä¸å…¶ä»–ç¼“å­˜é…åˆä½¿ç”¨</p><h3 id="ç¼“å­˜åº”ç”¨"><a href="#ç¼“å­˜åº”ç”¨" class="headerlink" title="ç¼“å­˜åº”ç”¨"></a>ç¼“å­˜åº”ç”¨</h3><blockquote><p>åœ¨ä½¿ç”¨ç¼“å­˜ä¹‹å‰ï¼Œå¿…é€‰å…ˆé€‰æ‹©ä¸€ç§ç¼“å­˜æ–¹å¼ï¼ŒæŒ‰ç…§ä¸Šé¢çš„é…ç½®ä¿¡æ¯åœ¨ <code>settings.py</code>ä¸­å®ç°å¯¹åº”é…ç½®ã€‚</p></blockquote><h4 id="å…¨ç«™ä½¿ç”¨ç¼“å­˜"><a href="#å…¨ç«™ä½¿ç”¨ç¼“å­˜" class="headerlink" title="å…¨ç«™ä½¿ç”¨ç¼“å­˜"></a>å…¨ç«™ä½¿ç”¨ç¼“å­˜</h4><blockquote><p>å¦‚æœæƒ³è¦å¯¹æ•´ä¸ªé¡¹ç›®çš„<strong>æ‰€æœ‰</strong><code>GET</code>å’Œ<code>HEAD</code>æ–¹æ³•çš„æ­£å¸¸è¿”å›ç»“æœè¿›è¡Œç¼“å­˜ï¼Œå¯ä»¥é€šè¿‡<strong>ä¸­é—´ä»¶</strong>å®ç°</p></blockquote><ul><li>ç”¨æˆ·çš„è¯·æ±‚é€šè¿‡ä¸­é—´ä»¶ï¼Œç»è¿‡ä¸€ç³»åˆ—çš„è®¤è¯ç­‰æ“ä½œï¼Œå¦‚æœè¯·æ±‚çš„å†…å®¹åœ¨ç¼“å­˜ä¸­å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨<code>FetchFromCacheMiddleware</code>è·å–å†…å®¹å¹¶è¿”å›ç»™ç”¨æˆ·</li><li>å½“è¿”å›ç»™ç”¨æˆ·ä¹‹å‰ï¼Œåˆ¤æ–­ç¼“å­˜ä¸­æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™<code>UpdateCacheMiddleware</code>ä¼šå°†ç¼“å­˜ä¿å­˜è‡³Djangoçš„ç¼“å­˜ä¹‹ä¸­ï¼Œä»¥å®ç°å…¨ç«™ç¼“å­˜</li><li>è¯·æ±‚æ¥äº†ï¼Œæ˜¯ä»ä¸Šåˆ°ä¸‹å…¥èµ°ä¸­é—´ä»¶ï¼›å“åº”çš„æ—¶å€™æ˜¯ä»ä¸‹åˆ°ä¸Šèµ°ä¸­é—´ä»¶ã€‚å› æ­¤ï¼Œè·å–é¡µé¢æ”¾åœ¨æœ€åï¼Œä¿å­˜é¡µé¢æ”¾æœ€å‰é¢</li></ul><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">MIDDLEWARE = [<br> <span class="hljs-string">&#x27;django.middleware.cache.UpdateCacheMiddleware&#x27;</span>,  <span class="hljs-comment"># å“åº”HttpResponseä¸­è®¾ç½®å‡ ä¸ªheaders</span><br> <span class="hljs-string">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span>,<br> <span class="hljs-string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,<br> <span class="hljs-string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,<br> <span class="hljs-string">&#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;</span>,<br> <span class="hljs-string">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span>,<br> <span class="hljs-string">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,<br> <span class="hljs-string">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span>,<br> <span class="hljs-string">&#x27;django.middleware.cache.FetchFromCacheMiddleware&#x27;</span>,  <span class="hljs-comment"># ç”¨æ¥ç¼“å­˜é€šè¿‡GETå’ŒHEADæ–¹æ³•è·å–çš„çŠ¶æ€ç ä¸º200çš„å“åº”</span><br>]<br> <br>CACHE__MIDDLEWARE_SECONDS=<span class="hljs-number">15</span>  <span class="hljs-comment"># è®¾å®šè¶…æ—¶æ—¶é—´ä¸º15ç§’</span><br></code></pre></div></td></tr></table></figure><p>æ­¤æ—¶åœ¨ä¸­é—´ä»¶ä¸­å·²ç»è®¾ç½®è¿‡ç¼“å­˜ï¼Œå› æ­¤å…¶ä½™ä»£ç ä¸å˜ï¼Œè§†å›¾ä¸­æ­£å¸¸æ‰§è¡Œé€»è¾‘ï¼Œå³å¯å®ç°å…¨ç«™ç¼“å­˜ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.http.response <span class="hljs-keyword">import</span> HttpResponse<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>(<span class="hljs-params">request</span>):</span><br>    print(<span class="hljs-string">&#x27;è§†å›¾å‡½æ•°è¢«è°ƒç”¨&#x27;</span>)<br>    result = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>        result += i<br>        time.sleep(<span class="hljs-number">0.5</span>)<br>    ctime = time.strftime(<span class="hljs-string">&#x27;%H:%M:%S&#x27;</span>, time.localtime())<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;æ—¶é—´&#123;&#125;çš„ç»“æœæ˜¯:&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(ctime, result))<br></code></pre></div></td></tr></table></figure><h4 id="å•ç‹¬è§†å›¾"><a href="#å•ç‹¬è§†å›¾" class="headerlink" title="å•ç‹¬è§†å›¾"></a>å•ç‹¬è§†å›¾</h4><blockquote><p>  å¦‚æœä¸æƒ³å¯¹æ‰€æœ‰çš„æŸ¥è¯¢ç»“æœç¼“å­˜ï¼Œè€Œåªæ˜¯ä¸º<strong>å•ä¸ªè§†å›¾</strong>å‡½æ•°æ·»åŠ ç¼“å­˜ï¼Œå°±å¯ä»¥ä½¿ç”¨<strong>è£…é¥°å™¨</strong>å®ç°</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.views.decorators.cache <span class="hljs-keyword">import</span> cache_page<br><span class="hljs-keyword">from</span> django.http.response <span class="hljs-keyword">import</span> HttpResponse<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-meta">@cache_page(<span class="hljs-params"><span class="hljs-number">10</span></span>)  </span><span class="hljs-comment"># ç¼“å­˜10ç§’</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>(<span class="hljs-params">request</span>):</span><br>    print(<span class="hljs-string">&#x27;è§†å›¾å‡½æ•°è¢«è°ƒç”¨&#x27;</span>)<br>    result = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>        result += i<br>        time.sleep(<span class="hljs-number">0.5</span>)<br>    ctime = time.strftime(<span class="hljs-string">&#x27;%H:%M:%S&#x27;</span>, time.localtime())<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;æ—¶é—´&#123;&#125;çš„ç»“æœæ˜¯:&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(ctime, result))<br></code></pre></div></td></tr></table></figure><p>å› ä¸ºç¼“å­˜çš„åŸå› ,ä¸åœçš„åˆ·æ–°æµè§ˆå™¨æ—¶ä¼šå‘ç°ï¼šç¬¬ä¸€æ¬¡è¯·æ±‚é¡µé¢æ—¶ï¼Œä¼šç­‰å¾…5ç§’ï¼Œè®¡ç®—å®Œå…¨éƒ¨æ•°æ®æ•°æ®ï¼Œ æ‰å¯ä»¥è¿”å›ç»“æœï¼›åœ¨ä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œåˆ©ç”¨ç¼“å­˜ç»“æœï¼Œå¯ä»¥å¾ˆå¿«å¾—åˆ°å“åº”æ•°æ®ï¼›ç›´åˆ°10ç§’ä¹‹åï¼Œç¼“å­˜è¿‡æœŸï¼Œé‡æ–°è¿›è¡Œè¯¥è¿‡ç¨‹ã€‚</p><h4 id="æ¨¡æ¿ç¼“å­˜"><a href="#æ¨¡æ¿ç¼“å­˜" class="headerlink" title="æ¨¡æ¿ç¼“å­˜"></a>æ¨¡æ¿ç¼“å­˜</h4><blockquote><p>å¦‚æœå¹¶ä¸æƒ³å¯¹é¡µé¢çš„å…¶ä½™éƒ¨åˆ†åšä»»ä½•å¤„ç†ï¼Œåªæ˜¯ç›¸å¯¹é¡µé¢çš„<strong>ä¸€éƒ¨åˆ†</strong> è¿›è¡Œç¼“å­˜ï¼Œ å°±å¯ä»¥ä½¿ç”¨ <strong>æ¨¡æ¿ç¼“å­˜</strong> å®ç°</p></blockquote><p>å¦‚æœæƒ³å¯¹ç¼“å­˜è¿›è¡Œæ›´å¤šçš„æ§åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>cache</code>æ¨¡æ¿æ ‡ç­¾æ¥ç¼“å­˜æ¨¡æ¿çš„ä¸€ä¸ªç‰‡æ®µã€‚</p><p><code>views</code>è§†å›¾å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>(<span class="hljs-params">request</span>):</span><br>    print(<span class="hljs-string">&#x27;è§†å›¾å‡½æ•°è¢«è°ƒç”¨&#x27;</span>)<br>    ctime = time.strftime(<span class="hljs-string">&#x27;%H:%M:%S&#x27;</span>, time.localtime())<br>    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;page.html&#x27;</span>, &#123;<span class="hljs-string">&#x27;ctime&#x27;</span>: ctime&#125;)<br></code></pre></div></td></tr></table></figure><p> å‰ç«¯ç½‘é¡µ</p><figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">&#123;% load cache %&#125;  <span class="hljs-comment"># æ”¾åœ¨ç¼“å­˜ç‰‡æ®µçš„ä¸Šé¢</span><br>&lt;!DOCTYPE html&gt;<br>&lt;html lang=<span class="hljs-string">&quot;en&quot;</span>&gt;<br>&lt;head&gt;<br>    &lt;meta charset=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;<br>    &lt;title&gt;æ¨¡æ¿ç¼“å­˜&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;p&gt;è¿™é‡Œæ˜¯æœªç¼“å­˜çš„æ—¶é—´:&#123;&#123; ctime &#125;&#125;&lt;/p&gt;<br><br><span class="hljs-comment"># å°†æŒ‰ç»™å®šçš„æ—¶é—´ç¼“å­˜åŒ…å«å—ä¸­çš„å†…å®¹ã€‚ </span><br><span class="hljs-comment"># å®ƒæœ€å°‘éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼šç¼“å­˜æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼›ç»™ç¼“å­˜ç‰‡æ®µèµ·çš„åç§°,è¯¥åç§°å°†è¢«è§†ä¸ºæ˜¯å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯å˜é‡</span><br><span class="hljs-comment"># è®¾å®šè¶…æ—¶æ—¶é—´ä¸º10ç§’, ç»™ç¼“å­˜æ¨¡æ¿ç‰‡æ®µèµ·åä¸º &quot;time&quot;</span><br>&#123;% cache <span class="hljs-number">10</span> time %&#125;  <br>    &lt;p&gt;è¿™é‡Œæ˜¯ç¼“å­˜çš„æ—¶é—´:&#123;&#123; ctime &#125;&#125;&lt;/p&gt;<br>&#123;% endcache %&#125;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></div></td></tr></table></figure><p>åˆ·æ–°æµè§ˆå™¨å¯ä»¥çœ‹åˆ°,ç¬¬ä¸€ä¸ªæ—¶é—´å®æ—¶å˜åŒ–,åé¢ä¸€ä¸ªæ—¶é—´æ¯10ç§’é’Ÿå˜åŒ–ä¸€æ¬¡</p><h4 id="æ‰‹åŠ¨ç¼“å­˜"><a href="#æ‰‹åŠ¨ç¼“å­˜" class="headerlink" title="æ‰‹åŠ¨ç¼“å­˜"></a>æ‰‹åŠ¨ç¼“å­˜</h4><blockquote><p>å¦‚æœä¸æƒ³ä¸ºä¸€ä¸ªæ–¹æ³•ï¼ˆé¡µé¢ï¼‰è¿›è¡Œç¼“å­˜ï¼Œåªæƒ³ç¼“å­˜<strong>æŸä¸ªå­—æ®µ</strong>çš„è¯ï¼Œå¯ä»¥ <strong>æ‰‹åŠ¨ç¼“å­˜</strong></p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.core.cache <span class="hljs-keyword">import</span> cache<br><span class="hljs-keyword">from</span> django.http.response <span class="hljs-keyword">import</span> HttpResponse<br><span class="hljs-keyword">import</span> time<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>(<span class="hljs-params">request</span>):</span><br>    print(<span class="hljs-string">&#x27;è§†å›¾å‡½æ•°è¢«è°ƒç”¨&#x27;</span>)<br>    result = cache.get(<span class="hljs-string">&#x27;result&#x27;</span>)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> result:<br>        result = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>            result += i<br>            time.sleep(<span class="hljs-number">0.5</span>)<br>        cache.<span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;result&#x27;</span>, result, <span class="hljs-number">10</span>)<br><br>    ctime = time.strftime(<span class="hljs-string">&#x27;%H:%M:%S&#x27;</span>, time.localtime())<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;æ—¶é—´&#123;&#125;çš„ç»“æœæ˜¯:&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(ctime, result))<br></code></pre></div></td></tr></table></figure><h2 id="Redisç¼“å­˜"><a href="#Redisç¼“å­˜" class="headerlink" title="Redisç¼“å­˜"></a>Redisç¼“å­˜</h2><p><a href="https://www.cnblogs.com/believepd/p/10275384.html#äºŒã€redisç¼“å­˜">å‚è€ƒ</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¼“å­˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django-æ•°æ®åˆ†é¡µ</title>
      <link href="2020/11/30/django-shu-ju-fen-ye/"/>
      <url>2020/11/30/django-shu-ju-fen-ye/</url>
      
        <content type="html"><![CDATA[<p>å½“é¡µé¢å› éœ€è¦å±•ç¤ºçš„æ•°æ®æ¡ç›®è¿‡å¤šï¼Œå¯¼è‡´æ— æ³•åœ¨ä¸€ä¸ªé¡µé¢å…¨éƒ¨æ˜¾ç¤ºã€‚è¿™æ—¶ï¼Œé¡µé¢ç»å¸¸ä¼šé‡‡ç”¨åˆ†é¡µå½¢å¼è¿›è¡Œå±•ç¤ºï¼Œç„¶åæ¯é¡µæ˜¾ç¤º 20 æˆ–è€… 50 ç­‰æ¡æ•°æ®ã€‚åˆ†é¡µç»å¸¸åœ¨ç½‘ç«™ä¸Šéšå¤„å¯è§ï¼Œ</p><p>åˆ†é¡µçš„å®ç°ä¸ä»…æé«˜äº†ç”¨æˆ·ä½“éªŒï¼Œè¿˜æ˜¯å‡è½»æ•°æ®åº“è¯»å–æ•°æ®çš„å‹åŠ›ã€‚Django è‡ªå¸¦åä¸º Paginator çš„åˆ†é¡µå·¥å…·ï¼Œ æ–¹ä¾¿æˆ‘ä»¬å®ç°åˆ†é¡µåŠŸèƒ½ã€‚æœ¬æ–‡å°±è®²è§£å¦‚ä½•ä½¿ç”¨ Paginator å®ç°åˆ†é¡µåŠŸèƒ½ã€‚</p><h1 id="Paginator"><a href="#Paginator" class="headerlink" title="Paginator"></a>Paginator</h1><p>Paginator ç±»çš„ä½œç”¨æ˜¯å°†æˆ‘ä»¬éœ€è¦åˆ†é¡µçš„æ•°æ®åˆ†å‰²æˆè‹¥å¹²ä»½ã€‚å½“æˆ‘ä»¬å®ç°åŒ–ä¸€ä¸ª Paginator ç±»çš„å®ä¾‹æ—¶ï¼Œéœ€è¦ç»™ Paginator ä¼ å…¥ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°æ®æºï¼Œå¯ä»¥æ˜¯<strong>ä¸€ä¸ªåˆ—è¡¨ã€å…ƒç»„ã€ä»¥åŠæŸ¥è¯¢ç»“æœé›† QuerySet</strong>ã€‚ç¬¬äºŒä¸ªå‚æ•°<strong>éœ€è¦ä¼ å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ¯é¡µæ˜¾ç¤ºæ•°æ®æ¡æ•°</strong>ã€‚å…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š</p><h3 id="å¯¼å…¥åˆ†é¡µæ¨¡å—"><a href="#å¯¼å…¥åˆ†é¡µæ¨¡å—" class="headerlink" title="å¯¼å…¥åˆ†é¡µæ¨¡å—"></a>å¯¼å…¥åˆ†é¡µæ¨¡å—</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.core.paginator <span class="hljs-keyword">import</span> Paginator<br></code></pre></div></td></tr></table></figure><h3 id="è·å–querysetå¯¹è±¡"><a href="#è·å–querysetå¯¹è±¡" class="headerlink" title="è·å–querysetå¯¹è±¡"></a>è·å–querysetå¯¹è±¡</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">goods_list = Goods.objects.<span class="hljs-built_in">all</span>().order_by(<span class="hljs-string">&#x27;id&#x27;</span>)<br></code></pre></div></td></tr></table></figure><h3 id="å®ä¾‹åŒ–åˆ†é¡µç±»å¯¹è±¡"><a href="#å®ä¾‹åŒ–åˆ†é¡µç±»å¯¹è±¡" class="headerlink" title="å®ä¾‹åŒ–åˆ†é¡µç±»å¯¹è±¡"></a>å®ä¾‹åŒ–åˆ†é¡µç±»å¯¹è±¡</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">paginator = Paginator(goods_list, <span class="hljs-number">2</span>)<br></code></pre></div></td></tr></table></figure><h4 id="Paginatorç±»å¯¹è±¡çš„å±æ€§"><a href="#Paginatorç±»å¯¹è±¡çš„å±æ€§" class="headerlink" title="Paginatorç±»å¯¹è±¡çš„å±æ€§"></a>Paginatorç±»å¯¹è±¡çš„å±æ€§</h4><table><thead><tr><th>åºå·</th><th>å±æ€§å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>num_pages</td><td>è¿”å›åˆ†é¡µä¹‹åçš„æ€»é¡µæ•°</td></tr><tr><td>2</td><td>page_range</td><td>è¿”å›åˆ†é¡µåçš„é¡µç åˆ—è¡¨</td></tr></tbody></table><h4 id="Paginatorç±»å¯¹è±¡çš„æ–¹æ³•"><a href="#Paginatorç±»å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="Paginatorç±»å¯¹è±¡çš„æ–¹æ³•"></a>Paginatorç±»å¯¹è±¡çš„æ–¹æ³•</h4><table><thead><tr><th>åºå·</th><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>get_page(self, number)</td><td>è¿”å›ç¬¬numberé¡µçš„pageç±»å®ä¾‹å¯¹è±¡</td></tr></tbody></table><h4 id="Pageå®ä¾‹å¯¹è±¡çš„å±æ€§"><a href="#Pageå®ä¾‹å¯¹è±¡çš„å±æ€§" class="headerlink" title="Pageå®ä¾‹å¯¹è±¡çš„å±æ€§"></a>Pageå®ä¾‹å¯¹è±¡çš„å±æ€§</h4><table><thead><tr><th>åºå·</th><th>å±æ€§å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>number</td><td>è¿”å›å½“å‰é¡µçš„é¡µç </td></tr><tr><td>2</td><td>object_list</td><td>è¿”å›å½“å‰é¡µçš„æ•°æ®æŸ¥è¯¢é›†</td></tr><tr><td>3</td><td>paginator</td><td>è¿”å›å¯¹åº”çš„<strong>Paginator</strong>ç±»å¯¹è±¡</td></tr></tbody></table><h4 id="pageå®ä¾‹å¯¹è±¡çš„æ–¹æ³•"><a href="#pageå®ä¾‹å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="pageå®ä¾‹å¯¹è±¡çš„æ–¹æ³•"></a>pageå®ä¾‹å¯¹è±¡çš„æ–¹æ³•</h4><table><thead><tr><th>åºå·</th><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>has_previous</td><td>åˆ¤æ–­å½“å‰é¡µæ˜¯å¦æœ‰å‰ä¸€é¡µ</td></tr><tr><td>2</td><td>has_next</td><td>åˆ¤æ–­å½“å‰é¡µæ˜¯å¦æœ‰ä¸‹ä¸€é¡µ</td></tr><tr><td>3</td><td>previous_page_number</td><td>è¿”å›å‰ä¸€é¡µçš„é¡µç </td></tr><tr><td>4</td><td>next_page_number</td><td>è¿”å›ä¸‹ä¸€é¡µçš„é¡µç </td></tr></tbody></table><h2 id="åˆ†é¡µåŠŸèƒ½å®ç°"><a href="#åˆ†é¡µåŠŸèƒ½å®ç°" class="headerlink" title="åˆ†é¡µåŠŸèƒ½å®ç°"></a>åˆ†é¡µåŠŸèƒ½å®ç°</h2><h3 id="viewså‡½æ•°"><a href="#viewså‡½æ•°" class="headerlink" title="viewså‡½æ•°"></a>viewså‡½æ•°</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IndexView</span>(<span class="hljs-params">View</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>        page_number = request.GET.get(<span class="hljs-string">&#x27;page&#x27;</span>, <span class="hljs-number">1</span>)  <span class="hljs-comment"># è·å–å®¢æˆ·ç«¯å‘é€çš„é¡µç ï¼Œé»˜è®¤ä¸º1</span><br>        page_size = request.GET.get(<span class="hljs-string">&#x27;page_size&#x27;</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># è·å–å®¢æˆ·ç«¯å‘é€çš„æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ä¸º1</span><br>        <span class="hljs-keyword">try</span>:<br>            page_number = <span class="hljs-built_in">int</span>(page_number)  <span class="hljs-comment"># å¤„ç†é¡µç ï¼Œ è¿‡æ»¤æ— æ•ˆçš„æ•°æ®</span><br>        <span class="hljs-keyword">except</span>:<br>            page_number = <span class="hljs-number">1</span><br><br>        goods_list = Goods.objects.<span class="hljs-built_in">all</span>().order_by(<span class="hljs-string">&#x27;id&#x27;</span>)<br><br>        paginator = Paginator(goods_list, page_size)  <span class="hljs-comment"># å¾—åˆ°åˆ†é¡µå™¨å¯¹è±¡</span><br>        page = paginator.get_page(page_number)  <span class="hljs-comment"># å¾—åˆ°å½“å‰é¡µç å¯¹è±¡</span><br><br>        <span class="hljs-comment"># è·å–é¡µç åˆ—è¡¨</span><br>        index = page.number - <span class="hljs-number">1</span>  <span class="hljs-comment"># å½“å‰é¡µç å¯¹åº”çš„ç´¢å¼•</span><br>        max_index = paginator.num_pages - <span class="hljs-number">1</span>  <span class="hljs-comment"># æœ€å¤§ç´¢å¼•</span><br>        <span class="hljs-comment"># ä¸ºäº†å¾—åˆ°æ˜¾ç¤º7ä¸ªé¡µç çš„åˆ—è¡¨ï¼Œä»å½“å‰ç´¢å¼•å‘å‰æ•°3ä¸ªï¼Œå‘åæ•°3ä¸ªï¼ŒåŠ ä¸Šæœ¬èº«ï¼Œå³7ä¸ªé¡µç </span><br>        start_index = index - <span class="hljs-number">3</span> <span class="hljs-keyword">if</span> index &gt;= <span class="hljs-number">3</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>        end_index = index + <span class="hljs-number">3</span> <span class="hljs-keyword">if</span> index &lt;= max_index - <span class="hljs-number">3</span> <span class="hljs-keyword">else</span> max_index<br>        <span class="hljs-comment"># æœ€åå¤„ç†è¿‡çš„é¡µç åˆ—è¡¨</span><br>        page_range = paginator.page_range[start_index:end_index + <span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;index.html&#x27;</span>, context=&#123;<span class="hljs-string">&#x27;goods&#x27;</span>: page, <span class="hljs-string">&#x27;page_range&#x27;</span>: page_range&#125;)<br><br></code></pre></div></td></tr></table></figure><h3 id="æ¨¡æ¿å®ç°"><a href="#æ¨¡æ¿å®ç°" class="headerlink" title="æ¨¡æ¿å®ç°"></a>æ¨¡æ¿å®ç°</h3><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- å¼•å…¥bootstrapæ ·å¼æ–‡ä»¶ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;% static &#x27;css/bootstrap.min.css&#x27; %&#125;&quot;</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--æ•°æ®éå†å±•ç¤º--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;table&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">thead</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;thead-light&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;col&quot;</span>&gt;</span>#<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;col&quot;</span>&gt;</span>åç§°<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;col&quot;</span>&gt;</span>å•ä»·<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;col&quot;</span>&gt;</span>æ•°é‡<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;col&quot;</span>&gt;</span>å›¾ç‰‡<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>    &#123;% for good in goods.object_list %&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>&#123;&#123; good.id &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; good.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; good.price &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; good.nums &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/media/&#123;&#123; good.img &#125;&#125;&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 100px;height: 130px&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    &#123;% endfor %&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--åº•éƒ¨åˆ†é¡µæŒ‰é’®--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Page navigation example&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;margin: 0 auto&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pagination&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-item&quot;</span>&gt;</span><br>            &#123;% if goods.has_previous %&#125;<br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;% url &#x27;goods:index&#x27; %&#125;?page=&#123;&#123; goods.previous_page_number &#125;&#125;&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-link&quot;</span></span><br><span class="hljs-tag">                   <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Previous&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><span class="hljs-symbol">&amp;laquo;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            &#123;% else %&#125;<br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-link&quot;</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Previous&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><span class="hljs-symbol">&amp;laquo;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            &#123;% endif %&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><br>        &#123;% for page in page_range %&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-item&quot;</span>&gt;</span><br>                &#123;% ifequal page goods.number %&#125;<br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-link&quot;</span>&gt;</span>&#123;&#123; page &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                &#123;% else %&#125;<br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;% url &#x27;goods:index&#x27; %&#125;?page=&#123;&#123; page &#125;&#125;&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-link&quot;</span>&gt;</span>&#123;&#123; page &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                &#123;% endifequal %&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        &#123;% endfor %&#125;<br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-item&quot;</span>&gt;</span><br>            &#123;% if goods.has_next %&#125;<br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;% url &#x27;goods:index&#x27; %&#125;?page=&#123;&#123; goods.next_page_number &#125;&#125;&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-link&quot;</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Next&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><span class="hljs-symbol">&amp;raquo;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            &#123;% else %&#125;<br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-link&quot;</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Next&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><span class="hljs-symbol">&amp;raquo;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            &#123;% endif %&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h4 id="è·¯ç”±é…ç½®"><a href="#è·¯ç”±é…ç½®" class="headerlink" title="è·¯ç”±é…ç½®"></a>è·¯ç”±é…ç½®</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">urlpatterns = [<br>    path(<span class="hljs-string">&#x27;&#x27;</span>, IndexView.as_view(), name=<span class="hljs-string">&#x27;index&#x27;</span>),  <span class="hljs-comment"># /?page=1&amp;page_size=2</span><br>]<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†é¡µ </tag>
            
            <tag> æ¨¡æ¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JWTæµ…æ</title>
      <link href="2020/10/24/web-jwt-qian-xi/"/>
      <url>2020/10/24/web-jwt-qian-xi/</url>
      
        <content type="html"><![CDATA[<h2 id="JWTèµ·æº"><a href="#JWTèµ·æº" class="headerlink" title=" JWTèµ·æº"></a> JWTèµ·æº</h2><blockquote><p>Json web token (JWT), æ˜¯ä¸ºäº†åœ¨ç½‘ç»œåº”ç”¨ç¯å¢ƒé—´ä¼ é€’å£°æ˜è€Œæ‰§è¡Œçš„ä¸€ç§åŸºäº JSON çš„å¼€æ”¾æ ‡å‡†ï¼ˆ<a href="https://link.jianshu.com?t=https://tools.ietf.org/html/rfc7519">(RFC 7519</a>). è¯¥ token è¢«è®¾è®¡ä¸ºç´§å‡‘ä¸”å®‰å…¨çš„ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†å¸ƒå¼ç«™ç‚¹çš„å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰åœºæ™¯ã€‚JWT çš„å£°æ˜ä¸€èˆ¬è¢«ç”¨æ¥åœ¨èº«ä»½æä¾›è€…å’ŒæœåŠ¡æä¾›è€…é—´ä¼ é€’è¢«è®¤è¯çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä»¥ä¾¿äºä»èµ„æºæœåŠ¡å™¨è·å–èµ„æºï¼Œä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›é¢å¤–çš„å…¶å®ƒä¸šåŠ¡é€»è¾‘æ‰€å¿…é¡»çš„å£°æ˜ä¿¡æ¯ï¼Œè¯¥ token ä¹Ÿå¯ç›´æ¥è¢«ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯è¢«åŠ å¯†ã€‚</p></blockquote><p>è¯´èµ· JWTï¼Œæˆ‘ä»¬åº”è¯¥æ¥è°ˆä¸€è°ˆåŸºäº token çš„è®¤è¯å’Œä¼ ç»Ÿçš„ session è®¤è¯çš„åŒºåˆ«ã€‚</p><h3 id="ä¼ ç»Ÿçš„-session-è®¤è¯"><a href="#ä¼ ç»Ÿçš„-session-è®¤è¯" class="headerlink" title="ä¼ ç»Ÿçš„ session è®¤è¯"></a>ä¼ ç»Ÿçš„ session è®¤è¯</h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œhttp åè®®æœ¬èº«æ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œè€Œè¿™å°±æ„å‘³ç€å¦‚æœç”¨æˆ·å‘æˆ‘ä»¬çš„åº”ç”¨æä¾›äº†ç”¨æˆ·åå’Œå¯†ç æ¥è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œç”¨æˆ·è¿˜è¦å†ä¸€æ¬¡è¿›è¡Œç”¨æˆ·è®¤è¯æ‰è¡Œï¼Œå› ä¸ºæ ¹æ® http åè®®ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚ï¼Œæ‰€ä»¥ä¸ºäº†è®©æˆ‘ä»¬çš„åº”ç”¨èƒ½è¯†åˆ«æ˜¯å“ªä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚ï¼Œæˆ‘ä»¬åªèƒ½åœ¨æœåŠ¡å™¨å­˜å‚¨ä¸€ä»½ç”¨æˆ·ç™»å½•çš„ä¿¡æ¯ï¼Œè¿™ä»½ç™»å½•ä¿¡æ¯ä¼šåœ¨å“åº”æ—¶ä¼ é€’ç»™æµè§ˆå™¨ï¼Œå‘Šè¯‰å…¶ä¿å­˜ä¸º cookie, ä»¥ä¾¿ä¸‹æ¬¡è¯·æ±‚æ—¶å‘é€ç»™æˆ‘ä»¬çš„åº”ç”¨ï¼Œè¿™æ ·æˆ‘ä»¬çš„åº”ç”¨å°±èƒ½è¯†åˆ«è¯·æ±‚æ¥è‡ªå“ªä¸ªç”¨æˆ·äº†, è¿™å°±æ˜¯ä¼ ç»Ÿçš„åŸºäº session è®¤è¯ã€‚</p><p>ä½†æ˜¯è¿™ç§åŸºäº session çš„è®¤è¯ä½¿åº”ç”¨æœ¬èº«å¾ˆéš¾å¾—åˆ°æ‰©å±•ï¼Œéšç€ä¸åŒå®¢æˆ·ç«¯ç”¨æˆ·çš„å¢åŠ ï¼Œç‹¬ç«‹çš„æœåŠ¡å™¨å·²æ— æ³•æ‰¿è½½æ›´å¤šçš„ç”¨æˆ·ï¼Œè€Œè¿™æ—¶å€™åŸºäº session è®¤è¯åº”ç”¨çš„é—®é¢˜å°±ä¼šæš´éœ²å‡ºæ¥.</p><h4 id="åŸºäº-session-è®¤è¯æ‰€æ˜¾éœ²çš„é—®é¢˜"><a href="#åŸºäº-session-è®¤è¯æ‰€æ˜¾éœ²çš„é—®é¢˜" class="headerlink" title="åŸºäº session è®¤è¯æ‰€æ˜¾éœ²çš„é—®é¢˜"></a>åŸºäº session è®¤è¯æ‰€æ˜¾éœ²çš„é—®é¢˜</h4><p><strong>Session</strong>: æ¯ä¸ªç”¨æˆ·ç»è¿‡æˆ‘ä»¬çš„åº”ç”¨è®¤è¯ä¹‹åï¼Œæˆ‘ä»¬çš„åº”ç”¨éƒ½è¦åœ¨æœåŠ¡ç«¯åšä¸€æ¬¡è®°å½•ï¼Œä»¥æ–¹ä¾¿ç”¨æˆ·ä¸‹æ¬¡è¯·æ±‚çš„é‰´åˆ«ï¼Œé€šå¸¸è€Œè¨€ session éƒ½æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œéšç€è®¤è¯ç”¨æˆ·çš„å¢å¤šï¼ŒæœåŠ¡ç«¯çš„å¼€é”€ä¼šæ˜æ˜¾å¢å¤§ã€‚</p><p><strong>æ‰©å±•æ€§</strong>: ç”¨æˆ·è®¤è¯ä¹‹åï¼ŒæœåŠ¡ç«¯åšè®¤è¯è®°å½•ï¼Œå¦‚æœè®¤è¯çš„è®°å½•è¢«ä¿å­˜åœ¨å†…å­˜ä¸­çš„è¯ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·ä¸‹æ¬¡è¯·æ±‚è¿˜å¿…é¡»è¦è¯·æ±‚åœ¨è¿™å°æœåŠ¡å™¨ä¸Š, è¿™æ ·æ‰èƒ½æ‹¿åˆ°æˆæƒçš„èµ„æºï¼Œè¿™æ ·åœ¨åˆ†å¸ƒå¼çš„åº”ç”¨ä¸Šï¼Œç›¸åº”çš„é™åˆ¶äº†è´Ÿè½½å‡è¡¡å™¨çš„èƒ½åŠ›ã€‚è¿™ä¹Ÿæ„å‘³ç€é™åˆ¶äº†åº”ç”¨çš„æ‰©å±•èƒ½åŠ›ã€‚</p><p><strong>CSRF</strong>: å› ä¸ºæ˜¯åŸºäº cookie æ¥è¿›è¡Œç”¨æˆ·è¯†åˆ«çš„, cookie å¦‚æœè¢«æˆªè·ï¼Œç”¨æˆ·å°±ä¼šå¾ˆå®¹æ˜“å—åˆ°è·¨ç«™è¯·æ±‚ä¼ªé€ çš„æ”»å‡»ã€‚</p><h3 id="åŸºäº-token-çš„é‰´æƒæœºåˆ¶"><a href="#åŸºäº-token-çš„é‰´æƒæœºåˆ¶" class="headerlink" title="åŸºäº token çš„é‰´æƒæœºåˆ¶"></a>åŸºäº token çš„é‰´æƒæœºåˆ¶</h3><p>åŸºäº token çš„é‰´æƒæœºåˆ¶ç±»ä¼¼äº http åè®®ä¹Ÿæ˜¯æ— çŠ¶æ€çš„ï¼Œå®ƒä¸éœ€è¦åœ¨æœåŠ¡ç«¯å»ä¿ç•™ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯æˆ–è€…ä¼šè¯ä¿¡æ¯ã€‚è¿™å°±æ„å‘³ç€åŸºäº token è®¤è¯æœºåˆ¶çš„åº”ç”¨ä¸éœ€è¦å»è€ƒè™‘ç”¨æˆ·åœ¨å“ªä¸€å°æœåŠ¡å™¨ç™»å½•äº†ï¼Œè¿™å°±ä¸ºåº”ç”¨çš„æ‰©å±•æä¾›äº†ä¾¿åˆ©ã€‚</p><p>æµç¨‹ä¸Šæ˜¯è¿™æ ·çš„ï¼š</p><ul><li>ç”¨æˆ·ä½¿ç”¨ç”¨æˆ·åå¯†ç æ¥è¯·æ±‚æœåŠ¡å™¨</li><li>æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ç”¨æˆ·çš„ä¿¡æ¯</li><li>æœåŠ¡å™¨é€šè¿‡éªŒè¯å‘é€ç»™ç”¨æˆ·ä¸€ä¸ª token</li><li>å®¢æˆ·ç«¯å­˜å‚¨ tokenï¼Œå¹¶åœ¨æ¯æ¬¡è¯·æ±‚æ—¶é™„é€ä¸Šè¿™ä¸ª token å€¼</li><li>æœåŠ¡ç«¯éªŒè¯ token å€¼ï¼Œå¹¶è¿”å›æ•°æ®</li></ul><p>è¿™ä¸ª token å¿…é¡»è¦åœ¨æ¯æ¬¡è¯·æ±‚æ—¶ä¼ é€’ç»™æœåŠ¡ç«¯ï¼Œå®ƒåº”è¯¥ä¿å­˜åœ¨è¯·æ±‚å¤´é‡Œï¼Œ å¦å¤–ï¼ŒæœåŠ¡ç«¯è¦æ”¯æŒ<code>CORS(è·¨æ¥æºèµ„æºå…±äº«)</code>ç­–ç•¥ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨æœåŠ¡ç«¯è¿™ä¹ˆåšå°±å¯ä»¥äº†<code>Access-Control-Allow-Origin: *</code>ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å›åˆ° JWT çš„ä¸»é¢˜ä¸Šã€‚</p><h2 id="JWT-æ„æˆ"><a href="#JWT-æ„æˆ" class="headerlink" title="JWT æ„æˆ"></a>JWT æ„æˆ</h2><p>JWT æ˜¯ç”±ä¸‰æ®µä¿¡æ¯æ„æˆçš„ï¼Œå°†è¿™ä¸‰æ®µä¿¡æ¯æ–‡æœ¬ç”¨<code>.</code>é“¾æ¥ä¸€èµ·å°±æ„æˆäº† Jwt å­—ç¬¦ä¸²ã€‚å°±åƒè¿™æ ·:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ<br></code></pre></div></td></tr></table></figure><p>ç¬¬ä¸€éƒ¨åˆ†æˆ‘ä»¬ç§°å®ƒä¸ºå¤´éƒ¨ï¼ˆheader), ç¬¬äºŒéƒ¨åˆ†æˆ‘ä»¬ç§°å…¶ä¸ºè½½è·ï¼ˆpayload, ç±»ä¼¼äºé£æœºä¸Šæ‰¿è½½çš„ç‰©å“)ï¼Œç¬¬ä¸‰éƒ¨åˆ†æ˜¯ç­¾è¯ï¼ˆsignature).</p><h3 id="headerï¼ˆå¤´ä¿¡æ¯ï¼‰"><a href="#headerï¼ˆå¤´ä¿¡æ¯ï¼‰" class="headerlink" title="headerï¼ˆå¤´ä¿¡æ¯ï¼‰"></a>headerï¼ˆå¤´ä¿¡æ¯ï¼‰</h3><p>jwt çš„å¤´éƒ¨æ‰¿è½½ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼š</p><ul><li>ä»¤ç‰Œç±»å‹ï¼ˆå³ï¼šJWTï¼‰</li><li>æ•£åˆ—ç®—æ³•ï¼ˆHMACã€RSASSAã€RSASSA-PSSç­‰ï¼‰</li></ul><p>å®Œæ•´çš„å¤´éƒ¨å°±åƒä¸‹é¢è¿™æ ·çš„ JSONï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">&#123;<br>  <span class="hljs-string">&#x27;typ&#x27;</span>: <span class="hljs-string">&#x27;JWT&#x27;</span>,<br>  <span class="hljs-string">&#x27;alg&#x27;</span>: <span class="hljs-string">&#x27;HS256&#x27;</span><br>&#125;<br></code></pre></div></td></tr></table></figure><p>ç„¶åå°†å¤´éƒ¨è¿›è¡Œ base64 åŠ å¯†ï¼ˆè¯¥åŠ å¯†æ˜¯å¯ä»¥å¯¹ç§°è§£å¯†çš„), æ„æˆäº†ç¬¬ä¸€éƒ¨åˆ†.</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9<br></code></pre></div></td></tr></table></figure><h3 id="Payloadï¼ˆæœ‰æ•ˆè½½è·ï¼‰"><a href="#Payloadï¼ˆæœ‰æ•ˆè½½è·ï¼‰" class="headerlink" title="Payloadï¼ˆæœ‰æ•ˆè½½è·ï¼‰"></a>Payloadï¼ˆæœ‰æ•ˆè½½è·ï¼‰</h3><p>è½½è·å°±æ˜¯å­˜æ”¾æœ‰æ•ˆä¿¡æ¯çš„åœ°æ–¹ï¼Œå…¶ä¸­åŒ…å«claimsã€‚claimsæ˜¯å…³äºå®ä½“ï¼ˆå¸¸ç”¨çš„æ˜¯ç”¨æˆ·ä¿¡æ¯ï¼‰å’Œå…¶ä»–æ•°æ®çš„å£°æ˜ï¼Œclaimsæœ‰ä¸‰ç§ç±»å‹ï¼š</p><ul><li><strong>Registered claimsï¼ˆæ³¨å†Œçš„å£°æ˜ï¼‰ï¼š</strong> è¿™äº›æ˜¯ä¸€ç»„é¢„å®šä¹‰çš„claimsï¼Œéå¼ºåˆ¶æ€§çš„ï¼Œä½†æ˜¯æ¨èä½¿ç”¨ï¼Œ issï¼ˆå‘è¡Œäººï¼‰ï¼Œ expï¼ˆåˆ°æœŸæ—¶é—´ï¼‰ï¼Œ subï¼ˆä¸»é¢˜ï¼‰ï¼Œ audï¼ˆè§‚ä¼—ï¼‰ç­‰ï¼›</li><li><strong>Public claimsï¼ˆå…¬å…±çš„å£°æ˜ï¼‰:</strong> è‡ªå®šä¹‰claimsï¼Œæ³¨æ„ä¸è¦å’ŒJWTæ³¨å†Œè¡¨ä¸­å±æ€§å†²çªï¼Œ<a href="https://www.iana.org/assignments/jwt/jwt.xhtml">è¿™é‡Œå¯ä»¥æŸ¥çœ‹JWTæ ‡å‡†æ³¨å†Œè¡¨</a></li><li><strong>Private claimsï¼ˆç§æœ‰çš„å£°æ˜ï¼‰:</strong> è¿™äº›æ˜¯è‡ªå®šä¹‰çš„claimsï¼Œç”¨äºåœ¨åŒæ„ä½¿ç”¨è¿™äº›claimsçš„å„æ–¹ä¹‹é—´å…±äº«ä¿¡æ¯ï¼Œå®ƒä»¬æ—¢ä¸æ˜¯Registered claimsï¼Œä¹Ÿä¸æ˜¯Public claimsã€‚</li></ul><h4 id="æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜"><a href="#æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜" class="headerlink" title="æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜"></a>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜</h4><blockquote><p><strong>å»ºè®®ä½†ä¸å¼ºåˆ¶ä½¿ç”¨</strong></p></blockquote><ul><li><strong>iss</strong>: jwt ç­¾å‘è€…</li><li><strong>sub</strong>: jwt æ‰€é¢å‘çš„ç”¨æˆ·</li><li><strong>aud</strong>: æ¥æ”¶ jwt çš„ä¸€æ–¹</li><li><strong>exp</strong>: jwt çš„è¿‡æœŸæ—¶é—´ï¼Œè¿™ä¸ªè¿‡æœŸæ—¶é—´å¿…é¡»è¦å¤§äºç­¾å‘æ—¶é—´ï¼Œæ³¨æ„ï¼Œè¿™ä¸ªå€¼æ˜¯ç§’æ•°ï¼Œè€Œä¸æ˜¯æ¯«ç§’æ•°ã€‚</li><li><strong>nbf</strong>: å®šä¹‰åœ¨ä»€ä¹ˆæ—¶é—´ä¹‹å‰ï¼Œè¯¥ jwt éƒ½æ˜¯ä¸å¯ç”¨çš„.</li><li><strong>iat</strong>: jwt çš„ç­¾å‘æ—¶é—´</li><li><strong>jti</strong>: jwt çš„å”¯ä¸€èº«ä»½æ ‡è¯†ï¼Œä¸»è¦ç”¨æ¥ä½œä¸ºä¸€æ¬¡æ€§ token, ä»è€Œå›é¿é‡æ”¾æ”»å‡»ã€‚</li><li><strong>name</strong>ï¼šç”¨æˆ·å…¨å</li></ul><h4 id="å…¬å…±çš„å£°æ˜"><a href="#å…¬å…±çš„å£°æ˜" class="headerlink" title="å…¬å…±çš„å£°æ˜"></a>å…¬å…±çš„å£°æ˜</h4><p>å…¬å…±çš„å£°æ˜å¯ä»¥æ·»åŠ ä»»ä½•çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æ·»åŠ ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯æˆ–å…¶ä»–ä¸šåŠ¡éœ€è¦çš„å¿…è¦ä¿¡æ¯. ä½†ä¸å»ºè®®æ·»åŠ æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†åœ¨å®¢æˆ·ç«¯å¯è§£å¯†ã€‚</p><h4 id="ç§æœ‰çš„å£°æ˜"><a href="#ç§æœ‰çš„å£°æ˜" class="headerlink" title="ç§æœ‰çš„å£°æ˜"></a>ç§æœ‰çš„å£°æ˜</h4><p>ç§æœ‰å£°æ˜æ˜¯æä¾›è€…å’Œæ¶ˆè´¹è€…æ‰€å…±åŒå®šä¹‰çš„å£°æ˜ï¼Œä¸€èˆ¬ä¸å»ºè®®å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸º base64 æ˜¯å¯¹ç§°è§£å¯†çš„ï¼Œæ„å‘³ç€è¯¥éƒ¨åˆ†ä¿¡æ¯å¯ä»¥å½’ç±»ä¸ºæ˜æ–‡ä¿¡æ¯ã€‚</p><blockquote><p>åœ¨å®˜ç½‘æœ‰è¯¦ç»†çš„å±æ€§è¯´æ˜ï¼Œå°½é‡ä½¿ç”¨é‡Œé¢æåˆ°çš„ <em>Registered Claim Names</em>ï¼Œè¿™æ ·å¯ä»¥æé«˜é˜…è¯»æ€§</p></blockquote><p>è‡ªå®šä¹‰ä¸€ä¸ª payload:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">&#123;<br>  <span class="hljs-string">&quot;sub&quot;</span>: <span class="hljs-string">&quot;1234567890&quot;</span>,<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>,<br>  <span class="hljs-string">&quot;admin&quot;</span>: true<br>&#125;<br></code></pre></div></td></tr></table></figure><p>ç„¶åå°†å…¶è¿›è¡Œ base64 åŠ å¯†ï¼Œå¾—åˆ° Jwt çš„ç¬¬äºŒéƒ¨åˆ†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9<br></code></pre></div></td></tr></table></figure><h3 id="signature"><a href="#signature" class="headerlink" title="signature"></a>signature</h3><p>jwt çš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸€ä¸ªç­¾è¯ä¿¡æ¯ï¼Œè¿™ä¸ªç­¾è¯ä¿¡æ¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>header (base64 åçš„)</li><li>payload (base64 åçš„)</li><li>secret</li></ul><p>è¿™ä¸ªç­¾åçš„è®¡ç®—è·Ÿç¬¬ä¸€éƒ¨åˆ†ä¸­çš„ alg å±æ€§æœ‰å…³ï¼Œå‡å¦‚æ˜¯ HS256ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯éœ€è¦ä¿å­˜ä¸€ä¸ªç§é’¥ï¼Œæ¯”å¦‚ secret ã€‚ç„¶åï¼ŒæŠŠç¬¬ä¸€éƒ¨åˆ†å’Œç¬¬äºŒéƒ¨åˆ†ç”Ÿæˆçš„ä¸¤ä¸ªå­—ç¬¦ä¸²ç”¨ <code>.</code> è¿æ¥ä¹‹åï¼Œç”¨ HS256 è¿›è¡ŒåŠ ç›<code>secret</code>åŠ å¯†ï¼Œç„¶åå°±æ„æˆäº† jwt çš„ç¬¬ä¸‰éƒ¨åˆ†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ<br></code></pre></div></td></tr></table></figure><p>å°†è¿™ä¸‰éƒ¨åˆ†ç”¨<code>.</code>è¿æ¥æˆä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸², æ„æˆäº†æœ€ç»ˆçš„ jwt:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ<br></code></pre></div></td></tr></table></figure><blockquote><p><strong>æ³¨æ„ï¼šsecret æ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œjwt çš„ç­¾å‘ç”Ÿæˆä¹Ÿæ˜¯åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œsecret å°±æ˜¯ç”¨æ¥è¿›è¡Œ jwt çš„ç­¾å‘å’Œ jwt çš„éªŒè¯ï¼Œæ‰€ä»¥ï¼Œå®ƒå°±æ˜¯ä½ æœåŠ¡ç«¯çš„ç§é’¥ï¼Œåœ¨ä»»ä½•åœºæ™¯éƒ½ä¸åº”è¯¥æµéœ²å‡ºå»ã€‚ä¸€æ—¦å®¢æˆ·ç«¯å¾—çŸ¥è¿™ä¸ª secret, é‚£å°±æ„å‘³ç€å®¢æˆ·ç«¯æ˜¯å¯ä»¥è‡ªæˆ‘ç­¾å‘ jwt äº†ã€‚</strong></p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ul><li>å› ä¸º json çš„é€šç”¨æ€§ï¼Œæ‰€ä»¥ JWT æ˜¯å¯ä»¥è¿›è¡Œè·¨è¯­è¨€æ”¯æŒçš„ï¼Œåƒ JAVA,JavaScript,NodeJS,Python ç­‰å¾ˆå¤šè¯­è¨€éƒ½å¯ä»¥ä½¿ç”¨ã€‚</li><li>å› ä¸ºæœ‰äº† payload éƒ¨åˆ†ï¼Œæ‰€ä»¥ JWT å¯ä»¥åœ¨è‡ªèº«å­˜å‚¨ä¸€äº›å…¶ä»–ä¸šåŠ¡é€»è¾‘æ‰€å¿…è¦çš„éæ•æ„Ÿä¿¡æ¯ã€‚</li><li>ä¾¿äºä¼ è¾“ï¼Œjwt çš„æ„æˆéå¸¸ç®€å•ï¼Œå­—èŠ‚å ç”¨å¾ˆå°ï¼Œæ‰€ä»¥å®ƒæ˜¯éå¸¸ä¾¿äºä¼ è¾“çš„ã€‚</li><li>å®ƒä¸éœ€è¦åœ¨æœåŠ¡ç«¯ä¿å­˜ä¼šè¯ä¿¡æ¯, æ‰€ä»¥å®ƒæ˜“äºåº”ç”¨çš„æ‰©å±•ã€‚</li></ul><h3 id="å®‰å…¨ç›¸å…³"><a href="#å®‰å…¨ç›¸å…³" class="headerlink" title="å®‰å…¨ç›¸å…³"></a>å®‰å…¨ç›¸å…³</h3><ul><li>ä¸åº”è¯¥åœ¨ jwt çš„ payload éƒ¨åˆ†å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†æ˜¯å®¢æˆ·ç«¯å¯è§£å¯†çš„éƒ¨åˆ†ã€‚</li><li>ä¿æŠ¤å¥½ secret ç§é’¥ï¼Œè¯¥ç§é’¥éå¸¸é‡è¦ã€‚</li><li>å¦‚æœå¯ä»¥ï¼Œè¯·ä½¿ç”¨ https åè®®</li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JWT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueå¼•å…¥æœ¬åœ°èµ„æº</title>
      <link href="2020/10/23/vue-yin-ru-ben-di-zi-yuan/"/>
      <url>2020/10/23/vue-yin-ru-ben-di-zi-yuan/</url>
      
        <content type="html"><![CDATA[<p>ç®€å•ä»‹ç»ä¸€ä¸‹åœ¨Vueé¡¹ç›®ä¸­å¼•å…¥æœ¬åœ°èµ„æºçš„å®ç°æ–¹å¼: <a id="more"></a></p><h2 id="å¼•å…¥æœ¬åœ°å›¾ç‰‡"><a href="#å¼•å…¥æœ¬åœ°å›¾ç‰‡" class="headerlink" title="å¼•å…¥æœ¬åœ°å›¾ç‰‡"></a>å¼•å…¥æœ¬åœ°å›¾ç‰‡</h2><h3 id="ä½¿ç”¨-å¼•å…¥ï¼š"><a href="#ä½¿ç”¨-å¼•å…¥ï¼š" class="headerlink" title="ä½¿ç”¨ @å¼•å…¥ï¼š"></a>ä½¿ç”¨ <code>@</code>å¼•å…¥ï¼š</h3><p>è¿™æ˜¯åœ¨ç»„ä»¶å†…ç›´æ¥å¼•ç”¨å’Œæ™®é€šçš„ html æ–¹æ³•ä¸€æ ·ï¼Œä»£ç å¦‚ä¸‹</p><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;@/assets/test.png&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;test.png&quot;</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h3 id="ä½¿ç”¨-vue-çš„æ–¹æ³•å¼•å…¥ï¼š"><a href="#ä½¿ç”¨-vue-çš„æ–¹æ³•å¼•å…¥ï¼š" class="headerlink" title="ä½¿ç”¨ vue çš„æ–¹æ³•å¼•å…¥ï¼š"></a>ä½¿ç”¨ vue çš„æ–¹æ³•å¼•å…¥ï¼š</h3><p>è¿™æ˜¯å…¸å‹çš„ vue æ€æƒ³ï¼Œä½¿ç”¨æ•°æ®æ¥æ“çºµ domï¼› é¦–å…ˆåœ¨ç»„ä»¶å†…ä½¿ç”¨ import â€¦ from å¼•å…¥</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">import</span> imgUrl <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../assets/test.png&#x27;</span>;<br></code></pre></div></td></tr></table></figure><p>ç„¶ååœ¨ data é‡Œé¢å£°æ˜</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">data: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">return</span> &#123;<br>                  imgSrc: imgUrl<br>            &#125;<br>       &#125;<br></code></pre></div></td></tr></table></figure><p>æœ€åç»‘å®šæ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">&lt;img :src=<span class="hljs-string">&quot;imgSrc&quot;</span> alt=<span class="hljs-string">&quot;imgSrc&quot;</span>&gt;<br></code></pre></div></td></tr></table></figure><h2 id="å¼•å…¥æ ·å¼æ–‡ä»¶"><a href="#å¼•å…¥æ ·å¼æ–‡ä»¶" class="headerlink" title="å¼•å…¥æ ·å¼æ–‡ä»¶"></a>å¼•å…¥æ ·å¼æ–‡ä»¶</h2><p>åœ¨é¡¹ç›®çš„ <code>src</code> æ–‡ä»¶ä¸‹ï¼Œæ–°å»ºä¸€ä¸ª <code>style</code> æ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ <code>css</code> æ–‡ä»¶ã€‚</p><h3 id="å…¨å±€å¼•å…¥"><a href="#å…¨å±€å¼•å…¥" class="headerlink" title="å…¨å±€å¼•å…¥"></a>å…¨å±€å¼•å…¥</h3><p>å°†å¤–éƒ¨çš„ css æ–‡ä»¶æ”¾åˆ° style æ–‡ä»¶ä¸‹ï¼Œå¼•å…¥å¤–éƒ¨æ–‡ä»¶åªéœ€åœ¨ <code>main.js</code>æ–‡ä»¶ä¸­</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./style/reset.css&#x27;</span><br></code></pre></div></td></tr></table></figure><h3 id="å±€éƒ¨å¼•å…¥"><a href="#å±€éƒ¨å¼•å…¥" class="headerlink" title="å±€éƒ¨å¼•å…¥"></a>å±€éƒ¨å¼•å…¥</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">&lt;style scoped&gt;<br>  @<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../assets/iconfont/iconfont.css&#x27;</span>; <span class="hljs-comment">// è¿™ä¸ªåˆ†å·ä¸€å®šè¦å†™ï¼Œè¦ä¸ä¼šæŠ¥é”™</span><br>&lt;/style&gt;<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾ç‰‡ </tag>
            
            <tag> æ ·å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepin OS å®‰è£… NVIDIAé©±åŠ¨</title>
      <link href="2020/09/03/xi-tong-deepin-os-an-zhuang-nvidia-qu-dong/"/>
      <url>2020/09/03/xi-tong-deepin-os-an-zhuang-nvidia-qu-dong/</url>
      
        <content type="html"><![CDATA[<h2 id="å·¥å…·-åŸæ–™"><a href="#å·¥å…·-åŸæ–™" class="headerlink" title="å·¥å…· / åŸæ–™"></a>å·¥å…· / åŸæ–™</h2><ul><li>ä¸€å°ç”µè„‘</li><li>Deepin15.10.2 ç³»ç»Ÿ</li><li>N å¡å®˜ç½‘é©±åŠ¨</li></ul><h2 id="æ–¹æ³•-æ­¥éª¤"><a href="#æ–¹æ³•-æ­¥éª¤" class="headerlink" title="æ–¹æ³• / æ­¥éª¤"></a>æ–¹æ³• / æ­¥éª¤</h2><h3 id="ä¸€ã€é©±åŠ¨ä¸‹è½½"><a href="#ä¸€ã€é©±åŠ¨ä¸‹è½½" class="headerlink" title="ä¸€ã€é©±åŠ¨ä¸‹è½½"></a>ä¸€ã€é©±åŠ¨ä¸‹è½½</h3><p>æœ¬æ•™ç¨‹ä»¥ <code>GTX1050</code> ä¸ºä¾‹ï¼Œå‰å¾€ <a href="https://www.nvidia.cn/geforce/drivers/">N å¡å®˜ç½‘</a>ä¸‹è½½å¯¹åº”çš„é©±åŠ¨ :</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/20200826215347.png" alt="20200826215347"></p><p>ç„¶åé€‰æ‹©ä¸€ä¸ªä¸‹è½½å³å¯ï¼Œæˆ‘ä¸‹è½½çš„æ˜¯<code>NVIDIA-Linux-x86_64-430.26.run</code>ï¼Œæœ€å¥½ä¸è¦ä¸‹è½½æœ€æ–°çš„é©±åŠ¨ï¼Œæœ‰å¯èƒ½æœ‰ Bugã€‚(ä¸ºå¯æ–¹ä¾¿èµ·è§ï¼Œå»ºè®®æ›´æ”¹æ–‡ä»¶åä¸º <code>001.run</code>ï¼Œåƒä¸‡åˆ«å¿˜äº†<code>. run</code>ï¼Œè¯¥æ–‡ä»¶ååªæ˜¯ä¸ºäº†å¥½æ•²å…¥å‘½ä»¤ã€‚)</p><h3 id="äºŒã€ç¦ç”¨-nouveau-é©±åŠ¨"><a href="#äºŒã€ç¦ç”¨-nouveau-é©±åŠ¨" class="headerlink" title="äºŒã€ç¦ç”¨ nouveau é©±åŠ¨"></a>äºŒã€ç¦ç”¨ nouveau é©±åŠ¨</h3><ol><li><p>å¦‚æœä¹‹å‰åœ¨ Deepin ä¸­å®‰è£…è¿‡ NVIDIA é©±åŠ¨ï¼Œè¯·å°†å…¶å…¨éƒ¨åˆ é™¤ï¼š</p><p>åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤: <code>sudo apt autoremove  nvidia</code>(æ²¡æœ‰å¯ä»¥è·³è¿‡)</p></li><li><p>åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤:</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">sudo dedit /etc/modprobe.d/blacklist.conf<br></code></pre></div></td></tr></table></figure><p>ç„¶ååœ¨å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°æ–‡ä»¶ä¸­</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">blacklist nouveau<br><br>blacklist lbm-nouveau<br><br>options nouveau modeset=0<br><br><span class="hljs-built_in">alias</span> nouveau off<br><br><span class="hljs-built_in">alias</span> lbm-nouveau off<br></code></pre></div></td></tr></table></figure><p>  ä¿å­˜é€€å‡º</p></li><li><p>æ¥ä¸‹æ¥åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤:</p> <figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">sudo update-initramfs -u<br></code></pre></div></td></tr></table></figure></li><li><p>é‡å¯ç³»ç»Ÿï¼Œå†æ¬¡è¿›å…¥ç³»ç»Ÿï¼Œå¯èƒ½ä¼šå‘ç°åˆ†  è¾¨ç‡å¼‚å¸¸ã€‚(åˆ†è¾¨ç‡å¼‚å¸¸å°±è¯´æ˜æˆåŠŸç¦ç”¨ nouveau é©±åŠ¨é‡å¯ç³»ç»Ÿï¼Œé‡å¯åæŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆï¼Œ</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">lsmod |grep -i nouveau<br></code></pre></div></td></tr></table></figure></li></ol><h3 id="ä¸‰ã€NVIDIA-å®‰è£…è¿‡ç¨‹"><a href="#ä¸‰ã€NVIDIA-å®‰è£…è¿‡ç¨‹" class="headerlink" title="ä¸‰ã€NVIDIA å®‰è£…è¿‡ç¨‹"></a>ä¸‰ã€NVIDIA å®‰è£…è¿‡ç¨‹</h3><ol><li><p>ä½¿ç”¨å¿«æ·é”® <code>CTRL+ALT+F2</code> è¿›å…¥ç»ˆç«¯ï¼Œç™»å½•è‡ªå·±çš„è´¦å· (å°±æ˜¯ç”¨æˆ·åå’Œå¯†ç )ã€‚</p></li><li><p>æš‚æ—¶å…³é—­å›¾å½¢ç•Œé¢ï¼š</p> <figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">sudo service lightdm stop<br></code></pre></div></td></tr></table></figure></li><li><p>ç»™ä¸‹è½½å¥½çš„ nvidia é©±åŠ¨æ–‡ä»¶è®¾ç½®æ‰§è¡Œæƒé™ (æ–‡ä»¶é»˜è®¤åœ¨ <code>/home/ç”¨æˆ·å/Downloads/</code> ç›®å½•ä¸‹ï¼Œç”¨æˆ·åä¸ºä½ è‡ªå·±çš„ç”¨æˆ·åï¼Œå¦‚æœä½ æ”¹æ–‡ä»¶åäº†ï¼Œå°±å¡«ä½ æ”¹åçš„æ–‡ä»¶åï¼Œåƒä¸‡åˆ«å¡« <code>NVIDIA-Linux-x86_64-430.26.run</code>)ã€‚</p> <figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">sudo chmod a+x  /home/ç”¨æˆ·å/Downloads/NVIDIA-Linux-x86_64-430.26.run<br></code></pre></div></td></tr></table></figure></li><li><p>é©±åŠ¨å®‰è£…ï¼š</p> <figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">sudo  sh  /home / ç”¨æˆ·å / Downloads/NVIDIA-Linux-x86_64-430.26.run<br></code></pre></div></td></tr></table></figure><p> (ä¸€ç³»åˆ— yesï¼Œè¿˜æœ‰ä¸€ä¸ªç•Œé¢é€‰æ‹© <code>install and cover</code>ï¼Œæ„ä¸ºå®‰è£…å’Œè¦†ç›–ã€‚)</p></li><li><p>é‡å¯ç³»ç»Ÿï¼š</p> <figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">sudo reboot<br></code></pre></div></td></tr></table></figure><p> å®‰è£…å®Œæˆåé‡å¯ï¼Œæ‰§è¡Œ <code>nvidia-smi</code></p><p> <img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/20190922111147368.png" alt="20190922111147368"></p><p> å‘ç°è¿™æ—¶å€™å…¶å® NVIDIA çš„æ˜¾å¡å¹¶æ²¡æœ‰å·¥ä½œï¼Œ<strong>æ˜¾å­˜ä¸€ç‚¹éƒ½æ²¡å ç”¨</strong>ã€‚ä¸»è¦æ˜¯ç”±äºæˆ‘çš„ç”µè„‘æ˜¯åŒæ˜¾å¡ï¼Œè¿™æ—¶å€™å…¶å®ä¾ç„¶æ˜¯ intel é›†æˆæ˜¾å¡åœ¨å·¥ä½œï¼Œæ‰€ä»¥è¿˜è¦åšä¸‹é¢çš„å·¥ä½œã€‚</p></li></ol><h3 id="å››ã€è®¾ç½®é»˜è®¤-nvidia-æ˜¾å¡å·¥ä½œ"><a href="#å››ã€è®¾ç½®é»˜è®¤-nvidia-æ˜¾å¡å·¥ä½œ" class="headerlink" title="å››ã€è®¾ç½®é»˜è®¤ nvidia æ˜¾å¡å·¥ä½œ"></a>å››ã€è®¾ç½®é»˜è®¤ nvidia æ˜¾å¡å·¥ä½œ</h3><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">lspci | egrep <span class="hljs-string">&#x27;VGA|3D&#x27;</span><br></code></pre></div></td></tr></table></figure><p>æ‰§è¡Œä¸Šè¿°å‘½ä»¤è·å– <code>nvidia</code> æ˜¾å¡è®¾å¤‡ <code>BusID</code>ï¼Œä¾‹å¦‚: <code>01:00.0</code> å¡«å†™ <code>PCI:1:0:0</code>ï¼Œ</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/20190922111306609.png" alt="20190922111306609"></p><p> ç„¶åç¼–è¾‘ <code>/etc/X11/xorg.conf</code>ï¼Œæ³¨æ„å…¶ä¸­ PCI éƒ¨åˆ†å¡«å†™ <code>PCI:1:0:0</code>ï¼Œ</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">Section <span class="hljs-string">&quot;Module&quot;</span><br>    Load <span class="hljs-string">&quot;modesetting&quot;</span><br>EndSection<br><br>Section <span class="hljs-string">&quot;Device&quot;</span><br>    Identifier <span class="hljs-string">&quot;nvidia&quot;</span><br>    Driver <span class="hljs-string">&quot;nvidia&quot;</span><br>    BusID <span class="hljs-string">&quot;PCI:X:X:X&quot;</span>       <br>    Option <span class="hljs-string">&quot;AllowEmptyInitialConfiguration&quot;</span><br>EndSection<br></code></pre></div></td></tr></table></figure><p>ç¼–è¾‘<code>~/.xinitrc</code>ï¼Œ</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">xrandr --setprovideroutputsource modesetting NVIDIA-0<br>xrandr --auto<br>xrandr --dpi 96<br></code></pre></div></td></tr></table></figure><p>ç¼–è¾‘<code>/etc/lightdm/display_setup.sh</code>ï¼Œ</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh"><span class="hljs-meta">#!/bin/sh</span><br>xrandr --setprovideroutputsource modesetting NVIDIA-0<br>xrandr --auto<br>xrandr --dpi 96<br></code></pre></div></td></tr></table></figure><p>ç„¶åæ‰§è¡Œ</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">sudo chmod +x  /etc/lightdm/display_setup.sh<br></code></pre></div></td></tr></table></figure><p>ç¼–è¾‘ <code>/etc/lightdm/lightdm.conf</code> åœ¨ <code>[Seat:*]</code> è¡Œä¸‹æ·»åŠ ï¼Œ</p><figure class="highlight zsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zsh">display-setup-script=/etc/lightdm/display_setup.sh<br></code></pre></div></td></tr></table></figure><p>é‡å¯åŠ¨åï¼ŒæŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆï¼Œ<code>nvidia-smi</code></p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/20190922111512515.png" alt="20190922111512515"></p><p>å‘ç°å·²ç»ç”Ÿæ•ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç³»ç»Ÿ </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> deepin </tag>
            
            <tag> nvidia </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œé€šä¿¡-å¤šç§æ–¹å¼å®ç°å¹¶å‘ Web Server</title>
      <link href="2020/08/16/wang-luo-tong-xin-duo-chong-fang-shi-shi-xian-bing-fa-web-server/"/>
      <url>2020/08/16/wang-luo-tong-xin-duo-chong-fang-shi-shi-xian-bing-fa-web-server/</url>
      
        <content type="html"><![CDATA[<p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ <code>Python</code> æ¥å®ç°å¹¶å‘çš„ <code>Web Server</code>ï¼Œå…¶ä¸­é‡‡ç”¨äº†å¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹ã€åç¨‹ã€å•è¿›ç¨‹å•çº¿ç¨‹éé˜»å¡ã€<code>select</code>ã€<code>epoll</code>çš„æ–¹å¼ã€‚</p><h2 id="ä¸€ã€ä½¿ç”¨å­è¿›ç¨‹æ¥å®ç°å¹¶å‘-Web-Server"><a href="#ä¸€ã€ä½¿ç”¨å­è¿›ç¨‹æ¥å®ç°å¹¶å‘-Web-Server" class="headerlink" title="ä¸€ã€ä½¿ç”¨å­è¿›ç¨‹æ¥å®ç°å¹¶å‘ Web Server"></a>ä¸€ã€ä½¿ç”¨å­è¿›ç¨‹æ¥å®ç°å¹¶å‘ Web Server</h2><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">import</span> multiprocessing<br><br><span class="hljs-comment">#  æ³¨æ„ï¼š ä¸åŒçš„å®ç°æ–¹å¼ï¼Œä½†æ˜¯å¯¹è¯·æ±‚çš„å¤„ç†æ–¹å¼ç›¸åŒï¼Œåªæ˜¯ä¸»å‡½æ•°ä¸­å¯¹å®¢æˆ·ç«¯è¯·æ±‚çš„æ¥æ”¶æ–¹å¼ä¸åŒ </span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_request</span>(<span class="hljs-params">new_socket</span>):</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-comment"># æ¥æ”¶è¯·æ±‚</span><br>        recv_msg = new_socket.recv(<span class="hljs-number">1024</span>).decode(<span class="hljs-string">&quot;utf-8&quot;</span>)<br>        <span class="hljs-keyword">if</span> recv_msg == <span class="hljs-string">&quot;&quot;</span>:<br>            print(<span class="hljs-string">&quot;recv null&quot;</span>)<br>            new_socket.close()<br>            <span class="hljs-keyword">return</span><br><br>        <span class="hljs-comment"># ä»è¯·æ±‚ä¸­è§£æå‡ºURI</span><br>        recv_lines = recv_msg.splitlines()<br>        print(recv_lines)<br>        <span class="hljs-comment"># ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–å‡ºURI</span><br>        ret = re.match(<span class="hljs-string">r&quot;[^/]+(/[^ ]*)&quot;</span>, recv_lines[<span class="hljs-number">0</span>])<br>        <span class="hljs-keyword">if</span> ret:<br>            <span class="hljs-comment"># è·å–URIå­—ç¬¦ä¸²</span><br>            file_name = ret.group(<span class="hljs-number">1</span>)<br>            <span class="hljs-comment"># å¦‚æœURIæ˜¯/ï¼Œåˆ™é»˜è®¤è¿”å›index.htmlçš„å†…å®¹</span><br>            <span class="hljs-keyword">if</span> file_name == <span class="hljs-string">&quot;/&quot;</span>:<br>                file_name = <span class="hljs-string">&quot;/index.html&quot;</span><br><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-comment"># æ ¹æ®è¯·æ±‚çš„URIï¼Œè¯»å–ç›¸åº”çš„æ–‡ä»¶</span><br>            fp = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;.&quot;</span> + file_name, <span class="hljs-string">&quot;rb&quot;</span>)<br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-comment"># æ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œå“åº”404</span><br>            response_msg = <span class="hljs-string">&quot;HTTP/1.1 404 NOT FOUND\r\n&quot;</span><br>            response_msg += <span class="hljs-string">&quot;\r\n&quot;</span><br>            response_msg += <span class="hljs-string">&quot;&lt;h1&gt;----file not found----&lt;/h1&gt;&quot;</span><br>            new_socket.send(response_msg.encode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>        <span class="hljs-keyword">else</span>:<br>            html_content = fp.read()<br>            fp.close()<br>            response_body = html_content<br><br>            <span class="hljs-comment"># å“åº”æ­£ç¡® 200 OK</span><br>            response_header = <span class="hljs-string">&quot;HTTP/1.1 200 OK\r\n&quot;</span><br>            response_header += <span class="hljs-string">&quot;Content-Length:%d\r\n&quot;</span> % <span class="hljs-built_in">len</span>(response_body)<br>            response_header += <span class="hljs-string">&quot;\r\n&quot;</span><br><br>            response = response_header.encode(<span class="hljs-string">&quot;utf-8&quot;</span>) + response_body<br><br>            <span class="hljs-comment"># è¿”å›å“åº”æ•°æ®</span><br>            new_socket.send(response)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-comment"># åˆ›å»ºTCP SOCKETå®ä¾‹</span><br>    tcp_server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>    <span class="hljs-comment"># # è®¾ç½®é‡ç”¨åœ°å€</span><br>    <span class="hljs-comment"># tcp_server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)</span><br>    <span class="hljs-comment"># ç»‘å®šåœ°å€ï¼ˆé»˜è®¤æœ¬æœºIPï¼‰å’Œç«¯å£</span><br>    tcp_server_socket.bind((<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">7890</span>))<br>    <span class="hljs-comment"># ç›‘å¬</span><br>    tcp_server_socket.listen(<span class="hljs-number">128</span>)<br>    <span class="hljs-comment"># å¾ªç¯æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        new_socket, client_addr = tcp_server_socket.accept()<br>        <span class="hljs-comment"># å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚</span><br>        sub_p = multiprocessing.Process(target=handle_request, args=(new_socket,))<br>        sub_p.start()<br>        <span class="hljs-comment"># è¿™é‡Œè¦å…³é—­çˆ¶è¿›ç¨‹ä¸­çš„new_socketï¼Œå› ä¸ºåˆ›å»ºå­è¿›ç¨‹ä¼šå¤åˆ¶ä¸€ä»½new_socketç»™å­è¿›ç¨‹</span><br>        new_socket.close()<br><br>    <span class="hljs-comment"># å…³é—­æ•´ä¸ªSOCKET</span><br>    tcp_server_socket.close()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></div></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨è¿›ç¨‹æ¥å®ç°å¹¶å‘çš„ Web Serverï¼Œä¹Ÿå°±æ˜¯å°† <code>accept</code> åˆ° <code>new_socket</code> ä¼ é€’ç»™å­è¿›ç¨‹å»å¤„ç†ï¼Œå¤„ç†å‡½æ•°è¿˜æ˜¯ <code>handle_request</code>ã€‚</p><p>ä½†æ˜¯è¿™é‡Œæ³¨æ„ï¼Œå­è¿›ç¨‹ä¼šä»çˆ¶è¿›ç¨‹ä¸­å°†æ‰€æœ‰çš„å˜é‡<strong>è¿›è¡Œæ‹·è´</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ä¸­<strong>å„æœ‰ä¸€ä»½ new_socket</strong>ï¼Œè€Œåœ¨ <code>Linux</code> ä¸‹ï¼Œ<code>socket</code> å¯¹åº”çš„ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œè¿™ä¸¤ä¸ª <code>new_socket</code> å®é™…ä¸Šæ˜¯æŒ‡å‘åŒä¸€ä¸ª <code>fd</code> çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å°† <code>new_socket</code> äº¤ç»™å­è¿›ç¨‹åï¼Œçˆ¶è¿›ç¨‹å°±å¯ä»¥é©¬ä¸Šå…³é—­è‡ªå·±çš„ <code>new_socket</code> äº†ï¼Œå½“å­è¿›ç¨‹æœåŠ¡å®Œæ¯•åï¼Œå…³é—­å­è¿›ç¨‹ä¸­çš„ <code>new_socket</code>ï¼Œè¿™æ ·<strong>å¯¹åº”çš„ <code>FD</code> æ‰ä¼šæ­£çœŸå…³é—­ï¼Œæ­¤æ—¶æ‰ä¼šè§¦å‘å››æ¬¡æŒ¥æ‰‹ã€‚æ‰€ä»¥çˆ¶è¿›ç¨‹ä»£ç ä¸­çš„ <code>new_socket.close()</code> éå¸¸é‡è¦ã€‚</strong></p><h2 id="äºŒã€ä½¿ç”¨çº¿ç¨‹æ¥å®ç°å¹¶å‘-Web-Server"><a href="#äºŒã€ä½¿ç”¨çº¿ç¨‹æ¥å®ç°å¹¶å‘-Web-Server" class="headerlink" title="äºŒã€ä½¿ç”¨çº¿ç¨‹æ¥å®ç°å¹¶å‘ Web Server"></a>äºŒã€ä½¿ç”¨çº¿ç¨‹æ¥å®ç°å¹¶å‘ Web Server</h2><p>åœ¨ç¬¬ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿›ç¨‹æ¥å®ç°å¹¶å‘ï¼Œä½†æ˜¯è¿›ç¨‹å¯¹èµ„æºæ¶ˆè€—å¾ˆå¤§ï¼Œä¸€èˆ¬ä¸æ¨èä½¿ç”¨ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çº¿ç¨‹æ¥å®ç°å¹¶å‘ï¼Œå¾ˆç®€å•ï¼Œæˆ‘ä»¬å°† <code>multiprocessing.Process</code> æ›¿æ¢ä¸º <code>threaing.Thread</code> å°±å¯ä»¥äº†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">from</span> web_server <span class="hljs-keyword">import</span> handle_request<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-comment"># åˆ›å»ºTCP SOCKETå®ä¾‹</span><br>    tcp_server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>    <span class="hljs-comment"># è®¾ç½®é‡ç”¨åœ°å€</span><br>    tcp_server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># ç»‘å®šåœ°å€ï¼ˆé»˜è®¤æœ¬æœºIPï¼‰å’Œç«¯å£</span><br>    tcp_server_socket.bind((<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">7890</span>))<br>    <span class="hljs-comment"># ç›‘å¬</span><br>    tcp_server_socket.listen(<span class="hljs-number">128</span>)<br>    <span class="hljs-comment"># å¾ªç¯æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        new_socket, client_addr = tcp_server_socket.accept()<br>        <span class="hljs-comment"># å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚</span><br>        t = threading.Thread(target=handle_request, args=(new_socket,))<br>        t.start()<br><br>    <span class="hljs-comment"># å…³é—­æ•´ä¸ªSOCKET</span><br>    tcp_server_socket.close()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></div></td></tr></table></figure><p>æˆ‘ä»¬å‘ç°ï¼Œé™¤äº†å°†å­è¿›ç¨‹çš„åˆ›å»ºè¿‡ç¨‹æ›¿æ¢æˆäº†çº¿ç¨‹çš„åˆ›å»ºè¿‡ç¨‹ï¼Œåé¢çš„ <code>new_socket.close(</code>) ä¹Ÿè¢«åˆ é™¤äº†ï¼Œè¿™æ˜¯å› ä¸ºçº¿ç¨‹æ˜¯å…¬ç”¨è¿›ç¨‹èµ„æºçš„ï¼Œ<code>new_socket</code> ä¸ä¼šè¢«å¤åˆ¶ï¼Œæ‰€ä»¥ <code>socket</code> å¯¹åº”çš„ FDï¼Œåªæœ‰ä¸€ä¸ª new_socket æŒ‡å‘ä»–ã€‚</p><p>å¦‚æœæ­¤æ—¶æˆ‘ä»¬ä»ç„¶åœ¨è¿™é‡Œå…³é—­ <code>new_socket</code>ï¼Œé‚£ä¹ˆåœ¨çº¿ç¨‹å†ä½¿ç”¨ <code>new_socket</code> å°±ä¼šæŠ¥é”™ã€‚å¦‚ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">Exception <span class="hljs-keyword">in</span> thread Thread-<span class="hljs-number">1</span>:<br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py&quot;</span>, line <span class="hljs-number">926</span>, <span class="hljs-keyword">in</span> _bootstrap_inner<br>    self.run()<br>  File <span class="hljs-string">&quot;/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py&quot;</span>, line <span class="hljs-number">870</span>, <span class="hljs-keyword">in</span> run<br>    self._target(*self._args, **self._kwargs)<br>  File <span class="hljs-string">&quot;/Users/mac/PycharmProjects/Month2/web_server.py&quot;</span>, line <span class="hljs-number">9</span>, <span class="hljs-keyword">in</span> handle_request<br>    recv_msg = new_socket.recv(<span class="hljs-number">1024</span>).decode(<span class="hljs-string">&quot;utf-8&quot;</span>)<br>OSError: [Errno <span class="hljs-number">9</span>] Bad file descriptor<br></code></pre></div></td></tr></table></figure><h2 id="ä¸‰ã€ä½¿ç”¨åç¨‹æ¥å®ç°å¹¶å‘-Web-Server"><a href="#ä¸‰ã€ä½¿ç”¨åç¨‹æ¥å®ç°å¹¶å‘-Web-Server" class="headerlink" title="ä¸‰ã€ä½¿ç”¨åç¨‹æ¥å®ç°å¹¶å‘ Web Server"></a>ä¸‰ã€ä½¿ç”¨åç¨‹æ¥å®ç°å¹¶å‘ Web Server</h2><p>ä½¿ç”¨è¿›ç¨‹å’Œçº¿ç¨‹æ¥å®ç°çš„å¹¶å‘ Web Serverï¼Œå½“å¹¶å‘è®¿é—®é‡å¾ˆå¤§æ—¶ï¼Œèµ„æºæ¶ˆè€—éƒ½å¾ˆé«˜ã€‚æ‰€ä»¥è¿™é‡Œä½¿ç”¨åç¨‹æ¥å®ç°å¹¶å‘æœåŠ¡å™¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">import</span> gevent<br><span class="hljs-keyword">from</span> gevent <span class="hljs-keyword">import</span> monkey<br>monkey.patch_all()<br><span class="hljs-keyword">from</span> web_server <span class="hljs-keyword">import</span> handle_request<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-comment"># åˆ›å»ºTCP SOCKETå®ä¾‹</span><br>    tcp_server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>    <span class="hljs-comment"># # è®¾ç½®é‡ç”¨åœ°å€</span><br>    <span class="hljs-comment"># tcp_server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)</span><br>    <span class="hljs-comment"># ç»‘å®šåœ°å€ï¼ˆé»˜è®¤æœ¬æœºIPï¼‰å’Œç«¯å£</span><br>    tcp_server_socket.bind((<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">7890</span>))<br>    <span class="hljs-comment"># ç›‘å¬</span><br>    tcp_server_socket.listen(<span class="hljs-number">128</span>)<br>    <span class="hljs-comment"># å¾ªç¯æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        new_socket, client_addr = tcp_server_socket.accept()<br>        <span class="hljs-comment"># å¯åŠ¨ä¸€ä¸ªåç¨‹æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚</span><br>        gevent.spawn(handle_request, new_socket)<br><br>    <span class="hljs-comment"># å…³é—­æ•´ä¸ªSOCKET</span><br>    tcp_server_socket.close()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></div></td></tr></table></figure><p>ä½¿ç”¨ gevent æ¥å®ç°åç¨‹ï¼Œå¹¶å‘å¤„ç†è¯·æ±‚ã€‚</p><h2 id="å››ã€ä½¿ç”¨å•è¿›ç¨‹å•çº¿ç¨‹éé˜»å¡æ¨¡æ‹Ÿå®ç°é«˜å¹¶å‘HTTPæœåŠ¡å™¨"><a href="#å››ã€ä½¿ç”¨å•è¿›ç¨‹å•çº¿ç¨‹éé˜»å¡æ¨¡æ‹Ÿå®ç°é«˜å¹¶å‘HTTPæœåŠ¡å™¨" class="headerlink" title="å››ã€ä½¿ç”¨å•è¿›ç¨‹å•çº¿ç¨‹éé˜»å¡æ¨¡æ‹Ÿå®ç°é«˜å¹¶å‘HTTPæœåŠ¡å™¨"></a>å››ã€ä½¿ç”¨å•è¿›ç¨‹å•çº¿ç¨‹éé˜»å¡æ¨¡æ‹Ÿå®ç°é«˜å¹¶å‘HTTPæœåŠ¡å™¨</h2><p>å‰é¢æˆ‘ä»¬ä½¿ç”¨çš„å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹æ¥å¤„ç†å¹¶å‘ï¼Œæ˜¯å› ä¸º <code>socket.recv()</code> æ˜¯é˜»å¡çš„ï¼Œæ¯æ¬¡ <code>accept</code> ä¸€ä¸ªè¿æ¥ï¼Œå°±éœ€è¦äº¤ç»™ä¸€ä¸ªæ–°çš„è¿›ç¨‹æˆ–çº¿ç¨‹å»å¤„ç†ï¼Œä»è€Œä¸å½±å“ä¸‹ä¸€ä¸ª <code>socket</code> è¿æ¥ã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡å•è¿›ç¨‹å•çº¿ç¨‹å’Œéé˜»å¡çš„æ–¹å¼æ¥å®Œæˆå¹¶å‘ <code>socket</code> çš„å¤„ç†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> re<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_request</span>(<span class="hljs-params">new_socket, recv_msg</span>):</span><br>    <span class="hljs-comment"># ä»è¯·æ±‚ä¸­è§£æå‡ºURI</span><br>    recv_lines = recv_msg.splitlines()<br><br>    <span class="hljs-comment"># ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–å‡ºURI</span><br>    ret = re.match(<span class="hljs-string">r&quot;[^/]+(/[^ ]*)&quot;</span>, recv_lines[<span class="hljs-number">0</span>])<br><br>    <span class="hljs-keyword">if</span> ret:<br>        <span class="hljs-comment"># è·å–URIå­—ç¬¦ä¸²</span><br>        file_name = ret.group(<span class="hljs-number">1</span>)<br>        <span class="hljs-comment"># å¦‚æœURIæ˜¯/ï¼Œåˆ™é»˜è®¤è¿”å›index.htmlçš„å†…å®¹</span><br>        <span class="hljs-keyword">if</span> file_name == <span class="hljs-string">&quot;/&quot;</span>:<br>            file_name = <span class="hljs-string">&quot;/index.html&quot;</span><br><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># æ ¹æ®è¯·æ±‚çš„URIï¼Œè¯»å–ç›¸åº”çš„æ–‡ä»¶</span><br>        fp = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;.&quot;</span> + file_name, <span class="hljs-string">&quot;rb&quot;</span>)<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-comment"># æ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œå“åº”404</span><br>        response_msg = <span class="hljs-string">&quot;HTTP/1.1 404 NOT FOUND\r\n&quot;</span><br>        response_msg += <span class="hljs-string">&quot;\r\n&quot;</span><br>        response_msg += <span class="hljs-string">&quot;&lt;h1&gt;----file not found----&lt;/h1&gt;&quot;</span><br>        new_socket.send(response_msg.encode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>    <span class="hljs-keyword">else</span>:<br>        html_content = fp.read()<br>        fp.close()<br><br>        response_body = html_content<br><br>        <span class="hljs-comment"># å“åº”æ­£ç¡® 200 OK</span><br>        response_header = <span class="hljs-string">&quot;HTTP/1.1 200 OK\r\n&quot;</span><br>        response_header += <span class="hljs-string">&quot;Content-Length:%d\r\n&quot;</span> % <span class="hljs-built_in">len</span>(response_body)<br>        response_header += <span class="hljs-string">&quot;\r\n&quot;</span><br><br>        response = response_header.encode(<span class="hljs-string">&quot;utf-8&quot;</span>) + response_body<br><br>        <span class="hljs-comment"># è¿”å›å“åº”æ•°æ®</span><br>        new_socket.send(response)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-comment"># åˆ›å»ºTCP SOCKETå®ä¾‹</span><br>    tcp_server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>    <span class="hljs-comment"># è®¾ç½®é‡ç”¨åœ°å€</span><br>    tcp_server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># ç»‘å®šåœ°å€ï¼ˆé»˜è®¤æœ¬æœºIPï¼‰å’Œç«¯å£</span><br>    tcp_server_socket.bind((<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">7890</span>))<br>    <span class="hljs-comment"># ç›‘å¬</span><br>    tcp_server_socket.listen(<span class="hljs-number">128</span>)<br><br>    <span class="hljs-comment"># å°†acceptè®¾ç½®ä¸ºéé˜»å¡,è¿™é‡Œè®¾ç½®ä¸€æ¬¡ï¼Œåé¢ä¸ç®¡è°ƒå¤šå°‘æ¬¡acceptéƒ½æ˜¯éé˜»å¡çš„</span><br>    tcp_server_socket.setblocking(<span class="hljs-literal">False</span>)<br>    <span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªåˆ—è¡¨ï¼Œå°†æ¯æ¬¡è¿æ¥çš„socketåŠ å…¥è¯¥åˆ—è¡¨</span><br>    client_socket_list = <span class="hljs-built_in">list</span>()<br>    fd_to_addr = &#123;&#125;<br><br>    <span class="hljs-comment"># å¾ªç¯æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        time.sleep(<span class="hljs-number">0.5</span>)<br><br>        <span class="hljs-keyword">try</span>:<br>            new_socket, client_addr = tcp_server_socket.accept()<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> ret:<br>            <span class="hljs-comment"># å½“æ²¡æœ‰å®¢æˆ·ç«¯é“¾æ¥çš„æ—¶å€™ï¼ŒæŠ›å‡ºå¼‚å¸¸</span><br>            <span class="hljs-keyword">pass</span><br>        <span class="hljs-keyword">else</span>:<br>            print(<span class="hljs-string">&quot;å®¢æˆ·ç«¯&#123;&#125; OnLineã€‚ã€‚ã€‚ã€‚&quot;</span>.<span class="hljs-built_in">format</span>(client_addr))<br>            <span class="hljs-comment"># å½“æœ‰å®¢æˆ·ç«¯é“¾æ¥çš„æ—¶å€™</span><br>            <span class="hljs-comment"># å°†new_socket.recv()è®¾ç½®ä¸ºéé˜»å¡çš„</span><br>            new_socket.setblocking(<span class="hljs-literal">False</span>)<br>            <span class="hljs-comment"># å°†new_socketåŠ å…¥åˆ—è¡¨</span><br>            client_socket_list.append(new_socket)<br><br>            <span class="hljs-comment"># å°† conn å’Œ addr ä¿¡æ¯åˆ†åˆ«ä¿å­˜èµ·æ¥</span><br>            fd_to_addr[new_socket.fileno()] = client_addr<br><br>        <span class="hljs-comment"># éå†socketåˆ—è¡¨ï¼Œæ£€æŸ¥æ¯ä¸€ä¸ªsocketæ˜¯å¦æœ‰æ•°æ®åˆ°è¾¾ï¼Œæˆ–è€…å®¢æˆ·ç«¯æ˜¯å¦æ–­å¼€</span><br>        <span class="hljs-keyword">for</span> client_socket <span class="hljs-keyword">in</span> client_socket_list:<br>            <span class="hljs-keyword">try</span>:<br>                recv_content = client_socket.recv(<span class="hljs-number">1024</span>).decode(<span class="hljs-string">&quot;utf-8&quot;</span>)<br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> ret:<br>                <span class="hljs-comment"># å¼‚å¸¸ï¼Œè¡¨ç¤ºè¯¥å®¢æˆ·ç«¯æ²¡æœ‰å‘æ•°æ®è¿‡æ¥</span><br>                <span class="hljs-keyword">pass</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-comment"># æ­£å¸¸ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯å‘äº†æ•°æ®ï¼Œæˆ–è€…å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ï¼ˆæ–­å¼€è¿æ¥ä¼šå¯¼è‡´recvæ­£å¸¸è¿”å›ï¼‰</span><br>                <span class="hljs-keyword">if</span> recv_content:<br>                    <span class="hljs-comment"># æœ‰æ•°æ®ï¼Œè°ƒç”¨è¯·æ±‚å¤„ç†ä»£ç </span><br>                    handle_request(client_socket, recv_content)<br>                <span class="hljs-keyword">else</span>:<br>                    print(<span class="hljs-string">&quot;å®¢æˆ·ç«¯&#123;&#125;OffLineã€‚ã€‚ã€‚ã€‚&quot;</span>.<span class="hljs-built_in">format</span>(fd_to_addr[client_socket.fileno()]))<br>                    <span class="hljs-comment"># recvæ­£å¸¸è¿”å›ï¼Œä¸”æ•°æ®ä¸ºç©ºï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯æ–­å¼€äº†é“¾æ¥</span><br>                    <span class="hljs-comment"># å°†è¯¥socketè¸¢å‡ºåˆ—è¡¨</span><br>                    client_socket_list.remove(client_socket)<br>                    <span class="hljs-comment"># æœåŠ¡å™¨ä¹Ÿå…³é—­è¿æ¥</span><br>                    client_socket.close()<br><br>    <span class="hljs-comment"># å…³é—­æ•´ä¸ªSOCKET</span><br>    tcp_server_socket.close()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></div></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸»è¦æ˜¯è¯´æ˜åœ¨å•è¿›ç¨‹å•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œå¦‚ä½•å°† <code>accept</code> å’Œ <code>recv</code> åˆ†å¼€ï¼Œå¹¶ä¸”éƒ½ç”¨éé˜»å¡çš„æ–¹å¼æ¥å¤„ç†ï¼Œè¿™æ ·æ¯æ¬¡æŸ¥çœ‹æ˜¯å¦æœ‰å®¢æˆ·ç«¯é“¾æ¥è¿›æ¥çš„æ—¶å€™ï¼Œéƒ½ä¼šå»æ£€æŸ¥æ‰€æœ‰å·²é“¾æ¥çš„ <code>socket</code> æ˜¯å¦æœ‰æ•°æ®å‘é€è¿‡æ¥ã€‚</p><p>åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å•è¿›ç¨‹å•çº¿ç¨‹æ¨¡æ‹Ÿäº†å¹¶å‘å¤„ç† <code>socket</code> è¿æ¥çš„åŠŸèƒ½ï¼Œä½†è¿™äº› <code>socket</code> è¿æ¥çš„å¤„ç†ä¸æ˜¯å¹¶è¡Œçš„ã€‚å½“ä¸€ä¸ª <code>socket</code> å¤„ç†æ•°æ®æ—¶é—´æ¯”è¾ƒé•¿æ—¶ï¼Œä¹Ÿä¼š<strong>é€ æˆæ•´ä¸ªç¨‹åºçš„ç­‰å¾…ã€‚</strong></p><p>ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¯·æ±‚å¤„ç†å‡½æ•° <code>handle_request</code> ä¸­ï¼Œæˆ‘ä»¬å°†è¯·æ±‚å†…å®¹ä½œä¸ºå‚æ•°ä¸€å¹¶ä¼ é€’è¿›å»ã€‚ç„¶ååœ¨è¿”å› <code>200 OK</code> çš„æ—¶å€™ï¼Œåœ¨å“åº”å¤´ä¸­æ·»åŠ äº† <code>Content-Length</code> å­—æ®µï¼Œè¿™ä¸ªå­—æ®µç”¨äºå‘Šè¯‰å®¢æˆ·ç«¯ï¼Œæ­¤æ¬¡å‘é€çš„å“åº”ä½“æœ‰å¤šå¤§ã€‚å½“å®¢æˆ·ç«¯æ”¶å®ŒæŒ‡å®šå¤§å°çš„æ•°æ®ï¼Œå°±è®¤ä¸ºè¿™æ¬¡æœåŠ¡å™¨å‘é€çš„æ•°æ®å·²ç»å‘é€å®Œæ¯•ã€‚ä»–å°±å¯ä»¥ç»§ç»­å‘é€ä¸‹ä¸€ä¸ªæ–°çš„è¯·æ±‚ã€‚</p><p>åœ¨ <code>handle_request</code> ä¸­å¯ä»¥çœ‹åˆ°ï¼Œ<code>new_socket.close()</code> å·²ç»è¢«åˆ é™¤ï¼Œä¹Ÿå°±æ˜¯è¯´æœåŠ¡å™¨ä¸ä¼šè‡ªåŠ¨å…³é—­è¿æ¥ï¼Œè€Œç›´åˆ°å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ä¹‹å‰ï¼ŒæœåŠ¡å™¨éƒ½ä¿æŒ<code>é•¿è¿æ¥</code>ã€‚æ–­å¼€è¿æ¥ç”±å®¢æˆ·ç«¯æ¥å‘èµ·ã€‚</p><h2 id="äº”ã€ä½¿ç”¨selectå®ç°é«˜å¹¶å‘HTTPæœåŠ¡å™¨"><a href="#äº”ã€ä½¿ç”¨selectå®ç°é«˜å¹¶å‘HTTPæœåŠ¡å™¨" class="headerlink" title="äº”ã€ä½¿ç”¨selectå®ç°é«˜å¹¶å‘HTTPæœåŠ¡å™¨"></a>äº”ã€ä½¿ç”¨selectå®ç°é«˜å¹¶å‘HTTPæœåŠ¡å™¨</h2><p>åœ¨ç¼–å†™äº†å•è¿›ç¨‹éé˜»å¡å¼æœåŠ¡å™¨ä¹‹åï¼Œè¿˜æœ‰å¦å¤–ç§å†™æœåŠ¡å™¨çš„æ–¹æ³•ï¼Œä¾¿æ˜¯åˆ©ç”¨<code>select</code>ã€‚<br><code>select</code>æ˜¯å¯¹åº•å±‚æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªè®¿é—®æ“ä½œï¼Œå› è€Œæ•ˆç‡è¾ƒé«˜ï¼Œæ¯”å•è¿›ç¨‹éé˜»å¡ä¸­çš„<code>for</code>å¾ªç¯éå†æ•ˆç‡è¦é«˜ï¼Œå¯ä»¥åˆ©ç”¨<code>select</code>è¿›è¡Œé€‰æ‹©ï¼Œé€‰æ‹©å‡ºæ¥å¯ä»¥è¯»å–ä¿¡æ¯çš„å¥—æ¥å­—ã€å¯ä»¥å‘é€ä¿¡æ¯çš„å¥—æ¥å­—ã€ä»¥åŠäº§ç”Ÿçš„å¼‚å¸¸ï¼ˆåˆ†åˆ«æ˜¯ä¸‰ä¸ªè¿”å›å€¼ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">readable, writable, exceptionable = select([], [], [])<br></code></pre></div></td></tr></table></figure><p>ä»¥ä¸Šå³ä¸º<code>select</code>çš„ä½¿ç”¨æ–¹æ³•ï¼Œç¨‹åºæ‰§è¡Œåˆ°è¯¥è¯­å¥åè¿›è¡Œé˜»å¡ç­‰å¾…ï¼Œæ¥æ”¶åˆ°æ–°çš„å¥—æ¥å­—ä¹‹åä¾¿è§£é˜»å¡ã€‚<br>ç¨‹åºæ€è·¯ä¾¿æ˜¯åˆ©ç”¨<code>select</code>æ£€æµ‹ã€é€‰æ‹©å‡ºèƒ½è¯»å–çš„å¥—æ¥å­—ï¼ˆåŒ…æ‹¬æœåŠ¡å™¨å¥—æ¥å­—ã€å®¢æˆ·ç«¯å¥—æ¥å­—ï¼‰ï¼Œå°†æ¥æ”¶åˆ°æ¶ˆæ¯çš„å®¢æˆ·ç«¯å¥—æ¥å­—å­˜å…¥åˆ—è¡¨ï¼ˆåˆ—è¡¨ä¸­æœ¬æ¥åªæœ‰æœåŠ¡å™¨å¥—æ¥å­—ï¼‰ï¼Œä¹‹åè¿›è¡Œ<code>for</code>å¾ªç¯éå†ï¼Œè¯»å–å¥—æ¥å­—ä¸­çš„ä¿¡æ¯æˆ–è€…è¿›è¡Œä¸å®¢æˆ·ç«¯çš„è¿æ¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> socket <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">from</span> select <span class="hljs-keyword">import</span> select<br><span class="hljs-keyword">from</span> web_server <span class="hljs-keyword">import</span> handle_request<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-comment"># åˆ›å»ºå¥—æ¥å­—</span><br>    server_socket = socket(AF_INET, SOCK_STREAM)<br><br>    <span class="hljs-comment"># è®¾ç½®å¯ä»¥é‡å¤ä½¿ç”¨ç»‘å®šçš„ä¿¡æ¯</span><br>    server_socket.setsockopt(SOL_SOCKET, SO_REUSEADDR, <span class="hljs-number">1</span>)<br><br>    <span class="hljs-comment"># ç»‘å®šæœ¬æœºä¿¡æ¯</span><br>    server_socket.bind((<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">8080</span>))<br><br>    <span class="hljs-comment"># ä¸»åŠ¨ç›‘å¬</span><br>    server_socket.listen(<span class="hljs-number">128</span>)<br>    <br>    <span class="hljs-comment"># å°†acceptè®¾ç½®ä¸ºéé˜»å¡</span><br>    server_socket.setblocking(<span class="hljs-literal">False</span>)<br><br>    inputs = [server_socket]<br>    fd_to_addr = &#123;&#125;<br><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        readable, writable, exceptionable = select(inputs, [], [])<br>        <span class="hljs-keyword">for</span> sock <span class="hljs-keyword">in</span> readable:<br><br>            <span class="hljs-keyword">if</span> sock == server_socket:<br>                clientSocket, clientAddr = server_socket.accept()<br>                <span class="hljs-comment"># å½“æœ‰å®¢æˆ·ç«¯é“¾æ¥çš„æ—¶å€™</span><br>                <span class="hljs-comment"># å°†new_socket.recv()è®¾ç½®ä¸ºéé˜»å¡çš„</span><br>                clientSocket.setblocking(<span class="hljs-literal">False</span>)<br><br>                inputs.append(clientSocket)<br>                <span class="hljs-comment"># å°† addr ä¿¡æ¯ä¿å­˜èµ·æ¥</span><br>                fd_to_addr[clientSocket.fileno()] = clientAddr<br>                print(<span class="hljs-string">&quot;å®¢æˆ·ç«¯&#123;&#125; OnLineã€‚ã€‚ã€‚ã€‚&quot;</span>.<span class="hljs-built_in">format</span>(clientAddr))<br><br>            <span class="hljs-keyword">else</span>:<br>                message = sock.recv(<span class="hljs-number">1024</span>)<br>                <span class="hljs-keyword">if</span> message:<br>                    <span class="hljs-comment"># print(&#x27;message from [%s] is %s&#x27; % (str(sock), message.decode(&#x27;utf-8&#x27;)))</span><br>                    handle_request(sock, message.decode(<span class="hljs-string">&quot;utf8&quot;</span>))<br>                <span class="hljs-keyword">else</span>:<br>                    print(<span class="hljs-string">&#x27;[%s] OffLineã€‚ã€‚ã€‚ã€‚&#x27;</span> % (fd_to_addr[sock.fileno()]))<br>                    inputs.remove(sock)<br>                    sock.close()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br><br></code></pre></div></td></tr></table></figure><p><code>select</code>ç‰ˆæœåŠ¡å™¨æœ‰ä¸€å®šçš„ç¼ºç‚¹ï¼Œä¾¿æ˜¯åªèƒ½å¤„ç†1024ä¸ªå¹¶å‘å®¢æˆ·ç«¯ï¼Œå› è€Œå…¶æ•ˆç‡è¿˜æ˜¯æœ‰ä¸€å®šçš„å±€é™æ€§ã€‚</p><h2 id="å…­ã€ä½¿ç”¨epollå®ç°é«˜å¹¶å‘HTTPæœåŠ¡å™¨"><a href="#å…­ã€ä½¿ç”¨epollå®ç°é«˜å¹¶å‘HTTPæœåŠ¡å™¨" class="headerlink" title="å…­ã€ä½¿ç”¨epollå®ç°é«˜å¹¶å‘HTTPæœåŠ¡å™¨"></a>å…­ã€ä½¿ç”¨epollå®ç°é«˜å¹¶å‘HTTPæœåŠ¡å™¨</h2><p>æˆ‘ä»¬åœ¨æœ€åä½¿ç”¨å•è¿›ç¨‹+å•çº¿ç¨‹+éé˜»å¡+é•¿è¿æ¥å®ç°äº†ä¸€ä¸ªå¯å¹¶å‘å¤„ç†å®¢æˆ·ç«¯è¿æ¥çš„æœåŠ¡å™¨ã€‚ä»–çš„åŸç†å¯ä»¥ç”¨ä»¥ä¸‹çš„å›¾æ¥æè¿°ï¼š</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/P4p4aJ.png" alt="P4p4aJ"></p><p><strong>è§£é‡Šï¼š</strong></p><ol><li><p>HTTPæœåŠ¡å™¨æ˜¯æˆ‘ä»¬ä½¿ç”¨ å•è¿›ç¨‹+å•çº¿ç¨‹+éé˜»å¡+é•¿è¿æ¥å®ç° çš„<code>web</code>æœåŠ¡å™¨ã€‚</p></li><li><p>åœ¨å®ç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå­˜æ”¾å·²æ¥å—<code>Socket</code>è¿æ¥çš„åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨æ˜¯åœ¨åº”ç”¨ç¨‹åºçš„å†…å­˜ç©ºé—´ä¸­çš„ã€‚å¦‚å›¾ä¸­æ·±è“è‰²éƒ¨åˆ†</p></li><li><p>å½“æœ‰3ä¸ªå®¢æˆ·ç«¯æ¥å…¥çš„æ—¶å€™ï¼Œåˆ—è¡¨ä¸­ä¸€å…±å­˜åœ¨3ä¸ªå¯¹åº”çš„<code>socket</code>å¥æŸ„ï¼Œåˆ†åˆ«å¯¹åº”ä¸‰ä¸ªå°é»„æ¡†ã€‚</p></li><li><p>ç°è‰²å°æ¡†ä»£è¡¨æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚çš„<code>socket</code>ã€‚</p></li><li><p>æˆ‘ä»¬åœ¨è¿›è¡Œæ— é™å¾ªç¯çš„æ—¶å€™ï¼Œé¦–å…ˆæ˜¯æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„å®¢æˆ·ç«¯æ¥å…¥ï¼Œç›¸å½“äºæ£€æŸ¥ç°è‰²å°æ¡†æ˜¯å¦æœ‰æ•°æ®åˆ°è¾¾ã€‚ç„¶åè½®è¯¢3ä¸ªå°é»„æ¡†å¯¹åº”<code>socket</code>æ˜¯å¦æœ‰æ•°æ®åˆ°è¾¾ã€‚è½®è¯¢çš„æ•ˆç‡æ˜¯å¾ˆä½çš„ã€‚</p></li><li><p>æœåŠ¡å™¨åœ¨ä½¿ç”¨<code>accept</code>å’Œ<code>recv</code>æ—¶ï¼Œå®é™…ä¸Šæ˜¯å§”æ‰˜æ“ä½œç³»ç»Ÿå¸®ä»–æ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®åˆ°è¾¾ï¼Œç”±äºè¿™ä¸ªåˆ—è¡¨çš„<code>socket</code>éƒ½å¤„äºç”¨æˆ·å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥éœ€è¦å°†å…¶å¤åˆ¶åˆ°å†…æ ¸ç©ºé—´ã€‚æ“ä½œç³»ç»Ÿæ£€æŸ¥å®Œæ¯•åï¼Œå¦‚æœæœ‰æ•°æ®å°±è¿”å›æ•°æ®ç»™åº”ç”¨ç¨‹åºï¼Œå¦‚æœæ²¡æœ‰æ•°æ®å°±ä»¥å¼‚å¸¸çš„æ–¹å¼é€šçŸ¥åº”ç”¨ç¨‹åºã€‚è€Œä¸”ä¸å…‰è¿™æ ·ï¼Œæ“ä½œç³»ç»Ÿå¯èƒ½è¿˜åŒæ—¶åœ¨è¿è¡Œå…¶ä»–çš„åº”ç”¨ç¨‹åºï¼Œè¿™æ ·æ•ˆç‡ä¼šéå¸¸ä½ã€‚</p></li></ol><p><strong>æˆ‘ä»¬å†æ¥çœ‹epollçš„å›¾ï¼š</strong></p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/5TcU6B.png" alt="5TcU6B"></p><p><strong>è§£é‡Šï¼š</strong></p><p>1.æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç»“æ„ä¸Šï¼Œæœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œå­˜æ”¾<code>socket</code>çš„åˆ—è¡¨ä¸å¤„äºåº”ç”¨ç¨‹åºå†…éƒ¨ã€‚åœ¨<code>epoll</code>ä¸­ï¼Œè¿™ä¸ªå­˜æ”¾<code>socket</code>çš„åˆ—è¡¨å¤„äºä¸€ä¸ª<strong>ç‰¹æ®Šçš„å†…å­˜ç©ºé—´ï¼Œè¿™ä¸ªå†…å­˜ç©ºé—´æ˜¯åº”ç”¨ç¨‹åºä¸å†…æ ¸å…±äº«çš„ç©ºé—´</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“åº”ç”¨ç¨‹åºå§”æ‰˜æ“ä½œç³»ç»Ÿæ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®åˆ°è¾¾æ—¶ï¼Œæ— éœ€å°†å¤åˆ¶æ•°æ®ç»™å†…æ ¸ç©ºé—´ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥ç›´æ¥è¿›è¡Œæ£€æŸ¥ã€‚</p><p>2.æ“ä½œç³»ç»Ÿæ£€æŸ¥åˆ°æŸä¸ª<code>socket</code>æœ‰æ•°æ®åˆ°è¾¾ï¼Œä½¿ç”¨<strong>äº‹ä»¶é€šçŸ¥</strong>çš„å½¢å¼ï¼Œç›´æ¥å‘Šè¯‰åº”ç”¨ç¨‹åºï¼Œè€Œä¸æ˜¯ä»¥è½®è¯¢çš„æ–¹å¼ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œä¸€ä¸ªå¨å¸ˆæŒ¨ä¸ªé—®50ä¸ªäººé¥¿äº†æ²¡ï¼Œå¦‚æœé¥¿äº†å°±ç»™ä»–ä¸œè¥¿åƒï¼Œè¿™æ˜¯è½®è¯¢ã€‚è€Œ50ä¸ªäººä¸­ï¼Œè°é¥¿äº†è°ä¸¾æ‰‹ï¼Œå¨å¸ˆå°±ç»™åƒçš„ï¼Œè¿™å«äº‹ä»¶é€šçŸ¥ã€‚å¾ˆæ˜æ˜¾ï¼Œäº‹ä»¶é€šçŸ¥çš„æ•ˆç‡ä¼šç‰¹åˆ«é«˜ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> socket <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">import</span> select<br><span class="hljs-keyword">from</span> web_server <span class="hljs-keyword">import</span> handle_request<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-comment"># åˆ›å»ºå¥—æ¥å­—</span><br>    server_socket = socket(AF_INET, SOCK_STREAM)<br><br>    <span class="hljs-comment"># è®¾ç½®å¯ä»¥é‡å¤ä½¿ç”¨ç»‘å®šçš„ä¿¡æ¯</span><br>    server_socket.setsockopt(SOL_SOCKET, SO_REUSEADDR, <span class="hljs-number">1</span>)<br><br>    <span class="hljs-comment"># ç»‘å®šæœ¬æœºä¿¡æ¯</span><br>    server_socket.bind((<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">8080</span>))<br><br>    <span class="hljs-comment"># ä¸»åŠ¨ç›‘å¬</span><br>    server_socket.listen(<span class="hljs-number">128</span>)<br>    <span class="hljs-comment"># å°†acceptè®¾ç½®ä¸ºéé˜»å¡</span><br>    server_socket.setblocking(<span class="hljs-literal">False</span>)<br>    <span class="hljs-comment"># åˆ›å»ºepollå¯¹è±¡</span><br>    epoll = select.epoll()<br><br>    <span class="hljs-comment"># æ³¨å†Œäº‹ä»¶åˆ°epollä¸­</span><br>    <span class="hljs-comment"># epoll.register(fd[, eventmask])</span><br>    <span class="hljs-comment"># æ³¨æ„ï¼Œå¦‚æœfdå·²ç»æ³¨å†Œè¿‡ï¼Œåˆ™ä¼šå‘ç”Ÿå¼‚å¸¸</span><br>    <span class="hljs-comment"># å°†åˆ›å»ºçš„å¥—æ¥å­—æ·»åŠ åˆ°epollçš„äº‹ä»¶ç›‘å¬ä¸­</span><br><br>    <span class="hljs-comment"># æ³¨å†Œtcpå¥—æ¥å­—</span><br>    epoll.register(server_socket.fileno(), select.EPOLLIN)<br><br>    <span class="hljs-string">&#x27;&#x27;&#x27;å› ä¸ºepollè¿”å›çš„è§¦å‘äº‹ä»¶å¯¹åº”çš„æ˜¯å¥—æ¥å­—æ–‡ä»¶æè¿°ç¬¦ï¼Œæ‰€ä»¥éœ€è¦åœ¨å­—å…¸ä¸­åŠ å…¥å¯¹åº”å…³ç³»&#x27;&#x27;&#x27;</span><br><br>    <span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªå­—å…¸ï¼Œç”¨äºå­˜æ”¾fdå’Œå¥—æ¥å­—çš„å¯¹åº”å…³ç³»ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿåœ¨äº‹ä»¶é€šçŸ¥çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯fdï¼Œè€Œä¸æ˜¯å¥—æ¥å­—ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨fdæ¥æ‰¾åˆ°å¯¹åº”</span><br>    <span class="hljs-comment"># çš„å¥—æ¥å­—ï¼Œä»è€Œå¯ä»¥è°ƒç”¨acceptå’Œrecv</span><br>    fd_to_socket = &#123;&#125;<br>    fd_to_addr = &#123;&#125;<br><br>    <span class="hljs-comment"># å¾ªç¯æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-comment"># ä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨æ¥æ¥å—æ“ä½œç³»ç»Ÿçš„äº‹ä»¶é€šçŸ¥ï¼Œpoll()æ˜¯é˜»å¡çš„ï¼Œå½“æœ‰æ•°æ®åˆ°è¾¾æ—¶ï¼Œpollæ‰ä¼šè§£å¼€é˜»å¡</span><br>        epoll_list = epoll.poll()<br><br>        <span class="hljs-keyword">for</span> fd, event <span class="hljs-keyword">in</span> epoll_list:<br>            <span class="hljs-comment"># é¦–å…ˆåˆ¤æ–­äº‹ä»¶é€šçŸ¥ä¸­çš„fdæ˜¯å¦å¯¹åº”ç›‘å¬å¥—æ¥å­—ï¼ˆç›‘å¬å¥—æ¥å­—è°ƒç”¨acceptï¼‰</span><br>            <span class="hljs-keyword">if</span> fd == server_socket.fileno():<br><br>                conn, addr = server_socket.accept()<br>                <span class="hljs-comment"># ç›‘å¬åˆ°ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯è¿æ¥ï¼Œå°†connä¹Ÿæ³¨å†Œåˆ°epollä¸­</span><br>                epoll.register(conn.fileno(), select.EPOLLIN)<br><br>                print(<span class="hljs-string">&#x27;æœ‰æ–°çš„å®¢æˆ·ç«¯åˆ°æ¥%s&#x27;</span> % <span class="hljs-built_in">str</span>(addr))<br><br>                <span class="hljs-comment"># å°† conn å’Œ addr ä¿¡æ¯åˆ†åˆ«ä¿å­˜èµ·æ¥</span><br>                fd_to_socket[conn.fileno()] = conn<br>                fd_to_addr[conn.fileno()] = addr<br><br>            <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># å¦‚æœä¸æ˜¯ç›‘å¬å¥—æ¥å­—ï¼Œé‚£ä¹ˆéƒ½æ˜¯å®¢æˆ·ç«¯å¯¹åº”çš„å¥—æ¥å­—</span><br>                <span class="hljs-comment"># æ¥æ”¶æ•°æ®</span><br>                recvData = fd_to_socket[fd].recv(<span class="hljs-number">1024</span>).decode(<span class="hljs-string">&#x27;utf8&#x27;</span>)<br><br>                <span class="hljs-keyword">if</span> recvData:<br>                    handle_request(fd_to_socket[fd], recvData)<br><br>                <span class="hljs-comment"># å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œåˆ™è¡¨ç¤ºå®¢æˆ·ç«¯æ–­å¼€è¿æ¥</span><br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-comment"># ä» epoll ä¸­ç§»é™¤è¯¥ è¿æ¥ fd</span><br>                    epoll.unregister(fd)<br><br>                    <span class="hljs-comment">#  å…³é—­fdå¯¹åº”çš„socket</span><br>                    fd_to_socket[fd].close()<br><br>                    print(<span class="hljs-string">&quot;%s---offline---&quot;</span> % <span class="hljs-built_in">str</span>(fd_to_addr[fd]))<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br><br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> ç½‘ç»œé€šä¿¡ </category>
          
          <category> TCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TCP </tag>
            
            <tag> WEB Server </tag>
            
            <tag> é«˜å¹¶å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œé€šä¿¡-ç®€å•WEBæœåŠ¡å™¨</title>
      <link href="2020/08/16/wang-luo-tong-xin-simple-web-server/"/>
      <url>2020/08/16/wang-luo-tong-xin-simple-web-server/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•å®ç°ä¸€ä¸ªç®€å• çš„Web Server ä»¥åŠå¯¹åº”çš„é—®é¢˜è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="ä¸€ã€å¦‚ä½•ä½¿ç”¨Pythonå®ç°ä¸€ä¸ªè¿”å›å›ºå®šé¡µé¢çš„Web-Server"><a href="#ä¸€ã€å¦‚ä½•ä½¿ç”¨Pythonå®ç°ä¸€ä¸ªè¿”å›å›ºå®šé¡µé¢çš„Web-Server" class="headerlink" title="ä¸€ã€å¦‚ä½•ä½¿ç”¨Pythonå®ç°ä¸€ä¸ªè¿”å›å›ºå®šé¡µé¢çš„Web Server"></a>ä¸€ã€å¦‚ä½•ä½¿ç”¨Pythonå®ç°ä¸€ä¸ªè¿”å›å›ºå®šé¡µé¢çš„Web Server</h2><ol><li><p>ä½¿ç”¨socketåˆ›å»ºä¸€ä¸ªTCP Server</p></li><li><p>æ¥å—æ¥è‡ªæµè§ˆå™¨çš„TCPé“¾æ¥ï¼Œå¹¶æ¥æ”¶HTTPè¯·æ±‚</p></li><li><p>è¿”å›å›ºå®šå“åº”æ•°æ®ç»™æµè§ˆå™¨</p></li></ol><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket, time<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_request</span>(<span class="hljs-params">new_socket</span>):</span><br>    <span class="hljs-comment"># æ¥æ”¶è¯·æ±‚</span><br>    recv_msg = new_socket.recv(<span class="hljs-number">1024</span>)<br>    print(recv_msg)<br>    <span class="hljs-comment"># å“åº”æ•°æ®</span><br>    response_msg = <span class="hljs-string">&quot;HTTP/1.1 200 OK\r\n&quot;</span><br>    response_msg += <span class="hljs-string">&quot;\r\n&quot;</span><br>    response_msg += <span class="hljs-string">&quot;&lt;h1&gt;Hello&lt;/h1&gt;&quot;</span><br>    <span class="hljs-comment"># è¿”å›å“åº”æ•°æ®ï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰</span><br>    time.sleep(<span class="hljs-number">1</span>)<br>    new_socket.send(response_msg.encode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>    <span class="hljs-comment"># å…³é—­è¯¥æ¬¡socketè¿æ¥</span><br>    new_socket.close()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-comment"># åˆ›å»ºTCP SOCKETå®ä¾‹</span><br>    tcp_server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>    <span class="hljs-comment"># ç»‘å®šåœ°å€ï¼ˆé»˜è®¤æœ¬æœºIPï¼‰å’Œç«¯å£</span><br>    tcp_server_socket.bind((<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">8890</span>))<br>    <span class="hljs-comment"># ç›‘å¬</span><br>    tcp_server_socket.listen(<span class="hljs-number">128</span>)<br>    <span class="hljs-comment"># å¾ªç¯æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        new_socket, client_addr = tcp_server_socket.accept()<br>        <span class="hljs-comment"># å¤„ç†æ¯ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚</span><br>        handle_request(new_socket)<br><br>    <span class="hljs-comment"># å…³é—­æ•´ä¸ªSOCKET</span><br>    tcp_server_socket.close()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></div></td></tr></table></figure><h3 id="ç¼ºé™·ï¼š"><a href="#ç¼ºé™·ï¼š" class="headerlink" title="ç¼ºé™·ï¼š"></a>ç¼ºé™·ï¼š</h3><ol><li>è¿™ç§ç®€å•çš„web serveræ˜¯é˜»å¡çš„ï¼ŒåŒæ—¶åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚ </li></ol><h2 id="äºŒã€è§£å†³æœåŠ¡å™¨ç«¯å£å ç”¨é—®é¢˜"><a href="#äºŒã€è§£å†³æœåŠ¡å™¨ç«¯å£å ç”¨é—®é¢˜" class="headerlink" title="äºŒã€è§£å†³æœåŠ¡å™¨ç«¯å£å ç”¨é—®é¢˜"></a>äºŒã€è§£å†³æœåŠ¡å™¨ç«¯å£å ç”¨é—®é¢˜</h2><p>é—®é¢˜æè¿°ï¼šå½“æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œé©¬ä¸Šè¿”å›å“åº”æ•°æ®ï¼Œå¹¶ä¸”è°ƒç”¨äº†<code>new_socket.close()</code>ã€‚æ­¤æ—¶ï¼Œé©¬ä¸Šé‡å¯æœåŠ¡å™¨çš„è¯ï¼Œå¯èƒ½ä¼šæç¤ºç«¯å£è¢«å ç”¨ã€‚</p><p>è¿™æ˜¯å› ä¸ºTCPçš„å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ä¸­ï¼Œè°å…ˆå‘é€<code>FIN</code>åŒ…ï¼Œåˆ™è°ä¼šåœ¨å‘é€æœ€åä¸€ä¸ª<code>ACK</code>åŒ…åè¿›å…¥<code>TIME_WAIT</code>çŠ¶æ€ï¼Œæ­¤çŠ¶æ€ä¼šç­‰å¾…<code>2MSL</code>çš„æ—¶é—´ï¼ˆå¤§æ¦‚2-4åˆ†é’Ÿï¼‰ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒæœåŠ¡å™¨ç»‘å®šçš„ç«¯å£èµ„æºæ˜¯è¢«å ç”¨çš„ã€‚ç­‰è¿™ä¸ªé˜¶æ®µè¿‡äº†ï¼Œç«¯å£ä¼šè¿›å…¥<code>CLOSED</code>çŠ¶æ€ï¼Œåˆ™å¯ä»¥è¢«å†æ¬¡åˆ©ç”¨ã€‚</p><p>å¦‚ä½•è§£å†³æœåŠ¡å™¨é‡å¯ç«¯å£è¢«å ç”¨çš„é—®é¢˜ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-comment"># åˆ›å»ºTCP SOCKETå®ä¾‹</span><br>    tcp_server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>    <span class="hljs-comment"># è®¾ç½®é‡ç”¨åœ°å€</span><br>    tcp_server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># ç»‘å®šåœ°å€ï¼ˆé»˜è®¤æœ¬æœºIPï¼‰å’Œç«¯å£</span><br>    tcp_server_socket.bind((<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">7890</span>))<br>    <span class="hljs-comment"># ç›‘å¬</span><br>    tcp_server_socket.listen(<span class="hljs-number">128</span>)<br>    <span class="hljs-comment"># å¾ªç¯æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        new_socket, client_addr = tcp_server_socket.accept()<br>        <span class="hljs-comment"># å¤„ç†æ¯ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚</span><br>        handle_request(new_socket)<br><br>    <span class="hljs-comment"># å…³é—­æ•´ä¸ªSOCKET</span><br>    tcp_server_socket.close()<br></code></pre></div></td></tr></table></figure><blockquote><p>åœ¨åˆ›å»º<code>socket</code>å®ä¾‹ä¹‹åï¼Œè®¾ç½®å¯ä»¥é‡ç”¨åœ°å€ï¼Œå°±å¯ä»¥è§£å†³æŠ¥é”™é—®é¢˜ã€‚</p></blockquote><h2 id="ä¸‰ã€TCPåè®®3æ¬¡æ¡æ‰‹ã€4æ¬¡æŒ¥æ‰‹"><a href="#ä¸‰ã€TCPåè®®3æ¬¡æ¡æ‰‹ã€4æ¬¡æŒ¥æ‰‹" class="headerlink" title="ä¸‰ã€TCPåè®®3æ¬¡æ¡æ‰‹ã€4æ¬¡æŒ¥æ‰‹"></a>ä¸‰ã€TCPåè®®3æ¬¡æ¡æ‰‹ã€4æ¬¡æŒ¥æ‰‹</h2><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/fHQGzW.jpg" alt="fHQGzW"></p><h3 id="ä¸‰æ¬¡æ¡æ‰‹ï¼š"><a href="#ä¸‰æ¬¡æ¡æ‰‹ï¼š" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹ï¼š"></a>ä¸‰æ¬¡æ¡æ‰‹ï¼š</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.png" alt="ä¸‰æ¬¡æ¡æ‰‹"></p><p><strong>ä¸‰æ¬¡æ¡æ‰‹æµç¨‹å’Œç›®çš„éƒ½ç›¸å¯¹ç®€å•ï¼š</strong></p><ol><li><p>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€<code>SYN flag</code>çš„åŒ…ï¼Œå¹¶æºå¸¦<code>seq</code>ä¸º<code>x</code>ã€‚</p></li><li><p>æœåŠ¡å™¨æ”¶åˆ°<code>SYN</code>åŒ…åï¼Œå¼€å§‹å‡†å¤‡å¯¹åº”çš„èµ„æºï¼Œå‡†å¤‡å¥½åï¼Œå‘é€<code>SYN+ACK</code>åŒ…ï¼Œè¿™å®é™…ä¸Šæ˜¯æœåŠ¡å™¨å›åº”å®¢æˆ·ç«¯çš„<code>ACK</code>åŒ…ï¼Œåˆå¹¶äº†æœåŠ¡å™¨è®©å®¢æˆ·ç«¯å‡†å¤‡èµ„æºçš„<code>SYN</code>åŒ…ã€‚æ‰€ä»¥æºå¸¦äº†å¯¹åº”<code>SYN</code>çš„<code>seq y</code>ï¼Œä»¥åŠ<code>ACK=x+1</code>ã€‚</p></li><li><p>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘æ¥çš„<code>SYN</code>åŒ…ï¼Œåˆ™å›å¤<code>ACK</code>åŒ…ï¼Œ<code>ack=y+1</code>ã€‚</p></li></ol><p>è¿™æ ·3æ¬¡æ¡æ‰‹å°±å»ºç«‹å¥½äº†ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½è¿›å…¥<code>ESTABLISHED</code>çŠ¶æ€ï¼Œè¡¨ç¤ºèµ„æºéƒ½å‡†å¤‡å®Œæ¯•ã€‚æ‰€ä»¥TCPçš„ä¸‰æ¬¡æ¡æ‰‹å®é™…ä¸Šæ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´äº’ç›¸è¦æ±‚å‡†å¤‡èµ„æºä»¥åŠå›å¤èµ„æºå·²å‡†å¤‡å¥½çš„è¿‡ç¨‹ã€‚</p><p>ç†è®ºä¸Šåº”è¯¥æ˜¯4æ¬¡æ¡æ‰‹ï¼Œä½†ä¸ºäº†å¢åŠ æ€§èƒ½å‡å°æ—¶é—´å¼€é”€ï¼Œä¸­é—´çš„ä¸¤æ¬¡æ•°æ®ä¼ è¾“ï¼ˆæœåŠ¡å™¨å‘é€çš„<code>SYN</code>å’Œ<code>ACK</code>ï¼‰åˆå¹¶åœ¨ä¸€èµ·äº†ã€‚æ‰€ä»¥å˜æˆäº†3æ¬¡æ¡æ‰‹ã€‚</p><h3 id="å››æ¬¡æŒ¥æ‰‹ï¼š"><a href="#å››æ¬¡æŒ¥æ‰‹ï¼š" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹ï¼š"></a>å››æ¬¡æŒ¥æ‰‹ï¼š</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B.png" alt="å››æ¬¡æŒ¥æ‰‹"></p><p> <strong>å››æ¬¡æŒ¥æ‰‹ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼š</strong></p><ol><li><p>å‡è®¾å®¢æˆ·ç«¯åœ¨å®Œæˆæ•°æ®ä¼ è¾“åï¼Œé¦–å…ˆå¼€å§‹å‘é€<code>FIN</code>åŒ…ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„å®¢æˆ·ç«¯ç¨‹åºè°ƒç”¨<code>socket.close()</code>çš„æ—¶å€™ï¼Œç³»ç»Ÿåº•å±‚ä¼šè‡ªåŠ¨å‘é€<code>FIN</code>åŒ…ï¼‰ï¼Œåˆ™è¡¨ç¤ºå®¢æˆ·ç«¯å·²ç»æ²¡æœ‰éœ€è¦å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®ã€‚ç”±äº<code>SOCKET</code>æ˜¯å…¨åŒå·¥çš„ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯å‘é€<code>FIN</code>åªæ˜¯è¡¨ç¤ºå®¢æˆ·ç«¯ä»¥åéƒ½ä¸åœ¨å‘é€æ•°æ®ï¼Œä½†æ­¤æ—¶è¿˜å¯ä»¥æ¥æ”¶æ•°æ®ã€‚</p></li><li><p>å®¢æˆ·ç«¯å‘é€å‡º<code>FIN</code>åŒ…åï¼Œå°±ä¼šè¿›å…¥<code>FIN WAIT-1</code>çŠ¶æ€ï¼Œè¯¥çŠ¶æ€ä¸€èˆ¬å¾ˆéš¾è§‚æµ‹åˆ°ï¼Œå› ä¸ºè¯¥çŠ¶æ€åªç»´æŒåˆ°æœåŠ¡å™¨å“åº”<code>ACK</code>åŒ…ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯ç¬é—´å°±è¿”å›äº†ï¼ˆæ³¨æ„è¿™é‡Œå’Œ3æ¬¡æ¡æ‰‹ä¸åŒï¼Œè¿™é‡Œçš„<code>ACK</code>åŒ…ä¸èƒ½ä¸æœåŠ¡å™¨å‘é€çš„FINåŒ…åˆå¹¶ï¼Œå› ä¸ºæœåŠ¡å™¨å¯èƒ½è¿˜æœ‰æ•°æ®è¦ç»§ç»­å‘é€ç»™å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥æœåŠ¡å™¨å¯èƒ½è¦ç­‰åˆ°æ•°æ®ä¼ è¾“å®Œæ¯•æ‰ä¼šå‘å®¢æˆ·ç«¯å‘é€<code>FIN</code>åŒ…ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹ï¼‰</p></li><li><p>æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„<code>FIN</code>åŒ…ï¼Œåˆ™é©¬ä¸Šå‘é€å›åº”çš„ACKåŒ…ï¼Œæ­¤åŒ…æ²¡æœ‰æ„å¤–çš„è¯ï¼Œä¼šç¬é—´åˆ°è¾¾å®¢æˆ·ç«¯ã€‚</p></li><li><p>å®¢æˆ·ç«¯æ”¶åˆ°<code>ACK</code>åŒ…åï¼Œç»“æŸ<code>FIN WAIT-1</code>çŠ¶æ€ï¼Œè¿›å…¥<code>FIN WAIT-2</code>çŠ¶æ€ï¼Œè¯¥çŠ¶æ€çš„ç›®çš„æ˜¯ç­‰å¾…æœåŠ¡å™¨å‘é€<code>FIN</code>åŒ…ã€‚</p></li><li><p>æœåŠ¡å™¨å®Œæˆäº†æœ€åçš„æ•°æ®å‘é€ï¼Œåˆ™å‘å®¢æˆ·ç«¯å‘é€<code>FIN</code>åŒ…ï¼ˆä¹Ÿå°±æ˜¯æœåŠ¡å™¨ç¨‹åºè°ƒç”¨<code>socket.close()</code>çš„æ—¶å€™ï¼Œç³»ç»Ÿåº•å±‚ä¼šè‡ªåŠ¨å‘é€<code>FIN</code>åŒ…ï¼‰ï¼Œè¡¨ç¤ºæœåŠ¡å™¨ä»¥åä¹Ÿæ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œå¼€å§‹æ–­å¼€æœåŠ¡å™¨çš„å‘é€é€šé“ã€‚</p></li><li><p>æœåŠ¡å™¨åœ¨å‘é€å‡º<code>FIN</code>åï¼Œä¼šè¿›å…¥<code>LAST-ACK</code>çŠ¶æ€ï¼ˆä¾‹å¦‚ç­‰å¾…4sï¼‰ã€‚è¿™ä¸ªçŠ¶æ€æ˜¯ä¸ºäº†ç­‰å¾…å®¢æˆ·ç«¯æ¢å¤ç¡®è®¤çš„<code>ACK</code>åŒ…ï¼Œå› ä¸ºæœåŠ¡å™¨å‘é€å‡ºå»çš„<code>FIN</code>åŒ…ï¼Œä»–æ— æ³•ç¡®è®¤å®¢æˆ·ç«¯æ˜¯å¦æ”¶åˆ°ï¼Œå¦‚æœè¶…å‡º<code>waittime</code>è¿˜æœªæ”¶åˆ°<code>ACK</code>åŒ…ï¼Œåˆ™é‡æ–°å‘é€FINåŒ…ã€‚</p></li><li><p>å®¢æˆ·ç«¯å¦‚æœæ­£ç¡®æ”¶åˆ°äº†æœåŠ¡å™¨å‘é€çš„<code>FIN</code>åŒ…ï¼Œç†è®ºä¸Šåº”è¯¥é‡Šæ”¾èµ„æºï¼Œå¹¶å‘é€<code>ACK</code>åŒ…ã€‚ä½†æ˜¯å¦‚æœå®¢æˆ·ç«¯å‘å‡ºçš„<code>ACK</code>åŒ…ç”±äºæŸäº›åŸå› ï¼ŒæœåŠ¡å™¨å¹¶æœªæ”¶åˆ°ï¼Œé‚£ä¹ˆæœåŠ¡å™¨åœ¨å‡ ç§’åä¼šé‡æ–°å‘é€<code>FIN</code>åŒ…ï¼Œä½†å®¢æˆ·ç«¯å·²ç»æŠŠèµ„æºé‡Šæ”¾æ‰äº†ï¼Œåˆ™å°±ä¼šå‡ºç°é—®é¢˜ã€‚æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè§£å†³æ–¹æ¡ˆæ˜¯ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘é€çš„<code>FIN</code>åŒ…ï¼Œå¹¶ä¸é©¬ä¸Šé‡Šæ”¾èµ„æºï¼ˆä¾‹å¦‚ç»‘å®šçš„ç«¯å£ç­‰ï¼‰ï¼Œè€Œæ˜¯å…ˆå›å¤<code>ACK</code>åŒ…ï¼Œå¹¶è¿›å…¥<code>TIME-WAIT</code>çŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€è¦æŒç»­<code>2MSL</code>ï¼ˆ2-3åˆ†é’Ÿï¼‰ã€‚å¦‚æœåœ¨<code>2MSL</code>æ—¶é—´æ®µä¸­ï¼ŒæœåŠ¡å™¨éƒ½æ²¡æœ‰é‡æ–°å‘é€FINåŒ…ï¼Œåˆ™è¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ”¶åˆ°äº†è‡ªå·±å‘å‡ºçš„<code>ACK</code>åŒ…ï¼Œè¿™æ˜¯å®¢æˆ·ç«¯æ‰æ”¾å¿ƒçš„é‡Šæ”¾èµ„æºã€‚</p></li><li><p>æœ€ç»ˆå®¢æˆ·ç«¯åœ¨ç­‰å¾…<code>2MSL</code>åï¼Œè¿›å…¥<code>CLOSED</code>çŠ¶æ€ã€‚æœåŠ¡å™¨åœ¨ç¡®è®¤æ”¶åˆ°æœ€åä¸€ä¸ª<code>ACK</code>åŒ…åç›´æ¥è¿›å…¥<code>CLOSED</code>çŠ¶æ€ã€‚</p></li></ol><p><strong>èµ„æºå ç”¨çš„è§£é‡Šï¼š</strong></p><p>æˆ‘ä»¬çŸ¥é“ï¼Œå®¢æˆ·ç«¯æ˜¯ä½¿ç”¨éšæœºç«¯å£æ¥å‘èµ·<code>TCP</code>è¿æ¥çš„ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯é¦–å…ˆå‘é€<code>FIN</code>åŒ…çš„è¯ï¼Œæœ€åçš„<code>2MSL</code>æ˜¯ç”±å®¢æˆ·ç«¯æ¥ç­‰å¾…ï¼Œå³ä½¿2-3åˆ†é’Ÿèµ„æºæœªè¢«é‡Šæ”¾ï¼Œä¹Ÿä¸ä¼šå½±å“å®¢æˆ·ç«¯å¦å¤–å‘èµ·æ–°çš„è¯·æ±‚ï¼ˆå› ä¸ºå¯ç”¨çš„éšæœºç«¯å£å¾ˆå¤šï¼Œä¸ä¼šå‡ºç°å†²çªï¼‰ã€‚</p><p>ä½†æ˜¯å¦‚æœç”±æœåŠ¡å™¨æ¥é¦–å…ˆå‘èµ·<code>FIN</code>ï¼Œåˆ™æœ€åçš„<code>2MSL</code>è¦ç”±æœåŠ¡å™¨æ¥ç­‰å¾…ï¼Œåˆ™åœ¨2-3åˆ†é’Ÿå†…ï¼ŒæœåŠ¡å™¨ç»‘å®šçš„ç«¯å£å¹¶æœªè¢«é‡Šæ”¾ï¼Œæ‰€ä»¥å¦‚æœæ­¤æ—¶é‡å¯æœåŠ¡å™¨ï¼Œåˆ™ä¼šå‡ºç°èµ„æºæœªé‡Šæ”¾ã€ç«¯å£è¢«å ç”¨çš„æƒ…å†µã€‚</p><p><strong>ç»“è®ºï¼šå°½é‡è®©å®¢æˆ·ç«¯æ¥å‘èµ·æ–­å¼€è¿æ¥çš„è¯·æ±‚ã€‚å¦‚æœè¦ä½¿æœåŠ¡å™¨æ–­å¼€è¯·æ±‚è¿˜ä¸ä¼šå‡ºç°å ç”¨ç«¯å£çš„æƒ…å†µï¼Œåˆ™å¯ä»¥å‚è€ƒå‰é¢ç¬¬äºŒèŠ‚çš„æ–¹æ³•ï¼Œä¸ºæœåŠ¡å™¨SOCKETè®¾ç½®èµ„æºé‡ç”¨çš„å±æ€§ã€‚</strong></p><h2 id="å››ã€æ”¹å–„ç®€å•WEB-Server"><a href="#å››ã€æ”¹å–„ç®€å•WEB-Server" class="headerlink" title="å››ã€æ”¹å–„ç®€å•WEB Server"></a>å››ã€æ”¹å–„ç®€å•WEB Server</h2><p>å‰é¢æˆ‘ä»¬å®ç°çš„ç®€å•Web Serverä¸ç®¡å®¢æˆ·ç«¯è¯·æ±‚çš„<code>URI</code>æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬éƒ½åªèƒ½è¿”å›å›ºå®šçš„<code>&quot;Hello</code>â€œå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬å¯¹å…¶è¿›è¡Œæ”¹å–„ï¼Œè®©å…¶æ ¹æ®æ¥æ”¶åˆ°çš„è¯·æ±‚ï¼Œæ¥è¿”å›ä¸åŒçš„é¡µé¢æ•°æ®ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> re<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_request</span>(<span class="hljs-params">new_socket</span>):</span><br>    <span class="hljs-comment"># æ¥æ”¶è¯·æ±‚</span><br>    recv_msg = <span class="hljs-string">&quot;&quot;</span><br>    recv_msg = new_socket.recv(<span class="hljs-number">1024</span>).decode(<span class="hljs-string">&quot;utf-8&quot;</span>)<br>    <span class="hljs-keyword">if</span> recv_msg == <span class="hljs-string">&quot;&quot;</span>:<br>        print(<span class="hljs-string">&quot;recv null&quot;</span>)<br>        new_socket.close()<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-comment"># ä»è¯·æ±‚ä¸­è§£æå‡ºURI</span><br>    recv_lines = recv_msg.splitlines()<br>    print(recv_lines)<br>    <span class="hljs-comment"># ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–å‡ºURI</span><br>    ret = re.match(<span class="hljs-string">r&quot;[^/]+(/[^ ]*)&quot;</span>, recv_lines[<span class="hljs-number">0</span>])<br>    <span class="hljs-keyword">if</span> ret:<br>        <span class="hljs-comment"># è·å–URIå­—ç¬¦ä¸²</span><br>        file_name = ret.group(<span class="hljs-number">1</span>)<br>        <span class="hljs-comment"># å¦‚æœURIæ˜¯/ï¼Œåˆ™é»˜è®¤è¿”å›index.htmlçš„å†…å®¹</span><br>        <span class="hljs-keyword">if</span> file_name == <span class="hljs-string">&quot;/&quot;</span>:<br>            file_name = <span class="hljs-string">&quot;/index.html&quot;</span><br><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># æ ¹æ®è¯·æ±‚çš„URIï¼Œè¯»å–ç›¸åº”çš„æ–‡ä»¶</span><br>        fp = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;.&quot;</span> + file_name, <span class="hljs-string">&quot;rb&quot;</span>)<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-comment"># æ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œå“åº”404</span><br>        response_msg = <span class="hljs-string">&quot;HTTP/1.1 404 NOT FOUND\r\n&quot;</span><br>        response_msg += <span class="hljs-string">&quot;\r\n&quot;</span><br>        response_msg += <span class="hljs-string">&quot;&lt;h1&gt;----file not found----&lt;/h1&gt;&quot;</span><br>        new_socket.send(response_msg.encode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>    <span class="hljs-keyword">else</span>:<br>        html_content = fp.read()<br>        fp.close()<br>        <span class="hljs-comment"># å“åº”æ­£ç¡® 200 OK</span><br>        response_msg = <span class="hljs-string">&quot;HTTP/1.1 200 OK\r\n&quot;</span><br>        response_msg += <span class="hljs-string">&quot;\r\n&quot;</span><br><br>        <span class="hljs-comment"># è¿”å›å“åº”å¤´</span><br>        new_socket.send(response_msg.encode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>        <span class="hljs-comment"># è¿”å›å“åº”ä½“</span><br>        new_socket.send(html_content)<br><br>    <span class="hljs-comment"># å…³é—­è¯¥æ¬¡socketè¿æ¥</span><br>    new_socket.close()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-comment"># åˆ›å»ºTCP SOCKETå®ä¾‹</span><br>    tcp_server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>    <span class="hljs-comment"># # è®¾ç½®é‡ç”¨åœ°å€</span><br>    tcp_server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># ç»‘å®šåœ°å€ï¼ˆé»˜è®¤æœ¬æœºIPï¼‰å’Œç«¯å£</span><br>    tcp_server_socket.bind((<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">7890</span>))<br>    <span class="hljs-comment"># ç›‘å¬</span><br>    tcp_server_socket.listen(<span class="hljs-number">128</span>)<br>    <span class="hljs-comment"># å¾ªç¯æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        new_socket, client_addr = tcp_server_socket.accept()<br>        <span class="hljs-comment"># å¤„ç†æ¯ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚</span><br>        handle_request(new_socket)<br><br>    <span class="hljs-comment"># å…³é—­æ•´ä¸ªSOCKET</span><br>    tcp_server_socket.close()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></div></td></tr></table></figure><p>ä»¥ä¸Šä»£ç é‡ç‚¹åœ¨äºè§£æå‡º<code>GET /index.html HTTP/1.1</code>ä¸­çš„<code>/index.html</code>éƒ¨åˆ†ï¼ŒçŸ¥é“æœåŠ¡å™¨è¦è¯·æ±‚ä»€ä¹ˆå†…å®¹ï¼Œç„¶åæŒ‰éœ€æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼Œå·²äºŒè¿›åˆ¶æ–¹å¼è¯»å–æ–‡ä»¶å†…å®¹å¹¶è¿”å›ç»™å®¢æˆ·ç«¯å³å¯ã€‚</p><p>å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰æŒ‡å®šè®¿é—®çš„å†…å®¹ï¼Œåˆ™é»˜è®¤è¿”å›<code>index.html</code>é¡µé¢ã€‚</p><p>æ³¨æ„å¼‚å¸¸çš„å¤„ç†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> ç½‘ç»œé€šä¿¡ </category>
          
          <category> TCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TCP </tag>
            
            <tag> WEB Server </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œé€šä¿¡-é•¿è¿æ¥ä¸çŸ­è¿æ¥</title>
      <link href="2020/08/16/wang-luo-tong-xin-chang-lian-jie-yu-duan-lian-jie/"/>
      <url>2020/08/16/wang-luo-tong-xin-chang-lian-jie-yu-duan-lian-jie/</url>
      
        <content type="html"><![CDATA[<p>ç®€å•ä»‹ç»é•¿è¿æ¥ä¸çŸ­è¿æ¥çš„ä¼˜ç¼ºç‚¹ã€‚</p><h2 id="1-çŸ­è¿æ¥ï¼š"><a href="#1-çŸ­è¿æ¥ï¼š" class="headerlink" title="1. çŸ­è¿æ¥ï¼š"></a>1. çŸ­è¿æ¥ï¼š</h2><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/%E7%9F%AD%E8%BF%9E%E6%8E%A5.png" alt="çŸ­è¿æ¥">  </p><ol><li>client å‘ server å‘èµ·è¿æ¥è¯·æ±‚  </li><li>server æ¥åˆ°è¯·æ±‚ï¼ŒåŒæ–¹å»ºç«‹è¿æ¥  </li><li>client å‘ server å‘é€æ¶ˆæ¯  </li><li>server å›åº” client  </li><li>ä¸€æ¬¡è¯»å†™å®Œæˆï¼Œæ­¤æ—¶åŒæ–¹ä»»ä½•ä¸€ä¸ªéƒ½å¯ä»¥å‘èµ· close æ“ä½œ</li></ol><h2 id="2-é•¿è¿æ¥ï¼š"><a href="#2-é•¿è¿æ¥ï¼š" class="headerlink" title="2. é•¿è¿æ¥ï¼š"></a>2. é•¿è¿æ¥ï¼š</h2><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/%E9%95%BF%E8%BF%9E%E6%8E%A5.png" alt="é•¿è¿æ¥">  </p><ol><li>client å‘ server å‘èµ·è¿æ¥  </li><li>server æ¥åˆ°è¯·æ±‚ï¼ŒåŒæ–¹å»ºç«‹è¿æ¥  </li><li>client å‘ server å‘é€æ¶ˆæ¯  </li><li>server å›åº” client  </li><li>ä¸€æ¬¡è¯»å†™å®Œæˆï¼Œè¿æ¥ä¸å…³é—­  </li><li>åç»­è¯»å†™æ“ä½œâ€¦  </li><li>é•¿æ—¶é—´æ“ä½œä¹‹å client å‘èµ·å…³é—­è¯·æ±‚</li></ol><h2 id="3-ä¼˜ç¼ºç‚¹åˆ†æ"><a href="#3-ä¼˜ç¼ºç‚¹åˆ†æ" class="headerlink" title="3. ä¼˜ç¼ºç‚¹åˆ†æ"></a>3. ä¼˜ç¼ºç‚¹åˆ†æ</h2><ol><li><p>é•¿è¿æ¥å¯ä»¥çœå»è¾ƒå¤šçš„ TCP å»ºç«‹å’Œå…³é—­çš„æ“ä½œï¼ŒèŠ‚çº¦æ—¶é—´ã€‚ä½†æ˜¯å¦‚æœç”¨æˆ·é‡å¤ªå¤§å®¹æ˜“é€ æˆæœåŠ¡å™¨è´Ÿè½½è¿‡é«˜æœ€ç»ˆå¯¼è‡´æœåŠ¡ä¸å¯ç”¨</p></li><li><p>çŸ­è¿æ¥å¯¹äºæœåŠ¡å™¨æ¥è¯´å®ç°èµ·æ¥è¾ƒä¸ºç®€å•ï¼Œå­˜åœ¨çš„è¿æ¥éƒ½æ˜¯æœ‰ç”¨çš„è¿æ¥ï¼Œä¸éœ€è¦é¢å¤–çš„æ§åˆ¶æ‰‹æ®µã€‚ä½†æ˜¯å¦‚æœç”¨æˆ·è®¿é—®é‡å¾ˆå¤§, å¾€å¾€å¯èƒ½åœ¨å¾ˆçŸ­æ—¶é—´å†…éœ€è¦åˆ›å»ºå¤§é‡çš„è¿æ¥ï¼Œé€ æˆæœåŠ¡å™¨å“åº”é€Ÿåº¦è¿‡æ…¢</p></li></ol><h2 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><ol><li><p>å°çš„ WEB ç½‘ç«™çš„ http æœåŠ¡ä¸€èˆ¬éƒ½ç”¨çŸ­é“¾æ¥ï¼Œå› ä¸ºé•¿è¿æ¥å¯¹äºæœåŠ¡ç«¯æ¥è¯´ä¼šè€—è´¹ä¸€å®šçš„èµ„æºæ¥è®©å¥—æ¥å­—ä¿æŒå­˜æ´»ã€‚</p></li><li><p>å¯¹äºä¸­å¤§å‹ WEB ç½‘ç«™ä¸€èˆ¬éƒ½é‡‡ç”¨é•¿è¿æ¥ï¼Œå¥½å¤„æ˜¯å“åº”ç”¨æˆ·è¯·æ±‚çš„æ—¶é—´æ›´çŸ­ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ï¼Œè™½ç„¶æ›´è€—ç¡¬ä»¶èµ„æºä¸€äº›ï¼Œä½†è¿™éƒ½ä¸æ˜¯äº‹å„¿ã€‚å¦å¤–ï¼Œæ•°æ®åº“çš„è¿æ¥ç”¨é•¿è¿æ¥ï¼Œå¦‚æœç”¨çŸ­è¿æ¥é¢‘ç¹çš„é€šä¿¡ä¼šé€ æˆ socket é”™è¯¯ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> ç½‘ç»œé€šä¿¡ </category>
          
          <category> TCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TCP </tag>
            
            <tag> çŸ­è¿æ¥ </tag>
            
            <tag> é•¿è¿æ¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RESTfulè§„èŒƒçš„APIæ¥å£è®¾è®¡</title>
      <link href="2020/08/14/web-restful-gui-fan-de-api-jie-kou-she-ji/"/>
      <url>2020/08/14/web-restful-gui-fan-de-api-jie-kou-she-ji/</url>
      
        <content type="html"><![CDATA[<p>åœ¨é¡¹ç›®ä¸­ï¼Œéœ€è¦ä¸º APP æ’°å†™ APIã€‚åˆšå¼€å§‹æ¥è§¦çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘å¤ªå¤šï¼Œå°±æƒ³æä¾› URLï¼ŒAPP ç«¯é€šè¿‡è¯¥ URL è¿›è¡ŒæŸ¥è¯¢ã€åˆ›å»ºã€æ›´æ–°ç­‰æ“ä½œå³å¯ã€‚ä½†å†å¯¹ç›¸å…³è§„èŒƒè¿›è¡Œäº†è§£åï¼Œæ‰å‘ç°ï¼ŒAPI çš„è®¾è®¡å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œè¿œè¿œä¸æ˜¯ URL çš„é—®é¢˜ï¼Œè€Œæ˜¯ä¸€ä¸ªé€šä¿¡åè®®çš„æ•´ä½“æ¶æ„ã€‚</p><h2 id="ä½¿ç”¨-SSLï¼ˆhttpsï¼‰æ¥æä¾›-URL"><a href="#ä½¿ç”¨-SSLï¼ˆhttpsï¼‰æ¥æä¾›-URL" class="headerlink" title="ä½¿ç”¨ SSLï¼ˆhttpsï¼‰æ¥æä¾› URL"></a>ä½¿ç”¨ SSLï¼ˆhttpsï¼‰æ¥æä¾› URL</h2><blockquote><p>  é¦–å…ˆï¼Œä½¿ç”¨ https å¯ä»¥åœ¨æ•°æ®åŒ…è¢«æŠ“å–æ—¶å¤šä¸€å±‚åŠ å¯†ã€‚</p></blockquote><p>æˆ‘ä»¬ç°åœ¨çš„ APP ä½¿ç”¨ç¯å¢ƒå¤§éƒ¨åˆ†éƒ½æ˜¯åœ¨è·¯ç”±å™¨ WIFI ç¯å¢ƒä¸‹ï¼Œä¸€æ—¦è·¯ç”±å™¨è¢«å…¥ä¾µï¼Œé‚£ä¹ˆé»‘å®¢å¯ä»¥éå¸¸å®¹æ˜“çš„æŠ“å–åˆ°ç”¨æˆ·é€šè¿‡è·¯ç”±å™¨ä¼ è¾“çš„æ•°æ®ï¼Œå¦‚æœä½¿ç”¨ http æœªç»åŠ å¯†ï¼Œé‚£ä¹ˆé»‘å®¢å¯ä»¥å¾ˆè½»æ¾çš„è·å–ç”¨æˆ·çš„ä¿¡æ¯ï¼Œç”šè‡³æ˜¯è´¦æˆ·ä¿¡æ¯ã€‚</p><blockquote><p>  å…¶æ¬¡ï¼Œå³ä½¿ä½¿ç”¨ httpsï¼Œä¹Ÿè¦åœ¨ API æ•°æ®ä¼ è¾“è®¾è®¡æ—¶ï¼Œæ­£ç¡®çš„é‡‡ç”¨åŠ å¯†ã€‚</p></blockquote><p>ä¾‹å¦‚ç›´æ¥å°† token ä¿¡æ¯æ”¾åœ¨ URL ä¸­çš„åšæ³•ï¼Œå³ä½¿ä½ ä½¿ç”¨äº† httpsï¼Œé»‘å®¢ä»…èƒ½æŠ“åˆ°åŸŸåå­—ç¬¦éƒ¨åˆ†ï¼Œä¸èƒ½æŠ“åˆ°è¯·æ±‚çš„æ•°æ®ï¼Œä½†æ˜¯ URL å¯ä»¥åœ¨æµè§ˆå™¨æˆ–ç‰¹æ®Šå®¢æˆ·ç«¯å·¥å…·ä¸­ç›´æ¥çœ‹åˆ°ã€‚å› æ­¤ï¼Œä½¿ç”¨ https è¿›è¡Œè¯·æ±‚æ—¶ï¼Œè¦é‡‡ç”¨ POSTã€PUT æˆ–è€… HEAD çš„æ–¹å¼ä¼ è¾“å¿…è¦çš„æ•°æ®ã€‚</p><h2 id="ä½¿ç”¨-GETã€POSTã€PUTã€DELETE-è¿™å‡ ç§è¯·æ±‚æ¨¡å¼"><a href="#ä½¿ç”¨-GETã€POSTã€PUTã€DELETE-è¿™å‡ ç§è¯·æ±‚æ¨¡å¼" class="headerlink" title="ä½¿ç”¨ GETã€POSTã€PUTã€DELETE è¿™å‡ ç§è¯·æ±‚æ¨¡å¼"></a>ä½¿ç”¨ GETã€POSTã€PUTã€DELETE è¿™å‡ ç§è¯·æ±‚æ¨¡å¼</h2><p>è¯·æ±‚æ¨¡å¼ä¹Ÿå¯ä»¥è¯´æ˜¯åŠ¨ä½œã€æ•°æ®ä¼ è¾“æ–¹å¼ï¼Œé€šå¸¸æˆ‘ä»¬åœ¨ web ä¸­çš„ form æœ‰ GETã€POST ä¸¤ç§ã€‚</p><p>è€Œåœ¨ HTTP ä¸­ï¼Œå­˜åœ¨ä»¥ä¸‹è¿™å‡ ç§ã€‚</p><table><thead><tr><th align="left">è¯·æ±‚æ–¹å¼</th><th align="left">åŠŸèƒ½</th></tr></thead><tbody><tr><td align="left">GETï¼ˆé€‰æ‹©ï¼‰</td><td align="left">ä»æœåŠ¡å™¨ä¸Šè·å–ä¸€ä¸ªå…·ä½“çš„èµ„æºæˆ–è€…ä¸€ä¸ªèµ„æºåˆ—è¡¨ã€‚</td></tr><tr><td align="left">POSTï¼ˆåˆ›å»ºï¼‰</td><td align="left">åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºã€‚</td></tr><tr><td align="left">PUTï¼ˆæ›´æ–°ï¼‰</td><td align="left">ä»¥æ•´ä½“çš„æ–¹å¼æ›´æ–°æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªèµ„æºã€‚</td></tr><tr><td align="left">PATCH ï¼ˆæ›´æ–°ï¼‰</td><td align="left">åªæ›´æ–°æœåŠ¡å™¨ä¸Šä¸€ä¸ªèµ„æºçš„ä¸€ä¸ªå±æ€§ã€‚</td></tr><tr><td align="left">DELETEï¼ˆåˆ é™¤ï¼‰</td><td align="left">åˆ é™¤æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªèµ„æºã€‚</td></tr><tr><td align="left">HEAD</td><td align="left">è·å–ä¸€ä¸ªèµ„æºçš„å…ƒæ•°æ®ï¼Œå¦‚æ•°æ®çš„å“ˆå¸Œå€¼æˆ–æœ€åçš„æ›´æ–°æ—¶é—´ã€‚</td></tr><tr><td align="left">OPTIONS</td><td align="left">è·å–å®¢æˆ·ç«¯èƒ½å¯¹èµ„æºåšä»€ä¹ˆæ“ä½œçš„ä¿¡æ¯ã€‚</td></tr></tbody></table><h2 id="åœ¨-URI-ä¸­ä½“ç°èµ„æºï¼Œè€ŒéåŠ¨ä½œ"><a href="#åœ¨-URI-ä¸­ä½“ç°èµ„æºï¼Œè€ŒéåŠ¨ä½œ" class="headerlink" title="åœ¨ URI ä¸­ä½“ç°èµ„æºï¼Œè€ŒéåŠ¨ä½œ"></a>åœ¨ URI ä¸­ä½“ç°èµ„æºï¼Œè€ŒéåŠ¨ä½œ</h2><p>é˜…è¯» RESTful æ¶æ„çš„å‚è€ƒæ–‡çŒ®ä¹‹åï¼Œä½ ä¼šäº†è§£ä»€ä¹ˆæ˜¯èµ„æºçš„æ¦‚å¿µï¼Œä»¥åŠ REST çš„ç¡®åˆ‡å«ä¹‰ã€‚å†æ„å»º API çš„ URL çš„æ—¶å€™ï¼ŒURI ä¸­åº”è¯¥ä»…åŒ…å«èµ„æºï¼ˆå¯¹è±¡ï¼‰ï¼Œè€Œä¸è¦åŠ å…¥åŠ¨ä½œã€‚</p><p>æ¯”å¦‚ <code>/user/1/update</code> ï¼Œå…¶ä¸­ <code>update</code> å°±æ˜¯ä¸€ä¸ªåŠ¨ä½œï¼Œè™½ç„¶æˆ‘ä»¬å¸Œæœ›é€šè¿‡è¿™ä¸ª URI æ¥å®ç°ç”¨æˆ· ID ä¸º 1 çš„ç”¨æˆ·è¿›è¡Œä¿¡æ¯æ›´æ–°ï¼Œä½†æ˜¯æŒ‰ç…§ RESTful çš„è§„èŒƒï¼Œ<code>update</code>ä½œä¸ºåŠ¨ä½œï¼Œåº”è¯¥ç”¨ä¸Šé¢çš„ <code>PUT</code> æ¥è¡¨ç¤ºï¼Œæ‰€ä»¥è¯·æ±‚æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼Œåº”è¯¥ä½¿ç”¨ <code>PUT /user/1</code> æ¥è¡¨ç¤ºæ›´æ–°ç”¨æˆ· ID ä¸º 1 çš„ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>å¦‚æœå»å¯¹åº”ä¸Šé¢çš„è¯·æ±‚æ¨¡å¼ï¼š</p><ul><li>GET è¡¨ç¤ºæ˜¾ç¤ºã€åˆ—å‡ºã€å±•ç¤º</li><li>POST è¡¨ç¤ºæäº¤ã€åˆ›å»º</li><li>PUT è¡¨ç¤ºæ›´æ–°</li><li>DELETE è¡¨ç¤ºåˆ é™¤</li></ul><h2 id="ç‰ˆæœ¬"><a href="#ç‰ˆæœ¬" class="headerlink" title="ç‰ˆæœ¬"></a>ç‰ˆæœ¬</h2><p>API çš„å¼€å‘ç›´æ¥å…³ç³»äº† APP æ˜¯å¦å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œå¦‚æœåŸæœ¬è¿è¡Œæ­£å¸¸çš„ APIï¼Œçªç„¶æ”¹åŠ¨ï¼Œé‚£ä¹ˆä¹‹å‰ä½¿ç”¨è¿™ä¸ª API çš„ APP å¯èƒ½æ— æ³•æ­£å¸¸è¿è¡Œã€‚APP æ˜¯ä¸å¯èƒ½å¼ºè¿«ç”¨æˆ·ä¸»åŠ¨å‡çº§çš„ï¼Œå› æ­¤ï¼Œé€šè¿‡ API ç‰ˆæœ¬æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒAPI çš„å¤šä¸ªç‰ˆæœ¬æ˜¯åŒæ—¶è¿è¡Œçš„ï¼Œè€Œä¸”éƒ½è¦ä¿è¯å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</p><p>æŒ‰ç…§ RESTful çš„è§„èŒƒï¼Œä¸åŒçš„ç‰ˆæœ¬ä¹Ÿåº”è¯¥ç”¨ç›¸åŒçš„ API URLï¼Œé€šè¿‡ header ä¿¡æ¯æ¥åˆ¤æ–­ç‰ˆæœ¬ï¼Œå†è°ƒç”¨ä¸åŒç‰ˆæœ¬çš„ç¨‹åºè¿›è¡Œå¤„ç†ã€‚ä½†æ˜¯è¿™æ˜æ˜¾ä¼šç»™å¼€å‘å¸¦æ¥å·¨å¤§çš„æˆæœ¬ã€‚</p><p>è§£å†³åŠæ³•æœ‰ä¸¤ç§ï¼š</p><ol><li>æ–°ç‰ˆæœ¬å…¼å®¹æ—§ç‰ˆæœ¬ï¼Œæ‰€æœ‰æ—§ç‰ˆæœ¬çš„åŠ¨ä½œã€å­—æ®µã€æ“ä½œï¼Œéƒ½åœ¨æ–°ç‰ˆæœ¬ä¸­å¯ä»¥è¢«å®ç°ï¼Œä½†æ˜æ˜¾è¿™æ ·çš„ç»´æŠ¤æˆæœ¬å¾ˆå¤§ï¼›</li><li>ä¸åŒçš„ç‰ˆæœ¬ï¼Œç”¨ä¸åŒçš„ URL æ¥æä¾›æœåŠ¡ï¼Œæ¯”å¦‚åœ¨ URL ä¸­é€šè¿‡ v1ã€v2 æ¥åŒºåˆ†ç‰ˆæœ¬å·ï¼Œæˆ–è€…é‡‡ç”¨å­åŸŸåçš„æ–¹å¼ï¼Œæ¯”å¦‚ v2.api.xxx.com/user çš„æ–¹å¼ã€‚</li></ol><h2 id="HTTP-å“åº”ç "><a href="#HTTP-å“åº”ç " class="headerlink" title="HTTP å“åº”ç "></a>HTTP å“åº”ç </h2><p>åœ¨ç”¨æˆ·å‘å‡ºè¯·æ±‚ï¼ŒæœåŠ¡ç«¯å¯¹è¯·æ±‚è¿›è¡Œå“åº”æ—¶ï¼Œç»™äºˆæ­£ç¡®çš„ HTTP å“åº”çŠ¶æ€ç ï¼Œæœ‰åˆ©äºè®©å®¢æˆ·ç«¯æ­£ç¡®åŒºåˆ†é‡åˆ°çš„æƒ…å†µã€‚</p><table><thead><tr><th align="center">çŠ¶æ€ç </th><th align="center">è¯·æ±‚æ–¹å¼</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="center"><code>200</code></td><td align="center"><code>[GET]</code></td><td align="left">ï¼ˆ<code>OK</code>æˆåŠŸï¼‰æœåŠ¡å™¨æˆåŠŸè¿”å›ç”¨æˆ·è¯·æ±‚çš„æ•°æ®,è¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ï¼ˆIdempotentï¼‰</td></tr><tr><td align="center"><code>201</code></td><td align="center"><code>[POST/PUT/PATCH]</code></td><td align="left">ï¼ˆ<code>CREATED</code>å·²å»ºç«‹ï¼‰ç”¨æˆ·æ–°å»ºæˆ–ä¿®æ”¹æ•°æ®æˆåŠŸ</td></tr><tr><td align="center"><code>202</code></td><td align="center"><code>[*]</code></td><td align="left">(<code>Accepted</code>æ¥å—è¯·æ±‚)è¡¨ç¤ºä¸€ä¸ªè¯·æ±‚å·²ç»è¿›å…¥åå°æ’é˜Ÿï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰</td></tr><tr><td align="center"><code>204</code></td><td align="center"><code>[DELETE]</code></td><td align="left">(<code>NO CONTENT</code>æ— å†…å®¹) ç”¨æˆ·åˆ é™¤æ•°æ®æˆåŠŸ</td></tr><tr><td align="center"><code>300</code></td><td align="center"></td><td align="left">ï¼ˆ<code>Multiple Choices</code>å¤šç§é€‰æ‹©ï¼‰ é’ˆå¯¹è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¯æ‰§è¡Œå¤šç§æ“ä½œã€‚æœåŠ¡å™¨å¯æ ¹æ®è¯·æ±‚è€… (user agent) é€‰æ‹©ä¸€é¡¹æ“ä½œï¼Œæˆ–æä¾›æ“ä½œåˆ—è¡¨ä¾›è¯·æ±‚è€…é€‰æ‹©ã€‚</td></tr><tr><td align="center"><code>301</code></td><td align="center"></td><td align="left">ï¼ˆ<code>Permanently Moved</code>æ°¸ä¹…ç§»åŠ¨ï¼‰ è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚æœåŠ¡å™¨è¿”å›æ­¤å“åº”ï¼ˆå¯¹ GET æˆ– HEAD è¯·æ±‚çš„å“åº”ï¼‰æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¯·æ±‚è€…è½¬åˆ°æ–°ä½ç½®ã€‚</td></tr><tr><td align="center"><code>302</code></td><td align="center"></td><td align="left">ï¼ˆ<code>Temporarily Moved</code>ä¸´æ—¶ç§»åŠ¨ï¼‰ æœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åçš„è¯·æ±‚ã€‚</td></tr><tr><td align="center"><code>303</code></td><td align="center"></td><td align="left">ï¼ˆ<code>See Other</code>æŸ¥çœ‹å…¶ä»–ä½ç½®ï¼‰ è¯·æ±‚è€…åº”å½“å¯¹ä¸åŒçš„ä½ç½®ä½¿ç”¨å•ç‹¬çš„ GET è¯·æ±‚æ¥æ£€ç´¢å“åº”æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤ä»£ç </td></tr><tr><td align="center"><code>304</code></td><td align="center"></td><td align="left">ï¼ˆ<code>Not Modified</code>æœªä¿®æ”¹ï¼‰ è‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚æœåŠ¡å™¨è¿”å›æ­¤å“åº”æ—¶ï¼Œä¸ä¼šè¿”å›ç½‘é¡µå†…å®¹ã€‚</td></tr><tr><td align="center"><code>305</code></td><td align="center"></td><td align="left">ï¼ˆ<code>Use Proxy</code>ä½¿ç”¨ä»£ç†ï¼‰ è¯·æ±‚è€…åªèƒ½ä½¿ç”¨ä»£ç†è®¿é—®è¯·æ±‚çš„ç½‘é¡µã€‚å¦‚æœæœåŠ¡å™¨è¿”å›æ­¤å“åº”ï¼Œè¿˜è¡¨ç¤ºè¯·æ±‚è€…åº”ä½¿ç”¨ä»£ç†ã€‚</td></tr><tr><td align="center"><code>307</code></td><td align="center"></td><td align="left"><code>Temporary Redirect</code>ï¼ˆä¸´æ—¶é‡å®šå‘ï¼‰ æœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åçš„è¯·æ±‚ã€‚</td></tr><tr><td align="center"><code>400</code></td><td align="center"><code>[POST/PUT/PATCH]</code></td><td align="left"><code>INVALID REQUEST</code>(åè¯·æ±‚) ç”¨æˆ·å‘å‡ºçš„è¯·æ±‚æœ‰é”™è¯¯ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ–°å»ºæˆ–ä¿®æ”¹æ•°æ®çš„æ“ä½œï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ã€‚</td></tr><tr><td align="center"><code>401</code></td><td align="center"><code>[*]</code></td><td align="left"><code>Unauthorized</code> (æœªæˆæƒ) è¡¨ç¤ºç”¨æˆ·æ²¡æœ‰æƒé™ï¼ˆä»¤ç‰Œã€ç”¨æˆ·åã€å¯†ç é”™è¯¯ï¼‰</td></tr><tr><td align="center"><code>403</code></td><td align="center"><code>[*]</code></td><td align="left"><code>Forbidden</code> ï¼ˆç¦æ­¢ï¼‰è¡¨ç¤ºç”¨æˆ·å¾—åˆ°æˆæƒï¼ˆä¸401é”™è¯¯ç›¸å¯¹ï¼‰ï¼Œä½†æ˜¯è®¿é—®æ˜¯è¢«ç¦æ­¢çš„</td></tr><tr><td align="center"><code>404</code></td><td align="center"><code>[*]</code></td><td align="left"><code>NOT FOUND</code> ï¼ˆæœªæ‰¾åˆ°ï¼‰ç”¨æˆ·å‘å‡ºçš„è¯·æ±‚é’ˆå¯¹çš„æ˜¯ä¸å­˜åœ¨çš„è®°å½•ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ“ä½œï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ã€‚</td></tr><tr><td align="center"><code>405</code></td><td align="center"></td><td align="left"><code>Method not allowed</code>ï¼ˆæ–¹æ³•ä¸è¢«å…è®¸ï¼‰ä¸æ”¯æŒè¯¥Requestçš„æ–¹æ³•</td></tr><tr><td align="center"><code>406</code></td><td align="center"></td><td align="left"><code>Not Acceptable</code>ï¼ˆæ— æ³•æ¥å—ï¼‰æ— æ³•ä½¿ç”¨è¯·æ±‚çš„å†…å®¹ç‰¹æ€§æ¥å“åº”è¯·æ±‚çš„ç½‘é¡µï¼Œä¹Ÿå°±æ˜¯åå°çš„è¿”å›ç»“æœå‰å°æ— æ³•è§£æï¼ˆæ¯”å¦‚ç”¨æˆ·è¯·æ±‚ JSON æ ¼å¼ï¼Œä½†æ˜¯åªæœ‰ XML æ ¼å¼ï¼‰</td></tr><tr><td align="center"><code>407</code></td><td align="center"></td><td align="left"><code>Proxy Authentication Required</code>ï¼ˆè¦æ±‚è¿›è¡Œä»£ç†è®¤è¯ï¼‰ä¸çŠ¶æ€ç 401ç±»ä¼¼ï¼Œ ç”¨äºéœ€è¦è¿›è¡Œè®¤è¯çš„ä»£ç†æœåŠ¡å™¨.</td></tr><tr><td align="center"><code>408</code></td><td align="center"></td><td align="left"><code>Request Timeout</code>(è¯·æ±‚è¶…æ—¶) å¦‚æœå®¢æˆ·ç«¯å®Œæˆè¯·æ±‚æ—¶èŠ±è´¹çš„æ—¶é—´å¤ªé•¿ï¼Œ æœåŠ¡å™¨å¯ä»¥å›é€è¿™ä¸ªçŠ¶æ€ç å¹¶å…³é—­è¿æ¥</td></tr><tr><td align="center"><code>410</code></td><td align="center"><code>[GET]</code></td><td align="left"><code>Gone</code> ï¼ˆè¿‡å»çš„ï¼‰ç”¨æˆ·è¯·æ±‚çš„èµ„æºè¢«æ°¸ä¹…åˆ é™¤ï¼Œä¸”ä¸ä¼šå†å¾—åˆ°çš„</td></tr><tr><td align="center"><code>422</code></td><td align="center"><code>[POST/PUT/PATCH]</code></td><td align="left"><code>Unprocesable entity</code> ï¼ˆä¸å¯å¤„ç†ï¼‰å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå‘ç”Ÿä¸€ä¸ªéªŒè¯é”™è¯¯</td></tr><tr><td align="center"><code>500</code></td><td align="center"><code>[*]</code></td><td align="left"><code>INTERNAL SERVER ERROR</code>(æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼‰æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯ï¼Œç”¨æˆ·å°†æ— æ³•åˆ¤æ–­å‘å‡ºçš„è¯·æ±‚æ˜¯å¦æˆåŠŸ</td></tr></tbody></table><h2 id="è¿”å›å€¼ç»“æ„"><a href="#è¿”å›å€¼ç»“æ„" class="headerlink" title="è¿”å›å€¼ç»“æ„"></a>è¿”å›å€¼ç»“æ„</h2><p>åœ¨å®Œæˆäº†ä¸Šé¢çš„ URL éƒ¨ç½²ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹è¿”å›ç»“æœåº”è¯¥æ€ä¹ˆæ ·æ¥ç¡®å®šã€‚</p><p>æˆ‘çœ‹åˆ°å¤§éƒ¨åˆ†æ–‡çŒ®ä¸­æŒ‡å‡ºï¼Œæœ€å¥½ä½¿ç”¨ JSON è¿›è¡Œè¿”å›ï¼Œè€Œé xmlã€‚</p><p>æˆ‘è®¤ä¸ºåŸå› å¯èƒ½æœ‰ä¸¤ç‚¹ï¼š</p><ol><li>JSON å¯ä»¥å¾ˆå¥½çš„è¢«å¾ˆå¤šç¨‹åºæ”¯æŒï¼Œjavascript çš„ ajax å¯ä»¥ç›´æ¥å°† JSON è½¬æ¢ä¸ºå¯¹è±¡ã€‚</li><li>JSON çš„æ ¼å¼åœ¨å®¹é‡ä¸Šæ¯” xml å°å¾ˆå¤šï¼Œå¯ä»¥å‡ä½å®½å¸¦å ç”¨ï¼Œæé«˜ä¼ è¾“æ•ˆç‡ã€‚</li></ol><p>é‚£ä¹ˆï¼Œè¿”å›å€¼åº”è¯¥æ€ä¹ˆå»éƒ¨ç½²å‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œå­—æ®µçš„åˆç†è¿”å›ï¼Œæ•°æ®çš„åŒ…è£¹ã€‚å› ä¸ºè¿”å›å€¼ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸è¦å¯¹æ•°æ®è¿›è¡ŒåŒºåˆ†åˆ†ç»„ï¼Œæˆ–è€…æŒ‰ç…§ä»å±å…³ç³»æ‰“åŒ…ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å†è¿”å›æ—¶ï¼Œæœ€å¥½æœ‰åŒ…è£¹çš„æ€æƒ³ï¼ŒæŠŠæ•°æ®å­˜æ”¾åœ¨ä¸åŒçš„åŒ…è£¹ä¸­è¿›è¡Œè¿”å›ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">&#123;<br>    <span class="hljs-string">&#x27;error_code&#x27;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-string">&#x27;data&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;user_id&#x27;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-string">&#x27;username&#x27;</span>: <span class="hljs-string">&#x27;xiaomin&#x27;</span><br>    &#125;,<br>    <span class="hljs-string">&#x27;server_time&#x27;</span>: <span class="hljs-number">14939939</span><br>&#125;<br></code></pre></div></td></tr></table></figure><p>ä¸Šé¢è¿”å›çš„ JSON ä¸­ï¼Œä½¿ç”¨ data æ¥ä½œä¸ºæ•°æ®åŒ…ï¼Œå°†æ‰€æœ‰æ•°æ®ç»Ÿä¸€ä»¥è¿™ä¸ªå­—æ®µè¿›è¡ŒåŒ…è£¹ã€‚é™¤äº† dataï¼Œä¹Ÿå¯ä»¥ç”¨ list ç­‰å…¶ä»–å½¢å¼çš„åŒ…è£¹ï¼Œå‘½åéƒ½æ˜¯è‡ªå·±æ¥æ ¹æ®è‡ªå·±çš„éœ€è¦ç¡®å®šçš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">&#123;<br>    <span class="hljs-string">&#x27;error_code&#x27;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-string">&#x27;list&#x27;</span>: [<br>        &#123;<span class="hljs-string">&#x27;user_id&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;username&#x27;</span>: <span class="hljs-string">&#x27;xiaoming&#x27;</span>&#125;,<br>        &#123;<span class="hljs-string">&#x27;user_id&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;username&#x27;</span>: <span class="hljs-string">&#x27;goudan&#x27;</span>&#125;<br>    ]<br>    <span class="hljs-string">&#x27;server_time&#x27;</span>: <span class="hljs-number">14939939</span><br>&#125;<br></code></pre></div></td></tr></table></figure><p>æ€»ä¹‹ï¼Œä¸è¦ä¸åˆ†åŒ…ï¼Œç›´æ¥æŠŠæ‰€æœ‰æ•°æ®å’Œä¸€äº›ä½ æƒ³è¿”å›çš„å…¨å±€æ•°æ®æ··åœ¨ä¸€èµ·è¿›è¡Œè¿”å›ã€‚</p><p>å…¶æ¬¡ï¼Œé”™è¯¯ç ã€‚é”™è¯¯ç çš„ä½œç”¨æ˜¯æ–¹ä¾¿æŸ¥æ‰¾é”™è¯¯åŸå› ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨ error_code æ¥è¡¨ç¤ºï¼Œå½“ error_code=0 æ—¶ï¼Œè¡¨ç¤ºæ²¡æœ‰å‘ç”Ÿé”™è¯¯ï¼Œå½“ error_code&gt;0 æ—¶ï¼Œå‘ç”Ÿäº†é”™è¯¯ï¼Œå¹¶ä¸”æä¾›è¾ƒä¸ºè¯¦ç»†çš„æ–‡æ¡£ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯å¯¹åº”çš„ error_code å€¼æ‰€äº§ç”Ÿçš„é”™è¯¯çš„åŸå› å’Œä½ç½®ã€‚</p><p>æœ€åï¼Œç©ºç™½å‹ç¼©å’Œå­—ç¬¦è½¬æ¢ã€‚ä¹Ÿå°±æ˜¯è¿”å›çš„ JSON ç»“æœä¸è¦æ¢è¡Œå’Œç©ºæ ¼ï¼Œç”¨ä¸€è¡Œè¿”å›ç»“æœï¼Œä½¿æ•´ä¸ªç»“æœæ–‡æœ¬å®¹é‡æœ€å°ã€‚åŒæ—¶ï¼Œä¸­æ–‡ç­‰å­—ç¬¦æˆ–ç»“æœä¸­æœ‰å¼•å·ï¼Œéƒ½è¿›è¡Œå­—ç¬¦è½¬æ¢ï¼Œé˜²æ­¢ç»“æœæ— æ³•è¢«æ­£ç¡®è¯†åˆ«ã€‚</p><h2 id="é‰´æƒ"><a href="#é‰´æƒ" class="headerlink" title="é‰´æƒ"></a>é‰´æƒ</h2><p>å…¶å®ä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯çš„æƒé™æ§åˆ¶ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œä¼šç»™å®¢æˆ·ç«¯åˆ†å‘ä¸€ä¸ª token æ¥ç¡®å®šè¯¥å®¢æˆ·ç«¯çš„å”¯ä¸€èº«ä»½ã€‚å®¢æˆ·ç«¯åœ¨è¯·æ±‚æ—¶ï¼Œé€šè¿‡è¿™ä¸ª tokenï¼Œåˆ¤æ–­å‘å‡ºè¯·æ±‚çš„å®¢æˆ·ç«¯æ‰€å¯¹åº”çš„ç”¨æˆ·ï¼ŒåŠå…¶ç›¸å…³ä¿¡æ¯å’Œæƒé™ã€‚</p><p>å‰æ–‡å·²ç»æåˆ°äº†ï¼Œtoken ä¿¡æ¯ä¸æ˜¯ç”¨æ¥è¿›è¡Œå¤„ç†çš„æ•°æ®ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡ POSTã€PUT ç­‰è¿›è¡Œæ•°æ®æäº¤æˆ–ä¼ è¾“ï¼Œä½†æ˜¯ä» RESTful è§„èŒƒæ¥è®²ï¼Œå®ƒä¸å±äºæ“ä½œæ•°æ®ï¼Œåœ¨æœåŠ¡ç«¯è¿›è¡Œå¤„ç†æ—¶ï¼Œä»…æ˜¯åˆ©ç”¨ token è¿›è¡Œé‰´æƒå¤„ç†ï¼Œæ‰€ä»¥ï¼Œæˆ‘çš„å»ºè®®æ˜¯é€šè¿‡ header æ¥å‘é€ tokenã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> API </tag>
            
            <tag> RESTful </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå†…å­˜ç®¡ç†</title>
      <link href="2020/07/30/python-gao-ji-nei-cun-guan-li/"/>
      <url>2020/07/30/python-gao-ji-nei-cun-guan-li/</url>
      
        <content type="html"><![CDATA[<h2 id="å†…å­˜ç®¡ç†æœºåˆ¶"><a href="#å†…å­˜ç®¡ç†æœºåˆ¶" class="headerlink" title="å†…å­˜ç®¡ç†æœºåˆ¶"></a>å†…å­˜ç®¡ç†æœºåˆ¶</h2><blockquote><p>Pythonä¸­ä¸ä½†å˜é‡åæ— éœ€äº‹å…ˆå£°æ˜ï¼Œè€Œä¸”ä¹Ÿæ— éœ€ç±»å‹å£°æ˜ã€‚åœ¨Pythonè¯­è¨€ä¸­ï¼Œå¯¹è±¡çš„ç±»å‹å’Œå†…å­˜å ç”¨éƒ½æ˜¯è¿è¡Œæ—¶ç¡®å®šçš„ã€‚åœ¨èµ‹å€¼æ—¶è§£é‡Šå™¨ä¼šæ ¹æ®è¯­æ³•å’Œå³ä¾§çš„æ“ä½œæ•°æ¥å†³å®šæ–°å¯¹è±¡çš„ç±»å‹ã€‚åœ¨å¯¹è±¡åˆ›å»ºåï¼Œä¸€ä¸ªè¯¥å¯¹è±¡çš„å¼•ç”¨ä¼šè¢«èµ‹å€¼ç»™å·¦ä¾§çš„å˜é‡ã€‚</p></blockquote><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/python%E9%92%88%E5%AF%B9%E5%8F%98%E9%87%8F%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6%20.png" alt="pythoné’ˆå¯¹å˜é‡çš„å†…å­˜ç®¡ç†æœºåˆ¶"></p><h3 id="id-å‡½æ•°"><a href="#id-å‡½æ•°" class="headerlink" title="id()å‡½æ•°"></a>id()å‡½æ•°</h3><blockquote><p>pythonçš„å†…ç½®å‡½æ•° id()å¯ä»¥ç”¨æ¥æŸ¥çœ‹å¯¹è±¡çš„å†…å­˜åœ°å€</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a = <span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">id</span>(a)<br><span class="hljs-number">24834392</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a = <span class="hljs-string">&#x27;banana&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">id</span>(a)<br><span class="hljs-number">139990659655312</span><br><br><br><span class="hljs-meta">&gt;&gt;&gt; </span>a = <span class="hljs-number">3</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>b = <span class="hljs-number">3</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">id</span>(a)<br><span class="hljs-number">10289448</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">id</span>(b)<br><span class="hljs-number">10289448</span><br></code></pre></div></td></tr></table></figure><h3 id="å¼•ç”¨è®¡æ•°"><a href="#å¼•ç”¨è®¡æ•°" class="headerlink" title="å¼•ç”¨è®¡æ•°"></a>å¼•ç”¨è®¡æ•°</h3><ul><li><p>è¦ä¿æŒè¿½è¸ªå†…å­˜ä¸­çš„å¯¹è±¡ï¼ŒPythonä½¿ç”¨äº†å¼•ç”¨è®¡æ•°è¿™ä¸€ç®€å•æŠ€æœ¯ã€‚</p></li><li><p>ä¹Ÿå°±æ˜¯è¯´Pythonå†…éƒ¨è®°å½•ç€æ‰€æœ‰ä½¿ç”¨ä¸­çš„å¯¹è±¡å„æœ‰å¤šå°‘å¼•ç”¨ã€‚</p><ul><li>ä¸€ä¸ªå†…éƒ¨è·Ÿè¸ªå˜é‡ï¼Œç§°ä¸ºå¼•ç”¨è®¡æ•°å™¨ã€‚</li><li>æ¯ä¸ªå¯¹è±¡å„æœ‰å¤šå°‘ä¸ªå¼•ç”¨ï¼Œç®€ç§°å¼•ç”¨è®¡æ•°ã€‚</li><li>å½“å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œå½“è¿™ä¸ªå¯¹è±¡ä¸å†éœ€è¦æ—¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å˜ä¸º0æ—¶ï¼Œå®ƒé€šå¸¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚</li></ul></li></ul><h4 id="å¢åŠ å¼•ç”¨è®¡æ•°"><a href="#å¢åŠ å¼•ç”¨è®¡æ•°" class="headerlink" title="å¢åŠ å¼•ç”¨è®¡æ•°"></a>å¢åŠ å¼•ç”¨è®¡æ•°</h4><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/%E5%A2%9E%E5%8A%A0%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%20.png" alt="å¢åŠ å¼•ç”¨è®¡æ•°"></p><h4 id="å‡å°‘å¼•ç”¨è®¡æ•°"><a href="#å‡å°‘å¼•ç”¨è®¡æ•°" class="headerlink" title="å‡å°‘å¼•ç”¨è®¡æ•°"></a>å‡å°‘å¼•ç”¨è®¡æ•°</h4><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/%E5%87%8F%E5%B0%91%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%20.png" alt="å‡å°‘å¼•ç”¨è®¡æ•°"></p><h3 id="iså’Œ"><a href="#iså’Œ" class="headerlink" title="iså’Œ=="></a>iså’Œ==</h3><p>åœ¨è®²iså’Œ==è¿™ä¸¤ç§è¿ç®—ç¬¦åŒºåˆ«ä¹‹å‰ï¼Œé¦–å…ˆè¦çŸ¥é“Pythonä¸­å¯¹è±¡åŒ…å«çš„ä¸‰ä¸ªåŸºæœ¬è¦ç´ ï¼Œåˆ†åˆ«æ˜¯ï¼š<code>id</code>(èº«ä»½æ ‡è¯†)ã€<code>type</code>(æ•°æ®ç±»å‹)å’Œ<code>value</code>(å€¼)ã€‚</p><p><code>is</code>å’Œ<code>==</code>éƒ½æ˜¯å¯¹å¯¹è±¡è¿›è¡Œæ¯”è¾ƒåˆ¤æ–­ä½œç”¨çš„ï¼Œä½†å¯¹å¯¹è±¡æ¯”è¾ƒåˆ¤æ–­çš„å†…å®¹å¹¶ä¸ç›¸åŒã€‚</p><p><code>is</code>ä¹Ÿè¢«å«åšåŒä¸€æ€§è¿ç®—ç¬¦ï¼Œè¿™ä¸ªè¿ç®—ç¬¦æ¯”è¾ƒåˆ¤æ–­çš„æ˜¯å¯¹è±¡é—´çš„å”¯ä¸€èº«ä»½æ ‡è¯†ï¼Œä¹Ÿå°±æ˜¯<code>id</code>æ˜¯å¦ç›¸åŒã€‚</p><p><code>==</code>æ˜¯pythonæ ‡å‡†æ“ä½œç¬¦ä¸­çš„æ¯”è¾ƒæ“ä½œç¬¦ï¼Œç”¨æ¥æ¯”è¾ƒåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„<code>value</code>(å€¼)æ˜¯å¦ç›¸ç­‰</p><h3 id="å¯å˜ç±»å‹ä¸ä¸å¯å˜ç±»å‹"><a href="#å¯å˜ç±»å‹ä¸ä¸å¯å˜ç±»å‹" class="headerlink" title="å¯å˜ç±»å‹ä¸ä¸å¯å˜ç±»å‹"></a>å¯å˜ç±»å‹ä¸ä¸å¯å˜ç±»å‹</h3><ol><li><code>list</code>ã€<code>dict</code>ã€<code>set</code>å±äºå¯å˜ç±»å‹</li><li><code>number</code>ã€<code>str</code>ã€<code>tuple</code>ã€<code>bool</code>å±äºä¸å¯å˜ç±»å‹</li></ol><p>ä¸å¯å˜æ•°æ®ç±»å‹åœ¨ç¬¬ä¸€æ¬¡å£°æ˜èµ‹å€¼å£°æ˜çš„æ—¶å€™, ä¼šåœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€å—ç©ºé—´, ç”¨æ¥å­˜æ”¾è¿™ä¸ªå˜é‡è¢«èµ‹çš„å€¼, è€Œè¿™ä¸ªå˜é‡å®é™…ä¸Šå­˜å‚¨çš„, å¹¶ä¸æ˜¯è¢«èµ‹äºˆçš„è¿™ä¸ªå€¼, è€Œæ˜¯å­˜æ”¾è¿™ä¸ªå€¼æ‰€åœ¨ç©ºé—´çš„å†…å­˜åœ°å€, é€šè¿‡è¿™ä¸ªåœ°å€, å˜é‡å°±å¯ä»¥åœ¨å†…å­˜ä¸­å–å‡ºæ•°æ®äº†. æ‰€è°“ä¸å¯å˜å°±æ˜¯è¯´, æˆ‘ä»¬ä¸èƒ½æ”¹å˜è¿™ä¸ªæ•°æ®åœ¨å†…å­˜ä¸­çš„å€¼, æ‰€ä»¥å½“æˆ‘ä»¬æ”¹å˜è¿™ä¸ªå˜é‡çš„èµ‹å€¼æ—¶, åªæ˜¯åœ¨å†…å­˜ä¸­é‡æ–°å¼€è¾Ÿäº†ä¸€å—ç©ºé—´, å°†è¿™ä¸€æ¡æ–°çš„æ•°æ®å­˜æ”¾åœ¨è¿™ä¸€ä¸ªæ–°çš„å†…å­˜åœ°å€é‡Œ, è€ŒåŸæ¥çš„é‚£ä¸ªå˜é‡å°±ä¸åœ¨å¼•ç”¨åŸæ•°æ®çš„å†…å­˜åœ°å€è€Œè½¬ä¸ºå¼•ç”¨æ–°æ•°æ®çš„å†…å­˜åœ°å€äº†ã€‚</p><p>ç»“åˆä¸å¯å˜æ•°æ®ç±»å‹ï¼Œå¯å˜æ•°æ®ç±»å‹å°±å¾ˆå¥½ç†è§£æ¥ï¼Œå¯å˜æ•°æ®ç±»å‹æ˜¯æŒ‡å˜é‡æ‰€æŒ‡å‘çš„å†…å­˜åœ°å€å¤„çš„å€¼æ˜¯å¯ä»¥è¢«æ”¹å˜çš„ã€‚</p><p><strong>ä»å¦å¤–ä¸€ä¸ªè§’åº¦æ¥çœ‹ï¼š</strong></p><p>å¯å˜ç±»å‹ï¼šå½“è¯¥æ•°æ®ç±»å‹çš„å¯¹åº”å˜é‡çš„å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£ä¹ˆå®ƒå¯¹åº”çš„å†…å­˜åœ°å€ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œå¯¹äºè¿™ç§æ•°æ®ç±»å‹ï¼Œå°±ç§°ä¸å¯å˜æ•°æ®ç±»å‹ã€‚</p><p>å¯å˜æ•°æ®ç±»å‹ï¼šå½“è¯¥æ•°æ®ç±»å‹çš„å¯¹åº”å˜é‡çš„å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£ä¹ˆå®ƒå¯¹åº”çš„å†…å­˜åœ°å€ä¸å‘ç”Ÿæ”¹å˜ï¼Œå¯¹äºè¿™ç§æ•°æ®ç±»å‹ï¼Œå°±ç§°å¯å˜æ•°æ®ç±»å‹ã€‚</p><h3 id="å†…å­˜ç®¡ç†ä¼˜åŒ–"><a href="#å†…å­˜ç®¡ç†ä¼˜åŒ–" class="headerlink" title="å†…å­˜ç®¡ç†ä¼˜åŒ–"></a>å†…å­˜ç®¡ç†ä¼˜åŒ–</h3><p>Pythoné‡‡ç”¨åŸºäºå€¼çš„å†…å­˜ç®¡ç†æ¨¡å¼ï¼Œç›¸åŒçš„å€¼åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½ã€‚è¿™æ˜¯å¾ˆå¤šPythonæ•™ç¨‹ä¸Šéƒ½ä¼šæåˆ°çš„ä¸€å¥è¯ï¼Œä½†å®é™…æƒ…å†µè¦å¤æ‚çš„å¤šã€‚ä»€ä¹ˆæ‰æ˜¯å€¼ï¼Ÿä»€ä¹ˆæ ·çš„å€¼æ‰ä¼šåœ¨å†…å­˜ä¸­åªä¿å­˜ä¸€ä»½ï¼Ÿè¿™æ˜¯ä¸ªéå¸¸å¤æ‚çš„é—®é¢˜ã€‚</p><h4 id="åœ¨pythonäº¤äº’ç¯å¢ƒä¸­"><a href="#åœ¨pythonäº¤äº’ç¯å¢ƒä¸­" class="headerlink" title="åœ¨pythonäº¤äº’ç¯å¢ƒä¸­"></a>åœ¨pythonäº¤äº’ç¯å¢ƒä¸­</h4><p>é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œæ•´æ•°ã€å®æ•°ã€å­—ç¬¦ä¸²æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„å€¼ï¼Œè€Œä¸Šé¢é‚£å¥è¯ä¸­çš„â€œå€¼â€ä¸»è¦æŒ‡<strong>ä¸å¯å˜ç±»å‹</strong>ä¸­çš„æ•´æ•°å’Œå­—ç¬¦ä¸²ã€‚å¯¹äºåˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ã€é›†åˆä»¥åŠrangeå¯¹è±¡ã€mapå¯¹è±¡ç­‰å®¹å™¨ç±»å¯¹è±¡ï¼Œå®ƒä»¬ä¸æ˜¯æ™®é€šçš„â€œå€¼â€ï¼Œå³ä½¿çœ‹èµ·æ¥æ˜¯ä¸€æ ·çš„ï¼Œåœ¨å†…å­˜ä¸­ä¹Ÿä¸ä¼šåªä¿å­˜ä¸€ä»½ã€‚</p><h5 id="æ•´æ•°"><a href="#æ•´æ•°" class="headerlink" title="æ•´æ•°"></a>æ•´æ•°</h5><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">51</span>]: a = <span class="hljs-number">12</span><br><br>In [<span class="hljs-number">52</span>]: b = <span class="hljs-number">12</span><br><br>In [<span class="hljs-number">53</span>]: a <span class="hljs-keyword">is</span> b<br>Out[<span class="hljs-number">53</span>]: <span class="hljs-literal">True</span><br></code></pre></div></td></tr></table></figure><p>pythonä¸­å¯¹äºå°çš„æ•´æ•°å­˜åœ¨ä¸€ä¸ªç¼“å­˜æ± ã€‚ä¸ºäº†é¿å…å› åˆ›å»ºç›¸åŒçš„å€¼è€Œé‡å¤ç”³è¯·å†…å­˜ç©ºé—´æ‰€å¸¦æ¥çš„æ•ˆç‡é—®é¢˜ï¼Œ Pythonè§£é‡Šå™¨ä¼šåœ¨å¯åŠ¨æ—¶åˆ›å»ºå‡ºå°æ•´æ•°æ± ï¼ŒèŒƒå›´æ˜¯<code>[-5,256]</code>ï¼Œè¯¥èŒƒå›´å†…çš„å°æ•´æ•°å¯¹è±¡æ˜¯å…¨å±€è§£é‡Šå™¨èŒƒå›´å†…è¢«é‡å¤ä½¿ç”¨ï¼Œæ°¸è¿œä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚</p><h5 id="å®æ•°"><a href="#å®æ•°" class="headerlink" title="å®æ•°"></a>å®æ•°</h5><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">8</span>]: a = <span class="hljs-number">12.5</span><br><br>In [<span class="hljs-number">9</span>]: b = <span class="hljs-number">12.5</span><br><br>In [<span class="hljs-number">10</span>]: a <span class="hljs-keyword">is</span> b<br>Out[<span class="hljs-number">10</span>]: <span class="hljs-literal">False</span><br></code></pre></div></td></tr></table></figure><p>å¯¹äºå®æ•°ï¼Œç”±äºè®¡ç®—æœºå­˜å‚¨å®æ•°ä¼šæœ‰ç²¾åº¦é—®é¢˜ï¼Œå¾ˆéš¾ç²¾ç¡®å­˜å‚¨ï¼Œæ‰€ä»¥ä¸è¿›è¡Œç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿çœ‹èµ·æ¥æ˜¯ä¸€æ ·çš„å®æ•°ï¼Œåœ¨å†…å­˜ä¸­ä¹Ÿä¸æ˜¯ä¸€ä»½ã€‚</p><h5 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h5><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">63</span>]: a = <span class="hljs-string">&quot;abc123_&quot;</span><br><br>In [<span class="hljs-number">64</span>]: b = <span class="hljs-string">&quot;abc123_&quot;</span><br><br>In [<span class="hljs-number">65</span>]: a <span class="hljs-keyword">is</span> b<br>Out[<span class="hljs-number">65</span>]: <span class="hljs-literal">True</span><br><br>In [<span class="hljs-number">66</span>]: a = <span class="hljs-string">&quot;12 3&quot;</span><br><br>In [<span class="hljs-number">67</span>]: b = <span class="hljs-string">&quot;12 3&quot;</span><br><br>In [<span class="hljs-number">68</span>]: a <span class="hljs-keyword">is</span> b<br>Out[<span class="hljs-number">68</span>]: <span class="hljs-literal">False</span><br></code></pre></div></td></tr></table></figure><p>ç”±äºå˜é‡çš„å­˜å‚¨æœºåˆ¶ï¼Œpythonå¢åŠ äº†å­—ç¬¦ä¸²çš„<code>intern</code>æœºåˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå€¼åŒæ ·çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼ˆ<strong>æ•´æ•°ä¹Ÿä½¿ç”¨</strong>ï¼‰ä»…ä»…ä¼šä¿å­˜ä¸€ä»½ï¼Œæ˜¯å…±ç”¨çš„ï¼Œè¿™ä¹Ÿå†³å®šäº†å­—ç¬¦ä¸²å¿…é¡»æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">70</span>]: c = <span class="hljs-string">&quot;a&quot;</span> + <span class="hljs-string">&quot;b&quot;</span>  <span class="hljs-comment"># åœ¨ compile-timeï¼ˆç¼–è¯‘æ—¶ï¼‰å·²ç»æ±‚å®Œå€¼ï¼Œè¢«æ›¿æ¢æˆäº†&#x27;ab&#x27;, </span><br><br>In [<span class="hljs-number">71</span>]: <span class="hljs-built_in">id</span>(c)<br>Out[<span class="hljs-number">71</span>]: <span class="hljs-number">4489029232</span><br><br>In [<span class="hljs-number">72</span>]: d = <span class="hljs-string">&quot;ab&quot;</span>  <span class="hljs-comment"># æ­¤æ—¶ï¼Œå†…å­˜ä¸­å·²ç»æœ‰ &#x27;ab&#x27;, å› æ­¤ç›´æ¥å¼•ç”¨å³å¯</span><br><br>In [<span class="hljs-number">73</span>]: <span class="hljs-built_in">id</span>(d)<br>Out[<span class="hljs-number">73</span>]: <span class="hljs-number">4489029232</span><br><br>  <br>In [<span class="hljs-number">74</span>]: <span class="hljs-built_in">id</span>(a + <span class="hljs-string">&quot;b&quot;</span>)  <span class="hljs-comment"># åœ¨run-timeï¼ˆè¿è¡Œæ—¶ï¼‰æ‹¼æ¥çš„ï¼Œå¯¼è‡´æ²¡æœ‰è¢«ä¸»åŠ¨intern</span><br>Out[<span class="hljs-number">74</span>]: <span class="hljs-number">4519083312</span><br><br> <br>In [<span class="hljs-number">75</span>]: a = <span class="hljs-string">&#x27;hello world&#x27;</span><br>In [<span class="hljs-number">76</span>]: b = <span class="hljs-string">&#x27;hello world&#x27;</span><br><br>In [<span class="hljs-number">77</span>]: a <span class="hljs-keyword">is</span> b  <span class="hljs-comment"># internæœºåˆ¶ä»…ä»…å¯¹é‚£äº›çœ‹èµ·æ¥åƒæ˜¯Pythonæ ‡è¯†ç¬¦çš„å­—ç¬¦ä¸²å¯¹è±¡æ‰ä¼šè§¦å‘</span><br>Out[<span class="hljs-number">77</span>]: <span class="hljs-literal">False</span><br></code></pre></div></td></tr></table></figure><p><strong>internæœºåˆ¶</strong></p><p>ã€€ã€€<strong>ä¼˜ç‚¹</strong>ï¼šåœ¨åˆ›å»ºæ–°çš„å­—ç¬¦å¯¹è±¡æ—¶ï¼Œå¦‚æœå†…å­˜ä¸­å·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥å¼•ç”¨ï¼Œé¿å…é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯å†…å­˜ï¼Œæå‡æ•ˆç‡ã€‚</p><p>ã€€ã€€<strong>ç¼ºç‚¹</strong>ï¼šåœ¨æ‹¼æ¥å­—ç¬¦ä¸²æ—¶ï¼Œæˆ–è€…åœ¨æ”¹åŠ¨å­—ç¬¦ä¸²æ—¶ä¼šæå¤§çš„å½±å“æ€§èƒ½ã€‚åŸå› æ˜¯å­—ç¬¦ä¸²åœ¨Pythonå½“ä¸­æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œæ‰€ä»¥å¯¹å­—ç¬¦ä¸²çš„æ”¹åŠ¨ä¸æ˜¯inplaceï¼ˆåŸåœ°ï¼‰æ“ä½œï¼Œéœ€è¦æ–°å¼€è¾Ÿå†…å­˜åœ°å€ï¼Œæ–°å»ºå¯¹è±¡ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ‹¼æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ä¸å»ºè®®ç”¨<code>+</code>è€Œæ˜¯ç”¨<code>join()</code>ã€‚<code>join()</code>æ˜¯å…ˆè®¡ç®—å‡ºå…¨éƒ¨å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç„¶åå†ä¸€ä¸€æ‹·è´ï¼Œä»…ä»…åˆ›å»ºä¸€æ¬¡å¯¹è±¡ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>å•è¯ï¼Œå³Pythonæ ‡è¯†ç¬¦ï¼Œä¸å¯ä¿®æ”¹ï¼Œé»˜è®¤å¼€å¯internæœºåˆ¶ï¼Œå…±ç”¨å¯¹è±¡ï¼Œå¼•ç”¨è®¡æ•°ä¸º0æ—¶è‡ªåŠ¨è¢«å›æ”¶ã€‚</li><li>å­—ç¬¦ä¸²ï¼ˆåŒ…å«äº†é™¤Pythonæ ‡è¯†ç¬¦ä»¥å¤–çš„å­—ç¬¦ï¼‰ï¼Œä¸å¯ä¿®æ”¹ï¼Œé»˜è®¤æ²¡æœ‰å¼€å¯internæœºåˆ¶ï¼Œå¼•ç”¨è®¡æ•°ä¸º0æ—¶è‡ªåŠ¨è¢«å›æ”¶ã€‚</li><li>ç‰¹æ®Šæƒ…å†µä¸‹ï¼ˆåŠ¨æ€æ‹¼æ¥ï¼‰ï¼Œä¸ä¼šè¢«ä¸»åŠ¨internã€‚</li></ol><h5 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h5><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">4</span>]: a = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br><br>In [<span class="hljs-number">5</span>]: b = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br><br>In [<span class="hljs-number">6</span>]: a <span class="hljs-keyword">is</span> b<br>Out[<span class="hljs-number">6</span>]: <span class="hljs-literal">False</span><br></code></pre></div></td></tr></table></figure><p>å¯¹äºå…ƒç»„ç­‰å®¹å™¨ç±»å¯¹è±¡ï¼Œå®ƒä»¬ä¸æ˜¯æ™®é€šçš„â€œå€¼â€ï¼Œå³ä½¿çœ‹èµ·æ¥æ˜¯ä¸€æ ·çš„ï¼Œåœ¨å†…å­˜ä¸­ä¹Ÿä¸ä¼šåªä¿å­˜ä¸€ä»½ã€‚</p><h4 id="åœ¨Pythonä»£ç ä¸­"><a href="#åœ¨Pythonä»£ç ä¸­" class="headerlink" title="åœ¨Pythonä»£ç ä¸­"></a>åœ¨Pythonä»£ç ä¸­</h4><p>åœ¨åŒä¸€æ¨¡å—æ–‡ä»¶ä¸­ï¼Œä¸å¯å˜ç±»å‹çš„æ•°å­—ã€å­—ç¬¦ä¸²ã€å…ƒç»„ï¼Œ åœ¨å€¼ç›¸åŒæ—¶ï¼Œåªä¼šä¿å­˜ä¸€ä»½;è€Œä¸åŒæ¨¡å—ä¸­çš„ä¸åŒå€¼ï¼Œæ‰ä¼šé‡æ–°ç”Ÿæˆã€‚</p><p><strong>æ¨¡å— <code>bbb.py</code></strong></p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">c1 = <span class="hljs-number">1000</span><br>c2 = <span class="hljs-string">&quot;hello world % &quot;</span><br>c3 = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>c4 = <span class="hljs-number">12.3</span><br><br></code></pre></div></td></tr></table></figure><p><strong>æ¨¡å— <code>aaa.py</code></strong></p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> bbb <span class="hljs-keyword">import</span> *<br><br>a = <span class="hljs-number">1000</span><br>b = <span class="hljs-number">1000</span><br>print(a <span class="hljs-keyword">is</span> b)  <span class="hljs-comment"># True</span><br>print(a <span class="hljs-keyword">is</span> c1)  <span class="hljs-comment"># False</span><br><br>a = <span class="hljs-string">&quot;hello world % &quot;</span><br>b = <span class="hljs-string">&quot;hello world % &quot;</span><br>print(a <span class="hljs-keyword">is</span> b)  <span class="hljs-comment"># True</span><br>print(a <span class="hljs-keyword">is</span> c2)  <span class="hljs-comment"># False</span><br><br>a = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>b = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>print(a <span class="hljs-keyword">is</span> b)  <span class="hljs-comment"># True</span><br>print(a <span class="hljs-keyword">is</span> c3)  <span class="hljs-comment"># False</span><br><br>a = <span class="hljs-number">12.3</span><br>b = <span class="hljs-number">12.3</span><br>print(a <span class="hljs-keyword">is</span> b)  <span class="hljs-comment"># True</span><br>print(a <span class="hljs-keyword">is</span> c4)  <span class="hljs-comment"># False</span><br><br></code></pre></div></td></tr></table></figure><h3 id="å¼•ç”¨è®¡æ•°-æ ‡è®°æ¸…ç†-åˆ†ä»£å›æ”¶"><a href="#å¼•ç”¨è®¡æ•°-æ ‡è®°æ¸…ç†-åˆ†ä»£å›æ”¶" class="headerlink" title="å¼•ç”¨è®¡æ•°+æ ‡è®°æ¸…ç†+åˆ†ä»£å›æ”¶"></a><a href="https://www.cnblogs.com/shengulong/p/10143856.html">å¼•ç”¨è®¡æ•°+æ ‡è®°æ¸…ç†+åˆ†ä»£å›æ”¶</a></h3>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> ç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼•ç”¨è®¡æ•° </tag>
            
            <tag> åˆ†ä»£å›æ”¶ </tag>
            
            <tag> æ ‡è®°æ¸…é™¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DRF-åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</title>
      <link href="2020/07/08/drf-xu-lie-hua-yu-fan-xu-lie-hua/"/>
      <url>2020/07/08/drf-xu-lie-hua-yu-fan-xu-lie-hua/</url>
      
        <content type="html"><![CDATA[<p>DRFå†…ç½®çš„åºåˆ—åŒ–ç±»ï¼Œå¯ä»¥å¯¹æ•´ä¸ªæ¨¡å‹ç±»è¿›è¡Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Œç®€åŒ–äº†ç¹æ‚çš„å·¥ä½œã€‚</p><h2 id="å†…ç½®å­—æ®µåºåˆ—åŒ–"><a href="#å†…ç½®å­—æ®µåºåˆ—åŒ–" class="headerlink" title="å†…ç½®å­—æ®µåºåˆ—åŒ–"></a>å†…ç½®å­—æ®µåºåˆ—åŒ–</h2><h3 id="æ¨¡å‹ç±»"><a href="#æ¨¡å‹ç±»" class="headerlink" title="æ¨¡å‹ç±»"></a>æ¨¡å‹ç±»</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><br><span class="hljs-comment"># Create your models here.</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Authors</span>(<span class="hljs-params">models.Model</span>):</span><br>    name = models.CharField(max_length=<span class="hljs-number">10</span>, verbose_name=<span class="hljs-string">&#x27;å§“å&#x27;</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.name<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">&#x27;db_authors&#x27;</span><br>        verbose_name = <span class="hljs-string">&#x27;ä½œè€…&#x27;</span><br>        verbose_name_plural = <span class="hljs-string">&#x27;ä½œè€…&#x27;</span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Books</span>(<span class="hljs-params">models.Model</span>):</span><br>    title = models.CharField(max_length=<span class="hljs-number">10</span>, verbose_name=<span class="hljs-string">&#x27;æ ‡é¢˜&#x27;</span>)<br>    price = models.DecimalField(max_digits=<span class="hljs-number">7</span>, decimal_places=<span class="hljs-number">2</span>, verbose_name=<span class="hljs-string">&#x27;å•ä»·&#x27;</span>)<br>    publish = models.CharField(max_length=<span class="hljs-number">20</span>, verbose_name=<span class="hljs-string">&#x27;å‡ºç‰ˆç¤¾&#x27;</span>)<br>    author = models.ForeignKey(Authors, on_delete=models.CASCADE)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.title<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">&#x27;db_books&#x27;</span><br>        verbose_name = <span class="hljs-string">&#x27;å›¾ä¹¦&#x27;</span><br>        verbose_name_plural = <span class="hljs-string">&#x27;å›¾ä¹¦&#x27;</span><br><br></code></pre></div></td></tr></table></figure><h3 id="åºåˆ—åŒ–ç±»"><a href="#åºåˆ—åŒ–ç±»" class="headerlink" title="åºåˆ—åŒ–ç±»"></a>åºåˆ—åŒ–ç±»</h3><h4 id="å­—æ®µé»˜è®¤æ–¹å¼åºåˆ—åŒ–"><a href="#å­—æ®µé»˜è®¤æ–¹å¼åºåˆ—åŒ–" class="headerlink" title="å­—æ®µé»˜è®¤æ–¹å¼åºåˆ—åŒ–"></a>å­—æ®µé»˜è®¤æ–¹å¼åºåˆ—åŒ–</h4><blockquote><p>  å…¨éƒ¨å­—æ®µéƒ½é‡‡ç”¨ <code>ModelSerializer</code>çš„é»˜è®¤æ–¹å¼å®ç°<strong>åºåˆ—åŒ–</strong>ä¸<strong>ååºåˆ—åŒ–</strong>ï¼Œå¤–é”®å¯¹åº”çš„åºåˆ—åŒ–å€¼æ˜¯å¤–é”®id</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.serializers <span class="hljs-keyword">import</span> ModelSerializer<br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Books, Authors<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthorsSerializer</span>(<span class="hljs-params">ModelSerializer</span>):</span><br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        model = Authors<br>        fields = <span class="hljs-string">&#x27;__all__&#x27;</span><br><br>        <br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BooksSerializer</span>(<span class="hljs-params">ModelSerializer</span>):</span><br>   <br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        model = Books<br>        fields = <span class="hljs-string">&#x27;__all__&#x27;</span><br>        <br></code></pre></div></td></tr></table></figure><h4 id="å­—æ®µæŒ‡å®šæ–¹å¼åºåˆ—åŒ–"><a href="#å­—æ®µæŒ‡å®šæ–¹å¼åºåˆ—åŒ–" class="headerlink" title="å­—æ®µæŒ‡å®šæ–¹å¼åºåˆ—åŒ–"></a>å­—æ®µæŒ‡å®šæ–¹å¼åºåˆ—åŒ–</h4><blockquote><p>  å¯¹æ¨¡å‹ç±»çš„å¤–é”®å…³è”å­—æ®µé€šè¿‡ å…¶ä»–æ–¹å¼ï¼Œå®ç°<strong>åºåˆ—åŒ–</strong>ï¼Œå…¶ä»–å­—æ®µä»ç„¶ä½¿ç”¨ é»˜è®¤æ–¹å¼å®ç°åºåˆ—åŒ–</p></blockquote><h5 id="å¤–é”®å­—æ®µå†…ç½®æ–¹å¼åºåˆ—åŒ–"><a href="#å¤–é”®å­—æ®µå†…ç½®æ–¹å¼åºåˆ—åŒ–" class="headerlink" title="å¤–é”®å­—æ®µå†…ç½®æ–¹å¼åºåˆ—åŒ–"></a>å¤–é”®å­—æ®µå†…ç½®æ–¹å¼åºåˆ—åŒ–</h5><p><strong>å›¾ä¹¦ç±»åºåˆ—åŒ–</strong></p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.serializers <span class="hljs-keyword">import</span> ModelSerializer<br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Books, Authors<br><span class="hljs-keyword">from</span> rest_framework <span class="hljs-keyword">import</span> serializers<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BooksSerializer</span>(<span class="hljs-params">ModelSerializer</span>):</span><br>    <span class="hljs-comment"># author = serializers.PrimaryKeyRelatedField(read_only=True)  # å†…ç½®å…³è”å­—æ®µï¼Œé»˜è®¤åºåˆ—åŒ–æ–¹å¼ï¼Œå…³è”å¯¹è±¡çš„ä¸»é”®</span><br>    <br>    <span class="hljs-comment"># author = serializers.StringRelatedField(read_only=True)  # å†…ç½®å…³è”å­—æ®µï¼Œæ­¤å­—æ®µå°†è¢«åºåˆ—åŒ–ä¸ºå…³è”å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ–¹å¼ï¼ˆå³__str__æ–¹æ³•çš„è¿”å›å€¼ï¼‰</span><br>    <br>    <span class="hljs-comment"># author = serializers.HyperlinkedRelatedField(view_name=&#x27;authors-detail&#x27;, read_only=True)  # å†…ç½®å…³è”å­—æ®µï¼Œæ­¤å­—æ®µè¢«åºåˆ—åŒ–ä¸ºå…³è”å¯¹è±¡çš„è·¯ç”±åœ°å€</span><br><br>    <span class="hljs-comment"># author = serializers.SlugRelatedField(read_only=True, slug_field=&#x27;id&#x27;)  # å†…ç½®å…³è”å­—æ®µï¼ŒæŒ‡å®šå…³è”å¯¹è±¡çš„å­—æ®µ</span><br>    <br>    <span class="hljs-comment"># author = serializers.CharField(source=&#x27;author.name&#x27;, read_only=True)  # æŒ‡å®šå…³è”å¯¹è±¡çš„å­—æ®µ</span><br>    <br>    author = AuthorsSerializer()  <span class="hljs-comment"># å°†å…³è”å¯¹è±¡æ‰€æœ‰å­—æ®µå…¨éƒ¨åºåˆ—åŒ–</span><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        model = Books<br>        fields = <span class="hljs-string">&#x27;__all__&#x27;</span><br></code></pre></div></td></tr></table></figure><p><strong>ä½œè€…ç±»åºåˆ—åŒ–</strong></p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.serializers <span class="hljs-keyword">import</span> ModelSerializer<br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Books, Authors<br><span class="hljs-keyword">from</span> rest_framework <span class="hljs-keyword">import</span> serializers<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthorsSerializer</span>(<span class="hljs-params">ModelSerializer</span>):</span><br>    <span class="hljs-comment"># books_set = serializers.PrimaryKeyRelatedField(read_only=True, many=True)</span><br>    <span class="hljs-comment"># books_set = serializers.StringRelatedField(read_only=True, many=True)</span><br>    <span class="hljs-comment"># books_set = serializers.HyperlinkedRelatedField(view_name=&#x27;books-detail&#x27;, read_only=True, many=True)</span><br>    <span class="hljs-comment"># books_set = BookSerializer(read_only=True, many=True)</span><br>    <span class="hljs-comment"># books_set = BookRelateField(read_only=True, many=True)  # è‡ªå®šä¹‰å…³è”å­—æ®µ</span><br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        model = Authors<br>        fields = <span class="hljs-string">&#x27;__all__&#x27;</span><br><br></code></pre></div></td></tr></table></figure><h5 id="å¤–é”®å­—æ®µè‡ªå®šä¹‰æ–¹å¼åºåˆ—åŒ–"><a href="#å¤–é”®å­—æ®µè‡ªå®šä¹‰æ–¹å¼åºåˆ—åŒ–" class="headerlink" title="å¤–é”®å­—æ®µè‡ªå®šä¹‰æ–¹å¼åºåˆ—åŒ–"></a>å¤–é”®å­—æ®µè‡ªå®šä¹‰æ–¹å¼åºåˆ—åŒ–</h5><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.serializers <span class="hljs-keyword">import</span> ModelSerializer<br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Books, Authors<br><span class="hljs-keyword">from</span> rest_framework <span class="hljs-keyword">import</span> serializers<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BookRelateField</span>(<span class="hljs-params">serializers.RelatedField</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">to_representation</span>(<span class="hljs-params">self, value</span>):</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Author: &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(value)<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthorsSerializer</span>(<span class="hljs-params">ModelSerializer</span>):</span><br>    books_set = BookRelateField(read_only=<span class="hljs-literal">True</span>, many=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># è‡ªå®šä¹‰å…³è”å­—æ®µ</span><br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        model = Authors<br>        fields = <span class="hljs-string">&#x27;__all__&#x27;</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthorRelateField</span>(<span class="hljs-params">serializers.RelatedField</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">to_representation</span>(<span class="hljs-params">self, value</span>):</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Author: &#123;&#125; &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(value.<span class="hljs-built_in">id</span>, value.name)<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BooksSerializer</span>(<span class="hljs-params">ModelSerializer</span>):</span><br>    author = AuthorRelateField(read_only=<span class="hljs-literal">True</span>) <span class="hljs-comment"># è‡ªå®šä¹‰å…³è”å­—æ®µ</span><br>    <br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        model = Books<br>        fields = <span class="hljs-string">&#x27;__all__&#x27;</span><br>       <br></code></pre></div></td></tr></table></figure><p>ä»¥ä¸Šåºåˆ—åŒ–æ–¹å¼ï¼Œä»»é€‰å…¶ä¸€å‡å¯ï¼Œä½†æ˜¯æ³¨æ„ï¼Œæ­¤æ—¶åªèƒ½ä¿è¯<strong>åºåˆ—åŒ–æˆåŠŸ</strong>ï¼Œä¸èƒ½ä¿è¯ååºåˆ—åŒ–</p><h2 id="è‡ªå®šä¹‰å­—æ®µåºåˆ—åŒ–"><a href="#è‡ªå®šä¹‰å­—æ®µåºåˆ—åŒ–" class="headerlink" title="è‡ªå®šä¹‰å­—æ®µåºåˆ—åŒ–"></a>è‡ªå®šä¹‰å­—æ®µåºåˆ—åŒ–</h2><blockquote><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼šå°†å¤–é”®å­—æ®µé€šè¿‡å…¶ä»–æ–¹å¼åºåˆ—åŒ–ï¼Œå¯ä»¥å¾—åˆ°ä¸é€šç±»å‹çš„æ•°æ®ï¼›ä½†æ˜¯å¤§å¤šæ•°æƒ…å†µï¼Œä¸èƒ½å®ç°ååºåˆ—åŒ–ã€‚å› æ­¤ï¼Œå¯ä»¥åœ¨åºåˆ—åŒ–æ—¶ï¼Œä¸ä¿®æ”¹å¤–é”®å­—æ®µï¼Œè€Œæ˜¯è‡ªå·±æ„å»ºæ–°å­—æ®µã€‚æœ€å¤§å¥½å¤„, åœ¨äºå°†åºåˆ—åŒ–å­—æ®µä¸ååºåˆ—åŒ–å­—æ®µåˆ†ç¦»ï¼Œäº’ä¸å½±å“ã€‚</p></blockquote><h3 id="ä¿®æ”¹æ¨¡å‹ç±»"><a href="#ä¿®æ”¹æ¨¡å‹ç±»" class="headerlink" title="ä¿®æ”¹æ¨¡å‹ç±»"></a>ä¿®æ”¹æ¨¡å‹ç±»</h3><p>éœ€è¦åœ¨æ¨¡å‹ç±»ä¸­ç”¨<code>@property</code>æ¥å®ç°ï¼Œå¯æ’æ‹”</p><h4 id="æ¨¡å‹ç±»-1"><a href="#æ¨¡å‹ç±»-1" class="headerlink" title="æ¨¡å‹ç±»"></a>æ¨¡å‹ç±»</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Books</span>(<span class="hljs-params">models.Model</span>):</span><br>    title = models.CharField(max_length=<span class="hljs-number">10</span>, verbose_name=<span class="hljs-string">&#x27;æ ‡é¢˜&#x27;</span>)<br>    price = models.DecimalField(max_digits=<span class="hljs-number">7</span>, decimal_places=<span class="hljs-number">2</span>, verbose_name=<span class="hljs-string">&#x27;å•ä»·&#x27;</span>)<br>    publish = models.CharField(max_length=<span class="hljs-number">20</span>, verbose_name=<span class="hljs-string">&#x27;å‡ºç‰ˆç¤¾&#x27;</span>)<br>    author = models.ForeignKey(Authors, on_delete=models.CASCADE)<br><br><span class="hljs-meta">    @property  </span><span class="hljs-comment"># æ’æ‹”å­—æ®µ - é»˜è®¤ä¸ºread_only(ä¸éœ€è¦è€ƒè™‘ååºåˆ—åŒ–)ï¼Œä¸”ä¸èƒ½ä¿®æ”¹</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">author_name</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.author.name<br><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">author_info</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">from</span> .serializers <span class="hljs-keyword">import</span> AuthorsSerializer<br>        <span class="hljs-keyword">return</span> AuthorsSerializer(self.author).data<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.title<br><br></code></pre></div></td></tr></table></figure><h4 id="åºåˆ—åŒ–ç±»-1"><a href="#åºåˆ—åŒ–ç±»-1" class="headerlink" title="åºåˆ—åŒ–ç±»"></a>åºåˆ—åŒ–ç±»</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BooksSerializer</span>(<span class="hljs-params">ModelSerializer</span>):</span><br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        model = Books<br>        fields = (<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;title&#x27;</span>, <span class="hljs-string">&#x27;price&#x27;</span>, <span class="hljs-string">&#x27;author&#x27;</span>, <span class="hljs-string">&#x27;author_name&#x27;</span>, <span class="hljs-string">&#x27;author_info&#x27;</span>)<br><br>        extra_kwargs = &#123;<br>            <span class="hljs-string">&#x27;author&#x27;</span>: &#123;<br>                <span class="hljs-string">&#x27;write_only&#x27;</span>: <span class="hljs-literal">True</span><br>            &#125;<br>        &#125;<br><br></code></pre></div></td></tr></table></figure><h3 id="ä¿®æ”¹åºåˆ—åŒ–ç±»"><a href="#ä¿®æ”¹åºåˆ—åŒ–ç±»" class="headerlink" title="ä¿®æ”¹åºåˆ—åŒ–ç±»"></a>ä¿®æ”¹åºåˆ—åŒ–ç±»</h3><blockquote><p>æ¨¡å‹ç±»ä¸å˜ï¼Œåªåœ¨åºåˆ—åŒ–å™¨ä¸­æ·»åŠ åºåˆ—åŒ–å­—æ®µ</p></blockquote><h4 id="åºåˆ—åŒ–ç±»-2"><a href="#åºåˆ—åŒ–ç±»-2" class="headerlink" title="åºåˆ—åŒ–ç±»"></a>åºåˆ—åŒ–ç±»</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BooksSerializer</span>(<span class="hljs-params">ModelSerializer</span>):</span><br>    author_url = serializers.HyperlinkedIdentityField(view_name=<span class="hljs-string">&#x27;authors-detail&#x27;</span>, read_only=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># å†…ç½®åºåˆ—åŒ–æ–¹å¼ï¼Œå…³è”å¯¹è±¡çš„è·¯ç”±åœ°å€</span><br>    <br>    author_name = serializers.SerializerMethodField()<br>    <span class="hljs-comment"># author_name å­—æ®µåœ¨æ•°æ®åº“ä¸­ä¸èƒ½å­˜åœ¨ï¼Œä¸‹é¢å†™æ–¹æ³•çš„æ—¶å€™å‰é¢åŠ  get_  å°±å¯ä»¥ï¼Œè¿™æ ·å°±å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„æ•°æ®äº†ã€‚</span><br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_author_name</span>(<span class="hljs-params">obj</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        å›ºå®šå†™æ³•,objä»£è¡¨Bookså®ä¾‹å¯¹è±¡,æ¨¡å‹ç±»é…ç½®äº†åå‘å¼•ç”¨authorä»£è¡¨ä½œè€…å¯¹è±¡</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> obj.author.<span class="hljs-built_in">id</span><br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        model = Books<br>        fields = (<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;title&#x27;</span>, <span class="hljs-string">&#x27;price&#x27;</span>, <span class="hljs-string">&#x27;author&#x27;</span>, <span class="hljs-string">&#x27;author_name&#x27;</span>, <span class="hljs-string">&#x27;author_url&#x27;</span>)<br><br>        extra_kwargs = &#123;<br>            <span class="hljs-string">&#x27;author&#x27;</span>: &#123;<br>                <span class="hljs-string">&#x27;write_only&#x27;</span>: <span class="hljs-literal">True</span><br>            &#125;<br>        &#125;<br><br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> DRF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åºåˆ—åŒ– </tag>
            
            <tag> ååºåˆ—åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythoné€’å½’å‡½æ•°</title>
      <link href="2020/06/06/python-han-shu-di-gui-han-shu/"/>
      <url>2020/06/06/python-han-shu-di-gui-han-shu/</url>
      
        <content type="html"><![CDATA[<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>å‡½æ•°è°ƒç”¨å‡½æ•°è‡ªèº«ï¼Œè¿™ç§æ–¹å¼ç§°ä¸ºé€’å½’ï¼Œè¿™ç§å‡½æ•°ç§°ä¸ºé€’å½’å‡½æ•°</p><blockquote><p>é€’å½’å‡½æ•°ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ‰¾åˆ°<code>ä¸å˜çš„è§„å¾‹</code>å’Œåœæ­¢é€’å½’çš„<code>è¾¹ç•Œæ¡ä»¶</code>ï¼Œ </p><p>å› ä¸ºå‡½æ•°è‡ªèº«è°ƒç”¨è‡ªèº«ï¼Œå‡½æ•°æœ¬èº«çš„ç»“æ„ä¸å˜ï¼Œåªæ˜¯<code>æ¯æ¬¡ä¼ çš„å‚æ•°æ”¹å˜</code>å•¦</p><p>é€’å½’å®ç°è¿‡ç¨‹(<strong>æ‰©å±•</strong>)ï¼šåˆ©ç”¨æ ˆçš„æ€æƒ³ï¼Œå…ˆæ‰¾è¾¹ç•Œæ¡ä»¶ï¼ŒåŒæ—¶å°†åé¢çš„ä»»åŠ¡å­˜èµ·æ¥ï¼Œä¸€ç›´åˆ°æœ€å‰é¢çš„è¾¹ç•Œæ¡ä»¶ï¼Œç„¶åå›å»ï¼Œæ¯æ¬¡ä»æ ˆä¸­å–ä»»åŠ¡ï¼Œè¿›è¡Œè®¡ç®—ï¼Œä¸€ç›´åˆ°æœ€åä¸€ä¸ªä»»åŠ¡å–å®Œï¼Œç»“æœä¹Ÿè®¡ç®—å®Œæ¯•</p></blockquote><h2 id="é€’å½’è¿‡ç¨‹"><a href="#é€’å½’è¿‡ç¨‹" class="headerlink" title="é€’å½’è¿‡ç¨‹:"></a>é€’å½’è¿‡ç¨‹:</h2><ul><li>é€’å½’å‰è¿›æ®µ</li><li>é€’å½’è¾¹ç•Œæ¡ä»¶</li><li>é€’å½’è¿”å›æ®µ</li></ul><h2 id="æ¡ˆä¾‹è®²è§£"><a href="#æ¡ˆä¾‹è®²è§£" class="headerlink" title="æ¡ˆä¾‹è®²è§£"></a>æ¡ˆä¾‹è®²è§£</h2><h4 id="é€’å½’å®ç°å¸çƒŸé—®é¢˜"><a href="#é€’å½’å®ç°å¸çƒŸé—®é¢˜" class="headerlink" title="é€’å½’å®ç°å¸çƒŸé—®é¢˜"></a>é€’å½’å®ç°å¸çƒŸé—®é¢˜</h4><p>å¸çƒŸæœ‰å±å®³ï¼Œä¸ä»…ä»…å±å®³äººä½“å¥åº·ï¼Œè¿˜ä¼šå¯¹ç¤¾ä¼šäº§ç”Ÿä¸è‰¯çš„å½±å“ã€‚å¸çƒŸè¿˜å¾ˆå®¹æ˜“å¼•èµ·å–‰å¤´ç‚ã€æ°”ç®¡ç‚ï¼Œè‚ºæ°”è‚¿ç­‰é—®é¢˜ï¼› é‚£ä¹ˆç°åœ¨å‡è®¾äººä¸€ç”ŸæŠ½çƒŸ10000æ ¹è¾¾åˆ°æé™å³°å€¼ï¼Œå†æŠ½ä¸€æ ¹çƒŸå°±åƒå‹å€’éª†é©¼çš„æœ€åä¸€æ ¹ç¨»è‰ï¼Œä¼šä½¿äººä½“çˆ†å‘ç–¾ç—…é—®é¢˜ï¼› æ¯å¤©ä¸€ä¸ªäººæŠ½çƒŸçš„ä¸ªæ•°éƒ½æ¯”å‰å¤©å¤šä¸€æ ¹ï¼ˆç¬¬ä¸€å¤©æŠ½ä¸€æ ¹ï¼‰ï¼Œä¸”ä¸€å‘¨åªæœ‰å·¥ä½œæ—¥ï¼ˆå‘¨ä¸€~å‘¨äº”ï¼‰ä¼šå¸çƒŸï¼› è¯·ä½¿ç”¨é€’å½’çš„æ–¹å¼æ±‚å‡ºä¸€ä¸ªäººæŒ‰ç…§ä»¥ä¸Šæ–¹å¼æŠ½çƒŸè¾¾åˆ°10000æ ¹ï¼Œçˆ†å‘ç–¾ç—…éœ€è¦å†ç»å¤šå°‘å¤©</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">smoker</span>(<span class="hljs-params">day, count, amount</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    é€’å½’è§£å†³å¸çƒŸé—®é¢˜</span><br><span class="hljs-string">    :param day: å½“å‰çš„å¤©æ•°</span><br><span class="hljs-string">    :param count: å½“å¤©çš„å¸çƒŸæ•°é‡</span><br><span class="hljs-string">    :param amount: æ€»è®¡çš„å¸çƒŸæ•°é‡</span><br><span class="hljs-string">    :return: å¸åˆ°10000æ ¹çƒŸçš„å¤©æ•°</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> amount &gt;= <span class="hljs-number">10000</span>:<br>        <span class="hljs-comment"># å¦‚æœå¸çƒŸæ€»æ•°å¤§äº10000ï¼Œ è¿”å›å¤©æ•°</span><br>        <span class="hljs-keyword">return</span> day<br><br>    <span class="hljs-keyword">else</span>:<br>        day += <span class="hljs-number">1</span> <span class="hljs-comment"># æ¯å¸ä¸€æ¬¡çƒŸï¼Œå¤©æ•°åŠ 1</span><br>        <span class="hljs-keyword">if</span> day % <span class="hljs-number">7</span> != <span class="hljs-number">6</span> <span class="hljs-keyword">and</span> day % <span class="hljs-number">7</span> != <span class="hljs-number">0</span>:<br>            <span class="hljs-comment"># åªæœ‰å‘¨å…­ï¼Œå‘¨æ—¥ä¸å¸çƒŸï¼Œåˆ¤æ–­ä¸æ˜¯å‘¨å…­ï¼Œä¹Ÿä¸æ˜¯å‘¨æ—¥</span><br>            count += <span class="hljs-number">1</span> <span class="hljs-comment"># å½“å¤©å¸çƒŸçš„æ•°é‡</span><br>            amount += count <span class="hljs-comment"># ç›®å‰ä¸ºæ­¢ï¼Œå¸çƒŸçš„æ€»æ•°é‡</span><br><br>        <span class="hljs-keyword">return</span> smoker(day, count, amount)<br><br><br>print(smoker(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)) <span class="hljs-comment"># ç¬¬1å¤©ï¼Œå¸äº†1æ ¹çƒŸï¼Œæ€»å…±å¸äº†1æ ¹çƒŸ</span><br></code></pre></div></td></tr></table></figure><h4 id="é’è›™è·³å°é˜¶é—®é¢˜"><a href="#é’è›™è·³å°é˜¶é—®é¢˜" class="headerlink" title="é’è›™è·³å°é˜¶é—®é¢˜"></a>é’è›™è·³å°é˜¶é—®é¢˜</h4><h3 id="æ±‰è¯ºå¡”é—®é¢˜"><a href="#æ±‰è¯ºå¡”é—®é¢˜" class="headerlink" title="æ±‰è¯ºå¡”é—®é¢˜"></a>æ±‰è¯ºå¡”é—®é¢˜</h3><h3 id="é’è›™è¿‡æ²³é—®é¢˜"><a href="#é’è›™è¿‡æ²³é—®é¢˜" class="headerlink" title="é’è›™è¿‡æ²³é—®é¢˜"></a>é’è›™è¿‡æ²³é—®é¢˜</h3>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é€’å½’å‡½æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonåŒ¿åå‡½æ•°</title>
      <link href="2020/06/06/python-han-shu-ni-ming-han-shu/"/>
      <url>2020/06/06/python-han-shu-ni-ming-han-shu/</url>
      
        <content type="html"><![CDATA[<h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>åŒ¿åå‡½æ•°çš„å¦ä¸€ä¸ªåˆ«ç§°æ˜¯<code>lambdaè¡¨è¾¾å¼</code></p><p>lambdaè¡¨è¾¾å¼çš„è¯­æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">lambda</span> argument_list: expression<br></code></pre></div></td></tr></table></figure><ul><li><code>argument_list</code>æ˜¯å‚æ•°åˆ—è¡¨ã€‚å®ƒçš„ç»“æ„ä¸Pythonä¸­å‡½æ•°(<code>function</code>)çš„å‚æ•°åˆ—è¡¨æ˜¯ä¸€æ ·çš„ã€‚</li><li><code>expression</code>æ˜¯ä¸€ä¸ªå…³äºå‚æ•°çš„è¡¨è¾¾å¼ã€‚è¡¨è¾¾å¼ä¸­å‡ºç°çš„å‚æ•°éœ€è¦åœ¨<code>argument_list</code>ä¸­æœ‰å®šä¹‰ï¼Œå¹¶ä¸”è¡¨è¾¾å¼åªèƒ½æ˜¯å•è¡Œçš„ã€‚</li></ul><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># lambda x: x*x</span><br><span class="hljs-comment"># è¿™ä¸ªlambdaè¡¨è¾¾å¼å®é™…ç­‰åŒäºï¼š</span><br><span class="hljs-comment"># def f(x):</span><br><span class="hljs-comment">#   return x*x</span><br>In [<span class="hljs-number">15</span>]: f = <span class="hljs-keyword">lambda</span> x: x * x<br><br>In [<span class="hljs-number">16</span>]: f<br>Out[<span class="hljs-number">16</span>]: &lt;function __main__.&lt;<span class="hljs-keyword">lambda</span>&gt;(x)&gt;<br><br>In [<span class="hljs-number">17</span>]: f(<span class="hljs-number">5</span>)<br>Out[<span class="hljs-number">17</span>]: <span class="hljs-number">25</span><br>    <br>In [<span class="hljs-number">24</span>]: x2 = <span class="hljs-keyword">lambda</span> *args: [x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>(args)]<br><br>In [<span class="hljs-number">25</span>]: x2(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>)<br>Out[<span class="hljs-number">25</span>]: [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">25</span>, <span class="hljs-number">36</span>, <span class="hljs-number">49</span>]<br></code></pre></div></td></tr></table></figure><ul><li><p>åŒ¿åå‡½æ•°ä½œä¸ºå‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">7</span>]: s = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]<br><br>In [<span class="hljs-number">8</span>]: s<br>Out[<span class="hljs-number">8</span>]: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]<br><br>In [<span class="hljs-number">9</span>]: s.sort(key=<span class="hljs-keyword">lambda</span> x : <span class="hljs-built_in">abs</span>(x-<span class="hljs-number">5</span>))<br><br>In [<span class="hljs-number">10</span>]: s<br>Out[<span class="hljs-number">10</span>]: [<span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">2</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9</span>, <span class="hljs-number">0</span>]<br></code></pre></div></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">32</span>]: stus = [<br>...:     &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">18</span>&#125;,<br>...:     &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;lisi&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">19</span>&#125;,<br>...:     &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;wangwu&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">17</span>&#125;<br>...: ]<br><br>In [<span class="hljs-number">33</span>]: stus.sort(key=<span class="hljs-keyword">lambda</span> x : x[<span class="hljs-string">&quot;name&quot;</span>])<br><br>In [<span class="hljs-number">34</span>]: stus<br>Out[<span class="hljs-number">34</span>]:<br>[&#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;lisi&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>: <span class="hljs-number">19</span>&#125;,<br> &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;wangwu&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>: <span class="hljs-number">17</span>&#125;,<br> &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;zhangsan&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>: <span class="hljs-number">18</span>&#125;]<br><br>In [<span class="hljs-number">35</span>]: stus.sort(key=<span class="hljs-keyword">lambda</span> x : x[<span class="hljs-string">&quot;age&quot;</span>])<br><br>In [<span class="hljs-number">36</span>]: stus<br>Out[<span class="hljs-number">36</span>]:<br>[&#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;wangwu&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>: <span class="hljs-number">17</span>&#125;,<br> &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;zhangsan&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>: <span class="hljs-number">18</span>&#125;,<br> &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;lisi&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>: <span class="hljs-number">19</span>&#125;]<br></code></pre></div></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lambda </tag>
            
            <tag> åŒ¿åå‡½æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythoné«˜é˜¶å‡½æ•°</title>
      <link href="2020/06/06/python-han-shu-gao-jie-han-shu/"/>
      <url>2020/06/06/python-han-shu-gao-jie-han-shu/</url>
      
        <content type="html"><![CDATA[<h2 id="é«˜é˜¶å‡½æ•°ä»‹ç»"><a href="#é«˜é˜¶å‡½æ•°ä»‹ç»" class="headerlink" title="é«˜é˜¶å‡½æ•°ä»‹ç»"></a>é«˜é˜¶å‡½æ•°ä»‹ç»</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>å½“ä¸€ä¸ªå‡½æ•° æ¥æ”¶ å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œ å®ƒå°±æ˜¯ <code>é«˜é˜¶å‡½æ•°</code></p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">a, x, y</span>):</span><br>    a(x, y)  <span class="hljs-comment"># aå°±æ˜¯ä¼ é€’çš„ å‡½æ•°å‚æ•°fï¼Œ  æ‰§è¡Œ a ç›¸å½“äº æ‰§è¡Œ  f</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>(<span class="hljs-params">x, y</span>):</span><br>    print(x + y)<br><br>func(f, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># 3ï¼Œ åœ¨å‡½æ•°fæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¾“å‡º 3</span><br></code></pre></div></td></tr></table></figure><h2 id="å››å¤§é«˜é˜¶å‡½æ•°"><a href="#å››å¤§é«˜é˜¶å‡½æ•°" class="headerlink" title="å››å¤§é«˜é˜¶å‡½æ•°"></a>å››å¤§é«˜é˜¶å‡½æ•°</h2><h3 id="map-func-iterable"><a href="#map-func-iterable" class="headerlink" title="map(func, iterable)"></a><code>map(func, iterable)</code></h3><blockquote><p>å°† <strong>å¯è¿­ä»£å¯¹è±¡</strong> ä¸­çš„æ¯ä¸ªå€¼ æŒ‰ç…§ ç¬¬ä¸€ä¸ªå‚æ•°( <strong>å‡½æ•°</strong>)çš„ è§„åˆ™ ä¾æ¬¡ å¤„ç†ï¼Œ å¾—åˆ°ä¸€ä¸ª æ–°çš„ <strong>è¿­ä»£å™¨</strong> å¯¹è±¡</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">alist</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    :param alist: æ¥æ”¶åˆ—è¡¨ä½œä¸ºå‚æ•°</span><br><span class="hljs-string">    :return: å°†åˆ—è¡¨ä¸­æ¯ä¸ªæ•°å­—ï¼Œæ±‚å¹³æ–¹ä¹‹åï¼Œè¿”å›ä¸€ä¸ªæ–°åˆ—è¡¨</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sqr</span>(<span class="hljs-params">x</span>):</span><br>        <span class="hljs-keyword">return</span> x * x<br><br>    r = <span class="hljs-built_in">map</span>(sqr, alist) <span class="hljs-comment"># ræ˜¯è¿­ä»£å™¨å¯¹è±¡</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(r)  <span class="hljs-comment"># å°†è¿­ä»£å™¨å¯¹è±¡è½¬æ¢ä¸ºåˆ—è¡¨</span><br><br><br>r = func([<span class="hljs-number">11</span>, <span class="hljs-number">22</span>, <span class="hljs-number">33</span>, <span class="hljs-number">44</span>, <span class="hljs-number">55</span>])<br>print(r)<br></code></pre></div></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># å®šä¹‰å‡½æ•°ï¼Œ æ¥æ”¶ åˆ—è¡¨ ä½œä¸ºå‚æ•° ï¼Œ è¿”å›ä¸€ä¸ª åŒ…å« ç»å¯¹å€¼  çš„æ–°åˆ—è¡¨</span><br><span class="hljs-comment"># abs()ï¼špythonå†…ç½®å‡½æ•°ï¼Œæ±‚ä¸€ä¸ªæ•°çš„ç»å¯¹å€¼</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">alist</span>):</span><br>    <span class="hljs-comment"># map é«˜é˜¶å‡½æ•°éœ€è¦çš„å‚æ•°ï¼Œä¸ç”¨ç®¡æ˜¯å†…ç½®çš„ï¼Œè¿˜æ˜¯è‡ªå®šä¹‰çš„</span><br>    r = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">abs</span>, alist)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(r)<br><br><br>r = func([-<span class="hljs-number">12</span>, <span class="hljs-number">34</span>, <span class="hljs-number">56</span>, -<span class="hljs-number">98</span>])<br><br>print(r)  <span class="hljs-comment"># [12, 34, 56, 98]</span><br></code></pre></div></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># å®šä¹‰å‡½æ•°ï¼Œæ¥æ”¶ ä¸€ä¸ª åŒ…å« å•è¯çš„å­—ç¬¦ä¸²ï¼Œ è¿”å› ä¸€ä¸ª æ¯ä¸ªå•è¯ é¦–å­—æ¯å¤§å†™ çš„å­—ç¬¦ä¸²</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">astr</span>):</span><br>    <span class="hljs-comment"># å°†å­—ç¬¦ä¸²åˆ‡åˆ†ä¸ºå•è¯åˆ—è¡¨</span><br>    wlist = astr.split()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">toUpper</span>(<span class="hljs-params">x</span>):</span><br>        <span class="hljs-keyword">return</span> x.title()<br><br>    r = <span class="hljs-built_in">map</span>(toUpper, wlist)<br><br>    <span class="hljs-comment"># å°†å•è¯æ‹¼æ¥ä¸ºå­—ç¬¦ä¸²</span><br>    s = <span class="hljs-string">&quot; &quot;</span>.join(r)<br><br>    <span class="hljs-keyword">return</span> s<br><br><br>r = func(<span class="hljs-string">&quot;a good  fruit apple&quot;</span>)<br><br>print(r)  <span class="hljs-comment"># &quot; A Good  Fruit Apple&quot;</span><br><br><span class="hljs-comment"># æç¤ºï¼š å¯ä»¥è€ƒè™‘ å°† å­—ç¬¦ä¸²æŒ‰ç…§ å•è¯ åˆ‡åˆ†ï¼Œ mapå¤„ç†ä¹‹åï¼Œ å† é‡æ–°æ‹¼æ¥ä¸ºå­—ç¬¦ä¸²</span><br></code></pre></div></td></tr></table></figure><h3 id="reduce-func-iterable"><a href="#reduce-func-iterable" class="headerlink" title="reduce(func, iterable)"></a><code>reduce(func, iterable)</code></h3><blockquote><p>å°†å¯è¿­ä»£å¯¹è±¡ä¸­æ‰€æœ‰çš„å…ƒç´ ï¼ŒæŒ‰ç…§ç¬¬ä¸€ä¸ª å‡½æ•°çš„è§„åˆ™ï¼Œ è¿ç»­æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ª  <strong>å…·ä½“çš„æ•°æ®</strong></p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce<br><br><br><span class="hljs-comment"># è‡ªå®šä¹‰ä¸€ä¸ªMysum()å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºå‚æ•°ï¼Œ è¿”å›åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ ä¹‹å’Œ</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mysum</span>(<span class="hljs-params">alist</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span>(<span class="hljs-params">x, y</span>):</span><br>        <span class="hljs-keyword">return</span> x + y<br><br>    r = reduce(add, alist) <span class="hljs-comment"># reduce çš„ç»“æœæ˜¯ä¸€ä¸ªå…·ä½“çš„å€¼</span><br><br>    <span class="hljs-keyword">return</span> r<br><br><br>r = mysum([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])<br>print(r)  <span class="hljs-comment"># 15</span><br></code></pre></div></td></tr></table></figure><h3 id="filter-func-iterable"><a href="#filter-func-iterable" class="headerlink" title="filter(func, iterable)"></a><code>filter(func, iterable)</code></h3><blockquote><p>æŒ‰ç…§ç¬¬ä¸€ä¸ª å‡½æ•°çš„ <strong>è¿”å›å€¼</strong> å¯¹ å¯è¿­ä»£å¯¹è±¡ ä¸­ æ‰€æœ‰çš„æ•°æ® è¿›è¡Œ è¿‡æ»¤ï¼Œ å¾—åˆ°ä¸€ä¸ª åŒ…å«è¿‡æ»¤åç»“æœçš„ <strong>è¿­ä»£å™¨å¯¹è±¡</strong></p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># è‡ªå®šä¹‰ä¸€ä¸ªfilterNumber()å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºå‚æ•°ï¼Œ è¿”å›ä¸€ä¸ª åŒ…å«å¶æ•° çš„åˆ—è¡¨</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">filterNumber</span>(<span class="hljs-params">alist</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">is_even</span>(<span class="hljs-params">x</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;å¦‚æœå‡½æ•°çš„è¿”å›ç»“æœä¸ºTrue, å¯¹åº”çš„å…ƒç´ å¯ä»¥å¾—åˆ°&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>    r = <span class="hljs-built_in">filter</span>(is_even, alist)  <span class="hljs-comment"># rä¹Ÿæ˜¯è¿­ä»£å™¨å¯¹è±¡</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(r)  <span class="hljs-comment"># é€šè¿‡ç±»å‹è½¬æ¢ï¼Œå°†è¿­ä»£å™¨ä¸­æ•°æ®å–å‡º</span><br><br><br>r = filterNumber([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>])<br>print(r)  <span class="hljs-comment"># [2, 4, 6]]</span><br></code></pre></div></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># è‡ªå®šä¹‰ä¸€ä¸ªå‡½æ•° sevenNumber()å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºå‚æ•°ï¼Œ è¿”å›ä¸€ä¸ª åŒ…å« &quot;é€¢7å¿…è¿‡&quot; æ•°å­—çš„æ–°åˆ—è¡¨</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sevenNumber</span>(<span class="hljs-params">alist</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>(<span class="hljs-params">x</span>):</span><br>        <span class="hljs-comment"># åˆ¤æ–­ä¸º7çš„å€æ•°ï¼Œè¿”å›True</span><br>        <span class="hljs-keyword">if</span> x % <span class="hljs-number">7</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;7&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(x):<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>    r = <span class="hljs-built_in">filter</span>(f, alist)  <span class="hljs-comment"># ræ˜¯è¿­ä»£å™¨å¯¹è±¡</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(r)<br><br><br>r = sevenNumber(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">101</span>))<br>print(r)<br></code></pre></div></td></tr></table></figure><h3 id="sorted-iterable-key-func-reverse-False"><a href="#sorted-iterable-key-func-reverse-False" class="headerlink" title="sorted(iterable, key=func, reverse=False)"></a><code>sorted(iterable, key=func, reverse=False)</code></h3><blockquote><p>é»˜è®¤å°†åˆ—è¡¨ æŒ‰ç…§ å‡åº æ’åº</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">alist = [<span class="hljs-number">21</span>, <span class="hljs-number">14</span>, -<span class="hljs-number">67</span>, -<span class="hljs-number">34</span>, <span class="hljs-number">19</span>]<br><br><span class="hljs-comment"># æŒ‰ç…§ æ•°å­—å¤§å° å‡åº æ’åº</span><br>r = <span class="hljs-built_in">sorted</span>(alist)<br>print(r)  <span class="hljs-comment"># [-67, -34, 14, 19, 21]</span><br><br><span class="hljs-comment"># æŒ‰ç…§ æ•°å­—å¤§å° é™åº æ’åº</span><br>r = <span class="hljs-built_in">sorted</span>(alist, reverse=<span class="hljs-literal">True</span>)<br>print(r)  <span class="hljs-comment"># [21, 19, 14, -34, -67]</span><br><br><span class="hljs-comment"># æŒ‰ç…§æ¯ ä¸ªæ•°å­—çš„ç»å¯¹å€¼ å‡åº æ’åº</span><br>r = <span class="hljs-built_in">sorted</span>(alist, key=<span class="hljs-built_in">abs</span>)<br>print(r)  <span class="hljs-comment"># [14, 19, 21, -34, -67]</span><br><br><span class="hljs-comment"># æŒ‰ç…§ æ¯ä¸ªæ•°å­—çš„ç»å¯¹å€¼ é™åº æ’åº</span><br>r = <span class="hljs-built_in">sorted</span>(alist, key=<span class="hljs-built_in">abs</span>, reverse=<span class="hljs-literal">True</span>)<br>print(r)  <span class="hljs-comment"># [-67, -34, 21, 19, 14]</span><br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜é˜¶å‡½æ•° </tag>
            
            <tag> sorted </tag>
            
            <tag> map </tag>
            
            <tag> reduce </tag>
            
            <tag> filter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå˜é‡ä½œç”¨åŸŸ</title>
      <link href="2020/06/06/python-han-shu-bian-liang-jie-xi/"/>
      <url>2020/06/06/python-han-shu-bian-liang-jie-xi/</url>
      
        <content type="html"><![CDATA[<h3 id="å˜é‡çš„ä½œç”¨åŸŸ"><a href="#å˜é‡çš„ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡çš„ä½œç”¨åŸŸ"></a>å˜é‡çš„ä½œç”¨åŸŸ</h3><ul><li><p>åœ¨Pythonç¨‹åºä¸­åˆ›å»ºã€æ”¹å˜ã€æŸ¥æ‰¾å˜é‡åæ—¶ï¼Œéƒ½æ˜¯åœ¨ä¸€ä¸ªä¿å­˜å˜é‡åçš„ç©ºé—´ä¸­è¿›è¡Œï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå‘½åç©ºé—´ï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸ºä½œç”¨åŸŸã€‚</p></li><li><p>Pythonçš„ä½œç”¨åŸŸæ˜¯é™æ€çš„ï¼Œåœ¨æºä»£ç ä¸­å˜é‡åè¢«èµ‹å€¼çš„ä½ç½®å†³å®šäº†è¯¥å˜é‡èƒ½è¢«è®¿é—®çš„èŒƒå›´ã€‚å³Pythonå˜é‡çš„ä½œç”¨åŸŸç”±å˜é‡æ‰€åœ¨æºä»£ç ä¸­çš„ä½ç½®å†³å®šã€‚</p></li></ul><h3 id="ä½œç”¨åŸŸçš„äº§ç”Ÿ"><a href="#ä½œç”¨åŸŸçš„äº§ç”Ÿ" class="headerlink" title="ä½œç”¨åŸŸçš„äº§ç”Ÿ"></a>ä½œç”¨åŸŸçš„äº§ç”Ÿ</h3><ul><li><p>åªæœ‰å½“å˜é‡åœ¨<code>Module(æ¨¡å—)</code>ã€<code>Class(ç±»)</code>ã€<code>def(å‡½æ•°)</code>ä¸­å®šä¹‰çš„æ—¶å€™ï¼Œæ‰ä¼šæœ‰ä½œç”¨åŸŸçš„æ¦‚å¿µã€‚</p></li><li><p>åœ¨ä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡ï¼Œä¸€èˆ¬åªåœ¨è¯¥ä½œç”¨åŸŸä¸­æœ‰æ•ˆã€‚</p></li><li><p>åœ¨<code>if-elif-else</code>ã€<code>for-else</code>ã€<code>while</code>ã€<code>try-except/try-finally</code>ç­‰å…³é”®å­—çš„è¯­å¥å—ä¸­å¹¶ä¸ä¼šäº§ç”Ÿä½œç”¨åŸŸ</p></li></ul><h4 id="ä»£ç åˆ†æ1"><a href="#ä»£ç åˆ†æ1" class="headerlink" title="ä»£ç åˆ†æ1"></a>ä»£ç åˆ†æ1</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>():</span><br>    variable = <span class="hljs-number">100</span><br>    print(variable)<br>print(variable)<br></code></pre></div></td></tr></table></figure><blockquote><p>ä»£ç æ‰§è¡Œåˆ°ç¬¬äºŒä¸ª<code>print(variable)</code>æ—¶ä¼šæŠ¥é”™ <code>NameError: name &#39;variable&#39; is not defined</code></p><p>å˜é‡<code>variable</code>åªåœ¨å‡½æ•°<code>func()</code>çš„å®šä¹‰åŸŸå†…æœ‰æ•ˆï¼</p></blockquote><h4 id="ä»£ç åˆ†æ2"><a href="#ä»£ç åˆ†æ2" class="headerlink" title="ä»£ç åˆ†æ2"></a>ä»£ç åˆ†æ2</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">if</span> <span class="hljs-literal">True</span>:<br>    variable = <span class="hljs-number">100</span><br>    print(variable)<br>print(<span class="hljs-string">&quot;******&quot;</span>)<br>print(variable)<br></code></pre></div></td></tr></table></figure><p>è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">100     <br>******<br>100<br></code></pre></div></td></tr></table></figure><p>ç¨‹åºæ²¡æœ‰æŠ¥é”™ï¼Œå› ä¸ºifè¯­å¥ä¸äº§ç”Ÿä½œç”¨åŸŸ</p><h3 id="å˜é‡ä½œç”¨åŸŸçš„ç±»å‹"><a href="#å˜é‡ä½œç”¨åŸŸçš„ç±»å‹" class="headerlink" title="å˜é‡ä½œç”¨åŸŸçš„ç±»å‹"></a>å˜é‡ä½œç”¨åŸŸçš„ç±»å‹</h3><ul><li>L(local)å±€éƒ¨ä½œç”¨åŸŸ<ul><li>âˆš å‡½æ•°å†…çš„å‘½åç©ºé—´</li></ul></li><li>E(enclosing)åµŒå¥—ä½œç”¨åŸŸ<ul><li>âˆš å¤–éƒ¨åµŒå¥—å‡½æ•°çš„å‘½åç©ºé—´</li></ul></li><li>G(global)å…¨å±€ä½œç”¨åŸŸ<ul><li>âˆš æ‰€åœ¨æ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰çš„å‘½åç©ºé—´</li></ul></li><li>B(built-in)å†…ç½®ä½œç”¨åŸŸ<ul><li>âˆš Pythonå†…ç½®æ¨¡å—çš„å‘½åç©ºé—´</li></ul></li></ul><h4 id="å®ä¾‹è§£æ"><a href="#å®ä¾‹è§£æ" class="headerlink" title="å®ä¾‹è§£æ"></a>å®ä¾‹è§£æ</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">globalVar = <span class="hljs-number">100</span>  <span class="hljs-comment"># å…¨å±€ä½œç”¨åŸŸ     </span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_scope</span>():</span><br>    enclosingVar = <span class="hljs-number">200</span>  <span class="hljs-comment"># åµŒå¥—ä½œç”¨åŸŸ</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>():</span><br>        localVar = enclosingVar + <span class="hljs-number">1</span>  <span class="hljs-comment"># å±€éƒ¨ä½œç”¨åŸŸ</span><br>        print(localVar)<br><br><br>print(__name__)  <span class="hljs-comment"># å†…ç½®ä½œç”¨åŸŸ</span><br></code></pre></div></td></tr></table></figure><h3 id="å˜é‡åè§£æLEGBæ³•åˆ™"><a href="#å˜é‡åè§£æLEGBæ³•åˆ™" class="headerlink" title="å˜é‡åè§£æLEGBæ³•åˆ™"></a>å˜é‡åè§£æLEGBæ³•åˆ™</h3><p>å½“åœ¨å‡½æ•°ä¸­ä½¿ç”¨æœªç¡®å®šçš„å˜é‡åæ—¶ï¼Œ<code>Python</code>ä¼šæŒ‰ç…§ä¼˜å…ˆçº§ä¾æ¬¡æœç´¢4ä¸ªä½œç”¨åŸŸï¼Œä»¥æ­¤æ¥ç¡®å®šè¯¥å˜é‡åçš„æ„ä¹‰ã€‚</p><ul><li><p>é¦–å…ˆæœç´¢å±€éƒ¨ä½œç”¨åŸŸ(L)ï¼Œ</p></li><li><p>ä¹‹åæ˜¯ä¸Šä¸€å±‚åµŒå¥—ç»“æ„ä¸­<code>def</code>æˆ–<code>lambda</code>å‡½æ•°çš„åµŒå¥—ä½œç”¨åŸŸ(E)ï¼Œ</p></li><li><p>ä¹‹åæ˜¯å…¨å±€ä½œç”¨åŸŸ(G)ï¼Œ</p></li><li><p>æœ€åæ˜¯å†…ç½®ä½œç”¨åŸŸ(B)ã€‚</p></li><li><p>æŒ‰è¿™ä¸ªæŸ¥æ‰¾åŸåˆ™ï¼Œåœ¨ç¬¬ä¸€å¤„æ‰¾åˆ°çš„åœ°æ–¹åœæ­¢ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šå‡ºå‘<code>NameError</code>é”™è¯¯ã€‚</p></li></ul><h3 id="æœç´¢å˜é‡åçš„ä¼˜å…ˆçº§ï¼š"><a href="#æœç´¢å˜é‡åçš„ä¼˜å…ˆçº§ï¼š" class="headerlink" title="æœç´¢å˜é‡åçš„ä¼˜å…ˆçº§ï¼š"></a>æœç´¢å˜é‡åçš„ä¼˜å…ˆçº§ï¼š</h3><ul><li>å±€éƒ¨ä½œç”¨åŸŸ &gt; åµŒå¥—ä½œç”¨åŸŸ &gt; å…¨å±€ä½œç”¨åŸŸ &gt; å†…ç½®ä½œç”¨åŸŸ</li></ul><h4 id="å®ä¾‹1"><a href="#å®ä¾‹1" class="headerlink" title="å®ä¾‹1"></a>å®ä¾‹1</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>():</span><br>    variable = <span class="hljs-number">300</span><br>    print(variable)  <span class="hljs-comment">#æ‰“å°å±€éƒ¨ä½œç”¨åŸŸçš„variable</span><br><br>variable = <span class="hljs-number">100</span><br>func()<br>print(variable) <span class="hljs-comment">#æ‰“å°å…¨å±€ä½œç”¨åŸŸçš„variable</span><br></code></pre></div></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">300<br>100<br></code></pre></div></td></tr></table></figure><h4 id="å®ä¾‹2"><a href="#å®ä¾‹2" class="headerlink" title="å®ä¾‹2"></a>å®ä¾‹2</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_scopt</span>():</span><br>    variable = <span class="hljs-number">200</span><br>    print(variable)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>():</span><br>        print(variable) <span class="hljs-comment">#æ­¤å¤„æ‰“å°çš„æ˜¯ä¸Šå±‚åµŒå¥—å‡½æ•°</span><br>    func()              <span class="hljs-comment">#test_scopt()ä¸­çš„variable</span><br>variable = <span class="hljs-number">100</span><br>test_scopt()<br>print(variable)<br></code></pre></div></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">200<br>200<br>100<br></code></pre></div></td></tr></table></figure><h4 id="å®ä¾‹3"><a href="#å®ä¾‹3" class="headerlink" title="å®ä¾‹3"></a>å®ä¾‹3</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">variable = <span class="hljs-number">300</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_scopt</span>():</span><br>    print(variable) <span class="hljs-comment">#æ­¤å¤„çš„å˜é‡variableç»‘å®šçš„æ˜¯ä¸‹ä¸€è¡Œ  </span><br>    variable = <span class="hljs-number">200</span>  <span class="hljs-comment">#è¯­å¥ä¸­æ‰€å£°æ˜çš„å±€éƒ¨å˜é‡ï¼Œä½†æœªè¢«èµ‹å€¼æ‰€ä»¥æŠ¥é”™</span><br><br>test_scopt()<br>print(variable)<br></code></pre></div></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">UnboundLocalError: local variable &#x27;variable&#x27; referenced before assignment<br></code></pre></div></td></tr></table></figure><h4 id="å®ä¾‹4"><a href="#å®ä¾‹4" class="headerlink" title="å®ä¾‹4"></a>å®ä¾‹4</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">variable = <span class="hljs-number">300</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_scopt</span>():</span><br>    print(variable)  <span class="hljs-comment">#æ­¤å¤„æ‰“å°çš„æ˜¯å…¨å±€å˜é‡variable</span><br>    <span class="hljs-comment">#variable = 200  #å¦‚æœè¿™è¡Œæœªè¢«æ³¨é‡Šï¼Œé‚£ä¹ˆä¸Šä¸€å¥printæ‰“å°çš„åº”æ˜¯</span><br>                     <span class="hljs-comment">#æ­¤å¤„å®šä¹‰çš„å±€éƒ¨å˜é‡     </span><br>test_scopt()<br>print(variable)<br></code></pre></div></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">300<br>300<br></code></pre></div></td></tr></table></figure><p>ä»”ç»†ä½“ä¼šå®ä¾‹4å’Œå®ä¾‹3çš„åŒºåˆ«ï¼</p><h3 id="globalä¸nonlocalå…³é”®å­—"><a href="#globalä¸nonlocalå…³é”®å­—" class="headerlink" title="globalä¸nonlocalå…³é”®å­—"></a>globalä¸nonlocalå…³é”®å­—</h3><ul><li><p>globalé€‚ç”¨äºå‡½æ•°å†…éƒ¨ä¿®æ”¹å…¨å±€å˜é‡çš„å€¼</p></li><li><p>nonlocalé€‚ç”¨äºåµŒå¥—å‡½æ•°ä¸­å†…éƒ¨å‡½æ•°ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼</p></li></ul><h4 id="å®ä¾‹1ï¼ˆglobalå…³é”®å­—ï¼‰"><a href="#å®ä¾‹1ï¼ˆglobalå…³é”®å­—ï¼‰" class="headerlink" title="å®ä¾‹1ï¼ˆglobalå…³é”®å­—ï¼‰"></a>å®ä¾‹1ï¼ˆglobalå…³é”®å­—ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">spam = <span class="hljs-number">99</span>   <span class="hljs-comment"># &lt;--</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">tester</span>():</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">nested</span>():</span><br>        <span class="hljs-keyword">global</span> spam   <span class="hljs-comment">#ç»‘å®šåˆ°äº†ç¬¬ä¸€è¡Œå®šä¹‰çš„spam</span><br>        print(<span class="hljs-string">&#x27;current=&#x27;</span>,spam)<br>        spam = <span class="hljs-number">200</span><br>    <span class="hljs-keyword">return</span> nested<br>tester()()<br>print(spam)<br></code></pre></div></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">current= 99<br>200<br></code></pre></div></td></tr></table></figure><h4 id="å®ä¾‹2ï¼ˆnonlocalå…³é”®å­—ï¼‰"><a href="#å®ä¾‹2ï¼ˆnonlocalå…³é”®å­—ï¼‰" class="headerlink" title="å®ä¾‹2ï¼ˆnonlocalå…³é”®å­—ï¼‰"></a>å®ä¾‹2ï¼ˆnonlocalå…³é”®å­—ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">outer</span>():</span><br>    count = <span class="hljs-number">10</span> <span class="hljs-comment"># &lt;--</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inner</span>():</span><br>        <span class="hljs-keyword">nonlocal</span> count <span class="hljs-comment">#ç»‘å®šåˆ°äº†ç¬¬äºŒè¡Œå®šä¹‰çš„count</span><br>        count = <span class="hljs-number">20</span><br>        print(count)<br>    inner()<br>    print(count)<br>outer()<br></code></pre></div></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">20<br>20<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LEGB </tag>
            
            <tag> ä½œç”¨åŸŸ </tag>
            
            <tag> global </tag>
            
            <tag> nonlocal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DjangoåŸºç¡€(äº”)-ORMæ¨¡å‹ç±»</title>
      <link href="2020/05/24/django-5-orm-mo-xing-lei/"/>
      <url>2020/05/24/django-5-orm-mo-xing-lei/</url>
      
        <content type="html"><![CDATA[<h2 id="ORMä»‹ç»"><a href="#ORMä»‹ç»" class="headerlink" title="ORMä»‹ç»"></a>ORMä»‹ç»</h2><h3 id="ä»€ä¹ˆæ˜¯-ORM"><a href="#ä»€ä¹ˆæ˜¯-ORM" class="headerlink" title="ä»€ä¹ˆæ˜¯ ORM"></a>ä»€ä¹ˆæ˜¯ ORM</h3><ul><li><p><strong><code>ORM</code></strong> å…¨æ‹¼<code>Object-Relation Mapping</code></p></li><li><p>ä¸­æ–‡æ„ä¸º <strong><code>å¯¹è±¡-å…³ç³»æ˜ å°„</code></strong></p></li><li><p>åœ¨<code>MVC</code>/<code>MVT</code>è®¾è®¡æ¨¡å¼ä¸­çš„<code>Model</code>æ¨¡å—ä¸­éƒ½åŒ…æ‹¬<code>ORM</code></p></li></ul><h3 id="ORM-ä¼˜åŠ¿"><a href="#ORM-ä¼˜åŠ¿" class="headerlink" title="ORM ä¼˜åŠ¿"></a>ORM ä¼˜åŠ¿</h3><p>ï¼ˆ1ï¼‰åªéœ€è¦é¢å‘å¯¹è±¡ç¼–ç¨‹, ä¸éœ€è¦é¢å‘æ•°æ®åº“ç¼–å†™ä»£ç .</p><ul><li>å¯¹æ•°æ®åº“çš„æ“ä½œéƒ½è½¬åŒ–æˆå¯¹ç±»å±æ€§å’Œæ–¹æ³•çš„æ“ä½œ.</li><li>ä¸ç”¨ç¼–å†™å„ç§æ•°æ®åº“çš„ sql è¯­å¥.</li></ul><p>ï¼ˆ2ï¼‰å®ç°äº†æ•°æ®æ¨¡å‹ä¸æ•°æ®åº“çš„è§£è€¦, å±è”½äº†ä¸åŒæ•°æ®åº“æ“ä½œä¸Šçš„å·®å¼‚.</p><ul><li>ä¸åœ¨å…³æ³¨ç”¨çš„æ˜¯<code>mysql</code>ã€<code>oracle</code>â€¦ ç­‰.</li><li>é€šè¿‡ç®€å•çš„é…ç½®å°±å¯ä»¥è½»æ¾æ›´æ¢æ•°æ®åº“, è€Œä¸éœ€è¦ä¿®æ”¹ä»£ç .</li></ul><h3 id="ORM-åŠ£åŠ¿"><a href="#ORM-åŠ£åŠ¿" class="headerlink" title="ORM åŠ£åŠ¿"></a>ORM åŠ£åŠ¿</h3><ul><li>ç›¸æ¯”è¾ƒç›´æ¥ä½¿ç”¨ SQL è¯­å¥æ“ä½œæ•°æ®åº“, æœ‰æ€§èƒ½æŸå¤±.</li><li>æ ¹æ®å¯¹è±¡çš„æ“ä½œè½¬æ¢æˆ SQL è¯­å¥, æ ¹æ®æŸ¥è¯¢çš„ç»“æœè½¬åŒ–æˆå¯¹è±¡, åœ¨æ˜ å°„è¿‡ç¨‹ä¸­æœ‰æ€§èƒ½æŸå¤±.</li></ul><h3 id="ORM-å’Œæ•°æ®åº“å…³ç³»ï¼š"><a href="#ORM-å’Œæ•°æ®åº“å…³ç³»ï¼š" class="headerlink" title="ORM å’Œæ•°æ®åº“å…³ç³»ï¼š"></a>ORM å’Œæ•°æ®åº“å…³ç³»ï¼š</h3><p>åœ¨ Django ä¸­ model æ˜¯ä½ æ•°æ®çš„å•ä¸€ã€æ˜ç¡®çš„ä¿¡æ¯æ¥æºã€‚å®ƒåŒ…å«äº†ä½ å­˜å‚¨çš„æ•°æ®çš„é‡è¦å­—æ®µå’Œè¡Œä¸ºã€‚é€šå¸¸ï¼Œä¸€ä¸ªæ¨¡å‹ï¼ˆmodelï¼‰æ˜ å°„åˆ°ä¸€ä¸ªæ•°æ®åº“è¡¨.</p><p>åŸºæœ¬æƒ…å†µï¼š</p><p>æ¯ä¸ªæ¨¡å‹éƒ½æ˜¯ä¸€ä¸ª Python ç±»ï¼Œå®ƒæ˜¯ django.db.models.Model çš„å­ç±»ã€‚</p><p>æ¨¡å‹çš„æ¯ä¸ªå±æ€§éƒ½ä»£è¡¨ä¸€ä¸ªæ•°æ®åº“å­—æ®µã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼ŒDjango ä¸ºæ‚¨æä¾›äº†ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„æ•°æ®åº“è®¿é—® APIã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/ORM%E7%A4%BA%E6%84%8F%E5%9B%BE%20.png" alt="ORMç¤ºæ„å›¾"></p><h2 id="Djangoé…ç½®ä½¿ç”¨mysqlæ•°æ®åº“"><a href="#Djangoé…ç½®ä½¿ç”¨mysqlæ•°æ®åº“" class="headerlink" title="Djangoé…ç½®ä½¿ç”¨mysqlæ•°æ®åº“"></a>Djangoé…ç½®ä½¿ç”¨mysqlæ•°æ®åº“</h2><h3 id="settings-pyé…ç½®DATABASES"><a href="#settings-pyé…ç½®DATABASES" class="headerlink" title="settings.pyé…ç½®DATABASES"></a><code>settings.py</code>é…ç½®<code>DATABASES</code></h3><p>é»˜è®¤:<code>&#123;&#125;</code>(ç©ºå­—å…¸)</p><p>ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«Djangoä½¿ç”¨çš„æ‰€æœ‰æ•°æ®åº“çš„è®¾ç½®ã€‚å®ƒæ˜¯ä¸€ä¸ªåµŒå¥—çš„å­—å…¸ï¼Œå…¶å†…å®¹å°†æ•°æ®åº“åˆ«åæ˜ å°„åˆ°åŒ…å«å•ä¸ªæ•°æ®åº“é€‰é¡¹çš„å­—å…¸ã€‚</p><p>æ•°æ®åº“è®¾ç½®å¿…é¡»é…ç½®ä¸€ä¸ªé»˜è®¤æ•°æ®åº“;è¿˜å¯ä»¥æŒ‡å®šä»»æ„æ•°é‡çš„å…¶ä»–æ•°æ®åº“ã€‚</p><p>æœ€ç®€å•çš„è®¾ç½®æ–‡ä»¶æ˜¯é’ˆå¯¹ä½¿ç”¨SQLiteçš„å•æ•°æ®åº“è®¾ç½®çš„ã€‚è¿™å¯ä»¥é…ç½®ä½¿ç”¨ä»¥ä¸‹:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">DATABASES = &#123;<br>    <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;ENGINE&#x27;</span>: <span class="hljs-string">&#x27;django.db.backends.sqlite3&#x27;</span>,<br>        <span class="hljs-string">&#x27;NAME&#x27;</span>: os.path.join(BASE_DIR, <span class="hljs-string">&#x27;db.sqlite3&#x27;</span>),<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å½“è¿æ¥åˆ°å…¶ä»–æ•°æ®åº“åç«¯(å¦‚<code>MySQL</code>ã€<code>Oracle</code>æˆ–<code>PostgreSQL</code>)æ—¶ï¼Œéœ€è¦é¢å¤–çš„è¿æ¥å‚æ•°ã€‚æœ‰å…³å¦‚ä½•æŒ‡å®šå…¶ä»–æ•°æ®åº“ç±»å‹ï¼Œè¯·å‚é˜…ä¸‹é¢çš„å¼•æ“è®¾ç½®ã€‚è¿™ä¸ªä¾‹å­æ˜¯ä¸º<code>MySQL</code>:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">DATABASES = &#123;<br>    <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;ENGINE&#x27;</span>: <span class="hljs-string">&#x27;django.db.backends.mysql&#x27;</span>,<br>        <span class="hljs-string">&#x27;NAME&#x27;</span>: <span class="hljs-string">&#x27;django_test&#x27;</span>,<br>        <span class="hljs-string">&#x27;USER&#x27;</span>: <span class="hljs-string">&#x27;root&#x27;</span>,<br>        <span class="hljs-string">&#x27;PASSWORD&#x27;</span>: <span class="hljs-string">&#x27;mysqlroot&#x27;</span>,<br>        <span class="hljs-string">&#x27;HOST&#x27;</span>: <span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,<br>        <span class="hljs-string">&#x27;PORT&#x27;</span>: <span class="hljs-number">3306</span><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h3 id="MySQLè¿æ¥å·¥å…·"><a href="#MySQLè¿æ¥å·¥å…·" class="headerlink" title="MySQLè¿æ¥å·¥å…·"></a><code>MySQL</code>è¿æ¥å·¥å…·</h3><ol><li><p>éœ€è¦å®‰è£…<code>pymysql</code>æ¨¡å—</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pip install pymysql<br></code></pre></div></td></tr></table></figure></li><li><p>åœ¨é¡¹ç›®çš„<code>__init__.py</code>åˆå§‹åŒ–æ–‡ä»¶,æ·»åŠ å¦‚ä¸‹ä¿¡æ¯:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pymysql<br>pymysql.install_as_MySQLdb()<br></code></pre></div></td></tr></table></figure></li><li><p>åœ¨djangoæœ€æ–°ç‰ˆæœ¬ä¸­ï¼Œæç¤ºâ€Djangoéœ€è¦mysqlclient 1.3.13æˆ–æ›´é«˜ç‰ˆæœ¬â€ã€‚è¦ä¹ˆåœ¨æŠ¥é”™æ—¶ï¼Œå°†æŠ›å‡ºç‰ˆæœ¬å¼‚å¸¸çš„ä»£ç æ³¨é‡Šæ‰,ä»ç„¶ä½¿ç”¨<code>pymysql</code>ï¼›è¦ä¹ˆç›´æ¥ä½¿ç”¨<code>mysqlclient</code>,ä¸å»ºè®®ç›´æ¥<code>pip</code>å‘½ä»¤å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨<code>conda</code>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œä½¿ç”¨<code>conda</code>å®‰è£…<code>mysqlclient</code>ã€‚</p></li></ol><h2 id="å­—æ®µå±æ€§å’Œé€‰é¡¹"><a href="#å­—æ®µå±æ€§å’Œé€‰é¡¹" class="headerlink" title="å­—æ®µå±æ€§å’Œé€‰é¡¹"></a>å­—æ®µå±æ€§å’Œé€‰é¡¹</h2><h3 id="æ¨¡å‹ç±»å±æ€§å‘½åé™åˆ¶"><a href="#æ¨¡å‹ç±»å±æ€§å‘½åé™åˆ¶" class="headerlink" title="æ¨¡å‹ç±»å±æ€§å‘½åé™åˆ¶"></a>æ¨¡å‹ç±»å±æ€§å‘½åé™åˆ¶</h3><ul><li><p>ä¸èƒ½æ˜¯pythonçš„ä¿ç•™å…³é”®å­—ã€‚</p></li><li><p><strong>ä¸å…è®¸ä½¿ç”¨è¿ç»­çš„ä¸‹åˆ’çº¿ï¼Œè¿™æ˜¯ç”±djangoçš„æŸ¥è¯¢æ–¹å¼å†³å®šçš„ã€‚</strong></p></li><li><p>å®šä¹‰å±æ€§æ—¶éœ€è¦æŒ‡å®šå­—æ®µç±»å‹ï¼Œé€šè¿‡å­—æ®µç±»å‹çš„å‚æ•°æŒ‡å®šé€‰é¡¹ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">å±æ€§å=models.å­—æ®µç±»å‹(é€‰é¡¹)<br></code></pre></div></td></tr></table></figure><h3 id="å­—æ®µç±»å‹"><a href="#å­—æ®µç±»å‹" class="headerlink" title="å­—æ®µç±»å‹"></a>å­—æ®µç±»å‹</h3></li></ul><h4 id="æ•´æ•°"><a href="#æ•´æ•°" class="headerlink" title="æ•´æ•°"></a>æ•´æ•°</h4><h5 id="AutoField"><a href="#AutoField" class="headerlink" title="AutoField"></a><code>AutoField</code></h5><p>æ ¹æ®å¯ç”¨idè‡ªåŠ¨é€’å¢çš„ä¸€ä¸ª32ä½(<code>4 byte</code>)çš„æ•´æ•°(<code>Integer</code>)å­—æ®µ,å®ƒçš„é€‚ç”¨èŒƒå›´ä¸º:<code>1</code>åˆ°<code>2147483647</code>ä¹‹é—´ã€‚</p><p>ä½ é€šå¸¸ä¸éœ€è¦ç›´æ¥ä½¿ç”¨å®ƒ;å¦‚æœä¸è¿›è¡Œå…¶ä»–æŒ‡å®šï¼Œä¸»é”®å­—æ®µå°†è‡ªåŠ¨æ·»åŠ åˆ°æ¨¡å‹ä¸­ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ Django ä¼šç»™æ¯ä¸€ä¸ªæ¨¡å‹æ·»åŠ ä¸‹é¢çš„å­—æ®µï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">id</span> = models.AutoField(primary_key=<span class="hljs-literal">True</span>)<br></code></pre></div></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªè‡ªå¢çš„ä¸»é”®ã€‚</p><p>å¦‚æœä½ æƒ³è‡ªå·±æŒ‡å®šä¸»é”®ï¼Œ åœ¨ä½ æƒ³è¦è®¾ç½®ä¸ºä¸»é”®çš„å­—æ®µä¸Šè®¾ç½®å‚æ•° <code>primary_key=True</code>ã€‚å¦‚æœ Django çœ‹åˆ°ä½ æ˜¾å¼åœ°è®¾ç½®äº† <code>Field.primary_key</code>ï¼Œå°†ä¸ä¼šè‡ªåŠ¨åœ¨è¡¨ï¼ˆæ¨¡å‹ï¼‰ä¸­æ·»åŠ  <code>id</code> åˆ—ã€‚</p><p>æ¯ä¸ªæ¨¡å‹éƒ½éœ€è¦æ‹¥æœ‰ä¸€ä¸ªè®¾ç½®äº† <code>primary_key=True</code> çš„å­—æ®µï¼ˆæ— è®ºæ˜¯æ˜¾å¼çš„è®¾ç½®è¿˜æ˜¯ Django è‡ªåŠ¨è®¾ç½®ï¼‰</p><h5 id="BigAutoField"><a href="#BigAutoField" class="headerlink" title="BigAutoField"></a><code>BigAutoField</code></h5><p>ä¸€ä¸ª64ä½(<code>8 byte</code>)çš„æ•´æ•°ï¼Œç±»ä¼¼äº<code>AutoField</code>ï¼Œé™¤äº†å®ƒçš„é€‚ç”¨èŒƒå›´ä¸º:<code>1</code>åˆ°<code>9223372036854775807</code>ä¹‹é—´ã€‚</p><h5 id="IntegerField"><a href="#IntegerField" class="headerlink" title="IntegerField"></a><code>IntegerField</code></h5><p>ä¸€ä¸ª32ä½(<code>4 byte</code>)çš„æ•´æ•°ã€‚åœ¨Djangoæ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“ä¸­ï¼Œ<code>-2147483648</code>åˆ°<code>2147483647</code>ä¹‹é—´çš„å€¼éƒ½æ˜¯å®‰å…¨çš„ã€‚</p><h5 id="BigIntegerField"><a href="#BigIntegerField" class="headerlink" title="BigIntegerField"></a><code>BigIntegerField</code></h5><p>ä¸€ä¸ª64ä½(<code>8 byte</code>)çš„æ•´æ•°ï¼Œç±»ä¼¼äº<code>IntegerField</code>ï¼Œé™¤äº†å®ƒä¿è¯é€‚åˆä»<code>-9223372036854775808</code>åˆ°<code>9223372036854775807</code>çš„æ•°å­—ã€‚</p><h5 id="SmallIntegerField"><a href="#SmallIntegerField" class="headerlink" title="SmallIntegerField"></a><code>SmallIntegerField</code></h5><p>ä¸€ä¸ª8ä½(<code>2 byte</code>)çš„æ•´æ•°ï¼Œç±»ä¼¼äº<code>IntegerField</code>,åœ¨Djangoæ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“ä¸­ï¼Œ<code>-32768</code>åˆ°<code>32767</code>ä¹‹é—´çš„å€¼éƒ½æ˜¯å®‰å…¨çš„ã€‚</p><h5 id="PositiveIntegerField"><a href="#PositiveIntegerField" class="headerlink" title="PositiveIntegerField"></a><code>PositiveIntegerField</code></h5><p>ä¸€ä¸ª32ä½(<code>4 byte</code>)çš„æ•´æ•°ï¼Œç±»ä¼¼äº<code>IntegerField</code>ï¼Œä½†å¿…é¡»æ˜¯æ­£æ•°æˆ–é›¶(0)ã€‚åœ¨Djangoæ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“ä¸­ï¼Œ<code>0</code>åˆ°<code>2147483647</code>ä¹‹é—´çš„å€¼éƒ½æ˜¯å®‰å…¨çš„ã€‚ç”±äºå‘åå…¼å®¹çš„åŸå› ï¼Œæ¥å—å€¼<code>0</code>ã€‚</p><h5 id="PositiveSmallIntegerField"><a href="#PositiveSmallIntegerField" class="headerlink" title="PositiveSmallIntegerField"></a><code>PositiveSmallIntegerField</code></h5><p>ä¸€ä¸ª8ä½(<code>2 byte</code>)çš„æ•´æ•°ï¼Œç±»ä¼¼äº<code>PositiveIntegerField</code>ï¼Œåœ¨Djangoæ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“ä¸­ï¼Œ<code>0</code>åˆ°<code>32767</code>ä¹‹é—´çš„å€¼éƒ½æ˜¯å®‰å…¨çš„</p><h4 id="å°æ•°"><a href="#å°æ•°" class="headerlink" title="å°æ•°"></a>å°æ•°</h4><h5 id="FloatField"><a href="#FloatField" class="headerlink" title="FloatField"></a><code>FloatField</code></h5><p>åœ¨Pythonä¸­ç”± <code>float</code> å®ä¾‹è¡¨ç¤ºçš„æµ®ç‚¹æ•°ã€‚</p><h5 id="DecimalField"><a href="#DecimalField" class="headerlink" title="DecimalField"></a><code>DecimalField</code></h5><p>ä¸€ç§å›ºå®šç²¾åº¦çš„åè¿›åˆ¶æ•°ï¼Œåœ¨Pythonä¸­ç”¨<code>Decimal</code>å®ä¾‹è¡¨ç¤ºã€‚å®ƒä½¿ç”¨<code>DecimalValidator</code>éªŒè¯è¾“å…¥ã€‚</p><p>æœ‰ä¸¤ä¸ªå¿…è¦çš„å‚æ•°:</p><h6 id="DecimalField-max-digits"><a href="#DecimalField-max-digits" class="headerlink" title="DecimalField.max_digits"></a><code>DecimalField.max_digits</code></h6><p>æ•°å­—ä¸­å…è®¸çš„æœ€å¤§ä½æ•°ã€‚æ³¨æ„ï¼Œè¿™ä¸ªæ•°å­—å¿…é¡»å¤§äºæˆ–ç­‰äº<code>decimal_places</code>ã€‚</p><h6 id="DecimalField-decimal-places"><a href="#DecimalField-decimal-places" class="headerlink" title="DecimalField.decimal_places"></a><code>DecimalField.decimal_places</code></h6><p>è¦ä¸è¯¥æ•°å­—ä¸€èµ·å­˜å‚¨çš„å°æ•°ä½æ•°ã€‚</p><p>ä¾‹å¦‚ï¼Œè¦å­˜å‚¨åˆ†è¾¨ç‡ä¸ºä¸¤ä½å°æ•°çš„999ä»¥å†…çš„æ•°å­—ï¼Œéœ€è¦ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">models.DecimalField(..., max_digits=<span class="hljs-number">5</span>, decimal_places=<span class="hljs-number">2</span>)<br></code></pre></div></td></tr></table></figure><blockquote><p><code>FloatField</code> <strong>vs.</strong> <code>DecimalField</code></p><p><code>FloatField</code>ç±»æœ‰æ—¶ä¼šä¸<code>DecimalField</code>ç±»æ··åœ¨ä¸€èµ·ã€‚è™½ç„¶å®ƒä»¬éƒ½è¡¨ç¤ºå®æ•°ï¼Œä½†å®ƒä»¬è¡¨ç¤ºçš„æ˜¯ä¸åŒçš„æ•°ã€‚<code>FloatField</code>åœ¨å†…éƒ¨ä½¿ç”¨Pythonçš„<code>float</code>ç±»å‹ï¼Œè€Œ<code>DecimalField</code>ä½¿ç”¨Pythonçš„<code>Decimal</code>ç±»å‹ã€‚æœ‰å…³ä¸¤è€…ä¹‹é—´å·®å¼‚çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…Pythonçš„ <a href="https://docs.python.org/3/library/decimal.html#module-decimal"><code>decimal</code></a> æ¨¡å—æ–‡æ¡£ã€‚</p></blockquote><h4 id="å¸ƒå°”"><a href="#å¸ƒå°”" class="headerlink" title="å¸ƒå°”"></a>å¸ƒå°”</h4><h5 id="BooleanField"><a href="#BooleanField" class="headerlink" title="BooleanField"></a><code>BooleanField</code></h5><p>ä¸€ä¸ª<code>true</code>/<code>false</code>å­—æ®µã€‚</p><p>å½“<code>Field.default</code>æœªå®šä¹‰æ—¶ï¼Œ<code>BooleanField</code>çš„é»˜è®¤å€¼ä¸º<code>None</code></p><blockquote><p>Django 2.1:<br>åœ¨æ—§ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªå­—æ®µä¸å…è®¸<code>null=True</code>ï¼Œå› æ­¤å¿…é¡»ä½¿ç”¨<code>NullBooleanField</code>ã€‚ç°åœ¨ä¸å»ºè®®ä½¿ç”¨åè€…ï¼Œå› ä¸ºåœ¨Djangoçš„æœªæ¥ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå¼ƒç”¨å®ƒã€‚</p><p>åœ¨è¾ƒæ—©çš„ç‰ˆæœ¬ä¸­ï¼Œè¯¥å­—æ®µéšå¼åœ°å…·æœ‰<code>blank=True</code>ã€‚æ‚¨å¯ä»¥é€šè¿‡è®¾ç½®blank=Trueæ¥æ¢å¤å‰é¢çš„è¡Œä¸ºã€‚</p></blockquote><h5 id="NullBooleanField"><a href="#NullBooleanField" class="headerlink" title="NullBooleanField"></a><code>NullBooleanField</code></h5><p>ç±»ä¼¼<code>BooleanField</code>çš„<code>null=True</code>ã€‚ä½¿ç”¨<code>BooleanField</code>è¿™ä¸ªå­—æ®µè€Œä¸æ˜¯<code>NullBooleanField</code>è¿™ä¸ªå­—æ®µï¼Œå› ä¸ºåœ¨Djangoçš„æœªæ¥ç‰ˆæœ¬ä¸­<code>NullBooleanField</code>å¯èƒ½ä¼šè¢«å¼ƒç”¨</p><h4 id="å­—ç¬¦"><a href="#å­—ç¬¦" class="headerlink" title="å­—ç¬¦"></a>å­—ç¬¦</h4><h5 id="CharField"><a href="#CharField" class="headerlink" title="CharField"></a><code>CharField</code></h5><p>å­—ç¬¦ä¸²å­—æ®µï¼Œç”¨äºå°å‹åˆ°å¤§å‹å­—ç¬¦ä¸²ã€‚<code>CharField</code>æœ‰ä¸€ä¸ªé¢å¤–çš„å¿…è¦å‚æ•°:</p><h6 id="CharField-max-length"><a href="#CharField-max-length" class="headerlink" title="CharField.max_length"></a><code>CharField.max_length</code></h6><p>å­—æ®µçš„æœ€å¤§é•¿åº¦(ä»¥å­—ç¬¦ä¸ºå•ä½)ã€‚<code>max_length</code>åœ¨æ•°æ®åº“æ ‡å‡†å’ŒDjangoçš„éªŒè¯ä¸­ä½¿ç”¨<code>MaxLengthValidator</code>æ‰§è¡Œã€‚</p><p>å¯¹äºå¤§é‡æ–‡æœ¬ï¼Œä½¿ç”¨<code>TextField</code>ã€‚</p><h5 id="TextField"><a href="#TextField" class="headerlink" title="TextField"></a><code>TextField</code></h5><p>ä¸€ä¸ªå¤§çš„æ–‡æœ¬å­—æ®µã€‚è¿™ä¸ªå­—æ®µçš„é»˜è®¤è¡¨å•å°éƒ¨ä»¶æ˜¯ä¸€ä¸ª<code>Textarea</code>ã€‚</p><p>å¦‚æœæŒ‡å®šmax_lengthå±æ€§ï¼Œå®ƒå°†åæ˜ åœ¨è‡ªåŠ¨ç”Ÿæˆè¡¨å•å­—æ®µçš„<code>Textarea</code>å°éƒ¨ä»¶ä¸­ã€‚ç„¶è€Œï¼Œå®ƒå¹¶æ²¡æœ‰åœ¨æ¨¡å‹æˆ–æ•°æ®åº“çº§åˆ«å¼ºåˆ¶æ‰§è¡Œã€‚</p><h5 id="URLField"><a href="#URLField" class="headerlink" title="URLField"></a><code>URLField</code></h5><p>ä¸€ä¸ªæœ‰å…³<code>URL</code>çš„<code>CharField</code>ï¼Œç”±<code>URLValidator</code>éªŒè¯è¯¥å€¼æ˜¯å¦ä¸ºæœ‰æ•ˆçš„<code>URL</code>åœ°å€ã€‚</p><p>ä¸æ‰€æœ‰<code>CharField</code>å­ç±»ä¸€æ ·ï¼Œ<code>URLField</code>æ¥å—å¯é€‰çš„<code>max_length</code>å‚æ•°ã€‚å¦‚æœä¸æŒ‡å®š<code>max_length</code>ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼200ã€‚</p><h5 id="EmailField"><a href="#EmailField" class="headerlink" title="EmailField"></a><code>EmailField</code></h5><p>ä¸€ä¸ªæœ‰å…³<code>Email</code>çš„<code>CharField</code>,ç”±<code>EmailValidator</code>éªŒè¯è¯¥å€¼æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€ã€‚</p><p>ä¸æ‰€æœ‰<code>CharField</code>å­ç±»ä¸€æ ·ï¼Œ<code>EmailField</code>æ¥å—å¯é€‰çš„<code>max_length</code>å‚æ•°ã€‚å¦‚æœä¸æŒ‡å®š<code>max_length</code>ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼254ã€‚</p><h5 id="UUIDField"><a href="#UUIDField" class="headerlink" title="UUIDField"></a><code>UUIDField</code></h5><p>ç”¨äºå­˜å‚¨é€šç”¨å”¯ä¸€æ ‡è¯†ç¬¦çš„å­—æ®µã€‚ä½¿ç”¨Pythonçš„<code>UUID</code>ç±»ã€‚å½“åœ¨<code>PostgreSQL</code>ä¸Šä½¿ç”¨æ—¶ï¼Œå®ƒä»¥<code>uuid</code>æ•°æ®ç±»å‹å­˜å‚¨ï¼Œå¦åˆ™ä»¥<code>char(32)</code>å­˜å‚¨ã€‚</p><p>å…¨å±€æƒŸä¸€æ ‡è¯†ç¬¦æ˜¯<code>primary_key</code>çš„<code>AutoField</code>çš„ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚æ•°æ®åº“ä¸ä¼šä¸ºä½ ç”Ÿæˆ<strong>UUID</strong>ï¼Œå»ºè®®ä½¿ç”¨é»˜è®¤:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> uuid<br><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyUUIDModel</span>(<span class="hljs-params">models.Model</span>):</span><br>    <span class="hljs-built_in">id</span> = models.UUIDField(primary_key=<span class="hljs-literal">True</span>, default=uuid.uuid4, editable=<span class="hljs-literal">False</span>)<br>    <span class="hljs-comment"># other fields</span><br></code></pre></div></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼Œä¸€ä¸ªå›è°ƒå‡½æ•°(çœç•¥æ‹¬å·)è¢«ä¼ é€’åˆ°<code>default</code>ï¼Œè€Œä¸æ˜¯<strong>UUID</strong>çš„ä¸€ä¸ªå®ä¾‹ã€‚</p></blockquote><h4 id="æ–‡ä»¶"><a href="#æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶"></a>æ–‡ä»¶</h4><h5 id="FileField"><a href="#FileField" class="headerlink" title="FileField"></a><code>FileField</code></h5><p>ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ å­—æ®µã€‚æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°:</p><h6 id="FileField-upload-to"><a href="#FileField-upload-to" class="headerlink" title="FileField.upload_to"></a><code>FileField.upload_to</code></h6><p>è¿™ä¸ªå±æ€§æä¾›äº†ä¸€ç§è®¾ç½®ä¸Šä¼ ç›®å½•å’Œæ–‡ä»¶åçš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è¿›è¡Œè®¾ç½®ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå€¼éƒ½è¢«ä¼ é€’åˆ°<code>Storage.save()</code>æ–¹æ³•ã€‚</p><p>å¦‚æœæ‚¨æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œå®ƒå¯èƒ½åŒ…å«<code>strftime()</code>æ ¼å¼ï¼Œå®ƒå°†è¢«æ–‡ä»¶ä¸Šä¼ çš„æ—¥æœŸ/æ—¶é—´æ‰€å–ä»£(è¿™æ ·ä¸Šä¼ çš„æ–‡ä»¶å°±ä¸ä¼šå¡«æ»¡ç»™å®šçš„ç›®å½•)ã€‚ä¾‹å¦‚:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span>(<span class="hljs-params">models.Model</span>):</span><br>    <span class="hljs-comment"># æ–‡ä»¶å°†è¢«ä¸Šä¼ è‡³ MEDIA_ROOT/uploads</span><br>    upload = models.FileField(upload_to=<span class="hljs-string">&#x27;uploads/&#x27;</span>)<br>    <span class="hljs-comment"># or...</span><br>    <span class="hljs-comment"># æ–‡ä»¶å°†è¢«ä¸Šä¼ è‡³ MEDIA_ROOT/uploads/2015/01/30</span><br>    upload = models.FileField(upload_to=<span class="hljs-string">&#x27;uploads/%Y/%m/%d/&#x27;</span>)<br></code></pre></div></td></tr></table></figure><p>å¦‚æœä½¿ç”¨é»˜è®¤çš„<code>FileSystemStorage</code>ï¼Œå­—ç¬¦ä¸²å€¼å°†è¿½åŠ åˆ°<code>MEDIA_ROOT</code>è·¯å¾„ï¼Œä»¥å½¢æˆæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä½ç½®ï¼Œä¸Šä¼ çš„æ–‡ä»¶å°†å­˜å‚¨åœ¨æ­¤ä½ç½®ã€‚å¦‚æœä½¿ç”¨ä¸åŒçš„å­˜å‚¨ï¼Œè¯·æ£€æŸ¥è¯¥å­˜å‚¨çš„æ–‡æ¡£ï¼Œä»¥äº†è§£å®ƒå¦‚ä½•å¤„ç†<code>upload_to</code>ã€‚</p><p><code>upload_to</code>ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å°†è¢«è°ƒç”¨ä»¥è·å¾—ä¸Šä¼ è·¯å¾„ï¼ŒåŒ…æ‹¬æ–‡ä»¶åã€‚è¿™ä¸ªå¯è°ƒç”¨å‡½æ•°å¿…é¡»æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª<code>unix</code>é£æ ¼çš„è·¯å¾„(å¸¦æœ‰æ–œæ )ï¼Œä»¥ä¾¿ä¼ é€’ç»™å­˜å‚¨ç³»ç»Ÿã€‚è¿™ä¸¤ä¸ªå‚æ•°æ˜¯:</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>instance</code></td><td>å®šä¹‰FileFieldçš„æ¨¡å‹çš„ä¸€ä¸ªå®ä¾‹ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œè¿™æ˜¯é™„åŠ å½“å‰æ–‡ä»¶çš„ç‰¹å®šå®ä¾‹ã€‚<br/>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå¯¹è±¡è¿˜æ²¡æœ‰ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œæ‰€ä»¥å¦‚æœå®ƒä½¿ç”¨é»˜è®¤çš„<code>AutoField</code>ï¼Œé‚£ä¹ˆå®ƒçš„ä¸»é”®å­—æ®µå¯èƒ½è¿˜æ²¡æœ‰å€¼ã€‚</td></tr><tr><td><code>filename</code></td><td>åŸç»™å®šç»™è¯¥æ–‡ä»¶çš„æ–‡ä»¶åã€‚åœ¨ç¡®å®šæœ€ç»ˆç›®çš„åœ°è·¯å¾„æ—¶ï¼Œå¯èƒ½ä¼šè€ƒè™‘è¿™ä¸€ç‚¹ï¼Œä¹Ÿå¯èƒ½ä¸è€ƒè™‘è¿™ä¸€ç‚¹ã€‚</td></tr></tbody></table><p>ä¾‹å­:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">user_directory_path</span>(<span class="hljs-params">instance, filename</span>):</span><br>    <span class="hljs-comment"># file will be uploaded to MEDIA_ROOT/user_&lt;id&gt;/&lt;filename&gt;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;user_&#123;0&#125;/&#123;1&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(instance.user.<span class="hljs-built_in">id</span>, filename)<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span>(<span class="hljs-params">models.Model</span>):</span><br>    upload = models.FileField(upload_to=user_directory_path)<br></code></pre></div></td></tr></table></figure><h6 id="FileField-storage"><a href="#FileField-storage" class="headerlink" title="FileField.storage"></a><code>FileField.storage</code></h6><p>ä¸€ä¸ªå­˜å‚¨å¯¹è±¡ï¼Œå®ƒå¤„ç†æ–‡ä»¶çš„å­˜å‚¨å’Œæ£€ç´¢ã€‚æœ‰å…³å¦‚ä½•æä¾›æ­¤å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a href="https://docs.djangoproject.com/en/2.2/topics/files/">ç®¡ç†æ–‡ä»¶</a> ã€‚</p><p>åœ¨æ¨¡å‹ä¸­ä½¿ç”¨<code>FileField</code>æˆ–<code>ImageField</code>éœ€è¦å‡ ä¸ªæ­¥éª¤:</p><ol><li>åœ¨è®¾ç½®æ–‡ä»¶ä¸­ï¼Œéœ€è¦å°†<code>MEDIA_ROOT</code>å®šä¹‰ä¸ºä¸€ä¸ªç›®å½•çš„å®Œæ•´è·¯å¾„ï¼Œæ‚¨å¸Œæœ›<code>Django</code>åœ¨è¿™ä¸ªç›®å½•ä¸­å­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶ã€‚(ä¸ºäº†æé«˜æ€§èƒ½ï¼Œè¿™äº›æ–‡ä»¶ä¸å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚)å°†<code>MEDIA_URL</code>å®šä¹‰ä¸ºè¯¥ç›®å½•çš„åŸºæœ¬å…¬å…±<code>URL</code>ã€‚ç¡®ä¿æ­¤ç›®å½•å¯ç”±<code>Web</code>æœåŠ¡å™¨çš„ç”¨æˆ·å¸æˆ·å†™å…¥ã€‚</li><li>å°†<code>FileField</code>æˆ–<code>ImageField</code>æ·»åŠ åˆ°æ¨¡å‹ä¸­ï¼Œå®šä¹‰<code>upload_to</code>é€‰é¡¹ï¼Œä»¥æŒ‡å®š<code>MEDIA_ROOT</code>çš„å­ç›®å½•ï¼Œç”¨äºä¸Šä¼ æ–‡ä»¶ã€‚</li><li>æ‰€æœ‰å°†å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„å†…å®¹éƒ½æ˜¯æ–‡ä»¶çš„è·¯å¾„(ç›¸å¯¹äº<code>MEDIA_ROOT</code>)ã€‚æ‚¨å¾ˆå¯èƒ½å¸Œæœ›ä½¿ç”¨Djangoæä¾›çš„ä¾¿åˆ©urlå±æ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ <code>ImageField</code>è¢«ç§°ä¸º <code>mug_shot</code> ï¼Œå¯ä»¥è·å–æ¨¡æ¿ä¸­å›¾åƒçš„ç»å¯¹è·¯å¾„ <code>&#123;&#123; object.mug_shot.url &#125;&#125;</code> </li></ol><p>ä¾‹å¦‚ï¼Œå‡è®¾<code>MEDIA_ROOT</code>è®¾ç½®ä¸º<code>&#39;/home/media&#39;</code>ï¼Œ <code>upload_to</code>è®¾ç½®ä¸º<code>&#39;photos/%Y/%m/%d&#39;</code>ã€‚<code>upload_to</code>çš„<code>&#39;%Y/%m/%d&#39;</code>éƒ¨åˆ†æ˜¯<code>strftime()</code>æ ¼å¼;<code>&#39;%Y&#39;</code>æ˜¯å››ä½æ•°çš„å¹´ä»½ï¼Œ<code>&#39;%m&#39;æ˜¯</code>ä¸¤ä½æ•°çš„æœˆä»½ï¼Œ<code>&#39;%d&#39;</code>æ˜¯ä¸¤ä½æ•°çš„æ—¥æœŸã€‚å¦‚æœä½ åœ¨2007å¹´1æœˆ15æ—¥ä¸Šä¼ äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒå°†è¢«ä¿å­˜åœ¨<code>/home/media/photos/2007/01/15</code>ç›®å½•ä¸‹ã€‚</p><p>å¦‚æœè¦æ£€ç´¢ä¸Šä¼ æ–‡ä»¶çš„ç£ç›˜ä¸Šæ–‡ä»¶åæˆ–æ–‡ä»¶å¤§å°ï¼Œå¯ä»¥åˆ†åˆ«ä½¿ç”¨<a href="https://docs.djangoproject.com/en/2.2/ref/files/file/#django.core.files.File.name"><code>åç§°</code></a> å’Œ<a href="https://docs.djangoproject.com/en/2.2/ref/files/file/#django.core.files.File.size"><code>å¤§å°</code></a> å±æ€§;æœ‰å…³å¯ç”¨å±æ€§å’Œæ–¹æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ <a href="https://docs.djangoproject.com/en/2.2/ref/files/file/#django.core.files.File"><code>æ–‡ä»¶</code></a>ç±»å¼•ç”¨å’Œ <a href="https://docs.djangoproject.com/en/2.2/topics/files/">ç®¡ç†æ–‡ä»¶</a>ä¸»é¢˜æŒ‡å—ã€‚</p><blockquote><p>æ–‡ä»¶ä½œä¸ºæ¨¡å‹ä¿å­˜åœ¨æ•°æ®åº“ä¸­çš„ä¸€éƒ¨åˆ†ä¿å­˜ï¼Œå› æ­¤åœ¨ä¿å­˜æ¨¡å‹ä¹‹å‰ï¼Œä¸èƒ½ä¾èµ–äºç£ç›˜ä¸Šä½¿ç”¨çš„å®é™…æ–‡ä»¶åã€‚</p></blockquote><p>è¯·æ³¨æ„ï¼Œæ— è®ºä½•æ—¶å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶ï¼Œéƒ½åº”è¯¥å¯†åˆ‡æ³¨æ„ä¸Šä¼ æ–‡ä»¶çš„ä½ç½®å’Œæ–‡ä»¶ç±»å‹ï¼Œä»¥é¿å…å®‰å…¨æ¼æ´ã€‚éªŒè¯æ‰€æœ‰ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä»¥ç¡®ä¿è¿™äº›æ–‡ä»¶æ˜¯æ‚¨æ‰€è®¤ä¸ºçš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ç›²ç›®åœ°è®©æŸäººåœ¨æœªç»éªŒè¯çš„æƒ…å†µä¸‹å°†æ–‡ä»¶ä¸Šä¼ åˆ°WebæœåŠ¡å™¨çš„æ–‡æ¡£æ ¹ç›®å½•ä¸­ï¼Œé‚£ä¹ˆæŸäººå°±å¯ä»¥ä¸Šä¼ ä¸€ä¸ª<strong>CGI</strong>æˆ–<strong>PHP</strong>è„šæœ¬ï¼Œå¹¶é€šè¿‡è®¿é—®è¯¥è„šæœ¬åœ¨æ‚¨çš„ç«™ç‚¹ä¸Šçš„<strong>URL</strong>æ¥æ‰§è¡Œè¯¥è„šæœ¬ã€‚ä¸è¦å…è®¸è¿™æ ·çš„æ“ä½œã€‚</p><p>è¿˜è¦æ³¨æ„ï¼Œå³ä½¿æ˜¯ä¸Šä¼ çš„<strong>HTML</strong>æ–‡ä»¶ï¼Œç”±äºå®ƒå¯ä»¥ç”±æµè§ˆå™¨æ‰§è¡Œ(ä½†ä¸èƒ½ç”±æœåŠ¡å™¨æ‰§è¡Œ)ï¼Œä¹Ÿä¼šé€ æˆç›¸å½“äº<strong>XSS</strong>æˆ–è¯·æ³¨æ„ï¼Œæ— è®ºä½•æ—¶å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶ï¼Œéƒ½åº”è¯¥å¯†åˆ‡æ³¨æ„ä¸Šä¼ æ–‡ä»¶çš„ä½ç½®å’Œæ–‡ä»¶ç±»å‹ï¼Œä»¥é¿å…å®‰å…¨æ¼æ´ã€‚éªŒè¯æ‰€æœ‰ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä»¥ç¡®ä¿è¿™äº›æ–‡ä»¶æ˜¯æ‚¨æ‰€è®¤ä¸ºçš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ç›²ç›®åœ°è®©æŸäººåœ¨æœªç»éªŒè¯çš„æƒ…å†µä¸‹å°†æ–‡ä»¶ä¸Šä¼ åˆ°WebæœåŠ¡å™¨çš„æ–‡æ¡£æ ¹ç›®å½•ä¸­ï¼Œé‚£ä¹ˆæŸäººå°±å¯ä»¥ä¸Šä¼ åˆ°<strong>CGI</strong>æˆ–<strong>PHP</strong>è„šæœ¬ï¼Œå¹¶é€šè¿‡è®¿é—®è¯¥è„šæœ¬åœ¨æ‚¨çš„ç«™ç‚¹ä¸Šçš„URLæ¥æ‰§è¡Œè¯¥è„šæœ¬ã€‚ä¸è¦å…è®¸è¿™æ ·çš„æ“ä½œã€‚</p><p>è¿˜è¦æ³¨æ„ï¼Œå³ä½¿æ˜¯ä¸Šä¼ çš„HTMLæ–‡ä»¶ï¼Œç”±äºå®ƒå¯ä»¥ç”±æµè§ˆå™¨æ‰§è¡Œ(ä½†ä¸èƒ½ç”±æœåŠ¡å™¨æ‰§è¡Œ)ï¼Œä¹Ÿä¼šé€ æˆç›¸å½“äº<strong>XSS</strong>æˆ–<strong>CSRF</strong>æ”»å‡»çš„å®‰å…¨å¨èƒã€‚æ”»å‡»çš„å®‰å…¨å¨èƒã€‚</p><blockquote><p><code>FileField</code>å®ä¾‹åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸º<code>varchar</code>åˆ—ï¼Œé»˜è®¤æœ€å¤§é•¿åº¦ä¸º100ä¸ªå­—ç¬¦ã€‚ä¸å…¶ä»–å­—æ®µä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨<code>max_length</code>å‚æ•°æ›´æ”¹æœ€å¤§é•¿åº¦ã€‚</p></blockquote><h5 id="ImageField"><a href="#ImageField" class="headerlink" title="ImageField"></a><code>ImageField</code></h5><p>ä»<code>FileField</code>ç»§æ‰¿æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œä½†ä¹ŸéªŒè¯ä¸Šä¼ çš„å¯¹è±¡æ˜¯æœ‰æ•ˆçš„å›¾åƒã€‚</p><p>é™¤äº†å¯ç”¨äº<code>FileField</code>çš„ç‰¹æ®Šå±æ€§ä¹‹å¤–ï¼Œ<code>ImageField</code>è¿˜å…·æœ‰é«˜åº¦å’Œå®½åº¦å±æ€§ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢è¿™äº›å±æ€§ï¼Œ<code>ImageField</code>æœ‰ä¸¤ä¸ªé¢å¤–çš„å¯é€‰å‚æ•°:</p><h6 id="ImageField-height-field"><a href="#ImageField-height-field" class="headerlink" title="ImageField.height_field"></a><code>ImageField.height_field</code></h6><p>ä¸€ä¸ªæ¨¡å‹å­—æ®µçš„åç§°ï¼Œè¯¥å­—æ®µå°†åœ¨æ¯æ¬¡ä¿å­˜æ¨¡å‹å®ä¾‹æ—¶è‡ªåŠ¨å¡«å……æ˜ åƒçš„é«˜åº¦ã€‚</p><h6 id="ImageField-width-field"><a href="#ImageField-width-field" class="headerlink" title="ImageField.width_field"></a><code>ImageField.width_field</code></h6><p>ä¸€ä¸ªæ¨¡å‹å­—æ®µçš„åç§°ï¼Œè¯¥å­—æ®µå°†åœ¨æ¯æ¬¡ä¿å­˜æ¨¡å‹å®ä¾‹æ—¶è‡ªåŠ¨å¡«å……å›¾åƒçš„å®½åº¦ã€‚</p><p>éœ€è¦ <a href="https://pillow.readthedocs.io/en/latest/">Pillow</a> åº“ã€‚</p><blockquote><p><code>ImageField</code>å®ä¾‹åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸º<code>varchar</code>åˆ—ï¼Œé»˜è®¤æœ€å¤§é•¿åº¦ä¸º100ä¸ªå­—ç¬¦ã€‚ä¸å…¶ä»–å­—æ®µä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨<code>max_length</code>å‚æ•°æ›´æ”¹æœ€å¤§é•¿åº¦ã€‚</p></blockquote><h5 id="FilePathField"><a href="#FilePathField" class="headerlink" title="FilePathField"></a><code>FilePathField</code></h5><p>ä¸€ä¸ª<code>CharField</code>ï¼Œå®ƒçš„é€‰æ‹©ä»…é™äºæ–‡ä»¶ç³»ç»Ÿä¸ŠæŸä¸ªç›®å½•ä¸­çš„æ–‡ä»¶åã€‚æœ‰ä¸‰ä¸ªç‰¹æ®Šçš„å‚æ•°ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªæ˜¯å¿…éœ€çš„:</p><h6 id="FilePathField-path"><a href="#FilePathField-path" class="headerlink" title="FilePathField.path"></a><code>FilePathField.path</code></h6><p>å¿…éœ€çš„ã€‚è¿™ä¸ª<code>FilePathField</code>åº”è¯¥ä»ä¸­è·å¾—å…¶é€‰æ‹©çš„ç›®å½•çš„ç»å¯¹æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ã€‚ä¾‹å¦‚:<code>&quot;/ home /images&quot;</code>ã€‚</p><h6 id="FilePathField-match"><a href="#FilePathField-match" class="headerlink" title="FilePathField.match"></a><code>FilePathField.match</code></h6><p>å¯é€‰çš„ã€‚ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ<code>FilePathField</code>å°†ä½¿ç”¨å®ƒæ¥è¿‡æ»¤æ–‡ä»¶åã€‚æ³¨æ„ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°†åº”ç”¨äºåŸºæœ¬æ–‡ä»¶åï¼Œè€Œä¸æ˜¯å®Œæ•´è·¯å¾„ã€‚ç¤ºä¾‹:<strong><code>foo.*\.txt$</code></strong>ã€‚å®ƒå°†åŒ¹é…ä¸€ä¸ªåä¸º<code>foo23.txt</code>çš„æ–‡ä»¶ï¼Œä½†ä¸åŒ¹é…<code>bar.txt</code>æˆ–<code>foo23.png</code>ã€‚</p><h6 id="FilePathField-recursive"><a href="#FilePathField-recursive" class="headerlink" title="FilePathField.recursive"></a><code>FilePathField.recursive</code></h6><p>å¯é€‰çš„ã€‚éçœŸå³å‡ã€‚é»˜è®¤æ˜¯å‡çš„ã€‚æŒ‡å®šæ˜¯å¦åº”è¯¥åŒ…æ‹¬<code>path</code>çš„æ‰€æœ‰å­ç›®å½•</p><h6 id="FilePathField-allow-files"><a href="#FilePathField-allow-files" class="headerlink" title="FilePathField.allow_files"></a><code>FilePathField.allow_files</code></h6><p>å¯é€‰çš„ã€‚éçœŸå³å‡ã€‚é»˜è®¤æ˜¯æ­£ç¡®çš„ã€‚æŒ‡å®šæ˜¯å¦åº”åŒ…æ‹¬ä½äºæŒ‡å®šä½ç½®çš„æ–‡ä»¶ã€‚è¿™ä¸ªæˆ–<code>allow_folders</code>å¿…é¡»ä¸ºçœŸã€‚</p><h6 id="FilePathField-allow-folders"><a href="#FilePathField-allow-folders" class="headerlink" title="FilePathField.allow_folders"></a><code>FilePathField.allow_folders</code></h6><p>å¯é€‰çš„ã€‚éçœŸå³å‡ã€‚é»˜è®¤æ˜¯å‡çš„ã€‚æŒ‡å®šæ˜¯å¦åº”åŒ…æ‹¬æŒ‡å®šä½ç½®çš„æ–‡ä»¶å¤¹ã€‚è¿™ä¸ªæˆ–allow_fileså¿…é¡»ä¸ºçœŸã€‚</p><p>å½“ç„¶ï¼Œè¿™äº›å‚æ•°å¯ä»¥ä¸€èµ·ä½¿ç”¨ã€‚</p><p>ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜æ˜¯ï¼Œmatchåº”ç”¨äºåŸºæœ¬æ–‡ä»¶åï¼Œè€Œä¸æ˜¯å®Œæ•´è·¯å¾„ã€‚æ‰€ä»¥,è¿™ä¸ªä¾‹å­:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">FilePathField(path=<span class="hljs-string">&quot;/home/images&quot;</span>, match=<span class="hljs-string">&quot;foo.*&quot;</span>, recursive=<span class="hljs-literal">True</span>)<br></code></pre></div></td></tr></table></figure><p>å°†åŒ¹é…<code>/home/images/foo.png</code>ï¼Œä½†ä¸åŒ¹é…<code>/home/images/foo/bar.png</code>ï¼Œå› ä¸ºåŒ¹é…åº”ç”¨äºåŸºæœ¬æ–‡ä»¶å(<code>foo.png</code>å’Œ<code>bar.png</code>)ã€‚</p><blockquote><p><code>FilePathField</code>å®ä¾‹åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸º<code>varchar</code>åˆ—ï¼Œé»˜è®¤æœ€å¤§é•¿åº¦ä¸º100ä¸ªå­—ç¬¦ã€‚ä¸å…¶ä»–å­—æ®µä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨<code>max_length</code>å‚æ•°æ›´æ”¹æœ€å¤§é•¿åº¦ã€‚</p></blockquote><h5 id="BinaryField"><a href="#BinaryField" class="headerlink" title="BinaryField"></a><code>BinaryField</code></h5><p>å­˜å‚¨åŸå§‹äºŒè¿›åˆ¶æ•°æ®çš„å­—æ®µã€‚å¯ä»¥ä¸ºå®ƒåˆ†é…å­—èŠ‚ã€å­—èŠ‚æ•°ç»„æˆ–å†…å­˜è§†å›¾ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>BinaryField</code>å°†<code>editable</code>è®¾ç½®ä¸º<code>False</code>ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä¸èƒ½åŒ…å«åœ¨ModelFormä¸­ã€‚</p><p><code>BinaryField</code>æœ‰ä¸€ä¸ªé¢å¤–çš„å¯é€‰å‚æ•°:</p><h6 id="BinaryField-max-length"><a href="#BinaryField-max-length" class="headerlink" title="BinaryField.max_length"></a><code>BinaryField.max_length</code></h6><p>å­—æ®µçš„æœ€å¤§é•¿åº¦(ä»¥å­—ç¬¦ä¸ºå•ä½)ã€‚æœ€å¤§é•¿åº¦åœ¨Djangoçš„éªŒè¯ä¸­ä½¿ç”¨MaxLengthValidatorå®ç°ã€‚</p><blockquote><p>Django 2.1:<br>æ—§ç‰ˆæœ¬ä¸å…è®¸å°†editableè®¾ç½®ä¸ºTrueã€‚</p></blockquote><h4 id="æ—¶é—´"><a href="#æ—¶é—´" class="headerlink" title="æ—¶é—´"></a>æ—¶é—´</h4><h5 id="DateField"><a href="#DateField" class="headerlink" title="DateField"></a><code>DateField</code></h5><p>æ—¥æœŸï¼Œåœ¨Pythonä¸­ç”¨<code>datetime.date</code>å®ä¾‹è¡¨ç¤ºã€‚æœ‰ä¸€äº›é¢å¤–çš„ï¼Œå¯é€‰çš„å‚æ•°:</p><h6 id="DateField-auto-now"><a href="#DateField-auto-now" class="headerlink" title="DateField.auto_now"></a><code>DateField.auto_now</code></h6><p>æ¯æ¬¡ä¿å­˜å¯¹è±¡æ—¶è‡ªåŠ¨å°†å­—æ®µå€¼è®¾ç½®ä¸ºå½“å‰æ—¶é—´ï¼Œç”¨äºâ€œæœ€åä¿®æ”¹â€æ—¶é—´æˆ³ã€‚</p><p>è¯¥å­—æ®µåªåœ¨è°ƒç”¨<code>Model.save()</code>æ—¶è‡ªåŠ¨æ›´æ–°ã€‚å½“ä»¥å…¶ä»–æ–¹å¼(å¦‚<code>QuerySet.update()</code>)æ›´æ–°å…¶ä»–å­—æ®µæ—¶ï¼Œè¯¥å­—æ®µä¸ä¼šæ›´æ–°ï¼Œä¸è¿‡å¯ä»¥åœ¨è¿™æ ·çš„æ›´æ–°ä¸­ä¸ºè¯¥å­—æ®µæŒ‡å®šè‡ªå®šä¹‰å€¼ã€‚</p><h6 id="DateField-auto-now-add"><a href="#DateField-auto-now-add" class="headerlink" title="DateField.auto_now_add"></a><code>DateField.auto_now_add</code></h6><p>åœ¨ç¬¬ä¸€æ¬¡åˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨å°†å­—æ®µè®¾ç½®ä¸ºå½“å‰æ—¶é—´ã€‚ç”¨äºåˆ›å»ºæ—¶é—´æˆ³ã€‚</p><p>å³ä½¿åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¸ºè¿™ä¸ªå­—æ®µè®¾ç½®äº†å€¼ï¼Œå®ƒä¹Ÿä¼šè¢«å¿½ç•¥ã€‚å¦‚æœæ‚¨å¸Œæœ›èƒ½å¤Ÿä¿®æ”¹è¯¥å­—æ®µï¼Œè¯·å°†<code>auto_now_add=True</code>è®¾ç½®ä¸ºä»¥ä¸‹å†…å®¹:</p><ul><li>For <code>DateField</code>: <code>default=date.today</code> - from <code>datetime.date.today()</code></li><li>For <code>DateTimeField</code>: <code>default=timezone.now</code> - from <code>django.utils.timezone.now()</code></li></ul><p><code>auto_now_add</code>ã€<code>auto_now</code>å’Œ<code>default</code>é€‰é¡¹æ˜¯äº’æ–¥çš„ã€‚è¿™äº›é€‰é¡¹çš„ä»»ä½•ç»„åˆéƒ½å°†å¯¼è‡´é”™è¯¯ã€‚</p><h5 id="DateTimeField"><a href="#DateTimeField" class="headerlink" title="DateTimeField"></a><code>DateTimeField</code></h5><p>æ—¥æœŸå’Œæ—¶é—´ï¼Œåœ¨Pythonä¸­ç”¨<code>datetime.datetime</code>å®ä¾‹è¡¨ç¤ºã€‚æ¥å—ä¸<code>DateField</code>ç›¸åŒçš„é¢å¤–å‚æ•°ã€‚</p><h5 id="TimeField"><a href="#TimeField" class="headerlink" title="TimeField"></a><code>TimeField</code></h5><p>æ—¶é—´ï¼Œåœ¨Pythonä¸­ç”¨<code>datetime.time</code>å®ä¾‹è¡¨ç¤ºã€‚æ¥å—ä¸<code>DateField</code>ç›¸åŒçš„é¢å¤–å‚æ•°ã€‚</p><h3 id="å­—æ®µé€‰é¡¹"><a href="#å­—æ®µé€‰é¡¹" class="headerlink" title="å­—æ®µé€‰é¡¹"></a>å­—æ®µé€‰é¡¹</h3><blockquote><p>ä»¥ä¸‹å‚æ•°å¯¹æ‰€æœ‰å­—æ®µç±»å‹å‡æœ‰æ•ˆï¼Œä¸”æ˜¯å¯é€‰çš„ã€‚</p></blockquote><h4 id="null"><a href="#null" class="headerlink" title="null"></a><code>null</code></h4><p>å¦‚æœè®¾ç½®ä¸º <code>True</code>ï¼Œ å½“è¯¥å­—æ®µä¸ºç©ºæ—¶ï¼ŒDjango ä¼šå°†æ•°æ®åº“ä¸­è¯¥å­—æ®µè®¾ç½®ä¸º <code>NULL</code>ï¼Œé»˜è®¤ä¸º <code>False</code>ã€‚</p><p>é¿å…åœ¨åŸºäºå­—ç¬¦ä¸²çš„å­—æ®µï¼ˆä¾‹å¦‚ <code>CharField</code>å’Œ <code>TextField</code>ï¼‰ä¸Šä½¿ç”¨ <code>null</code>ã€‚å¦‚æœå­—ç¬¦ä¸²å­—æ®µçš„ <code>null=True</code>ï¼Œé‚£æ„å‘³ç€å¯¹äºâ€œæ— æ•°æ®â€æœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼š<code>NULL</code> å’Œç©ºå­—ç¬¦ä¸²ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹äºâ€œæ— æ•°æ®â€å£°æ˜ä¸¤ä¸ªå€¼æ˜¯èµ˜ä½™çš„ï¼ŒDjango çš„æƒ¯ä¾‹æ˜¯ä½¿ç”¨ç©ºå­—ç¬¦ä¸²è€Œä¸æ˜¯ <code>NULL</code>ã€‚ ä¸€ä¸ªä¾‹å¤–æ˜¯å½“ <code>CharField</code>åŒæ—¶å…·æœ‰ <code>unique=True</code> å’Œ <code>blank=True</code> æ—¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦è®¾ç½® <code>null=True</code>ï¼Œä»¥ä¾¿åœ¨ä½¿ç”¨ç©ºç™½å€¼ä¿å­˜å¤šä¸ªå¯¹è±¡æ—¶é¿å…å”¯ä¸€çš„çº¦æŸè¿è§„ã€‚</p><p>å¯¹äºåŸºäºå­—ç¬¦ä¸²å’ŒéåŸºäºå­—ç¬¦ä¸²çš„å­—æ®µï¼Œå¦‚æœå¸Œæœ›åœ¨è¡¨å•ä¸­å…è®¸ç©ºå€¼ï¼Œè¿˜éœ€è¦è®¾ç½®<code>blank=True</code>ï¼Œå› ä¸º<code>null</code>å‚æ•°åªå½±å“æ•°æ®åº“å­˜å‚¨(å‚è§<code>blank</code>)ã€‚</p><h4 id="blank"><a href="#blank" class="headerlink" title="blank"></a><code>blank</code></h4><p>å¦‚æœè®¾ç½®ä¸º <code>True</code> ï¼Œè¯¥å­—æ®µå…è®¸ä¸ºç©ºã€‚é»˜è®¤ä¸º <code>False</code> ã€‚</p><p>æ³¨æ„ï¼Œè¿™ä¸<code>null</code>ä¸åŒã€‚<code>null</code>çº¯ç²¹æ˜¯ä¸æ•°æ®åº“ç›¸å…³çš„ï¼Œè€Œ<code>blank</code>åˆ™æ˜¯ä¸éªŒè¯ç›¸å…³çš„ã€‚å¦‚æœå­—æ®µä¸º<code>blank=True</code>ï¼Œè¡¨å•éªŒè¯å°†å…è®¸è¾“å…¥ç©ºå€¼ã€‚</p><blockquote><p>blankå’Œnullçš„ç”¨æ³•åŒºåˆ«</p></blockquote><ul><li><p>nullçº¯ç²¹æ˜¯ä¸æ•°æ®åº“ç›¸å…³çš„ï¼Œè€Œblankåˆ™æ˜¯ä¸è¡¨å•éªŒè¯ç›¸å…³çš„ã€‚</p></li><li><p>é¿å…åœ¨åŸºäºå­—ç¬¦ä¸²çš„å­—æ®µï¼ˆä¾‹å¦‚ <code>CharField</code>å’Œ <code>TextField</code>ï¼‰ä¸Šä½¿ç”¨ <code>null</code>ã€‚å¦‚æœå­—ç¬¦ä¸²å­—æ®µçš„ <code>null=True</code>ï¼Œé‚£æ„å‘³ç€å¯¹äºâ€œæ— æ•°æ®â€æœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼š<code>NULL</code> å’Œ<code>ç©ºå­—ç¬¦ä¸²</code>ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹äºâ€œæ— æ•°æ®â€å£°æ˜ä¸¤ä¸ªå€¼æ˜¯èµ˜ä½™çš„ï¼ŒDjango çš„æƒ¯ä¾‹æ˜¯ä½¿ç”¨ç©ºå­—ç¬¦ä¸²è€Œä¸æ˜¯ <code>NULL</code>ã€‚ ä¸€ä¸ªä¾‹å¤–æ˜¯å½“ <code>CharField</code>åŒæ—¶å…·æœ‰ <code>unique=True</code> å’Œ <code>blank=True</code> æ—¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦è®¾ç½® <code>null=True</code>ï¼Œä»¥ä¾¿åœ¨ä½¿ç”¨ç©ºç™½å€¼ä¿å­˜å¤šä¸ªå¯¹è±¡æ—¶é¿å…å”¯ä¸€çš„çº¦æŸè¿è§„ã€‚</p></li><li><p>å½“å­˜åœ¨ä¸¤ä¸ªå‚æ•°æ—¶ï¼Œæ€»å…±ä¼šæœ‰å››ç§è®¾å®šç»„åˆ</p><ul><li><code>blank=True</code>ã€<code>null=True</code>ã€‚ç»Ÿä¸€çš„è¡¨æ˜äº†è¯¥å­—æ®µï¼ˆåˆ—ï¼‰æ˜¯å¯ä»¥ä¸ºç©ºçš„ã€‚</li><li><code>blank=False</code>ã€<code>null=False</code>ã€‚ç»Ÿä¸€çš„è¡¨é¢äº†è¯¥å­—æ®µï¼ˆåˆ—ï¼‰ä¸å¯ä»¥ä¸ºç©ºã€‚</li><li><code>blank=True</code>ã€<code>null=False</code>ã€‚è¿™ä¸ªè®¾å®šçš„æ„ä¹‰åœ¨äºï¼ŒæŸäº›å­—æ®µå¹¶ä¸å¸Œæœ›ç”¨æˆ·åœ¨è¡¨å•ä¸­åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡åœ¨<code>save</code>æ–¹æ³•ä¸­æ ¹æ®å…¶ä»–å­—æ®µç”Ÿæˆã€‚</li><li><code>blank=False</code>ã€<code>null=True</code>ã€‚è¿™ä¸ªè®¾å®šä¸å…è®¸è¡¨å•ä¸­è¯¥å­—æ®µä¸ºç©ºï¼Œä½†æ˜¯å…è®¸åœ¨æ›´æ–°æ—¶æˆ–è€…é€šè¿‡shellç­‰éè¡¨å•æ–¹å¼æ’å…¥æ•°æ®è¯¥å­—æ®µä¸ºç©ºã€‚</li></ul></li></ul><blockquote><p>åªè®¾å®šäº†<code>blank=True</code>è€Œæ²¡æœ‰è®¾å®š<code>null=True</code>çš„æ—¶å€™ï¼Œé€šè¿‡<code>Admin</code>ç«™ç‚¹è¡¨å•åˆ›å»ºæ¨¡å‹å®ä¾‹å¹¶ä¸”è¡¨å•åœ¨è¯¥å­—æ®µä¸Šæ²¡æœ‰å€¼æ—¶æ•°æ®åº“ä¸æŠ¥é”™å‘¢ï¼Ÿï¼Ÿï¼Ÿ</p></blockquote><ul><li>å½“æ²¡æœ‰è®¾å®š<code>null=True</code>æ—¶ï¼Œè¯¥åˆ—åœ¨æ•°æ®åº“ä¸­å°±å­˜åœ¨<code>NOT NULL</code>çš„çº¦æŸï¼Œå¦‚æœæ’å…¥æ•°æ®æ—¶è¿™ä¸€åˆ—æ²¡æœ‰å€¼ï¼ŒæŒ‰ç†è¯´æ•°æ®åº“åº”è¯¥ä¼šæŠ¥é”™æ‰å¯¹</li><li>å‡ºç°è¿™ç§æƒ…å†µçš„åŸå› åœ¨äºï¼Œ<code>django</code>åœ¨å¤„ç†æŸäº›åœ¨æ•°æ®åº“ä¸­å®é™…çš„å­˜å‚¨å€¼ä¸ºå­—ç¬¦ä¸²çš„<code>Field</code>æ—¶ï¼ˆå¦‚<code>CharField</code>, <code>TextField</code>, <code>ImageField</code>ï¼ˆå›¾ç‰‡æ–‡ä»¶çš„è·¯å¾„ï¼‰ï¼‰ï¼Œæ°¸è¿œä¸ä¼šå‘æ•°æ®åº“ä¸­å¡«å…¥ç©ºå€¼ã€‚å¦‚æœè¡¨å•ä¸­æŸä¸ª<code>CharField</code>æˆ–è€…<code>TextField</code>å­—æ®µä¸ºç©ºï¼Œé‚£ä¹ˆ<code>django</code>ä¼šåœ¨æ•°æ®åº“ä¸­å¡«å…¥<code>&quot;&quot;</code>ï¼Œè€Œä¸æ˜¯<code>null</code>. </li></ul><h4 id="choices"><a href="#choices" class="headerlink" title="choices"></a><code>choices</code></h4><p>ä¸€ä¸ªåºåˆ—ï¼Œå®ƒç”±ä¸¤ä¸ªå…ƒç´ (ä¾‹å¦‚[(A, B)ï¼Œ (A, B)â€¦])çš„è¿­ä»£ç»„æˆï¼Œä½œä¸ºè¿™ä¸ªå­—æ®µçš„é€‰æ‹©ã€‚å¦‚æœæä¾›äº†é€‰æ‹©ï¼Œåˆ™é€šè¿‡æ¨¡å‹éªŒè¯å¼ºåˆ¶æ‰§è¡Œï¼Œé»˜è®¤çš„è¡¨å•å°éƒ¨ä»¶å°†æ˜¯ä¸€ä¸ªåŒ…å«è¿™äº›é€‰æ‹©çš„é€‰æ‹©æ¡†ï¼Œè€Œä¸æ˜¯æ ‡å‡†çš„æ–‡æœ¬å­—æ®µã€‚</p><p>æ¯ä¸ªå…ƒç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯è¦åœ¨æ¨¡å‹ä¸Šè®¾ç½®çš„å®é™…å€¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯äººç±»å¯è¯»çš„åç§°ã€‚ä¾‹å¦‚:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">YEAR_IN_SCHOOL_CHOICES = [<br>    (<span class="hljs-string">&#x27;FR&#x27;</span>, <span class="hljs-string">&#x27;Freshman&#x27;</span>),<br>    (<span class="hljs-string">&#x27;SO&#x27;</span>, <span class="hljs-string">&#x27;Sophomore&#x27;</span>),<br>    (<span class="hljs-string">&#x27;JR&#x27;</span>, <span class="hljs-string">&#x27;Junior&#x27;</span>),<br>    (<span class="hljs-string">&#x27;SR&#x27;</span>, <span class="hljs-string">&#x27;Senior&#x27;</span>),<br>]<br></code></pre></div></td></tr></table></figure><p>é€šå¸¸ï¼Œæœ€å¥½åœ¨æ¨¡å‹ç±»ä¸­å®šä¹‰é€‰é¡¹ï¼Œå¹¶ä¸ºæ¯ä¸ªå€¼å®šä¹‰ä¸€ä¸ªé€‚å½“å‘½åçš„å¸¸é‡:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span>(<span class="hljs-params">models.Model</span>):</span><br>    FRESHMAN = <span class="hljs-string">&#x27;FR&#x27;</span><br>    SOPHOMORE = <span class="hljs-string">&#x27;SO&#x27;</span><br>    JUNIOR = <span class="hljs-string">&#x27;JR&#x27;</span><br>    SENIOR = <span class="hljs-string">&#x27;SR&#x27;</span><br>    YEAR_IN_SCHOOL_CHOICES = [<br>        (FRESHMAN, <span class="hljs-string">&#x27;Freshman&#x27;</span>),<br>        (SOPHOMORE, <span class="hljs-string">&#x27;Sophomore&#x27;</span>),<br>        (JUNIOR, <span class="hljs-string">&#x27;Junior&#x27;</span>),<br>        (SENIOR, <span class="hljs-string">&#x27;Senior&#x27;</span>),<br>    ]<br>    year_in_school = models.CharField(<br>        max_length=<span class="hljs-number">2</span>,<br>        choices=YEAR_IN_SCHOOL_CHOICES,<br>        default=FRESHMAN,<br>    )<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">is_upperclass</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.year_in_school <span class="hljs-keyword">in</span> (self.JUNIOR, self.SENIOR)<br></code></pre></div></td></tr></table></figure><p>è™½ç„¶æ‚¨å¯ä»¥åœ¨æ¨¡å‹ç±»çš„å¤–éƒ¨å®šä¹‰ä¸€ä¸ªé€‰æ‹©åˆ—è¡¨ï¼Œç„¶åå¼•ç”¨å®ƒï¼Œä½†æ˜¯åœ¨æ¨¡å‹ç±»å†…éƒ¨å®šä¹‰æ¯ä¸ªé€‰æ‹©çš„é€‰æ‹©å’Œåç§°ï¼Œå¯ä»¥å°†æ‰€æœ‰ä¿¡æ¯ä¸ä½¿ç”¨å®ƒçš„ç±»ä¸€èµ·ä¿å­˜ï¼Œå¹¶ä½¿é€‰æ‹©æ˜“äºå¼•ç”¨(ä¾‹å¦‚ï¼š<strong>Student.SOPHOMORE</strong> å¯ä»¥åœ¨å¯¼å…¥<strong>Student</strong>æ¨¡å‹ç±»çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨)ã€‚</p><p>æ‚¨è¿˜å¯ä»¥å°†å¯ç”¨çš„é€‰é¡¹æ”¶é›†åˆ°æŒ‡å®šçš„ç»„ä¸­ï¼Œè¿™äº›ç»„å¯ç”¨äºç»„ç»‡ç›®çš„:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Media</span>(<span class="hljs-params">models.Model</span>):</span><br>    MEDIA_CHOICES = [<br>        (<span class="hljs-string">&#x27;Audio&#x27;</span>, (<br>            (<span class="hljs-string">&#x27;vinyl&#x27;</span>, <span class="hljs-string">&#x27;Vinyl&#x27;</span>),<br>            (<span class="hljs-string">&#x27;cd&#x27;</span>, <span class="hljs-string">&#x27;CD&#x27;</span>),<br>        )<br>         ),<br>        (<span class="hljs-string">&#x27;Video&#x27;</span>, (<br>            (<span class="hljs-string">&#x27;vhs&#x27;</span>, <span class="hljs-string">&#x27;VHS Tape&#x27;</span>),<br>            (<span class="hljs-string">&#x27;dvd&#x27;</span>, <span class="hljs-string">&#x27;DVD&#x27;</span>),<br>        )<br>         ),<br>        (<span class="hljs-string">&#x27;unknown&#x27;</span>, <span class="hljs-string">&#x27;Unknown&#x27;</span>),<br>    ]<br><br>    media = models.CharField(<br>        max_length=<span class="hljs-number">10</span>,<br>        choices=MEDIA_CHOICES,<br>        default=<span class="hljs-string">&#x27;cd&#x27;</span><br>    )<br></code></pre></div></td></tr></table></figure><p>æ¯ä¸ªå…ƒç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åº”ç”¨äºç»„çš„åç§°ã€‚ç¬¬äºŒä¸ªå…ƒç´ æ˜¯äºŒå…ƒç»„çš„è¿­ä»£ï¼Œæ¯ä¸ªäºŒå…ƒç»„åŒ…å«ä¸€ä¸ªå€¼å’Œä¸€ä¸ªå¯è¯»çš„é€‰é¡¹åã€‚åˆ†ç»„é€‰é¡¹å¯ä»¥ä¸å•ä¸ªåˆ—è¡¨ä¸­çš„æœªåˆ†ç»„é€‰é¡¹ç»„åˆåœ¨ä¸€èµ·(ä¾‹å¦‚æœ¬ä¾‹ä¸­çš„æœªçŸ¥é€‰é¡¹)ã€‚</p><p>æ³¨æ„ï¼Œé€‰æ‹©å¯ä»¥æ˜¯ä»»ä½•åºåˆ—å¯¹è±¡â€“ä¸ä¸€å®šæ˜¯åˆ—è¡¨æˆ–å…ƒç»„ã€‚è¿™å…è®¸æ‚¨åŠ¨æ€åœ°æ„é€ é€‰æ‹©ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å‘ç°è‡ªå·±çš„é€‰æ‹©æ˜¯åŠ¨æ€çš„ï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨ä¸€ä¸ªå¸¦æœ‰ <code>ForeignKey</code>çš„æ•°æ®åº“è¡¨ã€‚ä½†æ˜¯é™æ€æ•°æ®ä¸ä¼šæœ‰å¤ªå¤§çš„å˜åŒ–ã€‚</p><p>å¯¹äºæ¯ä¸ªè®¾ç½®äº†é€‰é¡¹çš„å­—æ®µï¼Œå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª<code>get_FOO_display()</code>æ–¹æ³•ï¼Œå…¶ä¸­<code>FOO</code>æ˜¯å­—æ®µçš„åç§°ã€‚è¯¥æ–¹æ³•è¿”å›å­—æ®µçš„â€äººæ˜“è¯»â€å€¼ã€‚</p><p>ä¾‹å­:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>(<span class="hljs-params">models.Model</span>):</span><br>    SHIRT_SIZES = (<br>        (<span class="hljs-string">&#x27;S&#x27;</span>, <span class="hljs-string">&#x27;Small&#x27;</span>),<br>        (<span class="hljs-string">&#x27;M&#x27;</span>, <span class="hljs-string">&#x27;Medium&#x27;</span>),<br>        (<span class="hljs-string">&#x27;L&#x27;</span>, <span class="hljs-string">&#x27;Large&#x27;</span>),<br>    )<br>    name = models.CharField(max_length=<span class="hljs-number">60</span>)<br>    shirt_size = models.CharField(max_length=<span class="hljs-number">2</span>, choices=SHIRT_SIZES)<br></code></pre></div></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">&gt;&gt;&gt; p = Person(name=<span class="hljs-string">&quot;Fred Flintstone&quot;</span>, shirt_size=<span class="hljs-string">&quot;L&quot;</span>)<br>&gt;&gt;&gt; p.save()<br>&gt;&gt;&gt; p.shirt_size<br><span class="hljs-string">&#x27;L&#x27;</span><br>&gt;&gt;&gt; p.get_shirt_size_display()<br><span class="hljs-string">&#x27;Large&#x27;</span><br></code></pre></div></td></tr></table></figure><h4 id="db-column"><a href="#db-column" class="headerlink" title="db_column"></a><code>db_column</code></h4><p>è¦ç”¨äºæ­¤å­—æ®µçš„æ•°æ®åº“åˆ—çš„åç§°ã€‚å¦‚æœæ²¡æœ‰ç»™å‡ºï¼ŒDjangoå°†ä½¿ç”¨å­—æ®µçš„åç§°ã€‚</p><h4 id="db-index"><a href="#db-index" class="headerlink" title="db_index"></a><code>db_index</code></h4><p>å¦‚æœä¸ºçœŸï¼Œå°†ä¸ºæ­¤å­—æ®µåˆ›å»ºä¸€ä¸ªæ•°æ®åº“ç´¢å¼•ã€‚</p><h4 id="default"><a href="#default" class="headerlink" title="default"></a><code>default</code></h4><p>è¯¥å­—æ®µçš„é»˜è®¤å€¼ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå€¼æˆ–è€…æ˜¯ä¸ªå¯è°ƒç”¨çš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œæ¯æ¬¡å®ä¾‹åŒ–æ¨¡å‹æ—¶éƒ½ä¼šè°ƒç”¨è¯¥å¯¹è±¡ã€‚</p><p>é»˜è®¤å€¼ä¸èƒ½æ˜¯ä¸€ä¸ªå¯å˜çš„å¯¹è±¡(æ¨¡å‹å®ä¾‹ã€åˆ—è¡¨ã€é›†åˆç­‰)ï¼Œå› ä¸ºå¯¹è¯¥å¯¹è±¡çš„åŒä¸€ä¸ªå®ä¾‹çš„å¼•ç”¨å°†è¢«ç”¨ä½œæ‰€æœ‰æ¨¡å‹å®ä¾‹çš„é»˜è®¤å€¼ã€‚åè€Œï¼Œå¯ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­æ‰“åŒ…å¤„ç†æ‰€éœ€çš„é»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦ä¸º<code>JSONField</code>æŒ‡å®šé»˜è®¤<code>dict</code>ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‡½æ•°:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">contact_default</span>():</span><br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;to1@example.com&quot;</span>&#125;<br><br>contact_info = JSONField(<span class="hljs-string">&quot;ContactInfo&quot;</span>, default=contact_default)<br></code></pre></div></td></tr></table></figure><p><strong>lambda</strong>è¡¨è¾¾å¼ä¸èƒ½ç”¨äºåƒ<strong>default</strong>è¿™æ ·çš„å­—æ®µé€‰é¡¹ï¼Œå› ä¸ºå®ƒä»¬ä¸èƒ½è¢«è¿ç§»åºåˆ—åŒ–ã€‚</p><p>å¯¹äºåƒæ˜ å°„æ¨¡å‹å®ä¾‹çš„<code>ForeignKey</code>è¿™æ ·çš„å­—æ®µï¼Œé»˜è®¤å€¼åº”è¯¥æ˜¯å®ƒä»¬å¼•ç”¨çš„å­—æ®µçš„å€¼(<code>pk</code>ï¼Œé™¤éè®¾ç½®<code>to_field</code>)ï¼Œè€Œä¸æ˜¯æ¨¡å‹å®ä¾‹ã€‚</p><p>å½“åˆ›å»ºæ–°çš„æ¨¡å‹å®ä¾‹å¹¶ä¸”æ²¡æœ‰ä¸ºå­—æ®µæä¾›å€¼æ—¶ï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼ã€‚å½“å­—æ®µæ˜¯ä¸»é”®æ—¶ï¼Œå½“å­—æ®µè®¾ç½®ä¸º<code>None</code>æ—¶ä¹Ÿä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚</p><h4 id="help-text"><a href="#help-text" class="headerlink" title="help_text"></a><code>help_text</code></h4><p>é¢å¤–çš„â€œå¸®åŠ©â€æ–‡æœ¬ï¼Œéšè¡¨å•æ§ä»¶ä¸€åŒæ˜¾ç¤ºã€‚å³ä¾¿ä½ çš„å­—æ®µæœªç”¨äºè¡¨å•ï¼Œå®ƒå¯¹äºç”Ÿæˆæ–‡æ¡£ä¹Ÿæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</p><p>æ³¨æ„ï¼Œè¿™ä¸ªå€¼ä¸ä¼šåœ¨è‡ªåŠ¨ç”Ÿæˆçš„è¡¨å•ä¸­è¿›è¡Œ<code>html</code>è½¬ä¹‰çš„ã€‚å¦‚æœæ‚¨æ„¿æ„ï¼Œå¯ä»¥åœ¨<code>help_text</code>ä¸­åŒ…å«<strong>HTML</strong>ã€‚ä¾‹å¦‚:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">help_text=<span class="hljs-string">&quot;Please use the following format: &lt;em&gt;YYYY-MM-DD&lt;/em&gt;.&quot;</span><br></code></pre></div></td></tr></table></figure><p>æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨çº¯æ–‡æœ¬å’Œ<code>django.utils.html.escape()</code>æ¥è½¬ä¹‰ä»»ä½•<strong>HTML</strong>ç‰¹æ®Šå­—ç¬¦ã€‚ç¡®ä¿è½¬ä¹‰ä»»ä½•æ¥è‡ªä¸å¯ä¿¡ç”¨æˆ·çš„å¸®åŠ©æ–‡æœ¬ï¼Œä»¥é¿å…è·¨ç«™ç‚¹è„šæœ¬æ”»å‡»ã€‚</p><h4 id="primary-key"><a href="#primary-key" class="headerlink" title="primary_key"></a><code>primary_key</code></h4><p>å¦‚æœè®¾ç½®ä¸º <code>True</code> ï¼Œå°†è¯¥å­—æ®µè®¾ç½®ä¸ºè¯¥æ¨¡å‹çš„ä¸»é”®ã€‚</p><p>å¦‚æœæ‚¨æ²¡æœ‰ä¸ºæ¨¡å‹ä¸­çš„ä»»ä½•å­—æ®µæŒ‡å®š<code>primary_key=True</code>, <strong>Django</strong>å°†è‡ªåŠ¨æ·»åŠ ä¸€ä¸ª<code>AutoField</code>æ¥ä¿å­˜ä¸»é”®ï¼Œæ‰€ä»¥æ‚¨ä¸éœ€è¦åœ¨ä»»ä½•å­—æ®µä¸Šè®¾ç½®<code>primary_key=True</code>ï¼Œé™¤éæ‚¨æƒ³è¦†ç›–é»˜è®¤çš„ä¸»é”®è¡Œä¸ºã€‚</p><p><code>primary_key=True</code>æ„å‘³ç€<code>null=False</code>å’Œ<code>unique=True</code>ã€‚å¯¹è±¡ä¸Šåªå…è®¸æœ‰ä¸€ä¸ªä¸»é”®ã€‚</p><p>ä¸»é”®å­—æ®µæ˜¯åªè¯»çš„ã€‚å¦‚æœæ›´æ”¹ç°æœ‰å¯¹è±¡ä¸Šçš„ä¸»é”®å€¼å¹¶ä¿å­˜å®ƒï¼Œåˆ™å°†åœ¨æ—§å¯¹è±¡æ—è¾¹åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚</p><h4 id="unique"><a href="#unique" class="headerlink" title="unique"></a><code>unique</code></h4><p>å¦‚æœè®¾ç½®ä¸º <code>True</code>ï¼Œè¿™ä¸ªå­—æ®µå¿…é¡»åœ¨æ•´ä¸ªè¡¨ä¸­ä¿æŒå€¼å”¯ä¸€ã€‚</p><p>è¿™æ˜¯åœ¨æ•°æ®åº“çº§å’Œé€šè¿‡æ¨¡å‹éªŒè¯å®ç°çš„ã€‚å¦‚æœè¯•å›¾åœ¨æƒŸä¸€å­—æ®µä¸­ä¿å­˜å…·æœ‰é‡å¤å€¼çš„æ¨¡å‹ï¼Œåˆ™æ¨¡å‹çš„<code>save()</code>æ–¹æ³•ä¼šäº§ç”Ÿä¸€ä¸ª<code>django.db.IntegrityError</code>ã€‚</p><p>è¿™ä¸ªé€‰é¡¹å¯¹é™¤äº†<code>ManyToManyField</code>å’Œ<code>OneToOneField</code>ä»¥å¤–çš„æ‰€æœ‰å­—æ®µç±»å‹éƒ½æœ‰æ•ˆã€‚</p><p>æ³¨æ„ï¼Œå½“<code>unique</code>ä¸ºçœŸæ—¶ï¼Œä¸éœ€è¦æŒ‡å®š<code>db_index</code>ï¼Œå› ä¸º<code>unique</code>æ„å‘³ç€åˆ›å»ºç´¢å¼•ã€‚</p><h4 id="verbose-name"><a href="#verbose-name" class="headerlink" title="verbose_name"></a><code>verbose_name</code></h4><p>å­—æ®µçš„å¯è¯»åç§°ã€‚å¦‚æœæ²¡æœ‰ç»™å‡ºè¯¦ç»†çš„åç§°ï¼ŒDjangoå°†ä½¿ç”¨å­—æ®µçš„å±æ€§åè‡ªåŠ¨åˆ›å»ºå®ƒï¼Œå°†ä¸‹åˆ’çº¿è½¬æ¢ä¸ºç©ºæ ¼ã€‚</p><p>é™¤äº† <code>ForeignKey</code>ï¼Œ <code>ManyToManyField</code> å’Œ <code>OneToOneField</code>ï¼Œä»»ä½•å­—æ®µç±»å‹éƒ½æ¥æ”¶ä¸€ä¸ªå¯é€‰ä½ç½®çš„å‚æ•° <code>verbose_name</code>ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å‚æ•°å€¼ï¼Œ Django ä¼šè‡ªåŠ¨ä½¿ç”¨å­—æ®µçš„å±æ€§åä½œä¸ºè¯¥å‚æ•°å€¼ï¼Œå¹¶ä¸”æŠŠä¸‹åˆ’çº¿è½¬æ¢ä¸ºç©ºæ ¼ã€‚</p><p>åœ¨è¯¥ä¾‹ä¸­ï¼šå¤‡æ³¨åä¸º <code>&quot;person&#39;s first name&quot;</code>:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">first_name = models.CharField(<span class="hljs-string">&quot;person&#x27;s first name&quot;</span>, max_length=<span class="hljs-number">30</span>)<br></code></pre></div></td></tr></table></figure><p>åœ¨è¯¥ä¾‹ä¸­ï¼šå¤‡æ³¨åä¸º <code>&quot;first name&quot;</code>:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">first_name = models.CharField(max_length=<span class="hljs-number">30</span>)<br></code></pre></div></td></tr></table></figure><p> <code>ForeignKey</code>ï¼Œ <code>ManyToManyField</code> å’Œ <code>OneToOneField</code>æ¥æ”¶çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¨¡å‹çš„ç±»åï¼Œåé¢å¯ä»¥æ·»åŠ ä¸€ä¸ª <code>verbose_name</code>å‚æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">poll = models.ForeignKey(<br>    Poll,<br>    on_delete=models.CASCADE,<br>    verbose_name=<span class="hljs-string">&quot;the related poll&quot;</span>,<br>)<br>sites = models.ManyToManyField(Site, verbose_name=<span class="hljs-string">&quot;list of sites&quot;</span>)<br>place = models.OneToOneField(<br>    Place,<br>    on_delete=models.CASCADE,<br>    verbose_name=<span class="hljs-string">&quot;related place&quot;</span>,<br>)<br></code></pre></div></td></tr></table></figure><p>æƒ¯ä¾‹æ˜¯ä¸å°†<code>verbose_name</code> çš„é¦–å­—æ¯å¤§å†™ï¼Œå¿…è¦æ—¶ <strong>Djanog</strong> ä¼šè‡ªåŠ¨æŠŠé¦–å­—æ¯è½¬æ¢ä¸ºå¤§å†™ã€‚</p><h4 id="validators"><a href="#validators" class="headerlink" title="validators"></a><code>validators</code></h4><p>è¦ä¸ºæ­¤å­—æ®µè¿è¡Œçš„éªŒè¯å™¨åˆ—è¡¨ã€‚</p><h5 id="ç¼–å†™éªŒè¯å™¨"><a href="#ç¼–å†™éªŒè¯å™¨" class="headerlink" title="ç¼–å†™éªŒè¯å™¨"></a>ç¼–å†™éªŒè¯å™¨</h5><p><code>validator</code>æ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå€¼ï¼Œå¦‚æœå®ƒä¸æ»¡è¶³æŸäº›æ¡ä»¶ï¼Œå°±ä¼šå¼•å‘<code>ValidationError</code>ã€‚éªŒè¯å™¨å¯¹äºåœ¨ä¸åŒç±»å‹çš„å­—æ®µä¹‹é—´é‡ç”¨éªŒè¯é€»è¾‘éå¸¸æœ‰ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªéªŒè¯å™¨ï¼Œå®ƒåªå…è®¸å¶æ•°:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.core.exceptions <span class="hljs-keyword">import</span> ValidationError<br><span class="hljs-keyword">from</span> django.utils.translation <span class="hljs-keyword">import</span> gettext_lazy <span class="hljs-keyword">as</span> _<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_even</span>(<span class="hljs-params">value</span>):</span><br>    <span class="hljs-keyword">if</span> value % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">raise</span> ValidationError(<br>            _(<span class="hljs-string">&#x27;%(value)s is not an even number&#x27;</span>),<br>            params=&#123;<span class="hljs-string">&#x27;value&#x27;</span>: value&#125;,<br>        )<br></code></pre></div></td></tr></table></figure><p>æ‚¨å¯ä»¥é€šè¿‡å­—æ®µçš„<code>validators</code>å‚æ•°å°†å…¶æ·»åŠ åˆ°æ¨¡å‹å­—æ®µ:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span>(<span class="hljs-params">models.Model</span>):</span><br>    even_field = models.IntegerField(validators=[validate_even])<br></code></pre></div></td></tr></table></figure><p>å› ä¸ºå€¼åœ¨è¿è¡ŒéªŒè¯å™¨ä¹‹å‰å°±è½¬æ¢æˆäº†Pythonï¼Œä½ ç”šè‡³å¯ä»¥å¯¹è¡¨å•ä½¿ç”¨ç›¸åŒçš„éªŒè¯å™¨:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django <span class="hljs-keyword">import</span> forms<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyForm</span>(<span class="hljs-params">forms.Form</span>):</span><br>    even_field = forms.IntegerField(validators=[validate_even])<br></code></pre></div></td></tr></table></figure><p>å¯¹äºæ›´å¤æ‚æˆ–å¯é…ç½®çš„éªŒè¯å™¨ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨å¸¦æœ‰<code>__call__()</code>æ–¹æ³•çš„ç±»ã€‚ä¾‹å¦‚ï¼Œ <code>RegexValidator</code>è¿™ç±»éªŒè¯å™¨ã€‚å¦‚æœåœ¨<code>validators</code> <code>model</code>å­—æ®µé€‰é¡¹ä¸­ä½¿ç”¨åŸºäºç±»çš„éªŒè¯å™¨,åº”è¯¥æ·»åŠ <code>deconstruct()</code>è£…é¥°å™¨å’Œ <code>__eq__()</code> æ–¹æ³•è®©å®ƒå¯ä»¥è¢«è¿ç§»æ¡†æ¶åºåˆ—åŒ–ã€‚</p><p> <a href="https://docs.djangoproject.com/zh-hans/2.2/ref/validators/#built-in-validators"><code>django.core.validators</code></a>æ¨¡å—åŒ…å«ä¸€ç»„å¯è°ƒç”¨çš„éªŒè¯å™¨ï¼Œç”¨äºæ¨¡å‹å’Œè¡¨å•å­—æ®µï¼Œå¯ä»¥åœ¨å†…éƒ¨ä½¿ç”¨å®ƒä»¬ã€‚</p><h3 id="Meta-é€‰é¡¹"><a href="#Meta-é€‰é¡¹" class="headerlink" title="Meta é€‰é¡¹"></a><code>Meta</code> é€‰é¡¹</h3><p>ä½¿ç”¨å†…éƒ¨ <code>Metaç±»</code> æ¥ç»™æ¨¡å‹èµ‹äºˆå…ƒæ•°æ®ï¼Œå°±åƒï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ox</span>(<span class="hljs-params">models.Model</span>):</span><br>    horn_length = models.IntegerField()<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        ordering = [<span class="hljs-string">&quot;horn_length&quot;</span>]<br>        verbose_name_plural = <span class="hljs-string">&quot;oxen&quot;</span><br></code></pre></div></td></tr></table></figure><h4 id="abstract"><a href="#abstract" class="headerlink" title="abstract"></a><code>abstract</code></h4><p>æŠ½è±¡åŸºç±»åœ¨ä½ è¦å°†å…¬å…±ä¿¡æ¯æ”¾å…¥å¾ˆå¤šæ¨¡å‹æ—¶ä¼šå¾ˆæœ‰ç”¨ã€‚ç¼–å†™ä½ çš„åŸºç±»ï¼Œå¹¶åœ¨ <strong>Meta</strong> ç±»ä¸­å¡«å…¥ <code>abstract=True</code>ã€‚è¯¥æ¨¡å‹å°†ä¸ä¼šåˆ›å»ºä»»ä½•æ•°æ®è¡¨ã€‚å½“å…¶ç”¨ä½œå…¶å®ƒæ¨¡å‹ç±»çš„åŸºç±»æ—¶ï¼Œå®ƒçš„å­—æ®µä¼šè‡ªåŠ¨æ·»åŠ è‡³å­ç±»ã€‚</p><p>ä¸€ä¸ªä¾‹å­:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommonInfo</span>(<span class="hljs-params">models.Model</span>):</span><br>    name = models.CharField(max_length=<span class="hljs-number">100</span>)<br>    age = models.PositiveIntegerField()<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        abstract = <span class="hljs-literal">True</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span>(<span class="hljs-params">CommonInfo</span>):</span><br>    home_group = models.CharField(max_length=<span class="hljs-number">5</span>)<br></code></pre></div></td></tr></table></figure><p><code>Student</code> æ¨¡å‹æ‹¥æœ‰3ä¸ªå­—æ®µï¼š <code>name</code>ï¼Œ <code>age</code> å’Œ <code>home_group</code>ã€‚ <code>CommonInfo</code> æ¨¡å‹ä¸èƒ½ç”¨ä½œæ™®é€šçš„ Django æ¨¡å‹ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ã€‚å®ƒä¸ä¼šç”Ÿæˆæ•°æ®è¡¨ï¼Œä¹Ÿæ²¡æœ‰ç®¡ç†å™¨ï¼Œä¹Ÿä¸èƒ½è¢«å®ä¾‹åŒ–å’Œä¿å­˜ã€‚</p><p>ä»æŠ½è±¡åŸºç±»ç»§æ‰¿æ¥çš„å­—æ®µå¯è¢«å…¶å®ƒå­—æ®µæˆ–å€¼é‡å†™ï¼Œæˆ–ç”¨ <code>None</code> åˆ é™¤ã€‚</p><p>å¯¹å¾ˆå¤šç”¨æˆ·æ¥è¯´ï¼Œè¿™ç§ç»§æ‰¿å¯èƒ½å°±æ˜¯ä½ æƒ³è¦çš„ã€‚å®ƒæä¾›äº†ä¸€ç§åœ¨ Python çº§æŠ½å‡ºå…¬å…±ä¿¡æ¯çš„æ–¹æ³•ï¼Œä½†ä»ä¼šåœ¨å­ç±»æ¨¡å‹ä¸­åˆ›å»ºæ•°æ®è¡¨ã€‚</p><h4 id="app-label"><a href="#app-label" class="headerlink" title="app_label"></a><code>app_label</code></h4><p>å¦‚æœä¸€ä¸ªæ¨¡å‹æ˜¯åœ¨<code>INSTALLED_APPS</code>ä¸­æ³¨å†Œçš„<strong>APP</strong>å¤–éƒ¨å®šä¹‰çš„ï¼Œå®ƒå¿…é¡»å£°æ˜å®ƒå±äºå“ªä¸ªåº”ç”¨ç¨‹åº:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">app_label = <span class="hljs-string">&#x27;myapp&#x27;</span><br></code></pre></div></td></tr></table></figure><h4 id="db-table"><a href="#db-table" class="headerlink" title="db_table"></a><code>db_table</code></h4><p>è¦ç”¨äºæ¨¡å‹çš„æ•°æ®åº“è¡¨çš„åç§°:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">db_table = <span class="hljs-string">&#x27;music_album&#x27;</span><br></code></pre></div></td></tr></table></figure><p>ä¸ºäº†èŠ‚çœæ—¶é—´ï¼ŒDjangoè‡ªåŠ¨ä»æ¨¡å‹ç±»å’ŒåŒ…å«å®ƒçš„åº”ç”¨ç¨‹åºçš„åç§°æ´¾ç”Ÿæ•°æ®åº“è¡¨çš„åç§°ã€‚æ¨¡å‹çš„æ•°æ®åº“è¡¨åæ˜¯é€šè¿‡å°†æ¨¡å‹çš„<strong>â€œapp labelâ€</strong>(æ‚¨åœ¨<code>manage.py startapp</code>ä¸­ä½¿ç”¨çš„åç§°)ä¸æ¨¡å‹çš„ç±»åè¿æ¥åœ¨ä¸€èµ·ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹é—´åŠ ä¸€ä¸ªä¸‹åˆ’çº¿æ¥æ„é€ çš„ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ªåº”ç”¨<strong>bookstore</strong>(ç”± <code>manage.py startapp bookstore</code>åˆ›å»º)ï¼Œå®šä¹‰ä¸º<strong>Book</strong>çš„æ¨¡å‹ç±»å°†æœ‰ä¸€ä¸ªåä¸º<code>bookstore_book</code>çš„æ•°æ®åº“è¡¨ã€‚</p><p>è¦è¦†ç›–æ•°æ®åº“è¡¨åï¼Œè¯·ä½¿ç”¨ç±»å…ƒä¸­çš„db_tableå‚æ•°ã€‚</p><blockquote><p>å¼ºçƒˆå»ºè®®åœ¨é€šè¿‡db_tableè¦†ç›–è¡¨åæ—¶ä½¿ç”¨å°å†™çš„è¡¨åï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨MySQLåç«¯æ—¶ã€‚</p></blockquote><h4 id="ordering"><a href="#ordering" class="headerlink" title="ordering"></a><code>ordering</code></h4><p>å¯¹è±¡çš„é»˜è®¤é¡ºåºï¼Œç”¨äºè·å–å¯¹è±¡åˆ—è¡¨:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">ordering = [<span class="hljs-string">&#x27;-order_date&#x27;</span>]<br></code></pre></div></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ª åŒ…å«ç”±å­—ç¬¦ä¸²å’Œ/æˆ–æ„æˆçš„æŸ¥è¯¢è¡¨è¾¾å¼çš„å…ƒç»„æˆ–åˆ—è¡¨ã€‚æ¯ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ä¸€ä¸ªå¸¦æœ‰å¯é€‰<code>&quot;-&quot;</code>å‰ç¼€çš„å­—æ®µåï¼Œè¡¨ç¤ºæŒ‰é™åºæ’åˆ—ã€‚æ²¡æœ‰å‰ç¼€<code>&quot;-&quot;</code>çš„å­—æ®µå°†æŒ‰å‡åºæ’åˆ—ã€‚ä½¿ç”¨å­—ç¬¦ä¸²<code>&quot;?&quot;</code>éšæœºæ’åºã€‚</p><p>ä¾‹å¦‚ï¼Œè¦æŒ‰<code>pub_date</code>å­—æ®µå‡åºæ’åºï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">ordering = [<span class="hljs-string">&#x27;pub_date&#x27;</span>]<br></code></pre></div></td></tr></table></figure><p>è¦æŒ‰pub_dateé™åºæ’åˆ—ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">ordering = [<span class="hljs-string">&#x27;-pub_date&#x27;</span>]<br></code></pre></div></td></tr></table></figure><p>æŒ‰pub_dateé™åºæ’åˆ—ï¼Œç„¶åæŒ‰authorå‡åºæ’åˆ—ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">ordering = [<span class="hljs-string">&#x27;-pub_date&#x27;</span>, <span class="hljs-string">&#x27;author&#x27;</span>]<br></code></pre></div></td></tr></table></figure><p>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æŸ¥è¯¢è¡¨è¾¾å¼ã€‚è¦æŒ‰ä½œè€…å‡åºæ’åºå¹¶ä½¿ç©ºå€¼æ’åºæŒç»­ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> F<br><br>ordering = [F(<span class="hljs-string">&#x27;author&#x27;</span>).asc(nulls_last=<span class="hljs-literal">True</span>)]<br></code></pre></div></td></tr></table></figure><h4 id="permissions"><a href="#permissions" class="headerlink" title="permissions"></a><code>permissions</code></h4><p>åˆ›å»ºæ­¤å¯¹è±¡æ—¶è¿›å…¥æƒé™è¡¨çš„é¢å¤–æƒé™ã€‚ä¸ºæ¯ä¸ªæ¨¡å‹è‡ªåŠ¨åˆ›å»ºæ·»åŠ ã€æ›´æ”¹ã€åˆ é™¤å’Œè§†å›¾æƒé™ã€‚è¿™ä¸ªä¾‹å­æŒ‡å®šäº†ä¸€ä¸ªé¢å¤–çš„æƒé™<code>can_deliver_pizzas</code>:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">permissions = [(<span class="hljs-string">&#x27;can_deliver_pizzas&#x27;</span>, <span class="hljs-string">&#x27;Can deliver pizzas&#x27;</span>)]<br></code></pre></div></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªæ ¼å¼ä¸º<strong>(permission_code,</strong> <strong>human_readable_permission_name)</strong>çš„äºŒå…ƒåˆ—è¡¨æˆ–å…ƒç»„ã€‚</p><h4 id="indexes"><a href="#indexes" class="headerlink" title="indexes"></a><code>indexes</code></h4><p>è¦åœ¨æ¨¡å‹ä¸Šå®šä¹‰çš„ç´¢å¼•åˆ—è¡¨:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span>(<span class="hljs-params">models.Model</span>):</span><br>    first_name = models.CharField(max_length=<span class="hljs-number">100</span>)<br>    last_name = models.CharField(max_length=<span class="hljs-number">100</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        indexes = [<br>            models.Index(fields=[<span class="hljs-string">&#x27;last_name&#x27;</span>, <span class="hljs-string">&#x27;first_name&#x27;</span>]),<br>            models.Index(fields=[<span class="hljs-string">&#x27;first_name&#x27;</span>], name=<span class="hljs-string">&#x27;first_name_idx&#x27;</span>),<br>        ]<br></code></pre></div></td></tr></table></figure><h4 id="verbose-name-1"><a href="#verbose-name-1" class="headerlink" title="verbose_name"></a><code>verbose_name</code></h4><p>æ¨¡å‹å¯¹è±¡çš„äººç±»å¯è¯»çš„å•æ•°åç§°:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">verbose_name = <span class="hljs-string">&quot;pizza&quot;</span><br></code></pre></div></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰ç»™å‡ºè¿™ä¸ªå€¼ï¼ŒDjangoå°†ä½¿ç”¨ç±»åçš„ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬:<code>CamelCase</code>å˜æˆ<code>camel case</code>ã€‚</p><h4 id="verbose-name-plural"><a href="#verbose-name-plural" class="headerlink" title="verbose_name_plural"></a><code>verbose_name_plural</code></h4><p>å¯¹è±¡çš„å¤æ•°åç§°:</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">verbose_name_plural = <span class="hljs-string">&quot;stories&quot;</span><br></code></pre></div></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰ç»™å‡ºï¼ŒDjangoå°†ä½¿ç”¨ <code>verbose_name</code>+ <code>&quot;s&quot;</code></p><h3 id="å…³è”å…³ç³»"><a href="#å…³è”å…³ç³»" class="headerlink" title="å…³è”å…³ç³»"></a>å…³è”å…³ç³»</h3><p>æ˜¾ç„¶ï¼Œå…³ç³»å‹æ•°æ®åº“çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå„è¡¨ä¹‹é—´çš„å…³è”å…³ç³»ã€‚ Django æä¾›äº†å®šä¹‰ä¸‰ç§æœ€å¸¸è§çš„æ•°æ®åº“å…³è”å…³ç³»çš„æ–¹æ³•ï¼šå¤šå¯¹ä¸€ï¼Œå¤šå¯¹å¤šï¼Œä¸€å¯¹ä¸€ã€‚                                                                </p><h4 id="ForeignKey-å¤šå¯¹ä¸€"><a href="#ForeignKey-å¤šå¯¹ä¸€" class="headerlink" title="ForeignKey(å¤šå¯¹ä¸€)"></a>ForeignKey(å¤šå¯¹ä¸€)</h4><p>å®šä¹‰ä¸€ä¸ªå¤šå¯¹ä¸€çš„å…³è”å…³ç³»ï¼Œä½¿ç”¨ <code>django.db.models.ForeignKey</code> ç±»ã€‚å°±å’Œå…¶å®ƒ <code>Field</code>å­—æ®µç±»å‹ä¸€æ ·ï¼Œåªéœ€è¦åœ¨ä½ æ¨¡å‹ä¸­æ·»åŠ ä¸€ä¸ªå€¼ä¸ºè¯¥ç±»çš„å±æ€§ã€‚</p><p><code>ForeignKey</code> ç±»éœ€è¦æ·»åŠ ä¸€ä¸ªä½ç½®å‚æ•°ï¼Œå³ä½ æƒ³è¦å…³è”çš„æ¨¡å‹ç±»åã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># å…³é”®å­—ForeignKey</span><br>publish = models.ForeignKey(to=<span class="hljs-string">&#x27;Publish&#x27;</span>)  <span class="hljs-comment"># toç”¨æ¥æŒ‡ä»£è·Ÿå“ªå¼ è¡¨æœ‰å…³ç³» é»˜è®¤å…³è”çš„å°±æ˜¯è¡¨çš„ä¸»é”®å­—æ®µ</span><br><span class="hljs-comment"># å¤–é”®å­—æ®µååœ¨åˆ›å»ºæ—¶ä¼šè‡ªåŠ¨åŠ ä¸Š_idåç¼€</span><br></code></pre></div></td></tr></table></figure><h5 id="å­—æ®µå‚æ•°"><a href="#å­—æ®µå‚æ•°" class="headerlink" title="å­—æ®µå‚æ•°"></a>å­—æ®µå‚æ•°</h5><ol><li><p><code>to</code>:è®¾ç½®è¦å…³è”çš„è¡¨</p></li><li><p><code>to_field</code>:è®¾ç½®è¦å…³è”çš„è¡¨çš„å­—æ®µ(ä¸€èˆ¬ä¸è®¾ç½®ï¼Œé»˜è®¤ä½¿ç”¨ä¸»é”®idå…³è”)</p></li><li><p><code>related_name</code>:åå‘æ“ä½œæ—¶ï¼Œä½¿ç”¨çš„å­—æ®µåï¼Œç”¨äºä»£æ›¿åŸåå‘æŸ¥è¯¢æ—¶çš„<code>&#39;è¡¨å_set&#39;</code></p></li><li><p><code>related_query_name</code>:åå‘æŸ¥è¯¢æ“ä½œæ—¶ï¼Œä½¿ç”¨çš„è¿æ¥å‰ç¼€ï¼Œç”¨äºæ›¿æ¢è¡¨å</p></li><li><p><code>db_constraint</code>:æ˜¯å¦åœ¨æ•°æ®åº“ä¸­åˆ›å»ºå¤–é”®çº¦æŸï¼Œé»˜è®¤ä¸ºTrueã€‚</p></li><li><p><code>on_delete</code>:å½“åˆ é™¤å…³è”è¡¨ä¸­çš„æ•°æ®æ—¶ï¼Œå½“å‰è¡¨ä¸å…¶å…³è”çš„è¡Œçš„è¡Œä¸ºã€‚</p><ol><li><p><code>models.CASCADE</code>:åˆ é™¤å…³è”æ•°æ®ï¼Œä¸ä¹‹å…³è”çš„æ•°æ®ä¹Ÿåˆ è”(<code>on_delete=models.CASCADE</code>)</p></li><li><p>æŠ›å‡ºå¼‚å¸¸(é”™è¯¯)</p><ol><li><code>models.DO_NOTHING</code>:åˆ é™¤å…³è”æ•°æ®ï¼Œå¼•å‘é”™è¯¯<code>IntegrityError</code>       </li><li><code>models.PROTECT</code><br>åˆ é™¤å…³è”æ•°æ®ï¼Œå¼•å‘é”™è¯¯<code>ProtectedError</code></li></ol></li><li><p><code>models.SET_NULL</code>:åˆ é™¤å…³è”æ•°æ®ï¼Œä¸ä¹‹å…³è”çš„å€¼è®¾ç½®ä¸º<code>null</code>ï¼ˆå‰æFKå­—æ®µéœ€è¦è®¾ç½®ä¸ºå¯ç©ºï¼‰</p></li><li><p><code>models.SET_DEFAULT</code>:åˆ é™¤å…³è”æ•°æ®ï¼Œä¸ä¹‹å…³è”çš„å€¼è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼ˆå‰æFKå­—æ®µéœ€è¦è®¾ç½®é»˜è®¤å€¼ï¼‰</p></li><li><p><code>models.SET</code>:åˆ é™¤å…³è”æ•°æ®</p><ol><li>ä¸ä¹‹å…³è”çš„å€¼è®¾ç½®ä¸ºæŒ‡å®šå€¼ï¼Œè®¾ç½®ï¼š<code>models.SET(å€¼)</code></li><li>ä¸ä¹‹å…³è”çš„å€¼è®¾ç½®ä¸ºå¯æ‰§è¡Œå¯¹è±¡çš„è¿”å›å€¼ï¼Œè®¾ç½®ï¼š<code>models.SET(å¯æ‰§è¡Œå¯¹è±¡)</code></li></ol></li></ol></li></ol><h4 id="OneToOneField-ä¸€å¯¹ä¸€"><a href="#OneToOneField-ä¸€å¯¹ä¸€" class="headerlink" title="OneToOneField(ä¸€å¯¹ä¸€)"></a>OneToOneField(ä¸€å¯¹ä¸€)</h4><blockquote><p>å¤–é”®å­—æ®µåˆ›å»ºåœ¨ä»»æ„ä¸€å¼ è¡¨éƒ½å¯ä»¥ï¼Œå»ºè®®å¤–é”®æ·»åŠ åœ¨æŸ¥è¯¢é¢‘ç‡è¾ƒé«˜çš„ä¸€æ–¹</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># å…³é”®å­—OneToOneField</span><br>author_detail = models.OneToOneField(to=<span class="hljs-string">&#x27;Author_detail&#x27;</span>)  <span class="hljs-comment"># å¤–é”®æœ¬è´¨fk + unique</span><br></code></pre></div></td></tr></table></figure><h5 id="å­—æ®µå‚æ•°-1"><a href="#å­—æ®µå‚æ•°-1" class="headerlink" title="å­—æ®µå‚æ•°"></a>å­—æ®µå‚æ•°</h5><ol><li><p><code>to</code> :è®¾ç½®è¦å…³è”çš„è¡¨ã€‚</p></li><li><p><code>to_field</code>:è®¾ç½®è¦å…³è”çš„å­—æ®µã€‚</p></li><li><p><code>on_delete</code>:åŒForeignKeyå­—æ®µã€‚</p></li></ol><h4 id="ManyToManyField-å¤šå¯¹å¤š"><a href="#ManyToManyField-å¤šå¯¹å¤š" class="headerlink" title="ManyToManyField(å¤šå¯¹å¤š)"></a>ManyToManyField(å¤šå¯¹å¤š)</h4><blockquote><p>ç”¨äºè¡¨ç¤ºå¤šå¯¹å¤šçš„å…³è”å…³ç³»ã€‚åœ¨æ•°æ®åº“ä¸­é€šè¿‡ç¬¬ä¸‰å¼ è¡¨æ¥å»ºç«‹å…³è”å…³ç³»ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># å…³é”®å­—ManyToManyField</span><br>author = models.ManyToManyField(to=<span class="hljs-string">&#x27;Author&#x27;</span>)  <br><span class="hljs-comment"># django ormä¼šè‡ªåŠ¨å¸®ä½ åˆ›å»ºç¬¬ä¸‰å¼ å…³ç³»è¡¨ï¼Œè¡¨åä¸ºä¸¤ä¸ªå…³è”çš„è¡¨åç”¨_è¿æ¥</span><br></code></pre></div></td></tr></table></figure><h5 id="å­—æ®µå‚æ•°-2"><a href="#å­—æ®µå‚æ•°-2" class="headerlink" title="å­—æ®µå‚æ•°"></a>å­—æ®µå‚æ•°</h5><ol><li><p><code>to</code>:è®¾ç½®è¦å…³è”çš„è¡¨</p></li><li><p><code>related_name</code>:åŒ<code>ForeignKey</code>å­—æ®µ(åå‘æ“ä½œæ—¶ï¼Œä½¿ç”¨çš„å­—æ®µåï¼Œç”¨äºä»£æ›¿åŸåå‘æŸ¥è¯¢æ—¶çš„<code>&#39;è¡¨å_set&#39;</code>)</p></li><li><p><code>related_query_name</code>:åŒ<code>ForeignKey</code>å­—æ®µ(åå‘æŸ¥è¯¢æ“ä½œæ—¶ï¼Œä½¿ç”¨çš„è¿æ¥å‰ç¼€ï¼Œç”¨äºæ›¿æ¢è¡¨å)</p></li><li><p><code>symmetric</code>:ä»…ç”¨äºå¤šå¯¹å¤šè‡ªå…³è”æ—¶ï¼ŒæŒ‡å®šå†…éƒ¨æ˜¯å¦åˆ›å»ºåå‘æ“ä½œçš„å­—æ®µã€‚é»˜è®¤ä¸º<code>True</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>(<span class="hljs-params">models.Model</span>):</span><br>    name = models.CharField(max_length=<span class="hljs-number">16</span>)<br>    friends = models.ManyToManyField(<span class="hljs-string">&quot;self&quot;</span>)<br>    <span class="hljs-comment"># æ­¤æ—¶ï¼Œpersonå¯¹è±¡å°±æ²¡æœ‰person_setå±æ€§ã€‚</span><br>   <br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>(<span class="hljs-params">models.Model</span>):</span><br>    name = models.CharField(max_length=<span class="hljs-number">16</span>)<br>    friends = models.ManyToManyField(<span class="hljs-string">&quot;self&quot;</span>,symmetrical=<span class="hljs-literal">False</span>)<br>    <span class="hljs-comment"># æ­¤æ—¶ï¼Œpersonå¯¹è±¡ç°åœ¨å°±å¯ä»¥ä½¿ç”¨person_setå±æ€§è¿›è¡Œåå‘æŸ¥è¯¢ã€‚</span><br></code></pre></div></td></tr></table></figure></li><li><p><code>through</code>:åœ¨ä½¿ç”¨<code>ManyToManyField</code>å­—æ®µæ—¶ï¼Œ<code>Django</code>å°†è‡ªåŠ¨ç”Ÿæˆä¸€å¼ è¡¨        æ¥ç®¡ç†å¤šå¯¹å¤šçš„å…³è”å…³ç³»ã€‚ä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»ºç¬¬ä¸‰å¼ è¡¨æ¥ç®¡ç†å¤šå¯¹å¤šå…³ç³»ï¼Œæ­¤æ—¶å°±éœ€è¦é€šè¿‡<code>through</code>æ¥æŒ‡å®šç¬¬ä¸‰å¼ è¡¨çš„è¡¨åã€‚</p></li><li><p><code>through_fields</code>:è®¾ç½®å…³è”çš„å­—æ®µã€‚</p></li><li><p><code>db_table</code>:é»˜è®¤åˆ›å»ºç¬¬ä¸‰å¼ è¡¨æ—¶ï¼Œæ•°æ®åº“ä¸­è¡¨çš„åç§°ã€‚</p></li></ol><h5 id="å¤šå¯¹å¤šçš„ä¸‰ç§åˆ›å»ºæ–¹å¼"><a href="#å¤šå¯¹å¤šçš„ä¸‰ç§åˆ›å»ºæ–¹å¼" class="headerlink" title="å¤šå¯¹å¤šçš„ä¸‰ç§åˆ›å»ºæ–¹å¼"></a>å¤šå¯¹å¤šçš„ä¸‰ç§åˆ›å»ºæ–¹å¼</h5><ol><li><p>è‡ªå·±å»ºç«‹ç¬¬ä¸‰å¼ å…³ç³»è¡¨ï¼Œå¤–é”®åˆ†åˆ«å…³è”ä¸¤ä¸ªè¡¨</p><ul><li><p>ä¼˜ç‚¹:å¯ä»¥æ‰©å……ç¬¬ä¸‰å¼ å…³ç³»æ ‡çš„å­—æ®µ</p></li><li><p>ç¼ºç‚¹:è‡ªå·±åšè¿è¡¨æŸ¥è¯¢</p></li><li><p>å»ºè¡¨ä¾‹å­</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Book</span>(<span class="hljs-params">models.Model</span>):</span><br>    title = models.CharField(max_length=<span class="hljs-number">12</span>)<br><br> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Author</span>(<span class="hljs-params">models.Model</span>):</span><br>     name = models.CharField(max_length=<span class="hljs-number">12</span>)<br><br> <span class="hljs-comment"># 1. å¤šå¯¹å¤šç¬¬ä¸€ç§åˆ›å»ºæ–¹å¼ï¼šè‡ªå·±åˆ›å»ºç¬¬ä¸‰å¼ å…³ç³»è¡¨</span><br> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Author2Book</span>(<span class="hljs-params">models.Model</span>):</span><br>     <span class="hljs-built_in">id</span> = models.AutoField(primary_key=<span class="hljs-literal">True</span>)<br>     author_id = models.ForeignKey(to=<span class="hljs-string">&#x27;Author&#x27;</span>)<br>     book_id = models.ForeignKey(to=<span class="hljs-string">&#x27;Book&#x27;</span>)<br>     price = models.IntegerField()  <span class="hljs-comment"># å¯ä»¥è‡ªå·±æ‰©å……éœ€è¦çš„å­—æ®µ</span><br></code></pre></div></td></tr></table></figure></li></ul></li><li><p>é€šè¿‡ORMå†…ç½®çš„ManyToManyFieldï¼Œè‡ªåŠ¨åˆ›å»ºç¬¬ä¸‰å¼ å…³ç³»è¡¨</p><ul><li><p>ä¼˜ç‚¹:æä¾›äº†å¾ˆå¤šè¿è¡¨æ“ä½œçš„å¿«æ·æ–¹æ³•,<code>all()</code>, <code>add()</code>, <code>set()</code>, <code>clear()</code>, <code>remove()</code></p></li><li><p>ç¼ºç‚¹:æ— æ³•æ‰©å±•ç¬¬ä¸‰å¼ å…³ç³»è¡¨</p></li><li><p>å»ºè¡¨ä¾‹å­</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Book</span>(<span class="hljs-params">models.Model</span>):</span><br>    title = models.CharField(max_length=<span class="hljs-number">12</span>)<br><br> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Author</span>(<span class="hljs-params">models.Model</span>):</span><br>     name = models.CharField(max_length=<span class="hljs-number">12</span>)<br>     books = models.ManyToManyField(to=<span class="hljs-string">&#x27;Book&#x27;</span>)  <span class="hljs-comment"># å­—æ®µå°±è¿™äº›ï¼Œæ— æ³•æ‰©å……å…¶ä»–å­—æ®µ</span><br><br></code></pre></div></td></tr></table></figure></li></ul></li><li><p>è‡ªå·±åˆ›å»ºç¬¬ä¸‰å¼ å…³ç³»è¡¨ï¼Œé€šè¿‡ManyToManyFieldå…³è”</p><ul><li><p>ä¼˜ç‚¹ï¼š</p><ul><li>æ—¢èƒ½å¤Ÿä½¿ç”¨å¤šå¯¹å¤šæŸ¥è¯¢çš„å¿«æ·æ–¹æ³•all()(åªèƒ½ç”¨allï¼Œä¸èƒ½ä½¿ç”¨add,setç­‰)</li><li>è¿˜èƒ½å¤Ÿè‡ªå·±æ‰©å±•ç¬¬ä¸‰å¼ å…³ç³»è¡¨çš„å­—æ®µ</li></ul></li><li><p>å»ºè¡¨ä¾‹å­</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Book</span>(<span class="hljs-params">models.Model</span>):</span><br>    title = models.CharField(max_length=<span class="hljs-number">12</span>)<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Author</span>(<span class="hljs-params">models.Model</span>):</span><br>     name = models.CharField(max_length=<span class="hljs-number">12</span>)<br>     <span class="hljs-comment"># å‘Šè¯‰ManyToManyFieldé€šè¿‡(through)Author2Bookè¿™å¼ è¡¨è¿›è¡Œå…³è”ï¼Œä¸ä½¿ç”¨ORMè‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸‰å¼ è¡¨ï¼Œè€Œæ˜¯ä½¿ç”¨æˆ‘è‡ªå·±åˆ›å»ºçš„è¡¨</span><br>     <span class="hljs-comment"># through_fieldså‘Šè¯‰ORMé€šè¿‡å“ªå‡ ä¸ªå­—æ®µè¿›è¡Œå¤šå¯¹å¤šå…³è”</span><br>     books = models.ManyToManyField(to=<span class="hljs-string">&#x27;Book&#x27;</span>, through=<span class="hljs-string">&#x27;Author2Book&#x27;</span>, through_fields=(<span class="hljs-string">&#x27;author&#x27;</span>, <span class="hljs-string">&#x27;book&#x27;</span>))<br><br> <span class="hljs-comment"># 1. å¤šå¯¹å¤šç¬¬ä¸‰ç§åˆ›å»ºæ–¹å¼ï¼šè‡ªå·±åˆ›å»ºç¬¬ä¸‰å¼ å…³ç³»è¡¨ï¼Œæ­¤æ—¶å¤–é”®ä¸éœ€è¦æ·»åŠ _idäº†ï¼Œå› ä¸ºORMä¼šé»˜è®¤å¸®ä½ åœ¨å¤–é”®åé¢åŠ _id</span><br> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Author2Book</span>(<span class="hljs-params">models.Model</span>):</span><br>     <span class="hljs-built_in">id</span> = models.AutoField(primary_key=<span class="hljs-literal">True</span>)<br>     author = models.ForeignKey(to=<span class="hljs-string">&#x27;Author&#x27;</span>)<br>     book = models.ForeignKey(to=<span class="hljs-string">&#x27;Book&#x27;</span>)<br>     price = models.IntegerField(null=<span class="hljs-literal">True</span>)<br> <br>     <span class="hljs-comment"># author_idå’Œbook_idè¦è”åˆå”¯ä¸€</span><br>     <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>         unique_together = ((<span class="hljs-string">&#x27;author&#x27;</span>, <span class="hljs-string">&#x27;book&#x27;</span>),)<br></code></pre></div></td></tr></table></figure><ul><li><p>æ“ä½œä¾‹å­</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># å¤šå¯¹å¤šçš„ç¬¬ä¸‰å¼ æ–¹å¼ä¹Ÿæ”¯æŒallæŸ¥è¯¢</span><br>author_obj = Author.objects.first()<br><span class="hljs-comment"># ç¬¬ä¸€ä¸ªä½œè€…çš„æ‰€æœ‰ä¹¦ç±</span><br>ret = author_obj.books.<span class="hljs-built_in">all</span>()<br> <br><span class="hljs-comment"># ç»™ç¬¬ä¸€ä¸ªä½œè€…æ·»åŠ ä¸€æœ¬ä¹¦</span><br><span class="hljs-comment"># author_obj.books.add(4) # æŠ¥é”™</span><br>Author2Book.objects.create(author_id=<span class="hljs-number">1</span>, book_id=<span class="hljs-number">4</span>)<br></code></pre></div></td></tr></table></figure></li></ul></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
            <tag> ORMæ¨¡å‹ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XSSæ”»å‡»å’ŒCSRFæ”»å‡»</title>
      <link href="2020/05/24/web-xss-gong-ji-he-csrf-gong-ji/"/>
      <url>2020/05/24/web-xss-gong-ji-he-csrf-gong-ji/</url>
      
        <content type="html"><![CDATA[<h2 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h2><h3 id="1-CSRF-çš„åŸºæœ¬æ¦‚å¿µã€ç¼©å†™ã€å…¨ç§°"><a href="#1-CSRF-çš„åŸºæœ¬æ¦‚å¿µã€ç¼©å†™ã€å…¨ç§°" class="headerlink" title="1. CSRF çš„åŸºæœ¬æ¦‚å¿µã€ç¼©å†™ã€å…¨ç§°"></a>1. CSRF çš„åŸºæœ¬æ¦‚å¿µã€ç¼©å†™ã€å…¨ç§°</h3><p>CSRFï¼ˆCross-site request forgeryï¼‰ï¼šè·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚</p><h3 id="2-CSRF-çš„æ”»å‡»åŸç†"><a href="#2-CSRF-çš„æ”»å‡»åŸç†" class="headerlink" title="2. CSRF çš„æ”»å‡»åŸç†"></a>2. CSRF çš„æ”»å‡»åŸç†</h3><p><img src="https://img2018.cnblogs.com/blog/941968/201904/941968-20190422203527996-279231194.jpg" alt=""></p><p>ç”¨æˆ·æ˜¯ç½‘ç«™ A çš„æ³¨å†Œç”¨æˆ·ï¼Œä¸”ç™»å½•è¿›å»ï¼Œäºæ˜¯ç½‘ç«™ A å°±ç»™ç”¨æˆ·ä¸‹å‘ cookieã€‚</p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œè¦å®Œæˆä¸€æ¬¡ CSRF æ”»å‡»ï¼Œå—å®³è€…å¿…é¡»æ»¡è¶³ä¸¤ä¸ªå¿…è¦çš„æ¡ä»¶ï¼š</p><p>ï¼ˆ1ï¼‰ç™»å½•å—ä¿¡ä»»ç½‘ç«™ Aï¼Œå¹¶åœ¨æœ¬åœ°ç”Ÿæˆ Cookieã€‚ï¼ˆå¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ç½‘ç«™ Aï¼Œé‚£ä¹ˆç½‘ç«™ B åœ¨è¯±å¯¼çš„æ—¶å€™ï¼Œè¯·æ±‚ç½‘ç«™ A çš„ api æ¥å£æ—¶ï¼Œä¼šæç¤ºä½ ç™»å½•ï¼‰</p><p>ï¼ˆ2ï¼‰åœ¨ä¸ç™»å‡º A çš„æƒ…å†µä¸‹ï¼Œè®¿é—®å±é™©ç½‘ç«™ Bï¼ˆå…¶å®æ˜¯åˆ©ç”¨äº†ç½‘ç«™ A çš„æ¼æ´ï¼‰ã€‚</p><p>æˆ‘ä»¬åœ¨è®² CSRF æ—¶ï¼Œä¸€å®šè¦æŠŠä¸Šé¢çš„ä¸¤ç‚¹è¯´æ¸…æ¥šã€‚</p><p>æ¸©é¦¨æç¤ºä¸€ä¸‹ï¼Œcookie ä¿è¯äº†ç”¨æˆ·å¯ä»¥å¤„äºç™»å½•çŠ¶æ€ï¼Œä½†ç½‘ç«™ B å…¶å®æ‹¿ä¸åˆ° cookieã€‚</p><h3 id="3-CSRFçš„é˜²èŒƒæªæ–½"><a href="#3-CSRFçš„é˜²èŒƒæªæ–½" class="headerlink" title="3. CSRFçš„é˜²èŒƒæªæ–½"></a>3. CSRFçš„é˜²èŒƒæªæ–½</h3><h4 id="1ã€åˆ¤æ–­è¯·æ±‚å¤´ä¸­çš„-Referer"><a href="#1ã€åˆ¤æ–­è¯·æ±‚å¤´ä¸­çš„-Referer" class="headerlink" title="1ã€åˆ¤æ–­è¯·æ±‚å¤´ä¸­çš„ Referer"></a>1ã€åˆ¤æ–­è¯·æ±‚å¤´ä¸­çš„ Referer</h4><p>è¿™ä¸ªå­—æ®µè®°å½•çš„æ˜¯è¯·æ±‚çš„æ¥æºã€‚æ¯”å¦‚å‰ç«¯<em>Vue</em>é¡µé¢ <code>http://localhost:8080/#/showbooks</code>ä¸Šè°ƒç”¨äº†æœåŠ¡ç«¯<em>Django</em>çš„æ¥å£ <code>http://127.0.0.1:8000/books/?page=2&amp;page_size=10</code>ï¼Œ é‚£ä¹ˆåœ¨æœåŠ¡ç«¯ï¼Œå°±å¯ä»¥é€šè¿‡ <code>Referer</code> åˆ¤æ–­è¿™ä¸ªè¯·æ±‚æ˜¯æ¥è‡ªå“ªé‡Œã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™äº›è·Ÿä¸šåŠ¡é€»è¾‘æ— å…³çš„æ“ä½œå¾€å¾€ä¼šæ”¾åœ¨æ‹¦æˆªå™¨ä¸­ï¼ˆæˆ–è€…è¯´è¿‡æ»¤å™¨ï¼Œä¸åŒæŠ€æœ¯ä½¿ç”¨çš„åè¯å¯èƒ½ä¸åŒï¼‰ã€‚æ„æ€æ˜¯è¯´ï¼Œåœ¨è¿›å…¥åˆ°ä¸šåŠ¡é€»è¾‘ä¹‹å‰ï¼Œå°±åº”è¯¥è¦æ ¹æ® Referer çš„å€¼æ¥å†³å®šè¿™ä¸ªè¯·æ±‚èƒ½ä¸èƒ½å¤„ç†ã€‚</p><p>ç”¨Flask çš„è¯å¯ä»¥ä½¿ç”¨è£…é¥°å™¨ï¼›åœ¨Django ä¸­æ˜¯å«ä¸­é—´ä»¶ã€‚æ¯ç§æŠ€æœ¯å®ƒèµ°çš„æµç¨‹å…¶å®éƒ½ä¸€æ ·ã€‚</p><p>è€Œåœ¨ Django å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç è·å–å¯¹åº”ä¿¡æ¯</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">request.META[<span class="hljs-string">&#x27;HTTP_REFERER&#x27;</span>]  <span class="hljs-comment"># æ¥è·¯</span><br><br>request.META.get(<span class="hljs-string">&quot;HTTP_USER_AGENT&quot;</span>)  <span class="hljs-comment"># è¯·æ±‚å¤´</span><br></code></pre></div></td></tr></table></figure><p>åœ¨Flaskä¸­ï¼Œåˆ™è·å–æ–¹å¼ä¸åŒã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">request.referrer  <span class="hljs-comment"># æ¥è·¯</span><br><br>request.headers.get(<span class="hljs-string">&#x27;User-Agent&#x27;</span>)  <span class="hljs-comment"># è¯·æ±‚å¤´</span><br></code></pre></div></td></tr></table></figure><p>ä½†è¦æ³¨æ„çš„æ˜¯ï¼ŒReferer æ˜¯æµè§ˆå™¨è®¾ç½®çš„ï¼Œåœ¨æµè§ˆå™¨å…¼å®¹æ€§å¤§ä¸ç›¸åŒçš„æ—¶ä»£ä¸­ï¼Œå¦‚æœå­˜åœ¨æŸç§æµè§ˆå™¨å…è®¸ç”¨æˆ·ä¿®æ”¹è¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆ CSRF æ¼æ´ä¾ç„¶å­˜åœ¨ã€‚</p><h4 id="2ã€åœ¨è¯·æ±‚å‚æ•°ä¸­åŠ å…¥-csrf-token"><a href="#2ã€åœ¨è¯·æ±‚å‚æ•°ä¸­åŠ å…¥-csrf-token" class="headerlink" title="2ã€åœ¨è¯·æ±‚å‚æ•°ä¸­åŠ å…¥ csrf token"></a>2ã€åœ¨è¯·æ±‚å‚æ•°ä¸­åŠ å…¥ csrf token</h4><p>è®¨è®º GET å’Œ POST ä¸¤ç§è¯·æ±‚ï¼Œå¯¹äº GETï¼Œå…¶å®ä¹Ÿæ²¡ä»€ä¹ˆéœ€è¦é˜²èŒƒçš„ã€‚ä¸ºä»€ä¹ˆï¼Ÿ</p><p>å› ä¸º GET åœ¨ â€œçº¦å®šâ€ å½“ä¸­ï¼Œè¢«è®¤ä¸ºæ˜¯æŸ¥è¯¢æ“ä½œï¼ŒæŸ¥è¯¢çš„æ„æ€å°±æ˜¯ï¼Œä½ æŸ¥ä¸€æ¬¡ï¼ŒæŸ¥ä¸¤æ¬¡ï¼Œæ— æ•°æ¬¡ï¼Œç»“æœéƒ½ä¸ä¼šæ”¹å˜ï¼ˆç”¨æˆ·å¾—åˆ°çš„æ•°æ®å¯èƒ½ä¼šå˜ï¼‰ï¼Œè¿™ä¸ä¼šå¯¹æ•°æ®åº“é€ æˆä»»ä½•å½±å“ï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ å…¶ä»–é¢å¤–çš„å‚æ•°ã€‚</p><blockquote><p>æ‰€ä»¥è¿™é‡Œè¦æé†’å„ä½çš„æ˜¯ï¼Œå°½é‡éµä»è¿™äº›çº¦å®šï¼Œä¸è¦åœ¨ GET è¯·æ±‚ä¸­å‡ºç° /delete, /update, /edit è¿™ç§å•è¯ã€‚æŠŠ â€œå†™â€ æ“ä½œæ”¾åˆ° POST ä¸­ã€‚</p></blockquote><p>å¯¹äº POSTï¼ŒæœåŠ¡ç«¯åœ¨åˆ›å»ºè¡¨å•çš„æ—¶å€™å¯ä»¥åŠ ä¸€ä¸ªéšè—å­—æ®µï¼Œä¹Ÿæ˜¯é€šè¿‡æŸç§åŠ å¯†ç®—æ³•å¾—åˆ°çš„ã€‚åœ¨å¤„ç†è¯·æ±‚æ—¶ï¼ŒéªŒè¯è¿™ä¸ªå­—æ®µæ˜¯å¦åˆæ³•ï¼Œå¦‚æœåˆæ³•å°±ç»§ç»­å¤„ç†ï¼Œå¦åˆ™å°±è®¤ä¸ºæ˜¯æ¶æ„æ“ä½œã€‚</p><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/delete&quot;</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- å…¶ä»–å­—æ®µ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></div></td></tr></table></figure><p>è¿™ä¸ª html ç‰‡æ®µç”±æœåŠ¡ç«¯ç”Ÿæˆã€‚</p><p>è¿™çš„ç¡®æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é˜²èŒƒæªæ–½ï¼Œå†å¢åŠ ä¸€äº›å¤„ç†çš„è¯ï¼Œè¿˜èƒ½é˜²æ­¢è¡¨å•é‡å¤æäº¤ã€‚</p><p>å¯æ˜¯å¯¹äºä¸€äº›æ–°å…´ç½‘ç«™ï¼Œå¾ˆå¤šéƒ½é‡‡ç”¨äº† â€œå‰åç«¯åˆ†ç¦»å¼€å‘â€ çš„è®¾è®¡ï¼Œæˆ–è€…é€€ä¸€æ­¥ï¼Œæ— è®ºæ˜¯ä¸æ˜¯å‰åç«¯åˆ†ç¦»ï¼Œå®ƒçš„ HTML å¯èƒ½æ˜¯ç”± JavaScript æ‹¼æ¥è€Œæˆï¼Œå¹¶ä¸”è¡¨å•ä¹Ÿéƒ½æ˜¯å¼‚æ­¥æäº¤ã€‚æ‰€ä»¥è¿™ä¸ªåŠæ³•æœ‰å®ƒçš„åº”ç”¨åœºæ™¯ï¼Œä¹Ÿæœ‰å±€é™æ€§ã€‚</p><h4 id="3ã€æ–°å¢-HTTP-Header"><a href="#3ã€æ–°å¢-HTTP-Header" class="headerlink" title="3ã€æ–°å¢ HTTP Header"></a>3ã€æ–°å¢ HTTP Header</h4><p>æ–¹æ³•äºŒå’Œæ–¹æ³•ä¸€æœ‰ç‚¹åƒï¼Œæœ¬è´¨ä¸Šæ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œåªæ˜¯ä½¿ç”¨æ–¹å¼ä¸Šæœ‰åŒºåˆ«ã€‚</p><p>æŠŠ token éšè—åœ¨ http çš„ head å¤´ä¸­ã€‚</p><p>æœåŠ¡ç«¯å¯ä»¥åƒè·å– Referer ä¸€æ ·è·å–è¿™ä¸ªè¯·æ±‚å¤´ï¼Œä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ª token æ˜¯ç”±æœåŠ¡ç«¯ç”Ÿæˆçš„ï¼Œæ‰€ä»¥æ”»å‡»è€…ä»–æ²¡åŠæ³•çŒœã€‚</p><p>å¦ä¸€ç¯‡æ–‡ç« è®²è§£çš„â€”â€”<strong><code>JWT</code></strong>â€”â€”å°±æ˜¯åŸºäºè¿™ä¸ªæ–¹å¼ã€‚æŠ›å¼€ JWT ä¸è°ˆï¼Œå®ƒçš„å·¥ä½œåŸç†æ˜¯è¿™æ ·çš„:</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/10/image-20201010164929032.png" alt="image-20201010164929032"></p><p>è§£é‡Šä¸€ä¸‹è¿™å››ä¸ªè¯·æ±‚ï¼Œç±»å‹éƒ½æ˜¯ POST ã€‚</p><ol><li><p>é€šè¿‡ <code>/login</code> æ¥å£ï¼Œç”¨æˆ·ç™»å½•ï¼ŒæœåŠ¡ç«¯ä¼ å›ä¸€ä¸ª <code>access_token</code>ï¼Œå‰ç«¯æŠŠå®ƒä¿å­˜èµ·æ¥ï¼Œå¯ä»¥æ˜¯å†…å­˜å½“ä¸­ï¼Œå¦‚æœä½ å¸Œæœ›ç”¨æ¥æ¨¡æ‹Ÿ <code>session</code> çš„è¯ã€‚ä¹Ÿå¯ä»¥ä¿å­˜åˆ° <code>localStorage</code> ä¸­ï¼Œè¿™æ ·å¯ä»¥å®ç°è‡ªåŠ¨ç™»å½•ã€‚</p></li><li><p>è°ƒç”¨ <code>/delete</code> æ¥å£ï¼Œå‚æ•°æ˜¯æŸæ ·å•†å“çš„ idã€‚ä»”ç»†çœ‹ï¼Œåœ¨è¿™ä¸ªè¯·æ±‚ä¸­ï¼Œå¤šäº†ä¸€ä¸ªåä¸º <code>Authoriaztion</code> çš„ <code>header</code>ï¼Œå®ƒçš„å€¼æ˜¯ä¹‹å‰ä»æœåŠ¡ç«¯ä¼ å›æ¥çš„ <code>access_token</code>ï¼Œåœ¨å‰é¢åŠ äº†ä¸€ä¸ª â€œ<code>Bearer</code>â€ï¼ˆè¿™æ˜¯å’ŒæœåŠ¡ç«¯çš„çº¦å®šï¼Œçº¦å®šå°±æ˜¯è¯´ï¼Œè¯´å¥½äº†åŠ å°±ä¸€èµ·åŠ ï¼Œä¸åŠ å°±éƒ½ä¸åŠ â€¦â€¦ï¼‰</p></li><li><p>è°ƒç”¨ <code>/logout</code> æ¥å£ï¼ŒåŒæ ·æŠŠ <code>access_token</code> åŠ åœ¨ <code>header</code> ä¸­ä¼ è¿‡å»ã€‚æˆåŠŸä¹‹åï¼ŒæœåŠ¡ç«¯å’Œå‰ç«¯éƒ½ä¼šæŠŠè¿™ä¸ª <code>token</code> ç½®ä¸ºå¤±æ•ˆï¼Œæˆ–ç›´æ¥åˆ é™¤ã€‚</p></li><li><p>å†è°ƒç”¨ <code>/delete</code> æ¥å£ï¼Œç”±äºæ­¤æ—¶å·²ç»æ²¡æœ‰ <code>access_token</code> äº†ï¼Œæ‰€ä»¥æœåŠ¡ç«¯åˆ¤æ–­è¯¥è¯·æ±‚æ²¡æƒé™ï¼Œè¿”å› 401 ã€‚</p></li></ol><p>ä»å¤´è‡³å°¾ï¼Œæ•´ä¸ªè¿‡ç¨‹æ²¡æœ‰æ¶‰åŠ cookieï¼Œæ‰€ä»¥ CSRF æ˜¯ä¸å¯èƒ½å‘ç”Ÿçš„ï¼</p><h2 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h2><h3 id="1-XSS-çš„åŸºæœ¬æ¦‚å¿µ"><a href="#1-XSS-çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1. XSS çš„åŸºæœ¬æ¦‚å¿µ"></a>1. XSS çš„åŸºæœ¬æ¦‚å¿µ</h3><p>XSSï¼ˆCross Site Scriptingï¼‰ï¼šè·¨åŸŸè„šæœ¬æ”»å‡»ã€‚</p><h3 id="2-XSS-çš„æ”»å‡»åŸç†"><a href="#2-XSS-çš„æ”»å‡»åŸç†" class="headerlink" title="2. XSS çš„æ”»å‡»åŸç†"></a>2. XSS çš„æ”»å‡»åŸç†</h3><p>XSS æ”»å‡»çš„æ ¸å¿ƒåŸç†æ˜¯ï¼šä¸éœ€è¦ä½ åšä»»ä½•çš„ç™»å½•è®¤è¯ï¼Œå®ƒä¼šé€šè¿‡åˆæ³•çš„æ“ä½œï¼ˆæ¯”å¦‚åœ¨ url ä¸­è¾“å…¥ã€åœ¨è¯„è®ºæ¡†ä¸­è¾“å…¥ï¼‰ï¼Œå‘ä½ çš„é¡µé¢æ³¨å…¥è„šæœ¬ï¼ˆå¯èƒ½æ˜¯ jsã€hmtl ä»£ç å—ç­‰ï¼‰ã€‚</p><p>æœ€åå¯¼è‡´çš„ç»“æœå¯èƒ½æ˜¯ï¼š</p><p>ç›—ç”¨ Cookie ç ´åé¡µé¢çš„æ­£å¸¸ç»“æ„ï¼Œæ’å…¥å¹¿å‘Šç­‰æ¶æ„å†…å®¹ D-doss æ”»å‡»</p><h3 id="3-XSS-çš„æ”»å‡»æ–¹å¼"><a href="#3-XSS-çš„æ”»å‡»æ–¹å¼" class="headerlink" title="3. XSS çš„æ”»å‡»æ–¹å¼"></a>3. XSS çš„æ”»å‡»æ–¹å¼</h3><h4 id="1ã€åå°„å‹"><a href="#1ã€åå°„å‹" class="headerlink" title="1ã€åå°„å‹"></a>1ã€åå°„å‹</h4><p>å‘å‡ºè¯·æ±‚æ—¶ï¼ŒXSS ä»£ç å‡ºç°åœ¨ url ä¸­ï¼Œä½œä¸ºè¾“å…¥æäº¤åˆ°æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯è§£æåå“åº”ï¼ŒXSS ä»£ç éšå“åº”å†…å®¹ä¸€èµ·ä¼ å›ç»™æµè§ˆå™¨ï¼Œæœ€åæµè§ˆå™¨è§£ææ‰§è¡Œ XSS ä»£ç ã€‚è¿™ä¸ªè¿‡ç¨‹åƒä¸€æ¬¡åå°„ï¼Œæ‰€ä»¥å«åå°„å‹ XSSã€‚</p><h4 id="2ã€å­˜å‚¨å‹å­˜"><a href="#2ã€å­˜å‚¨å‹å­˜" class="headerlink" title="2ã€å­˜å‚¨å‹å­˜"></a>2ã€å­˜å‚¨å‹å­˜</h4><p>å‚¨å‹ XSS å’Œåå°„å‹ XSS çš„å·®åˆ«åœ¨äºï¼Œæäº¤çš„ä»£ç ä¼šå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼ˆæ•°æ®åº“ã€å†…å­˜ã€æ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰ï¼Œä¸‹æ¬¡è¯·æ±‚æ—¶ç›®æ ‡é¡µé¢æ—¶ä¸ç”¨å†æäº¤ XSS ä»£ç ã€‚</p><h3 id="4-XSS-çš„é˜²èŒƒæªæ–½"><a href="#4-XSS-çš„é˜²èŒƒæªæ–½" class="headerlink" title="4. XSS çš„é˜²èŒƒæªæ–½"></a>4. XSS çš„é˜²èŒƒæªæ–½</h3><p>XSS çš„é˜²èŒƒæªæ–½ä¸»è¦æœ‰ä¸‰ä¸ªï¼š</p><h4 id="1ã€ç¼–ç "><a href="#1ã€ç¼–ç " class="headerlink" title="1ã€ç¼–ç "></a>1ã€ç¼–ç </h4><p>å¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡Œ<code>HTML Entity</code> ç¼–ç ã€‚</p><p>æ¯”å¦‚è¯´è¿™æ®µä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">&lt;script&gt;alert(<span class="hljs-number">1</span>)&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><p>è‹¥ä¸è¿›è¡Œä»»ä½•å¤„ç†ï¼Œåˆ™æµè§ˆå™¨ä¼šæ‰§è¡Œ <code>alert</code> çš„ js æ“ä½œï¼Œå®ç° <code>XSS</code> æ³¨å…¥ã€‚</p><p>è¿›è¡Œç¼–ç å¤„ç†ä¹‹åï¼Œåœ¨æµè§ˆå™¨ä¸­çš„æ˜¾ç¤ºç»“æœå°±æ˜¯ <code>&lt;script&gt;alert(1)&lt;/script&gt;</code>ï¼Œå®ç°äº†å°† <code>$var</code> ä½œä¸ºçº¯æ–‡æœ¬è¿›è¡Œè¾“å‡ºï¼Œä¸”ä¸å¼•èµ· <code>JavaScript</code> çš„æ‰§è¡Œã€‚</p><h4 id="2ã€è¿‡æ»¤"><a href="#2ã€è¿‡æ»¤" class="headerlink" title="2ã€è¿‡æ»¤"></a>2ã€è¿‡æ»¤</h4><p>ç§»é™¤ç”¨æˆ·è¾“å…¥çš„å’Œäº‹ä»¶ç›¸å…³çš„å±æ€§ã€‚å¦‚ <code>onerror</code> å¯ä»¥è‡ªåŠ¨è§¦å‘æ”»å‡»ï¼Œè¿˜æœ‰ <code>onclick</code> ç­‰ã€‚ï¼ˆæ€»è€Œè¨€æ˜¯ï¼Œè¿‡æ»¤æ‰ä¸€äº›ä¸å®‰å…¨çš„å†…å®¹ï¼‰ç§»é™¤ç”¨æˆ·è¾“å…¥çš„ <code>Style</code> èŠ‚ç‚¹ã€<code>Script</code> èŠ‚ç‚¹ã€<code>Iframe</code> èŠ‚ç‚¹ã€‚ï¼ˆå°¤å…¶æ˜¯ <code>Script</code> èŠ‚ç‚¹ï¼Œå®ƒå¯æ˜¯æ”¯æŒè·¨åŸŸçš„ï¼Œä¸€å®šè¦ç§»é™¤ï¼‰ã€‚</p><h4 id="3ã€æ ¡æ­£"><a href="#3ã€æ ¡æ­£" class="headerlink" title="3ã€æ ¡æ­£"></a>3ã€æ ¡æ­£</h4><p>é¿å…ç›´æ¥å¯¹ <code>HTML Entity</code> è¿›è¡Œè§£ç ã€‚ä½¿ç”¨ <code>DOM Parse</code> è½¬æ¢ï¼Œæ ¡æ­£ä¸é…å¯¹çš„ <code>DOM</code> æ ‡ç­¾ã€‚å¤‡æ³¨ï¼šæˆ‘ä»¬åº”è¯¥å»äº†è§£ä¸€ä¸‹<code>DOM Parse</code>è¿™ä¸ªæ¦‚å¿µï¼Œå®ƒçš„ä½œç”¨æ˜¯æŠŠæ–‡æœ¬è§£ææˆ <code>DOM</code> ç»“æ„ã€‚</p><p>æ¯”è¾ƒå¸¸ç”¨çš„åšæ³•æ˜¯ï¼Œé€šè¿‡ç¬¬ä¸€æ­¥çš„ç¼–ç è½¬æˆæ–‡æœ¬ï¼Œç„¶åç¬¬ä¸‰æ­¥è½¬æˆ DOM å¯¹è±¡ï¼Œç„¶åç»è¿‡ç¬¬äºŒæ­¥çš„è¿‡æ»¤ã€‚</p><h2 id="CSRF-å’Œ-XSS-çš„åŒºåˆ«"><a href="#CSRF-å’Œ-XSS-çš„åŒºåˆ«" class="headerlink" title="CSRF å’Œ XSS çš„åŒºåˆ«"></a>CSRF å’Œ XSS çš„åŒºåˆ«</h2><h3 id="åŒºåˆ«ä¸€ï¼š"><a href="#åŒºåˆ«ä¸€ï¼š" class="headerlink" title="åŒºåˆ«ä¸€ï¼š"></a>åŒºåˆ«ä¸€ï¼š</h3><ul><li>CSRFï¼šéœ€è¦ç”¨æˆ·å…ˆç™»å½•ç½‘ç«™ Aï¼Œè·å– cookieã€‚</li><li>XSSï¼šä¸éœ€è¦ç™»å½•ã€‚</li></ul><h3 id="åŒºåˆ«äºŒï¼šï¼ˆåŸç†çš„åŒºåˆ«ï¼‰"><a href="#åŒºåˆ«äºŒï¼šï¼ˆåŸç†çš„åŒºåˆ«ï¼‰" class="headerlink" title="åŒºåˆ«äºŒï¼šï¼ˆåŸç†çš„åŒºåˆ«ï¼‰"></a>åŒºåˆ«äºŒï¼šï¼ˆåŸç†çš„åŒºåˆ«ï¼‰</h3><ul><li><p>CSRFï¼šæ˜¯åˆ©ç”¨ç½‘ç«™ A æœ¬èº«çš„æ¼æ´ï¼Œå»è¯·æ±‚ç½‘ç«™ A çš„ apiã€‚</p></li><li><p>XSSï¼šæ˜¯å‘ç½‘ç«™ A æ³¨å…¥ JS ä»£ç ï¼Œç„¶åæ‰§è¡Œ JS é‡Œçš„ä»£ç ï¼Œç¯¡æ”¹ç½‘ç«™ A çš„å†…å®¹ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPçŠ¶æ€ç </title>
      <link href="2020/05/24/web-http-xie-yi-zhi-http-zhuang-tai-ma-xiang-jie/"/>
      <url>2020/05/24/web-http-xie-yi-zhi-http-zhuang-tai-ma-xiang-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="HTTP-åè®®ä¹‹-http-çŠ¶æ€ç è¯¦è§£"><a href="#HTTP-åè®®ä¹‹-http-çŠ¶æ€ç è¯¦è§£" class="headerlink" title="HTTP åè®®ä¹‹ http çŠ¶æ€ç è¯¦è§£"></a>HTTP åè®®ä¹‹ http çŠ¶æ€ç è¯¦è§£</h2><p>HTTPçŠ¶æ€ç ï¼ˆHTTP Status Codeï¼‰æ˜¯ç”¨ä»¥è¡¨ç¤ºç½‘é¡µæœåŠ¡å™¨HTTPå“åº”çŠ¶æ€çš„3ä½æ•°å­—ä»£ç ã€‚</p><p>å®ƒç”± RFC 2616 è§„èŒƒå®šä¹‰çš„ï¼Œå¹¶å¾—åˆ°RFC 2518ã€RFC 2817ã€RFC 2295ã€RFC 2774ã€RFC 4918ç­‰è§„èŒƒæ‰©å±•ã€‚</p><p>HTTP çŠ¶æ€ç è¢«åˆ†ä¸ºäº”å¤§ç±»ï¼Œ ç›®å‰æˆ‘ä»¬ä½¿ç”¨çš„ HTTP åè®®ç‰ˆæœ¬æ˜¯ 1.1ï¼Œ æ”¯æŒä»¥ä¸‹çš„çŠ¶æ€ç ã€‚éšç€åè®®çš„å‘å±•ï¼ŒHTTP è§„èŒƒä¸­ä¼šå®šä¹‰æ›´å¤šçš„çŠ¶æ€ç ã€‚ </p><h2 id="1xxï¼ˆä¸´æ—¶å“åº”ï¼‰"><a href="#1xxï¼ˆä¸´æ—¶å“åº”ï¼‰" class="headerlink" title="1xxï¼ˆä¸´æ—¶å“åº”ï¼‰"></a>1xxï¼ˆä¸´æ—¶å“åº”ï¼‰</h2><blockquote><p>  è¡¨ç¤ºä¸´æ—¶å“åº”å¹¶éœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œçš„çŠ¶æ€ä»£ç ã€‚</p></blockquote><table><thead><tr><th align="center">ä»£ç </th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">100</td><td align="center">ï¼ˆç»§ç»­ï¼‰ è¯·æ±‚è€…åº”å½“ç»§ç»­æå‡ºè¯·æ±‚ã€‚ æœåŠ¡å™¨è¿”å›æ­¤ä»£ç è¡¨ç¤ºå·²æ”¶åˆ°è¯·æ±‚çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œæ­£åœ¨ç­‰å¾…å…¶ä½™éƒ¨åˆ†ã€‚</td></tr><tr><td align="center">101</td><td align="center">ï¼ˆåˆ‡æ¢åè®®ï¼‰ è¯·æ±‚è€…å·²è¦æ±‚æœåŠ¡å™¨åˆ‡æ¢åè®®ï¼ŒæœåŠ¡å™¨å·²ç¡®è®¤å¹¶å‡†å¤‡åˆ‡æ¢ã€‚</td></tr></tbody></table><h2 id="2xx-ï¼ˆæˆåŠŸï¼‰"><a href="#2xx-ï¼ˆæˆåŠŸï¼‰" class="headerlink" title="2xx ï¼ˆæˆåŠŸï¼‰"></a>2xx ï¼ˆæˆåŠŸï¼‰</h2><blockquote><p>  è¡¨ç¤ºæˆåŠŸå¤„ç†äº†è¯·æ±‚çš„çŠ¶æ€ä»£ç ã€‚</p></blockquote><table><thead><tr><th align="center">ä»£ç </th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">200</td><td align="left">ï¼ˆæˆåŠŸï¼‰ æœåŠ¡å™¨å·²æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ï¼ˆIdempotentï¼‰ã€‚ é€šå¸¸ï¼Œè¿™è¡¨ç¤ºæœåŠ¡å™¨æä¾›äº†è¯·æ±‚çš„ç½‘é¡µã€‚</td></tr><tr><td align="center">201</td><td align="left">ï¼ˆå·²åˆ›å»ºï¼‰ è¯·æ±‚æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æºã€‚</td></tr><tr><td align="center">202</td><td align="left">ï¼ˆå·²æ¥å—ï¼‰ æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†ã€‚å³è¯·æ±‚å·²ç»è¿›å…¥åå°æ’é˜Ÿï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰</td></tr><tr><td align="center">203</td><td align="left">ï¼ˆéæˆæƒä¿¡æ¯ï¼‰ æœåŠ¡å™¨å·²æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†è¿”å›çš„ä¿¡æ¯å¯èƒ½æ¥è‡ªå¦ä¸€æ¥æºã€‚</td></tr><tr><td align="center">204</td><td align="left">ï¼ˆæ— å†…å®¹ï¼‰ æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ã€‚</td></tr><tr><td align="center">205</td><td align="left">ï¼ˆé‡ç½®å†…å®¹ï¼‰ æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ã€‚</td></tr><tr><td align="center">206</td><td align="left">ï¼ˆéƒ¨åˆ†å†…å®¹ï¼‰ æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†éƒ¨åˆ† GET è¯·æ±‚ã€‚</td></tr></tbody></table><h2 id="3xx-ï¼ˆé‡å®šå‘ï¼‰"><a href="#3xx-ï¼ˆé‡å®šå‘ï¼‰" class="headerlink" title="3xx ï¼ˆé‡å®šå‘ï¼‰"></a>3xx ï¼ˆé‡å®šå‘ï¼‰</h2><blockquote><p>  è¡¨ç¤ºè¦å®Œæˆè¯·æ±‚ï¼Œéœ€è¦è¿›ä¸€æ­¥æ“ä½œã€‚ é€šå¸¸ï¼Œè¿™äº›çŠ¶æ€ä»£ç ç”¨æ¥é‡å®šå‘ã€‚</p></blockquote><table><thead><tr><th align="center">ä»£ç </th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">300</td><td align="left">ï¼ˆå¤šç§é€‰æ‹©ï¼‰ é’ˆå¯¹è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¯æ‰§è¡Œå¤šç§æ“ä½œã€‚ æœåŠ¡å™¨å¯æ ¹æ®è¯·æ±‚è€… (user agent) é€‰æ‹©ä¸€é¡¹æ“ä½œï¼Œæˆ–æä¾›æ“ä½œåˆ—è¡¨ä¾›è¯·æ±‚è€…é€‰æ‹©ã€‚</td></tr><tr><td align="center">301</td><td align="left">ï¼ˆæ°¸ä¹…ç§»åŠ¨ï¼‰ è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚ æœåŠ¡å™¨è¿”å›æ­¤å“åº”ï¼ˆå¯¹ GET æˆ– HEAD è¯·æ±‚çš„å“åº”ï¼‰æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¯·æ±‚è€…è½¬åˆ°æ–°ä½ç½®ã€‚</td></tr><tr><td align="center">302</td><td align="left">ï¼ˆä¸´æ—¶ç§»åŠ¨ï¼‰ æœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åçš„è¯·æ±‚ã€‚</td></tr><tr><td align="center">303</td><td align="left">ï¼ˆæŸ¥çœ‹å…¶ä»–ä½ç½®ï¼‰ è¯·æ±‚è€…åº”å½“å¯¹ä¸åŒçš„ä½ç½®ä½¿ç”¨å•ç‹¬çš„ GET è¯·æ±‚æ¥æ£€ç´¢å“åº”æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤ä»£ç ã€‚</td></tr><tr><td align="center">304</td><td align="left">ï¼ˆæœªä¿®æ”¹ï¼‰ è‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚ æœåŠ¡å™¨è¿”å›æ­¤å“åº”æ—¶ï¼Œä¸ä¼šè¿”å›ç½‘é¡µå†…å®¹ã€‚</td></tr><tr><td align="center">305</td><td align="left">ï¼ˆä½¿ç”¨ä»£ç†ï¼‰ è¯·æ±‚è€…åªèƒ½ä½¿ç”¨ä»£ç†è®¿é—®è¯·æ±‚çš„ç½‘é¡µã€‚ å¦‚æœæœåŠ¡å™¨è¿”å›æ­¤å“åº”ï¼Œè¿˜è¡¨ç¤ºè¯·æ±‚è€…åº”ä½¿ç”¨ä»£ç†ã€‚</td></tr><tr><td align="center">307</td><td align="left">ï¼ˆä¸´æ—¶é‡å®šå‘ï¼‰ æœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åçš„è¯·æ±‚ã€‚</td></tr></tbody></table><h2 id="4xxï¼ˆè¯·æ±‚é”™è¯¯ï¼‰"><a href="#4xxï¼ˆè¯·æ±‚é”™è¯¯ï¼‰" class="headerlink" title="4xxï¼ˆè¯·æ±‚é”™è¯¯ï¼‰"></a>4xxï¼ˆè¯·æ±‚é”™è¯¯ï¼‰</h2><blockquote><p>è¿™äº›çŠ¶æ€ä»£ç è¡¨ç¤ºè¯·æ±‚å¯èƒ½å‡ºé”™ï¼Œå¦¨ç¢äº†æœåŠ¡å™¨çš„å¤„ç†ã€‚</p></blockquote><table><thead><tr><th align="center">ä»£ç </th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">400</td><td align="center">ï¼ˆé”™è¯¯è¯·æ±‚ï¼‰ æœåŠ¡å™¨ä¸ç†è§£è¯·æ±‚çš„è¯­æ³•ã€‚</td></tr><tr><td align="center">401</td><td align="center">ï¼ˆæœªæˆæƒï¼‰ è¯·æ±‚è¦æ±‚èº«ä»½éªŒè¯ã€‚ å¯¹äºéœ€è¦ç™»å½•çš„ç½‘é¡µï¼ŒæœåŠ¡å™¨å¯èƒ½è¿”å›æ­¤å“åº”ã€‚</td></tr><tr><td align="center">403</td><td align="center">ï¼ˆç¦æ­¢ï¼‰ æœåŠ¡å™¨æ‹’ç»è¯·æ±‚ã€‚</td></tr><tr><td align="center">404</td><td align="center">ï¼ˆæœªæ‰¾åˆ°ï¼‰ æœåŠ¡å™¨æ‰¾ä¸åˆ°è¯·æ±‚çš„ç½‘é¡µã€‚</td></tr><tr><td align="center">405</td><td align="center">ï¼ˆæ–¹æ³•ç¦ç”¨ï¼‰ ç¦ç”¨è¯·æ±‚ä¸­æŒ‡å®šçš„æ–¹æ³•ã€‚</td></tr><tr><td align="center">406</td><td align="center">ï¼ˆä¸æ¥å—ï¼‰ æ— æ³•ä½¿ç”¨è¯·æ±‚çš„å†…å®¹ç‰¹æ€§å“åº”è¯·æ±‚çš„ç½‘é¡µã€‚</td></tr><tr><td align="center">407</td><td align="center">ï¼ˆéœ€è¦ä»£ç†æˆæƒï¼‰ æ­¤çŠ¶æ€ä»£ç ä¸ 401ï¼ˆæœªæˆæƒï¼‰ç±»ä¼¼ï¼Œä½†æŒ‡å®šè¯·æ±‚è€…åº”å½“æˆæƒä½¿ç”¨ä»£ç†ã€‚</td></tr><tr><td align="center">408</td><td align="center">ï¼ˆè¯·æ±‚è¶…æ—¶ï¼‰ æœåŠ¡å™¨ç­‰å€™è¯·æ±‚æ—¶å‘ç”Ÿè¶…æ—¶ã€‚</td></tr><tr><td align="center">409</td><td align="center">ï¼ˆå†²çªï¼‰ æœåŠ¡å™¨åœ¨å®Œæˆè¯·æ±‚æ—¶å‘ç”Ÿå†²çªã€‚ æœåŠ¡å™¨å¿…é¡»åœ¨å“åº”ä¸­åŒ…å«æœ‰å…³å†²çªçš„ä¿¡æ¯ã€‚</td></tr><tr><td align="center">410</td><td align="center">ï¼ˆå·²åˆ é™¤ï¼‰ å¦‚æœè¯·æ±‚çš„èµ„æºå·²æ°¸ä¹…åˆ é™¤ï¼ŒæœåŠ¡å™¨å°±ä¼šè¿”å›æ­¤å“åº”ã€‚</td></tr><tr><td align="center">411</td><td align="center">ï¼ˆéœ€è¦æœ‰æ•ˆé•¿åº¦ï¼‰ æœåŠ¡å™¨ä¸æ¥å—ä¸å«æœ‰æ•ˆå†…å®¹é•¿åº¦æ ‡å¤´å­—æ®µçš„è¯·æ±‚ã€‚</td></tr><tr><td align="center">412</td><td align="center">ï¼ˆæœªæ»¡è¶³å‰ææ¡ä»¶ï¼‰ æœåŠ¡å™¨æœªæ»¡è¶³è¯·æ±‚è€…åœ¨è¯·æ±‚ä¸­è®¾ç½®çš„å…¶ä¸­ä¸€ä¸ªå‰ææ¡ä»¶ã€‚</td></tr><tr><td align="center">413</td><td align="center">ï¼ˆè¯·æ±‚å®ä½“è¿‡å¤§ï¼‰ æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚ï¼Œå› ä¸ºè¯·æ±‚å®ä½“è¿‡å¤§ï¼Œè¶…å‡ºæœåŠ¡å™¨çš„å¤„ç†èƒ½åŠ›ã€‚</td></tr><tr><td align="center">414</td><td align="center">ï¼ˆè¯·æ±‚çš„ URI è¿‡é•¿ï¼‰ è¯·æ±‚çš„ URIï¼ˆé€šå¸¸ä¸ºç½‘å€ï¼‰è¿‡é•¿ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†ã€‚</td></tr><tr><td align="center">415</td><td align="center">ï¼ˆä¸æ”¯æŒçš„åª’ä½“ç±»å‹ï¼‰ è¯·æ±‚çš„æ ¼å¼ä¸å—è¯·æ±‚é¡µé¢çš„æ”¯æŒã€‚</td></tr><tr><td align="center">416</td><td align="center">ï¼ˆè¯·æ±‚èŒƒå›´ä¸ç¬¦åˆè¦æ±‚ï¼‰ å¦‚æœé¡µé¢æ— æ³•æä¾›è¯·æ±‚çš„èŒƒå›´ï¼Œåˆ™æœåŠ¡å™¨ä¼šè¿”å›æ­¤çŠ¶æ€ä»£ç ã€‚</td></tr><tr><td align="center">417</td><td align="center">ï¼ˆæœªæ»¡è¶³æœŸæœ›å€¼ï¼‰ æœåŠ¡å™¨æœªæ»¡è¶³â€æœŸæœ›â€è¯·æ±‚æ ‡å¤´å­—æ®µçš„è¦æ±‚ã€‚</td></tr></tbody></table><h2 id="5xxï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰"><a href="#5xxï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰" class="headerlink" title="5xxï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰"></a>5xxï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰</h2><blockquote><p>  è¿™äº›çŠ¶æ€ä»£ç è¡¨ç¤ºæœåŠ¡å™¨åœ¨å°è¯•å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿå†…éƒ¨é”™è¯¯ã€‚ è¿™äº›é”™è¯¯å¯èƒ½æ˜¯æœåŠ¡å™¨æœ¬èº«çš„é”™è¯¯ï¼Œè€Œä¸æ˜¯è¯·æ±‚å‡ºé”™ã€‚</p></blockquote><table><thead><tr><th align="center">ä»£ç </th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">500</td><td align="center">ï¼ˆæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼‰ æœåŠ¡å™¨é‡åˆ°é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ã€‚</td></tr><tr><td align="center">501</td><td align="center">ï¼ˆå°šæœªå®æ–½ï¼‰ æœåŠ¡å™¨ä¸å…·å¤‡å®Œæˆè¯·æ±‚çš„åŠŸèƒ½ã€‚ ä¾‹å¦‚ï¼ŒæœåŠ¡å™¨æ— æ³•è¯†åˆ«è¯·æ±‚æ–¹æ³•æ—¶å¯èƒ½ä¼šè¿”å›æ­¤ä»£ç ã€‚</td></tr><tr><td align="center">502</td><td align="center">ï¼ˆé”™è¯¯ç½‘å…³ï¼‰ æœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°æ— æ•ˆå“åº”ã€‚</td></tr><tr><td align="center">503</td><td align="center">ï¼ˆæœåŠ¡ä¸å¯ç”¨ï¼‰ æœåŠ¡å™¨ç›®å‰æ— æ³•ä½¿ç”¨ï¼ˆç”±äºè¶…è½½æˆ–åœæœºç»´æŠ¤ï¼‰ã€‚ é€šå¸¸ï¼Œè¿™åªæ˜¯æš‚æ—¶çŠ¶æ€ã€‚</td></tr><tr><td align="center">504</td><td align="center">ï¼ˆç½‘å…³è¶…æ—¶ï¼‰ æœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ—¶ä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ã€‚</td></tr><tr><td align="center">505</td><td align="center">ï¼ˆHTTP ç‰ˆæœ¬ä¸å—æ”¯æŒï¼‰ æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚ä¸­æ‰€ç”¨çš„ HTTP åè®®ç‰ˆæœ¬ã€‚</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çŠ¶æ€ç  </tag>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså‘½ä»¤</title>
      <link href="2020/05/23/shu-ju-ku-redis-ming-ling/"/>
      <url>2020/05/23/shu-ju-ku-redis-ming-ling/</url>
      
        <content type="html"><![CDATA[<p>ç®€å•å¯¹redis å‘½ä»¤è¿›è¡Œæ€»ç»“ã€å½’çº³ã€‚</p><a id="more"></a><h3 id="é”®"><a href="#é”®" class="headerlink" title="é”®"></a>é”®</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/%E9%94%AE%20.png" alt="é”®"></p><h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/String%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%89%20.png" alt="Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"></p><h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/List%EF%BC%88%E5%88%97%E8%A1%A8%EF%BC%89%20.png" alt="Listï¼ˆåˆ—è¡¨ï¼‰"></p><h3 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/Hash%EF%BC%88%E5%93%88%E5%B8%8C%E8%A1%A8%EF%BC%89%20.png" alt="Hashï¼ˆå“ˆå¸Œè¡¨ï¼‰"></p><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/Set%EF%BC%88%E9%9B%86%E5%90%88%EF%BC%89%20.png" alt="Setï¼ˆé›†åˆï¼‰"></p><h3 id="Zset"><a href="#Zset" class="headerlink" title="Zset"></a>Zset</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/ZSet%EF%BC%88SortedSet_%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%EF%BC%89%20.png" alt="ZSetï¼ˆSortedSet_æœ‰åºé›†åˆï¼‰"></p><p>æ›´å¤šå‘½ä»¤å‚è€ƒ<a href="https://cloud.tencent.com/developer/doc/1203">Redisæ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> æ•°æ®åº“ </category>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> rediså‘½ä»¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¸…é™¤officeæœ€è¿‘æ–‡ä»¶</title>
      <link href="2020/05/23/xi-tong-mac-qing-chu-office-zui-jin-wen-jian/"/>
      <url>2020/05/23/xi-tong-mac-qing-chu-office-zui-jin-wen-jian/</url>
      
        <content type="html"><![CDATA[<p>æ‰¹é‡åˆ é™¤Macç³»ç»Ÿä¸‹officeæœ€è¿‘æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">rm -rf ~/Library/Containers/com.microsoft.Word/Data/Library/Preferences/com.microsoft.Word.securebookmarks.plist<br><br>rm -rf ~/Library/Containers/com.microsoft.Excel/Data/Library/Preferences/com.microsoft.Excel.securebookmarks.plist<br><br>rm -rf ~/Library/Containers/com.microsoft.Powerpoint/Data/Library/Preferences/com.microsoft.Powerpoint.securebookmarks.plist<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç³»ç»Ÿ </category>
          
          <category> Mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> office </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueäº‹ä»¶ç»‘å®šä»¥åŠäº‹ä»¶ä¿®é¥°ç¬¦</title>
      <link href="2020/05/16/vue-shi-jian-bang-ding-yi-ji-shi-jian-xiu-shi-fu/"/>
      <url>2020/05/16/vue-shi-jian-bang-ding-yi-ji-shi-jian-xiu-shi-fu/</url>
      
        <content type="html"><![CDATA[<h2 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h2><p>è¦ç†è§£äº‹ä»¶ç»‘å®šï¼Œå°±å¾—å…ˆäº†è§£äº‹ä»¶ã€‚</p><p>æµè§ˆå™¨æ˜¯äº‹ä»¶é©±åŠ¨å‹çš„ï¼Œæ ¹æ®ç”¨æˆ·çš„è¡Œä¸ºè§¦å‘ä¸åŒçš„äº‹ä»¶ï¼Œæ ¹æ®äº‹ä»¶æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚æˆ‘ä»¬è¾ƒä¸ºç†Ÿæ‚‰çš„äº‹ä»¶æœ‰ä¸‰å¤§ç±»å‹ï¼š</p><h3 id="é¼ æ ‡é”®ç›˜äº‹ä»¶"><a href="#é¼ æ ‡é”®ç›˜äº‹ä»¶" class="headerlink" title="é¼ æ ‡é”®ç›˜äº‹ä»¶"></a>é¼ æ ‡é”®ç›˜äº‹ä»¶</h3><table><thead><tr><th align="left">é¼ æ ‡é”®ç›˜äº‹ä»¶</th><th align="left">äº‹ä»¶ä»‹ç»</th></tr></thead><tbody><tr><td align="left">onclick</td><td align="left">é¼ æ ‡ç‚¹å‡»æŸä¸ªå¯¹è±¡</td></tr><tr><td align="left">ondbclick</td><td align="left">é¼ æ ‡åŒå‡»æŸä¸ªå¯¹è±¡</td></tr><tr><td align="left">onmousedown</td><td align="left">æŸä¸ªé¼ æ ‡æŒ‰é”®è¢«æŒ‰ä¸‹</td></tr><tr><td align="left">onmouseup</td><td align="left">æŸä¸ªé¼ æ ‡æŒ‰é”®è¢«æ¾å¼€</td></tr><tr><td align="left">onmousemove</td><td align="left">é¼ æ ‡è¢«ç§»åŠ¨</td></tr><tr><td align="left">onmouseover</td><td align="left">é¼ æ ‡è¢«ç§»åˆ°æŸå…ƒç´ ä¹‹ä¸Š</td></tr><tr><td align="left">onmouseout</td><td align="left">é¼ æ ‡ä»æŸå…ƒç´ ç§»å¼€</td></tr><tr><td align="left">onkeypress</td><td align="left">æŸä¸ªé”®ç›˜çš„é”®è¢«æŒ‰ä¸‹æˆ–æŒ‰ä½</td></tr><tr><td align="left">onkeydown</td><td align="left">æŸä¸ªé”®ç›˜çš„é”®è¢«æŒ‰ä¸‹</td></tr><tr><td align="left">onkeyup</td><td align="left">æŸä¸ªé”®ç›˜çš„é”®è¢«æ¾å¼€</td></tr></tbody></table><h3 id="é¡µé¢äº‹ä»¶"><a href="#é¡µé¢äº‹ä»¶" class="headerlink" title="é¡µé¢äº‹ä»¶"></a>é¡µé¢äº‹ä»¶</h3><table><thead><tr><th align="left">é¡µé¢äº‹ä»¶</th><th align="left">äº‹ä»¶ä»‹ç»</th></tr></thead><tbody><tr><td align="left">onload</td><td align="left">æŸä¸ªé¡µé¢æˆ–å›¾åƒè¢«å®ŒæˆåŠ è½½</td></tr><tr><td align="left">onunload</td><td align="left">ç”¨æˆ·é€€å‡ºé¡µé¢</td></tr><tr><td align="left">onresize</td><td align="left">çª—å£æˆ–æ¡†æ¶è¢«è°ƒæ•´å°ºå¯¸</td></tr><tr><td align="left">onerror</td><td align="left">å½“åŠ è½½æ–‡æ¡£æˆ–å›¾åƒæ—¶å‘ç”ŸæŸä¸ªé”™è¯¯</td></tr><tr><td align="left">onabort</td><td align="left">å›¾åƒåŠ è½½è¢«ä¸­æ–­</td></tr></tbody></table><h3 id="è¡¨å•ç›¸å…³äº‹ä»¶"><a href="#è¡¨å•ç›¸å…³äº‹ä»¶" class="headerlink" title="è¡¨å•ç›¸å…³äº‹ä»¶"></a>è¡¨å•ç›¸å…³äº‹ä»¶</h3><table><thead><tr><th align="left">è¡¨å•ç›¸å…³äº‹ä»¶</th><th align="left">äº‹ä»¶ä»‹ç»</th></tr></thead><tbody><tr><td align="left">onblur</td><td align="left">å…ƒç´ å¤±å»ç„¦ç‚¹</td></tr><tr><td align="left">onfocus</td><td align="left">å…ƒç´ è·å¾—ç„¦ç‚¹</td></tr><tr><td align="left">onchange</td><td align="left">ç”¨æˆ·æ”¹å˜åŸŸçš„å†…å®¹</td></tr><tr><td align="left">onreset</td><td align="left">é‡ç½®æŒ‰é’®è¢«ç‚¹å‡»</td></tr><tr><td align="left">onsubmit</td><td align="left">æäº¤æŒ‰é’®è¢«ç‚¹å‡»</td></tr><tr><td align="left">onselect</td><td align="left">æ–‡æœ¬è¢«é€‰å®š</td></tr></tbody></table><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯äº‹ä»¶å¤„ç†ç¨‹åºä¸­çš„å˜é‡<code>event</code>ä¿ç•™ç€äº‹ä»¶å¯¹è±¡çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¯”å¦‚<code>click</code>äº‹ä»¶ï¼Œäº‹ä»¶å±æ€§é‡Œæœ‰ç‚¹å‡»ä½ç½®ç›¸å¯¹äºæµè§ˆå™¨ï¼Œä»¥åŠé¡µé¢çš„åæ ‡ä¿¡æ¯ï¼Œäº‹ä»¶çš„ç±»å‹ï¼ˆ<code>click</code>ï¼‰,è§¦å‘äº‹ä»¶çš„DOMèŠ‚ç‚¹ä¿¡æ¯ç­‰;å¯ä»¥å°†<code>evenet</code>ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œåœ¨å‡½æ•°å†…éƒ¨è·å–å…·ä½“çš„evenetå¯¹è±¡ä¿¡æ¯ã€‚</p></blockquote><h2 id="äº‹ä»¶ç»‘å®š"><a href="#äº‹ä»¶ç»‘å®š" class="headerlink" title="äº‹ä»¶ç»‘å®š"></a>äº‹ä»¶ç»‘å®š</h2><ul><li><p>åœ¨Vue.jsä¸­<code>v-on</code>æŒ‡ä»¤ç”¨æ¥ç›‘å¬<code>DOM</code>äº‹ä»¶ï¼Œå¹¶åœ¨è§¦å‘äº‹ä»¶æ—¶è¿è¡Œä¸€äº›<code>JavaScript</code>ä»£ç ;å½“ç„¶<code>v-on</code>ä¹Ÿå¯ä»¥ç®€å†™ä¸º<code>@</code></p>  <figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>äº‹ä»¶ç»‘å®š<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#x27;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;app&#x27;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&#x27;func&#x27;</span>&gt;</span> æ˜¾ç¤º <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span> &#123;&#123;msg&#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">                <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">                    msg: <span class="hljs-string">&#x27;&#x27;</span>,</span><br>                &#125;<br>            &#125;,<br>            methods: &#123;<br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">func</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">                    <span class="hljs-built_in">this</span>.msg = <span class="hljs-string">&#x27;è¿™æ˜¯ä¸€ä¸ªå¤§å¤§çš„H1&#x27;</span></span><br>                &#125;<br>            &#125;,<br>        &#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h2 id="äº‹ä»¶ä¿®é¥°ç¬¦"><a href="#äº‹ä»¶ä¿®é¥°ç¬¦" class="headerlink" title="äº‹ä»¶ä¿®é¥°ç¬¦"></a>äº‹ä»¶ä¿®é¥°ç¬¦</h2></li></ul><blockquote><p><code>Vue.js</code> ä¸º <code>v-on</code> æä¾›äº†äº‹ä»¶ä¿®é¥°ç¬¦æ¥å¤„ç† <code>DOM</code> äº‹ä»¶ç»†èŠ‚;<code>Vue.js</code>é€šè¿‡ç”±ç‚¹(<code>.</code>)è¡¨ç¤ºçš„æŒ‡ä»¤åç¼€æ¥è°ƒç”¨ä¿®é¥°ç¬¦ã€‚</p></blockquote><h3 id="äº‹ä»¶ä¿®é¥°ç¬¦åˆ†ç±»"><a href="#äº‹ä»¶ä¿®é¥°ç¬¦åˆ†ç±»" class="headerlink" title="äº‹ä»¶ä¿®é¥°ç¬¦åˆ†ç±»"></a>äº‹ä»¶ä¿®é¥°ç¬¦åˆ†ç±»</h3><p>Vue.jsæä¾›çš„äº‹ä»¶ä¿®é¥°ç¬¦ä¸»è¦é’ˆå¯¹ä¸¤ç±»æƒ…å†µ:</p><ul><li><p>å†’æ³¡æœºåˆ¶ä¿®é¥°ç¬¦</p><ul><li><code>.stop</code></li><li><code>.capture</code></li><li><code>.self</code></li></ul></li><li><p>äº‹ä»¶æœ¬èº«ä¿®é¥°ç¬¦</p><ul><li><code>.prevent</code></li><li><code>.once</code></li></ul></li></ul><h3 id="å†’æ³¡æœºåˆ¶ä¿®é¥°ç¬¦"><a href="#å†’æ³¡æœºåˆ¶ä¿®é¥°ç¬¦" class="headerlink" title="å†’æ³¡æœºåˆ¶ä¿®é¥°ç¬¦"></a>å†’æ³¡æœºåˆ¶ä¿®é¥°ç¬¦</h3><h4 id="äº‹ä»¶å†’æ³¡"><a href="#äº‹ä»¶å†’æ³¡" class="headerlink" title="äº‹ä»¶å†’æ³¡"></a>äº‹ä»¶å†’æ³¡</h4><p><code>DOM</code>ä¸­ï¼Œæ ‘çŠ¶ç»“æ„å†³å®šäº†å­å…ƒç´ è‚¯å®šåœ¨çˆ¶å…ƒç´ é‡Œï¼Œæ‰€ä»¥ç‚¹å‡»å­å…ƒç´ ï¼Œå°±åŒæ—¶ç‚¹å‡»äº†å­å…ƒç´ å’Œçˆ¶å…ƒç´ ï¼Œä»¥åŠçˆ¶å…ƒç´ çš„çˆ¶å…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå½“ç„¶æœ€ç»ˆçš„æ ¹èŠ‚ç‚¹éƒ½æ˜¯æ–‡æ¡£ï¼Œä»¥åŠ<code>window</code>ã€‚</p><p>è¯•æƒ³ï¼Œå½“ä¸€ä¸ªå­å…ƒç´ è¢«ç‚¹å‡»çš„æ—¶å€™ï¼Œä¸ä»…ä»…è¿™ä¸ªå…ƒç´ æœ¬èº«è¢«ç‚¹å‡»äº†ï¼Œå› ä¸ºè¿™ä¸ªå…ƒç´ ä¹Ÿåœ¨å…¶ä¸Šä¸€çº§çˆ¶å…ƒç´ ä¸­(å±äºçˆ¶çº§å…ƒç´ çš„åœ°ç›˜)ï¼Œæ‰€ä»¥ç›¸å½“äºå…¶çˆ¶å…ƒç´ ä¹Ÿè¢«ç‚¹å‡»äº†ï¼Œä»¥æ­¤ç±»æ¨ï¼Œä¸€å±‚ä¸€å±‚å¾€å¤–æ¨ï¼Œæœ€ç»ˆæ•´ä¸ªæ–‡æ¡£ä¹Ÿæ˜¯è¢«ç‚¹å‡»äº†ï¼Œå¦‚æœæ¯ä¸ªå±‚çº§çš„èŠ‚ç‚¹å…ƒç´ éƒ½ç»‘å®šäº†<code>click</code>äº‹ä»¶ï¼Œé‚£ä¹ˆæ¯ä¸ªèŠ‚ç‚¹çš„<code>click</code>äº‹ä»¶å‡½æ•°éƒ½ä¼šè¢«æ‰§è¡Œã€‚ä¸¾ä¸ªå½¢è±¡çš„ä¾‹å­ï¼Œä¸€ä¸ªæ‘é‡Œçš„äººè¢«æ‰“äº†ï¼ˆ<code>click</code>ï¼‰ï¼Œé¦–å…ˆå°±è¦æŒ‰ç…§æ‘é‡Œçš„è§„çŸ©å¤„ç†ï¼ŒåŒæ—¶è¿™ä¸ªæ‘å±äºæŸä¸ªä¹¡é•‡ï¼Œå½“ç„¶ä¹Ÿæ˜¯ç›¸å½“äºè¿™ä¸ªä¹¡é•‡çš„äººè¢«æ‰“äº†ï¼Œé‚£ä¹ˆä¹Ÿè¦æŒ‰ç…§è¿™ä¸ªä¹¡é•‡çš„è§„çŸ©å¤„ç†ï¼Œä»¥æ­¤ä¸€å±‚ä¸€å±‚å¾€ä¸ŠæŠ¥ã€‚è¿™ä¸ªä¾‹å­ä¸å‡†ç¡®çš„åœ°æ–¹å°±æ˜¯ï¼Œç°å®ä¸­ä¸€ä¸ªäººå› ä¸ºä¸€ä¸ªäº‹ä»¶åªä¼šè¢«å¤„ç†ä¸€æ¬¡ï¼Œä¸ä¼šå› ä¸ºåŒä¸€ä»¶äº‹æƒ…å¤šæ¬¡å¤„ç†ã€‚</p><h4 id="å†’æ³¡å¸¦æ¥çš„çƒ¦æ¼"><a href="#å†’æ³¡å¸¦æ¥çš„çƒ¦æ¼" class="headerlink" title="å†’æ³¡å¸¦æ¥çš„çƒ¦æ¼"></a>å†’æ³¡å¸¦æ¥çš„çƒ¦æ¼</h4><p>å½“ä¸Šå±‚ï¼ˆä»¥åŠä¸Šä¸Šå±‚ï¼Œç›´è‡³<code>body</code>å…ƒç´ ï¼‰çˆ¶çº§æœ‰å­å…ƒç´ åŒæ ·çš„æ–¹æ³•ï¼Œä½†ä½ å­å…ƒç´ çš„äº‹ä»¶åï¼Œæ‰€æœ‰çˆ¶çº§å…ƒç´ çš„åŒåå‡½æ•°ä¹Ÿä¼šä»ä¸‹åˆ°ä¸Šï¼Œç”±é‡Œå¾€å¤–ï¼ŒæŒ¨ä¸ªæ‰§è¡Œï¼Œä½†æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªå¸Œæœ›å­å½“äº‹å…ƒç´ äº‹ä»¶æ‰§è¡Œï¼Œä¸å¸Œæœ›å±‚å±‚æ‰§è¡Œï¼Œè¿™å°±è¦æƒ³åŠæ³•é˜»æ­¢è¿™ç§å†’æ³¡çš„æƒ…å†µå‘ç”Ÿã€‚æ¯”å¦‚æˆ‘ä»¬ç‚¹å‡»<code>Child Span</code>çš„æ—¶å€™åªæ˜¾ç¤º <code>Child Span</code>çš„å†…å®¹ã€‚ç»“åˆåˆšåˆšçš„ä¾‹å­å°±æ˜¯ï¼Œæ‘é‡Œå‘ç”Ÿäº†æ‰“äººäº‹ä»¶ï¼Œåœ¨æ‘é‡Œè§£å†³äº†ï¼Œå°±æ²¡å¿…è¦ä¸€å±‚ä¸€å±‚å¾€ä¸ŠæŠ¥ï¼Œåœ¨å±‚å±‚å¤„ç†äº†ã€‚</p><h4 id="äº‹ä»¶ä¿®é¥°ç¬¦-1"><a href="#äº‹ä»¶ä¿®é¥°ç¬¦-1" class="headerlink" title="äº‹ä»¶ä¿®é¥°ç¬¦"></a>äº‹ä»¶ä¿®é¥°ç¬¦</h4><p>åœ¨Vue.jsä¸­é’ˆå¯¹Jsäº‹ä»¶æœ¬èº«çš„å†’æ³¡æœºåˆ¶æä¾›ä¸€äº›äº‹ä»¶ä¿®é¥°ç¬¦ä»¥ä¾¿ä½¿ç”¨</p><ul><li><p><code>.stop</code>: é˜»æ­¢å†’æ³¡äº‹ä»¶</p>  <figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å†’æ³¡æœºåˆ¶<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#x27;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">        <span class="hljs-selector-id">#outer</span> &#123;</span><br>            width: 400px;<br>            height: 200px;<br>            background-color: aqua;<br>            position: absolute;<br>        &#125;<br><br><span class="css">        <span class="hljs-selector-id">#inner</span> &#123;</span><br>            width: 200px;<br>            height: 100px;<br>            background-color: darkcyan;<br>            margin: 50px auto;<br>        &#125;<br><br><span class="css">        <span class="hljs-selector-id">#btn</span> &#123;</span><br>            width: 40px;<br>            height: 30px;<br>            background-color: gold;<br>            margin: 35px 80px;<br>        &#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;app&#x27;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;outer&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&#x27;outer&#x27;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;inner&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&#x27;inner&#x27;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span> @<span class="hljs-attr">click.stop</span>=<span class="hljs-string">&#x27;btn&#x27;</span>&gt;</span>æŒ‰é’® <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>            methods: &#123;<br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">inner</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">                    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;innerè§¦å‘äº†&quot;</span>)</span><br>                &#125;,<br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">outer</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">                    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;outerè§¦å‘äº†&quot;</span>)</span><br>                &#125;,<br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">btn</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">                    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;btnè§¦å‘äº†&quot;</span>)</span><br>                &#125;<br>            &#125;,<br>        &#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure><blockquote><p>å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œåªä¼šè§¦å‘<code>button</code>æœ¬èº«çš„<code>click</code>äº‹ä»¶,ä¸ä¼šç»§ç»­ä¼ é€’</p></blockquote></li><li><p><code>.self</code>:  åªå½“äº‹ä»¶åœ¨è¯¥å…ƒç´ æœ¬èº«ï¼ˆè€Œä¸æ˜¯å­å…ƒç´ ï¼‰è§¦å‘æ—¶è§¦å‘å›è°ƒå‡½æ•°</p>  <figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;outer&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&#x27;outer&#x27;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;inner&quot;</span> @<span class="hljs-attr">click.self</span>=<span class="hljs-string">&#x27;inner&#x27;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&#x27;btn&#x27;</span>&gt;</span>æŒ‰é’® <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></div></td></tr></table></figure><blockquote><p>å½“ç‚¹å‡»æŒ‰é’®æ—¶, ç»§ç»­è§¦å‘å†’æ³¡æœºåˆ¶ï¼Œå› æ­¤<code>outter</code>ç›’å­åŒæ ·ä¼šè§¦å‘å¯¹åº”çš„å›è°ƒå‡½æ•°,ä½†æ˜¯<code>inner</code>ç›’å­å¹¶ä¸ä¼šè§¦å‘å›è°ƒå‡½æ•°ï¼Œåªæœ‰ç‚¹å‡»<code>inner</code>æœ¬èº«æ—¶ï¼Œæ‰ä¼šæ­£å¸¸æ‰§è¡Œå›è°ƒå‡½æ•°</p></blockquote></li><li><p><code>.capture</code>: æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨æ—¶ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼,å³æ‹¥æœ‰è¯¥äº‹ä»¶ä¿®é¥°ç¬¦çš„å…ƒç´ ä¼šä¼˜å…ˆè§¦å‘å¯¹åº”äº‹ä»¶</p>  <figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;outer&quot;</span> @<span class="hljs-attr">click.capture</span>=<span class="hljs-string">&#x27;outer&#x27;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;inner&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&#x27;inner&#x27;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&#x27;btn&#x27;</span>&gt;</span>æŒ‰é’® <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></div></td></tr></table></figure><blockquote><p>å½“ç‚¹å‡»æŒ‰é’®æ—¶, ç»§ç»­è§¦å‘å†’æ³¡æœºåˆ¶ï¼Œä½†æ˜¯ä¼šä¼˜å…ˆè§¦å‘<code>outer</code>çš„å›è°ƒå‡½æ•°,å…¶æ¬¡ï¼ŒæŒ‰ç…§æ­£å¸¸çš„å†’æ³¡é¡ºåºï¼Œç”±å†…å‘å¤–</p></blockquote></li></ul><h3 id="äº‹ä»¶æœ¬èº«ä¿®é¥°ç¬¦"><a href="#äº‹ä»¶æœ¬èº«ä¿®é¥°ç¬¦" class="headerlink" title="äº‹ä»¶æœ¬èº«ä¿®é¥°ç¬¦"></a>äº‹ä»¶æœ¬èº«ä¿®é¥°ç¬¦</h3><ul><li><p><code>.prevent</code>:é˜»æ­¢é»˜è®¤è¡Œä¸º</p>  <figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>VueDemo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#x27;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>        form &#123;<br>            width: 210px;<br>            height: 300px;<br><br>            position: relative;<br>            margin: 0 auto;<br>        &#125;<br><br><span class="css">        <span class="hljs-selector-class">.user</span> &#123;</span><br>            width: 200px;<br>            height: 20px;<br>            display: block;<br>            margin: 5px auto;<br>        &#125;<br><br><span class="css">        <span class="hljs-selector-id">#btn</span> &#123;</span><br>            width: 70px;<br>            float: right;<br>        &#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;app&#x27;</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/userinfo&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span> <span class="hljs-attr">v-on:submit.prevent</span>=<span class="hljs-string">&#x27;onsubmit&#x27;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&#x27;user.name&#x27;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;è¯·è¾“å…¥ç”¨æˆ·åã€‚ã€‚ã€‚&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&#x27;user.pwd&#x27;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;è¯·è¾“å…¥å¯†ç ã€‚ã€‚ã€‚&quot;</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">                <span class="hljs-keyword">return</span> &#123;</span><br>                    user: &#123;<br><span class="javascript">                        name: <span class="hljs-string">&quot;&quot;</span>,</span><br><span class="javascript">                        pwd: <span class="hljs-string">&quot;&quot;</span></span><br>                    &#125;<br>                &#125;<br>            &#125;,<br>            methods: &#123;<br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">onsubmit</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">                    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`è¡¨å•ä¿¡æ¯:<span class="hljs-subst">$&#123;<span class="hljs-built_in">this</span>.user.name&#125;</span>å’Œ<span class="hljs-subst">$&#123;<span class="hljs-built_in">this</span>.user.pwd&#125;</span>æäº¤`</span>)</span><br>                &#125;<br>            &#125;,<br>        &#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure><blockquote><p>è¡¨å•æœ¬èº«çš„æäº¤è¡Œä¸ºä¼šè¿›è¡Œé¡µé¢è·³è½¬ï¼Œç°åœ¨ä½¿ç”¨<code>.prevent</code>ä¿®é¥°ç¬¦ä¹‹åï¼Œåªæ‰§è¡Œç»‘å®šçš„æ–¹æ³•ï¼Œä¸è·³è½¬é¡µé¢;ç±»ä¼¼çš„è¿˜æœ‰è¶…é“¾æ¥ç­‰çš„é»˜è®¤è¡Œä¸ºéƒ½å¯ä»¥ä½¿ç”¨è¯¥ä¿®é¥°ç¬¦é˜»æ­¢</p></blockquote></li><li><p><code>.once</code>: äº‹ä»¶åªèƒ½è§¦å‘ä¸€æ¬¡</p>  <figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>VueDemo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#x27;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;app&#x27;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click.once</span>=<span class="hljs-string">&#x27;btn&#x27;</span>&gt;</span> ä½ åªèƒ½è¯„è®ºä¸€æ¬¡ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>            methods: &#123;<br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">btn</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">                    alert(<span class="hljs-string">&quot;å·²è¯„è®º&quot;</span>)</span><br>                &#125;<br>            &#125;,<br>        &#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> v-on </tag>
            
            <tag> Jsäº‹ä»¶ </tag>
            
            <tag> äº‹ä»¶ä¿®é¥°ç¬¦ </tag>
            
            <tag> äº‹ä»¶ç»‘å®š </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlå¸¸è§é”™è¯¯</title>
      <link href="2020/04/21/shu-ju-ku-mysql-chang-jian-cuo-wu/"/>
      <url>2020/04/21/shu-ju-ku-mysql-chang-jian-cuo-wu/</url>
      
        <content type="html"><![CDATA[<p>ç®€å•å¯¹å¸¸è§é”™è¯¯è¿›è¡Œæ€»ç»“ã€å½’çº³ã€‚</p><h2 id="Ubuntuç³»ç»Ÿ"><a href="#Ubuntuç³»ç»Ÿ" class="headerlink" title="Ubuntuç³»ç»Ÿ"></a>Ubuntuç³»ç»Ÿ</h2><h3 id="1698-åªèƒ½rootç”¨æˆ·ç™»å½•Mysql"><a href="#1698-åªèƒ½rootç”¨æˆ·ç™»å½•Mysql" class="headerlink" title="1698 åªèƒ½rootç”¨æˆ·ç™»å½•Mysql"></a>1698 åªèƒ½rootç”¨æˆ·ç™»å½•Mysql</h3><h4 id="ä¸€ã€é—®é¢˜æè¿°"><a href="#ä¸€ã€é—®é¢˜æè¿°" class="headerlink" title="ä¸€ã€é—®é¢˜æè¿°"></a>ä¸€ã€é—®é¢˜æè¿°</h4><p>å¦‚æœmysqlå®‰è£…æ—¶ï¼Œæ²¡æœ‰æç¤ºè¾“å…¥å¯†ç ï¼Œåˆ™ä¼šéšæœºåˆ†é…å¯†ç ï¼Œç›´æ¥mysql -u root -påˆ™æ— æ³•ç™»å½•ï¼ŒæŠ¥é”™ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">ERROR 1698 (28000): Access denied for user &#x27;root&#x27;@&#x27;localhost<br></code></pre></div></td></tr></table></figure><h4 id="äºŒã€è§£å†³æ–¹æ¡ˆ"><a href="#äºŒã€è§£å†³æ–¹æ¡ˆ" class="headerlink" title="äºŒã€è§£å†³æ–¹æ¡ˆ"></a>äºŒã€è§£å†³æ–¹æ¡ˆ</h4><ol><li><p>ç”¨ç®¡ç†å‘˜æƒé™è¿›å…¥æ•°æ®åº“</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">sudo mysql -uroot -p<br></code></pre></div></td></tr></table></figure></li><li><p>ä¿®æ”¹åŠ å¯†æ–¹å¼å’Œå¯†ç </p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;username&#x27;</span>@<span class="hljs-string">&#x27;host&#x27;</span> identified <span class="hljs-keyword">with</span> mysql_native_password <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;password&#x27;</span>;<br></code></pre></div></td></tr></table></figure></li><li><p>åˆ·æ–°</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">flush privileges;<br></code></pre></div></td></tr></table></figure></li><li><p>æœ€åé‡å¯ç»ˆç«¯ï¼Œå°±å¯é€šè¿‡ <code>mysql -u root -p</code> å…sudoç™»å½•mysqlå•¦ï¼</p></li></ol><h2 id="Windowsç³»ç»Ÿ"><a href="#Windowsç³»ç»Ÿ" class="headerlink" title="Windowsç³»ç»Ÿ"></a>Windowsç³»ç»Ÿ</h2><h3 id="1042æœåŠ¡å¯åŠ¨å¼‚å¸¸"><a href="#1042æœåŠ¡å¯åŠ¨å¼‚å¸¸" class="headerlink" title="1042æœåŠ¡å¯åŠ¨å¼‚å¸¸"></a>1042æœåŠ¡å¯åŠ¨å¼‚å¸¸</h3><h4 id="ä¸€ã€é—®é¢˜æè¿°-1"><a href="#ä¸€ã€é—®é¢˜æè¿°-1" class="headerlink" title="ä¸€ã€é—®é¢˜æè¿°"></a>ä¸€ã€é—®é¢˜æè¿°</h4><p>mysqlå·²ç»å‘å±•åˆ°äº†8.0é˜¶æ®µï¼Œä½†æ˜¯å¾ˆå¤šäººåœ¨ä¸‹è½½äº†å®‰è£…äº†mysql8.0åï¼Œåœ¨å¿«æ¥è¿‘å®Œæˆçš„é˜¶æ®µä¸‹å‡ºç°äº†å¼‚å¸¸ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">error 1042ï¼šUnable to connect to any of the specified MySQL hosts<br></code></pre></div></td></tr></table></figure><p>ä¸Šè¿°å¼‚å¸¸ç›´æ¥å¯¼è‡´mysqlæ— æ³•æ­£å¸¸Finishï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/Mysql-1042.png" alt="Mysql-1042"></p><h4 id="äºŒã€è§£å†³æ–¹æ¡ˆ-1"><a href="#äºŒã€è§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="äºŒã€è§£å†³æ–¹æ¡ˆ"></a>äºŒã€è§£å†³æ–¹æ¡ˆ</h4><ol><li><p>windowsç«¯ä½¿ç”¨<code>Win+R</code> â€“&gt; è¿è¡Œ <code>&quot;services.msc&quot;</code> â€“&gt; æ‰“å¼€serviceæœåŠ¡ç®¡ç†å™¨ï¼Œæ‰¾åˆ°åˆšæ‰å®‰è£…mysqlçš„æœåŠ¡åç§°</p></li><li><p>å³é”® â€“&gt; å±æ€§ â€“&gt; ç™»å½•ï¼Œæ›´æ”¹æˆâ€æœ¬åœ°ç³»ç»Ÿè´¦æˆ·â€ â€“&gt; ç¡®å®š</p><p> <img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020/08/Mysql%E7%99%BB%E5%BD%95%E8%BA%AB%E4%BB%BD%E4%BF%AE%E6%94%B9.png" alt="Mysqlç™»å½•èº«ä»½ä¿®æ”¹"></p></li><li><p>å›åˆ°å®‰è£…ç¨‹åºï¼Œåœ¨æ¬¡ç‚¹å‡»Executeï¼Œä¼šå‘ç°å·²ç»å¯ä»¥æˆåŠŸåˆ°Finishç•Œé¢</p></li></ol><h3 id="1045ç”¨æˆ·å¯†ç é”™è¯¯"><a href="#1045ç”¨æˆ·å¯†ç é”™è¯¯" class="headerlink" title="1045ç”¨æˆ·å¯†ç é”™è¯¯"></a>1045ç”¨æˆ·å¯†ç é”™è¯¯</h3><h4 id="ä¸€ã€é—®é¢˜æè¿°-2"><a href="#ä¸€ã€é—®é¢˜æè¿°-2" class="headerlink" title="ä¸€ã€é—®é¢˜æè¿°"></a>ä¸€ã€é—®é¢˜æè¿°</h4><p>åœ¨æ•°æ®åº“å®‰è£…ä¹‹åï¼Œä½¿ç”¨<code>mysql -uroot -p</code>é“¾æ¥æ•°æ®åº“æ—¶ï¼Œå‡ºç°ä»¥ä¸‹å¼‚å¸¸:</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">1045    Access denied <span class="hljs-keyword">for</span> user <span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> (using password:YES)<br></code></pre></div></td></tr></table></figure><p>è¿™ä¸ªæ„æ€æ˜¯è¯´ï¼šç”¨æˆ·â€œrootâ€@æœ¬åœ°ä¸»æœºçš„è®¿é—®è¢«æ‹’ç»</p><p>é‚£ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§é”™è¯¯å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯è¿™æ ·ï¼šè¿™ç§é—®é¢˜çš„æœ¬è´¨æ˜¯ç”¨æˆ·å¯†ç å‡ºç°é”™è¯¯ã€‚</p><h4 id="äºŒã€è§£å†³æ–¹æ¡ˆ-2"><a href="#äºŒã€è§£å†³æ–¹æ¡ˆ-2" class="headerlink" title="äºŒã€è§£å†³æ–¹æ¡ˆ"></a>äºŒã€è§£å†³æ–¹æ¡ˆ</h4><ol><li><p>æ‰“å¼€å‘½ä»¤çª—å£cmdï¼Œåœæ­¢MySQLæœåŠ¡ï¼Œè¾“å…¥å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">net stop mysql<br></code></pre></div></td></tr></table></figure></li><li><p>å¼€å¯è·³è¿‡å¯†ç éªŒè¯ç™»å½•çš„MySQLæœåŠ¡,è¾“å…¥å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysqld --console --skip-grant-tables --shared-memory<br></code></pre></div></td></tr></table></figure></li><li><p>å†æ‰“å¼€ä¸€ä¸ªæ–°çš„cmdï¼Œæ— å¯†ç ç™»å½•MySQLï¼Œè¾“å…¥ç™»å½•å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql -u root -p<br></code></pre></div></td></tr></table></figure></li><li><p>é‡ç½®ç”¨æˆ·åå¯¹åº”çš„å¯†ç ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">use mysql;<br>   <br><span class="hljs-keyword">update</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">set</span> authentication_string<span class="hljs-operator">=</span><span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;root&#x27;</span>; <span class="hljs-comment">--ä¿®æ”¹å¯†ç ä¸ºç©º</span><br>   <br>flush privileges; <span class="hljs-comment">--åˆ·æ–°æƒé™</span><br></code></pre></div></td></tr></table></figure></li><li><p>é€€å‡ºmysql</p></li><li><p>å…³é—­ä»¥<code>--console --skip-grant-tables --shared-memory</code> å¯åŠ¨çš„MySQLæœåŠ¡ï¼Œ</p></li><li><p>æ‰“å¼€å‘½ä»¤æ¡†ï¼Œå¯åŠ¨MySQLæœåŠ¡ã€‚è¾“å…¥</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">net start mysql<br></code></pre></div></td></tr></table></figure></li><li><p>å†æ¬¡ç™»å½•æ— å¯†ç ç™»å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql -u root -p<br></code></pre></div></td></tr></table></figure></li><li><p>æ­£ç¡®ä¿®æ”¹rootå¯†ç </p><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;host&#x27;</span> identified <span class="hljs-keyword">with</span> mysql_native_password <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;mysql&#x27;</span>;<br><br>flush privileges;<br></code></pre></div></td></tr></table></figure></li><li><p>é€€å‡ºï¼Œå†æ¬¡æˆåŠŸç™»å½•ï¼Œåˆ°æ­¤ï¼Œé‡ç½®å¯†ç ç»“æŸã€‚</p></li></ol><h3 id="Mysqlæ•°æ®åº“åˆå§‹åŒ–"><a href="#Mysqlæ•°æ®åº“åˆå§‹åŒ–" class="headerlink" title="Mysqlæ•°æ®åº“åˆå§‹åŒ–"></a>Mysqlæ•°æ®åº“åˆå§‹åŒ–</h3><p>å½“Mysqlæ•°æ®åº“é“¾æ¥å¤±è´¥ï¼Œ è·³è¿‡ç”¨æˆ·åéªŒè¯ä¹Ÿå¤±è´¥ï¼Œ éœ€è¦å…ˆåˆ é™¤ å®‰è£…ç›®å½•ä¸‹çš„<code>data</code>æ–‡ä»¶å¤¹, ç„¶åé‡æ–°åˆå§‹åŒ–,ç”Ÿæˆåˆå§‹åŒ–å¯†ç </p><ol><li><p>ä»¥ç®¡ç†å‘˜çš„èº«ä»½æ‰“å¼€cmdçª—å£è·³è½¬è·¯å¾„åˆ°<code>X:\xxx\mysql-8.0.11-winx64\bin</code></p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysqld --initialize --user=mysql --console<br></code></pre></div></td></tr></table></figure></li><li><p>æŒ‰ç…§ä¸Šé¢çš„æµç¨‹ï¼Œå°±å¯ä»¥è·³è¿‡ç”¨æˆ·åéªŒè¯ï¼Œé‡æ–°è®¾ç½®mysqlå¯†ç </p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> æ•°æ®åº“ </category>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é”™è¯¯è¯´æ˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-router</title>
      <link href="2020/04/14/vue-vue-router/"/>
      <url>2020/04/14/vue-vue-router/</url>
      
        <content type="html"><![CDATA[<p>Vue.jså®˜æ–¹æä¾›äº†ä¸€å¥—ä¸“ç”¨çš„è·¯ç”±å·¥å…·åº“ Vue Router,å…¶ä½¿ç”¨å’Œé…ç½®éƒ½éå¸¸ç®€å•ã€‚</p><h2 id="å®‰è£…è·¯ç”±"><a href="#å®‰è£…è·¯ç”±" class="headerlink" title="å®‰è£…è·¯ç”±"></a>å®‰è£…è·¯ç”±</h2><p>å¯ä»¥ä½¿ç”¨npmåŒ…çš„æ–¹å¼æ¥å®‰è£…è·¯ç”±</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">cnpm install vue-router --save<br></code></pre></div></td></tr></table></figure><blockquote><p>å…¶å®é€šè¿‡Vue-cliè„šæ‰‹æ¶å¿«é€Ÿæ­å»ºé¡¹ç›®æ—¶ï¼Œå‘½ä»¤è¡Œä¼šè¯¢é—®æ˜¯å¦å®‰è£…è·¯ç”±åŠŸèƒ½ï¼Œä»è€Œå¹¶ä¸éœ€è¦é¢å¤–å®‰è£…è·¯ç”±åŠŸèƒ½</p></blockquote><p>é€šè¿‡Vue-cliè„šæ‰‹æ¶æ­å»ºçš„é¡¹ç›®ï¼Œåœ¨<code>src/router</code>æ–‡ä»¶å¤¹å†…éƒ¨æœ‰<code>index.js</code>æ–‡ä»¶ï¼Œæ‰“å¼€index.jsæ–‡ä»¶ä¼šçœ‹åˆ°ä»¥ä¸‹å¼•ç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> Router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><br>Vue.use(Router)<br></code></pre></div></td></tr></table></figure><p>åœ¨å…¥å£æ–‡ä»¶<code>src/main.js</code>ä¸­å¯¼å…¥<code>src/router/index.js</code>æ–‡ä»¶ï¼Œå³å¯ä½¿ç”¨è·¯ç”±é…ç½®çš„ä¿¡æ¯</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><span class="hljs-comment">//ç­‰æ•ˆäº</span><br><span class="hljs-comment">//import router from &#x27;./router/index.js&#x27;</span><br></code></pre></div></td></tr></table></figure><h2 id="å»ºç«‹è·¯ç”±æ¨¡å—"><a href="#å»ºç«‹è·¯ç”±æ¨¡å—" class="headerlink" title="å»ºç«‹è·¯ç”±æ¨¡å—"></a>å»ºç«‹è·¯ç”±æ¨¡å—</h2><p>å…ˆå»ºç«‹ä¸€ä¸ªè·¯ç”±å™¨æ¨¡å—,ä¸»è¦ç”¨æ¥é…ç½®å’Œç»‘å®šç›¸å…³ä¿¡æ¯ã€‚</p><p>åœ¨<code>src/router/index.js</code>æ–‡ä»¶ä¸­ä½¿ç”¨<code>new Router</code>å‘½ä»¤åˆ›å»ºä¸€ä¸ªè·¯ç”±,ä¸€ä¸ªè·¯ç”±æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p><p>ä¸€æ¡è·¯ç”±çš„å®ç°éœ€è¦ä¸‰éƒ¨åˆ†:<code>name</code> ã€<code>path</code>å’Œ<code>component</code>ã€‚<code>name</code>æ˜¯å‘½å,<code>path</code>æ˜¯è·¯å¾„,<code>component</code>æ˜¯ç»„ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// src/router/index.js</span><br><br><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> Router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> HelloWorld <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/HelloWorld&#x27;</span><br><span class="hljs-comment">// æŠŠå¯¹åº”çš„ç»„ä»¶æˆ–é¡µé¢å¼•å…¥è¿›æ¥</span><br><span class="hljs-keyword">import</span> Login <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/pages/login&#x27;</span> <span class="hljs-comment">// @æŒ‡srcæ ¹è·¯å¾„</span><br><br>Vue.use(Router)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Router(&#123;<br>  routes: [<br>    &#123;<br>      path: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-comment">// è¿™é‡Œé»˜è®¤æ˜¯è·³è½¬åˆ°HelloWorld ç»„ä»¶ï¼Œ åæœŸä¼šæ”¹ä¸ºé¡¹ç›®é¦–é¡µ</span><br>      name: <span class="hljs-string">&#x27;HelloWorld&#x27;</span>,<br>      component: HelloWorld<br>    &#125;,<br>    &#123;<br>      path:<span class="hljs-string">&#x27;/login&#x27;</span>,<br>      name: <span class="hljs-string">&#x27;Login&#x27;</span>,<br>      component: Login  <span class="hljs-comment">// åç»­å¦‚æœè¿˜æœ‰é¡µé¢è¦è·³è½¬ï¼Œå°±æŒ‰ç…§è¿™æ ·çš„æ ¼å¼ç»§ç»­ä¹¦å†™</span><br>    &#125;<br>  ]<br>&#125;)<br></code></pre></div></td></tr></table></figure><blockquote><p>å¯¼å…¥<code>HelloWorld</code>ç»„ä»¶çš„æ—¶å€™ï¼Œå®é™…ä¸Šå¯¼å…¥çš„æ˜¯<code>src/components/HelloWorld.vue</code>.å› ä¸ºåœ¨<code>Webpack</code>ä¸­é…ç½®äº†ï¼Œæ‰€ä»¥å¯ä»¥çœç•¥vueåç¼€ã€‚<code>*.vue</code>æ–‡ä»¶æ˜¯Vueçš„å•æ–‡ä»¶ç»„ä»¶æ ¼å¼ï¼Œå¯ä»¥åŒæ—¶åŒ…æ‹¬æ¨¡æ¿å®šä¹‰ã€æ ·å¼å®šä¹‰å’Œç»„ä»¶æ¨¡å—å®šä¹‰ã€‚</p></blockquote><h2 id="å¯åŠ¨è·¯ç”±å™¨"><a href="#å¯åŠ¨è·¯ç”±å™¨" class="headerlink" title="å¯åŠ¨è·¯ç”±å™¨"></a>å¯åŠ¨è·¯ç”±å™¨</h2><ol><li><p>åœ¨<code>main.js</code>å…¥å£æ–‡ä»¶ä¸­å¯ç”¨è¯¥è·¯ç”±å™¨ã€‚</p><p> <code>main.js</code>ä½œä¸ºå…¥å£æ–‡ä»¶ï¼Œä½¿ç”¨<code>import</code>å¯ä»¥æŠŠæ‰€æœ‰è¦ç”¨åˆ°çš„åŒ…éƒ½å¯¼å…¥åˆ°è¿™é‡Œï¼Œç„¶ååœ¨Vueé¡¹ç›®ä¸­å»è¿ç”¨å®ƒä»¬ã€‚</p><p> åˆ›å»ºå’ŒæŒ‚è½½æ ¹å®ä¾‹ï¼Œé€šè¿‡<code>router</code>é…ç½®å‚æ•°æ³¨å…¥è·¯ç”±ï¼Œä»è€Œè®©æ•´ä¸ªåº”ç”¨éƒ½æœ‰è·¯ç”±åŠŸèƒ½</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// src/main.js</span><br>   <br><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br>   <br><span class="hljs-keyword">new</span> Vue(&#123;<br>el: <span class="hljs-string">&#x27;#app&#x27;</span>,<br>router,<br>components: &#123; App &#125;,<br>template: <span class="hljs-string">&#x27;&lt;App/&gt;&#x27;</span><br>&#125;)<br></code></pre></div></td></tr></table></figure><blockquote><p>æµ…æ å¯¼åŒ…æ–¹å¼</p></blockquote><p> è¿™ä¸ªä¸æ˜¯vueçš„è§„å®šè€Œæ˜¯nodeåŠ è½½æ¨¡å—çš„æ–¹å¼,å½“require(â€˜./routerâ€™)(importä¼šè¢«è½¬ä¸ºrequire),nodeæ˜¯è¿™æ ·çš„å¯»æ‰¾ç›®æ ‡çš„:</p><ol><li><p>é¦–å…ˆå¯»æ‰¾ç›®å½•ä¸‹æœ‰æ²¡æœ‰router.jsæˆ–è€…router.node,å¦‚æœæœ‰å°±å¯¼å…¥</p></li><li><p>å¦‚æœæ²¡æœ‰çœ‹æ˜¯å¦æœ‰routerç›®å½•,å¦‚æœæ²¡æœ‰å°±requireå¤±è´¥,æŠ›å‡ºå¼‚å¸¸â€Cannot find module â€˜./routerâ€™â€</p></li><li><p>å¦‚æœæœ‰routerç›®å½•ä¼šåœ¨å…¶ä¸‹å¯»æ‰¾package.jsonæ–‡ä»¶,å¦‚æœæœ‰åˆ™æŒ‰ç…§packageçš„é…ç½®æ¥å¯¼å…¥</p></li><li><p>å¦‚æœæ²¡æœ‰package.json,çœ‹æ˜¯å¦æœ‰index.jsæˆ–è€…index.node,å¦‚æœæœ‰å°±å¯¼å…¥æ²¡æœ‰å°±å¤±è´¥</p><p> è¯¦ç»†è§nodeæ–‡æ¡£ï¼š<a href="https://nodejs.org/api/modules.html#modules_folders_as_module">https://nodejs.org/api/modules.html#modules_folders_as_module</a></p></li></ol></li><li><p>é…ç½®ä¹‹åï¼Œè·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†ä¼šæ¸²æŸ“åˆ°<code>App.vue</code>çš„<code>ï¼œrouter-view&gt;&lt;/router-view&gt;</code></p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// src/App.vue</span><br>   <br>&lt;template&gt;<br>&lt;div id=<span class="hljs-string">&quot;app&quot;</span>&gt;<br>    &lt;router-view/&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></div></td></tr></table></figure></li><li><p>æœ€åApp.vue ä¼šæ¸²æŸ“åˆ°<code>index.html</code></p><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">â€appâ€</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></div></td></tr></table></figure><p> è¿™æ ·å°±ä¼šæŠŠæ¸²æŸ“å‡ºæ¥çš„é¡µé¢æŒ‚è½½åˆ°idä¸ºappçš„divé‡Œäº†</p></li></ol><h2 id="è·¯ç”±é‡å®šå‘"><a href="#è·¯ç”±é‡å®šå‘" class="headerlink" title="è·¯ç”±é‡å®šå‘"></a>è·¯ç”±é‡å®šå‘</h2><ol><li><p>é¡¹ç›®åº”ç”¨é€šå¸¸éƒ½ä¼šæœ‰ä¸€ä¸ªé¦–é¡µï¼Œé»˜è®¤é¦–å…ˆæ‰“å¼€çš„æ˜¯é¦–é¡µï¼Œè¦è·³è½¬åˆ°å“ªä¸ªé¡µé¢éƒ½å¯ä»¥è®¾ç½®è·¯ç”±è·¯å¾„å‘ç”Ÿè·³è½¬ã€‚é‡å®šå‘ä¹Ÿæ˜¯é€šè¿‡<code>routes</code>é…ç½®æ¥å®Œæˆçš„</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">routes: [<br>    &#123;<br>    path: <span class="hljs-string">&#x27;/index&#x27;</span>,<br>    name: <span class="hljs-string">&#x27;index&#x27;</span>,<br>    component: HelloWorld<br>    &#125;,<br>   <br>    <span class="hljs-comment">// ä»&quot;/&quot;é‡å®šå‘åˆ°&quot;/index&quot;</span><br>    &#123;<br>    path:<span class="hljs-string">&quot;/&quot;</span>,<br>    redirect:<span class="hljs-string">&#x27;/index&#x27;</span><br>    &#125;,<br>   <br>    <span class="hljs-comment">// é‡å®šå‘çš„ç›®æ ‡ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‘½åçš„è·¯ç”±</span><br>    &#123;<br>    path:<span class="hljs-string">&quot;/p1&quot;</span>,<br>    redirect: &#123; <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;index&quot;</span> &#125;<br>    &#125;,<br>   <br>    <span class="hljs-comment">// é‡å®šå‘çš„ç›®æ ‡ç”šè‡³å¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼ŒåŠ¨æ€è¿”å›é‡å®šå‘ç›®æ ‡</span><br>    &#123;<br>    path:<span class="hljs-string">&quot;/p2&quot;</span>,<br>    redirect:<span class="hljs-function"><span class="hljs-params">to</span>=&gt;</span>&#123;<br>        <span class="hljs-comment">// æ–¹æ³•æ¥æ”¶ &quot;ç›®æ ‡è·¯ç”±&quot; ä½œä¸ºå‚æ•°</span><br>        <span class="hljs-comment">// return é‡å®šå‘çš„ &quot;å­—ç¬¦ä¸²è·¯å¾„ï¼è·¯å¾„å¯¹è±¡&quot;</span><br>   <br>        <span class="hljs-comment">// return &#x27;/index&#x27;</span><br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;index&#x27;</span>&#125;<br>    &#125;<br>    &#125;<br>]<br></code></pre></div></td></tr></table></figure><h2 id="lt-router-link-gt"><a href="#lt-router-link-gt" class="headerlink" title="&lt;router-link&gt;"></a><code>&lt;router-link&gt;</code></h2></li><li><p><code>&lt;router-linkï¼</code>ç»„ä»¶æ”¯æŒç”¨æˆ·åœ¨å…·æœ‰è·¯ç”±åŠŸèƒ½çš„åº”ç”¨ä¸­å•å‡»å¯¼èˆªã€‚</p><p> é€šè¿‡<code>to</code>å±æ€§å¯ä»¥æŒ‡å®šç›®æ ‡åœ°å€,é»˜è®¤æ¸²æŸ“æˆå¸¦æœ‰æ­£ç¡®é“¾æ¥çš„<code>ï¼œaï¼</code>æ ‡ç­¾,é€šè¿‡é…ç½®<code>tag</code>å±æ€§å¯ä»¥ç”Ÿæˆåˆ«çš„æ ‡ç­¾ã€‚</p><p> å¦å¤–,å½“ç›®æ ‡è·¯ç”±æˆåŠŸæ¿€æ´»æ—¶,é“¾æ¥å…ƒç´ ä¼šè‡ªåŠ¨è®¾ç½®ä¸€ä¸ªè¡¨ç¤ºæ¿€æ´»çš„<code>css</code>ç±»åã€‚</p><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- ç›´æ¥ç»™toæŒ‡å®šå±æ€§å€¼, ä¸æå€¡ä½¿ç”¨ï¼Œå°½é‡ä½¿ç”¨å±æ€§ç»‘å®š --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&#x27;/goods&#x27;</span>&gt;</span>å•†å“<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>   <br><span class="hljs-comment">&lt;!-- ä½¿ç”¨v-bind ç»‘å®š JSè¡¨è¾¾å¼--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#x27;/goods&#x27;&quot;</span>&gt;</span>å•†å“<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>   <br><span class="hljs-comment">&lt;!-- ç»‘å®šdataä¸­çš„å˜é‡path --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&#x27;path&#x27;</span>&gt;</span>å•†å“<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>   <br><span class="hljs-comment">&lt;!-- ç»‘å®šå¯¹è±¡ï¼Œè‡ªå®šä¹‰ç½‘å€ï¼Œæºå¸¦æŸ¥è¯¢å‚æ•° ==&gt; /goods?id=1 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;&#x27;path&#x27;:&#x27;/goods&#x27;, , query:&#123;&#x27;id&#x27;:1&#125;&#125;&#125;&quot;</span>&gt;</span>å•†å“<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>   <br><span class="hljs-comment">&lt;!-- ç»‘å®š å¯¹è±¡ï¼Œå‘½åè·¯ç”±ï¼Œæºå¸¦paramså‚æ•° ==&gt; /goods/1 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;name:&#x27;goods&#x27;, params:&#123;&#x27;id&#x27;:1&#125;&#125;&quot;</span>&gt;</span>å•†å“<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h2 id="è·¯ç”±å¯¹è±¡å±æ€§"><a href="#è·¯ç”±å¯¹è±¡å±æ€§" class="headerlink" title="è·¯ç”±å¯¹è±¡å±æ€§"></a>è·¯ç”±å¯¹è±¡å±æ€§</h2></li></ol><blockquote><p><code>route</code>å’Œ<code>router</code>åŒºåˆ«:<code>vue-router</code>ä¸­ç»å¸¸ä¼šæ“ä½œçš„ä¸¤ä¸ªå¯¹è±¡<code>router</code>å’Œ<code>route</code>ä¸¤ä¸ª</p></blockquote><ol><li><p><code>route</code>æ˜¯ä¸€ä¸ªè·³è½¬çš„è·¯ç”±å¯¹è±¡ï¼Œæ¯ä¸€ä¸ªè·¯ç”±éƒ½ä¼šæœ‰ä¸€ä¸ª<code>route</code>å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªå±€éƒ¨çš„å¯¹è±¡ï¼Œå¯ä»¥è·å–å¯¹åº”çš„<code>name</code>,<code>path</code>,<code>params</code>,<code>query</code>ç­‰</p><p> ä¸‹é¢åˆ—å‡ºäº†å¸¸ç”¨çš„è·¯ç”±ä¿¡æ¯å¯¹è±¡å±æ€§</p><ul><li><code>$route.path</code>: å­—ç¬¦ä¸²ï¼Œå¯¹åº”å½“å‰è·¯ç”±çš„è·¯å¾„ï¼Œæ€»æ˜¯è§£æä¸ºç»å¯¹è·¯å¾„,å¦‚<code>&quot;/goods&quot;</code></li><li><code>$route.params</code>: ä¸€ä¸ª<code>key/value</code>å¯¹è±¡, åŒ…å«äº†åŠ¨æ€ç‰‡æ®µå’Œå…¨åŒ¹é…ç‰‡æ®µï¼Œå¦‚æœæ²¡æœ‰è·¯ç”±å‚æ•°ï¼Œå°±ä¸ºç©ºå¯¹è±¡ã€‚</li><li><code>$route.query</code>: ä¸€ä¸ª<code>key/value</code>å¯¹è±¡, è¡¨ç¤ºURLæŸ¥è¯¢å‚æ•°ã€‚ä¾‹å¦‚: å¯¹äºè·¯å¾„<code>/goods?cate_id=1</code>,åˆ™æœ‰<code>$route.query.cate_id == 1</code>ï¼›å¦‚æœæ²¡æœ‰æŸ¥è¯¢å‚æ•°,åˆ™ä¸ºç©ºå¯¹è±¡</li><li><code>$route.hash</code>: å½“å‰è·¯ç”±çš„<code>hash</code>å€¼(ä¸å¸¦#)ï¼Œå¦‚æœæ²¡æœ‰<code>hash</code>å€¼ï¼Œåˆ™ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</li><li><code>$route.ful1Path</code>: å®Œæˆè§£æåçš„URLï¼ŒåŒ…å«æŸ¥è¯¢å‚æ•°å’Œhashçš„å®Œæ•´è·¯å¾„ã€‚</li><li><code>$route.matched</code>: ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å½“å‰è·¯ç”±çš„æ‰€æœ‰åµŒå¥—è·¯å¾„ç‰‡æ®µçš„è·¯ç”±è®°å½•ã€‚è·¯ç”±è®°å½•å°±æ˜¯<code>routes</code>é…ç½®æ•°ç»„ä¸­çš„å¯¹è±¡å‰¯æœ¬(è¿˜æœ‰ä¸€äº›åœ¨childrenæ•°ç»„)ã€‚</li></ul></li><li><p><code>router</code>æ˜¯<code>VueRouter</code>çš„ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡<code>Vue.use(VueRouter)</code>å’Œ<code>VueRouter</code>æ„é€ å‡½æ•°å¾—åˆ°ä¸€ä¸ª<code>router</code>çš„å®ä¾‹å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­æ˜¯ä¸€ä¸ªå…¨å±€çš„å¯¹è±¡ï¼Œä»–åŒ…å«äº†æ‰€æœ‰çš„è·¯ç”±åŒ…å«äº†è®¸å¤šå…³é”®çš„å¯¹è±¡å’Œå±æ€§ã€‚</p><p> ä¸‹é¢åˆ—å‡ºäº†å¸¸ç”¨çš„è·¯ç”±ä¿¡æ¯å¯¹è±¡æ–¹æ³•</p><ul><li><p><code>router.push(location)</code>: è¦å¯¼èˆªåˆ°ä¸åŒçš„URLï¼Œåˆ™ä½¿ç”¨<code>router.push</code>æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¼šå‘<code>history</code>æ ˆæ·»åŠ ä¸€ä¸ªæ–°çš„è®°å½•ï¼Œå½“ç”¨æˆ·å•å‡»æµè§ˆå™¨çš„åé€€æŒ‰é’®æ—¶ï¼Œå›åˆ°ä¹‹å‰çš„URLã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">router.push(<span class="hljs-string">&#x27;/goods&#x27;</span>) <span class="hljs-comment">// å­—ç¬¦ä¸²</span><br>router.push(&#123;<span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/goods&#x27;</span>&#125;) <span class="hljs-comment">// å¯¹è±¡</span><br>     <br><span class="hljs-comment">// è‡ªå®šä¹‰ç½‘å€ï¼Œæºå¸¦æŸ¥è¯¢å‚æ•°</span><br>router.push(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/goods&quot;</span>, <span class="hljs-attr">query</span>: &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> &#125; &#125;) <span class="hljs-comment">// -&gt; /goods?id=1</span><br>     <br><span class="hljs-comment">// å‘½åè·¯ç”±ï¼Œæºå¸¦paramså‚æ•°</span><br>router.push(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;goods&quot;</span>, <span class="hljs-attr">params</span>: &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> &#125; &#125;) <span class="hljs-comment">// -&gt; /goods/1</span><br></code></pre></div></td></tr></table></figure><p>  ç”±ä¸€ä¸ªé¡µé¢è·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢æ—¶ï¼Œéœ€è¦æºå¸¦ä¸€äº›æ•°æ®ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ°è¿™ç§å¸¦å‚æ•°çš„è·¯ç”±è·³è½¬æ–¹å¼äº†ã€‚</p><blockquote><p>å½“å•å‡»<code>ï¼œrouter-linkï¼</code>æ—¶ï¼Œä¼šåœ¨å†…éƒ¨è°ƒç”¨<code>router.push(...)</code>æ–¹æ³•ï¼Œæ‰€ä»¥è¯´å•å‡»<code>ï¼œrouter-link:toï¼&quot;...&quot;&gt;</code>ç­‰åŒäºè°ƒç”¨<code>router.push(...)</code>ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å½“è·³è½¬ä¹‹å‰ï¼Œä¸¤ç§æ–¹å¼å¯ä»¥æºå¸¦paramså‚æ•°</span><br><span class="hljs-comment">// &lt;router-link :to=&quot;&#123;name:&#x27;goods&#x27;, params:&#123;&#x27;id&#x27;:1&#125;&#125;&quot;&gt;å•†å“&lt;/router-link&gt;</span><br><span class="hljs-comment">// router.push(&#123; name: &quot;goods&quot;, params: &#123; id: 1 &#125; &#125;)</span><br>     <br><span class="hljs-comment">// å¯¹åº”çš„è·¯ç”±é…ç½®æœ‰ä¸¤ç§æ–¹å¼:</span><br><span class="hljs-comment">// 1. å°†å‚æ•°è·å–ç›´æ¥ä½“ç°åœ¨ç½‘å€ä¸Š</span><br>routes: [<br>    &#123;<br>    path: <span class="hljs-string">&#x27;/goods/:id&#x27;</span>,<br>    name: <span class="hljs-string">&#x27;goods&#x27;</span>,<br>    component: goods<br>    &#125;<br>]<br><span class="hljs-comment">// æ­¤æ—¶ä¼šå¯¼è‡´ä¹‹å‰çš„paramså‚æ•°æ‹¼æ¥åœ¨ç½‘å€ä¸Šï¼Œ ä¸º&quot;/goods/1&quot;ï¼Œåˆ·æ–°ä¸ä¸¢å¤±æ•°æ®</span><br>     <br><span class="hljs-comment">// 2. ä¸åœ¨ç½‘å€ä¸Šä½“ç°</span><br>routes: [<br>    &#123;<br>    path: <span class="hljs-string">&#x27;/goods&#x27;</span>,<br>    name: <span class="hljs-string">&#x27;goods&#x27;</span>,<br>    component: goods<br>    &#125;<br>]<br><span class="hljs-comment">// æ­¤æ—¶ä¼šå¯¼è‡´ä¹‹å‰çš„å‚æ•°ä¸èƒ½è¡¨ç°å‡ºæ¥ï¼Œç½‘å€ä»ä¸º&quot;/goods&quot;ï¼Œåˆ·æ–°ä¹‹åï¼Œå‚æ•°ä¸¢å¤±</span><br>     <br><span class="hljs-comment">// ä½†æ˜¯ä¸ç®¡æ€ä¹ˆé…ç½®è·¯ç”±ï¼Œå‚æ•°è·å–æ–¹å¼ç›¸åŒ</span><br></code></pre></div></td></tr></table></figure></li><li><p><code>router.replace(location)</code>: <code>router.replace</code>ä¸<code>router.push</code>å¾ˆåƒï¼Œå”¯ä¸€çš„ä¸åŒæ˜¯å®ƒä¸ä¼šå‘<code>history</code>æ ˆæ·»åŠ æ–°è®°å½•ï¼Œè€Œæ˜¯è·Ÿå®ƒçš„æ–¹æ³•åä¸€æ ·åªæ›¿æ¢æ‰å½“å‰çš„history è®°å½•ã€‚<code>router.replace(...)</code>ç­‰ä»·äº<code>ï¼œrouter-link :toï¼&quot;...&quot; replaceï¼</code></p></li><li><p><code>router.go(n)</code>: å‚æ•°æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºåœ¨<code>history</code>è®°å½•ä¸­å‘å‰è¿›å¤šå°‘æ­¥æˆ–å‘åé€€å¤šå°‘æ­¥</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// åœ¨æµè§ˆå™¨è®°å½•ä¸­å‰è¿›ä¸€æ­¥ï¼Œç­‰åŒäºhistory.forward()</span><br>router.go(<span class="hljs-number">1</span>)<br><span class="hljs-comment">// åé€€ä¸€æ­¥ï¼Œç­‰åŒäºhistory.back()</span><br>router.go(-<span class="hljs-number">1</span>)<br><span class="hljs-comment">// å‰è¿›ä¸‰æ­¥</span><br>router.go(<span class="hljs-number">3</span>)<br><span class="hljs-comment">// å¦‚æœhistoryè®°å½•ä¸å¤Ÿï¼Œå°±ä¼šå¤±è´¥</span><br>router.go(-<span class="hljs-number">100</span>)<br>router.go(<span class="hljs-number">100</span>)<br></code></pre></div></td></tr></table></figure></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è·¯ç”± </tag>
            
            <tag> vue </tag>
            
            <tag> vue-router </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6è¯­æ³•</title>
      <link href="2020/04/12/js-es6-yu-fa/"/>
      <url>2020/04/12/js-es6-yu-fa/</url>
      
        <content type="html"><![CDATA[<h2 id="å˜é‡å£°æ˜"><a href="#å˜é‡å£°æ˜" class="headerlink" title="å˜é‡å£°æ˜"></a>å˜é‡å£°æ˜</h2><h3 id="1-let"><a href="#1-let" class="headerlink" title="1. let"></a>1. <code>let</code></h3><ul><li><p><code>let</code>ä½œç”¨åŸŸåªå±€é™äºå½“å‰ä»£ç å—</p>   <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">&#123;<br>   <span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span><br>   <span class="hljs-keyword">let</span> b = <span class="hljs-number">20</span><br>&#125;<br><br><span class="hljs-built_in">console</span>.log(a)  <span class="hljs-comment">// è¾“å‡º 10</span><br><span class="hljs-built_in">console</span>.log(b)  <span class="hljs-comment">// æŠ¥é”™ b is not defined</span><br></code></pre></div></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>let</code>å£°æ˜çš„å˜é‡ä½œç”¨åŸŸä¸ä¼šæå‰</p>   <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">console</span>.log(a)  <span class="hljs-comment">// è¾“å‡º undefined</span><br><span class="hljs-built_in">console</span>.log(b)  <span class="hljs-comment">// æŠ¥é”™ Cannot access &#x27;b&#x27; before initialization</span><br><br><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span><br><span class="hljs-keyword">let</span> b = <span class="hljs-number">20</span><br></code></pre></div></td></tr></table></figure></li><li><p>åœ¨ç›¸åŒçš„ä½œç”¨åŸŸä¸‹ä¸èƒ½å£°æ˜ç›¸åŒçš„å˜é‡</p>   <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">     &#123;<br>    <span class="hljs-keyword">let</span> a = <span class="hljs-number">10</span><br>&#125;<br><span class="hljs-keyword">let</span> a = <span class="hljs-number">20</span><br></code></pre></div></td></tr></table></figure>   <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span><br><span class="hljs-keyword">let</span> a = <span class="hljs-number">20</span>  <span class="hljs-comment">// æŠ¥é”™ Identifier &#x27;a&#x27; has already been declared</span><br></code></pre></div></td></tr></table></figure><h3 id="2-const"><a href="#2-const" class="headerlink" title="2. const"></a>2. const</h3></li><li><p>å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ã€‚ä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜</p></li><li><p><code>const</code>åªå£°æ˜ï¼Œä¸èµ‹å€¼ï¼Œå°±ä¼šæŠ¥é”™ï¼Œè¿™æ„å‘³ç€<code>const</code>ä¸€æ—¦å£°æ˜å¸¸é‡ï¼Œå°±å¿…é¡»ç«‹å³åˆå§‹åŒ–</p></li><li><p><code>const</code>ä½œç”¨åŸŸä¸<code>let</code>ç›¸åŒï¼Œåªåœ¨æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆ</p></li><li><p><code>const</code>å£°æ˜çš„å¸¸é‡ä¸æ”¯æŒæå‡ï¼Œå’Œ<code>let</code>ä¸€æ ·ï¼Œåªèƒ½åœ¨å£°æ˜åä½¿ç”¨</p></li><li><p><code>const</code>å£°æ˜çš„å¸¸é‡ï¼Œä¹Ÿä¸<code>let</code>ä¸€æ ·ï¼Œ ä¸å¯é‡å¤å£°æ˜</p></li><li><p><code>const</code>å®é™…ä¿è¯çš„å¹¶ä¸æ˜¯å¸¸é‡çš„å€¼ä¸å˜ï¼Œè€Œæ˜¯å¸¸é‡æŒ‡å‘çš„å†…å­˜åœ°å€ä¸å¾—æ”¹å˜</p><ul><li><p>å¯¹äºç®€å•çš„æ•°æ®ç±»å‹(æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼),å€¼å°±ä¿å­˜åœ¨å¸¸é‡æŒ‡å‘çš„åœ°å€ï¼Œå› æ­¤ç­‰åŒå¸¸é‡</p></li><li><p>å¯¹äºå¤åˆç±»å‹çš„æ•°æ®(æ•°ç»„ã€å¯¹è±¡)ï¼Œå¸¸é‡æŒ‡å‘çš„å†…å­˜åœ°å€ä¿å­˜çš„åªæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œconståªèƒ½ä¿è¯æŒ‡é’ˆæ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ç»“æ„æ˜¯ä¸æ˜¯å¯å˜çš„ï¼Œå¹¶ä¸èƒ½ä¿è¯</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> a = <span class="hljs-number">5</span><br><span class="hljs-comment">// a = 10 // æŠ¥é”™ Assignment to constant variable</span><br><br><span class="hljs-keyword">const</span> obj = &#123;&#125;<br>obj.a = <span class="hljs-number">20</span> <span class="hljs-comment">// å¯æ‰§è¡Œ</span><br><span class="hljs-built_in">console</span>.log(obj) <span class="hljs-comment">// å¯æ‰§è¡Œ &#123;a: 20&#125;</span><br><span class="hljs-comment">// obj = &#123;&#125; // æŠ¥é”™</span><br><br><span class="hljs-keyword">const</span> arry = []<br>arry.push(<span class="hljs-number">1</span>) <span class="hljs-comment">// å¯æ‰§è¡Œ</span><br>arry.length = <span class="hljs-number">0</span> <span class="hljs-comment">// å¯æ‰§è¡Œ</span><br><span class="hljs-comment">// arry = [] // æŠ¥é”™ Assignment to constant variable</span><br></code></pre></div></td></tr></table></figure><h3 id="3-å®ä¾‹æ¼”ç¤º"><a href="#3-å®ä¾‹æ¼”ç¤º" class="headerlink" title="3. å®ä¾‹æ¼”ç¤º"></a>3. å®ä¾‹æ¼”ç¤º</h3></li></ul></li><li><p>ä½¿ç”¨varå£°æ˜å¾ªç¯å˜é‡ï¼Œä¼šå¯¼è‡´å…¨å±€å…±ç”¨ä¸€ä¸ªå˜é‡</p><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-keyword">var</span> btns = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&#x27;button&#x27;</span>)</span><br><span class="javascript">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; btns.length; i++) &#123;</span><br><span class="javascript">        btns[i].onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`è¿™æ˜¯ç¬¬<span class="hljs-subst">$&#123;i&#125;</span>ä¸ªæŒ‰é’®`</span>)</span><br>        &#125;<br>    &#125;<br><span class="javascript">    <span class="hljs-comment">// æ­¤æ—¶ç‚¹å‡»ä»»ä½•æŒ‰é’®ï¼Œè¾“å‡ºéƒ½æ˜¯&quot;è¿™æ˜¯ç¬¬5ä¸ªæŒ‰é’®&quot;</span></span><br><br><span class="javascript">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; btns.length; j++) &#123;</span><br><span class="javascript">        btns[j].onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`è¿™æ˜¯ç¬¬<span class="hljs-subst">$&#123;j&#125;</span>ä¸ªæŒ‰é’®`</span>)</span><br>        &#125;<br>    &#125;<br><span class="javascript">    <span class="hljs-comment">// æŠŠå¾ªç¯ä¸­çš„varæ”¹ä¸ºlet,åˆ™ä¸ºæ­£ç¡®çš„ç»“æœï¼Œå³è¾“å‡ºå¯¹åº”çš„æŒ‰é’®åºå·</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>ä¸‹é¢çš„ä¾‹å­ä¹Ÿæ˜¯forå¾ªç¯ä¸­å…¨å±€å…±ç”¨åŒä¸€å˜é‡çš„å¼Šç«¯</p>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">1</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(i) <span class="hljs-comment">// è¾“å‡º 10ä¸ª9</span><br>    &#125;, <span class="hljs-number">100</span>)<br>&#125;<br><span class="hljs-built_in">console</span>.log(i) <span class="hljs-comment">// 9</span><br><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j=<span class="hljs-number">1</span>;j&lt;<span class="hljs-number">10</span>;j++)&#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(j) <span class="hljs-comment">// è¾“å‡º 0-9</span><br>    &#125;, <span class="hljs-number">100</span>)<br>&#125;<br><span class="hljs-built_in">console</span>.log(j) <span class="hljs-comment">// æŠ¥é”™ j is not defined</span><br></code></pre></div></td></tr></table></figure><blockquote><p>è§£é‡Š</p></blockquote></li><li><p>varæ˜¯å…¨å±€ä½œç”¨åŸŸï¼Œæœ‰å˜é‡æå‡çš„ä½œç”¨ï¼Œæ‰€ä»¥åœ¨forä¸­å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œå…¨å±€å¯ä»¥ä½¿ç”¨ï¼Œå¾ªç¯ä¸­çš„æ¯ä¸€æ¬¡ç»™å˜é‡ièµ‹å€¼éƒ½æ˜¯ç»™å…¨å±€å˜é‡ièµ‹å€¼ã€‚</p></li><li><p>letæ˜¯å—çº§ä½œç”¨åŸŸ,åªèƒ½åœ¨ä»£ç å—ä¸­èµ·ä½œç”¨ï¼Œåœ¨jsä¸­ä¸€ä¸ª{}ä¸­çš„è¯­å¥æˆ‘ä»¬ä¹Ÿç§°ä¸ºå«ä¸€ä¸ªä»£ç å—ï¼Œæ¯æ¬¡å¾ªç¯ä¼šäº§ç”Ÿä¸€ä¸ªä»£ç å—ï¼Œæ¯ä¸ªä»£ç å—ä¸­çš„éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡j</p></li></ul><h3 id="4-å°ç»“"><a href="#4-å°ç»“" class="headerlink" title="4. å°ç»“"></a>4. å°ç»“</h3><blockquote><p><code>let</code>ã€<code>const</code>ä½¿ç”¨åœºæ™¯</p></blockquote><ul><li><code>const</code>ä¸€èˆ¬ç”¨åœ¨éœ€è¦ä¸€ä¸ªæ¨¡å—æ—¶ä½¿ç”¨æˆ–è€…å®šä¹‰ä¸€äº›å…¨å±€å¸¸é‡æ—¶ä½¿ç”¨</li><li><code>let</code>é™åˆ¶äº†å˜é‡çš„ä½œç”¨åŸŸï¼Œä¿è¯å˜é‡ä¸ä¼šå½±å“å…¨å±€å˜é‡ï¼Œæ‰€ä»¥å°½é‡å°†<code>var</code>æ”¹ä¸º<code>let</code></li></ul><h2 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h2><h3 id="1-ç®­å¤´å‡½æ•°"><a href="#1-ç®­å¤´å‡½æ•°" class="headerlink" title="1. ç®­å¤´å‡½æ•°"></a>1. ç®­å¤´å‡½æ•°</h3><p>ES6æ ‡å‡†æ–°å¢äº†ä¸€ç§æ–°çš„å‡½æ•°ï¼šArrow Functionï¼ˆç®­å¤´å‡½æ•°ï¼‰ã€‚</p><p>ä¸ºä»€ä¹ˆå«Arrow Functionï¼Ÿå› ä¸ºå®ƒçš„å®šä¹‰ç”¨çš„å°±æ˜¯ä¸€ä¸ªç®­å¤´</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">x =&gt; x * x<br></code></pre></div></td></tr></table></figure><p>ä¸Šé¢çš„ç®­å¤´å‡½æ•°ç›¸å½“äºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> x * x;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>ç®­å¤´å‡½æ•°ç›¸å½“äºåŒ¿åå‡½æ•°ï¼Œå¹¶ä¸”ç®€åŒ–äº†å‡½æ•°å®šä¹‰ã€‚ç®­å¤´å‡½æ•°æœ‰ä¸¤ç§æ ¼å¼ã€‚ä¸€ç§åƒä¸Šé¢çš„ï¼ŒåªåŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿<code>&#123; ... &#125;</code>å’Œ<code>return</code>éƒ½çœç•¥æ‰äº†ã€‚è¿˜æœ‰ä¸€ç§å¯ä»¥åŒ…å«å¤šæ¡è¯­å¥ï¼Œè¿™æ—¶å€™å°±ä¸èƒ½çœç•¥<code>&#123; ... &#125;</code>å’Œ<code>return</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">x =&gt; &#123;<br>    <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> x * x;<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> - x * x;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å¦‚æœå‚æ•°ä¸æ˜¯ä¸€ä¸ªï¼Œå°±éœ€è¦ç”¨æ‹¬å·()æ‹¬èµ·æ¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// ä¸¤ä¸ªå‚æ•°:</span><br>(x, y) =&gt; x * x + y * y<br><br><span class="hljs-comment">// æ— å‚æ•°:</span><br>() =&gt; <span class="hljs-number">3.14</span><br><br><span class="hljs-comment">// å¯å˜å‚æ•°:</span><br>(x, y, ...rest) =&gt; &#123;<br>    <span class="hljs-keyword">var</span> i, sum = x + y;<br>    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;rest.length; i++) &#123;<br>        sum += rest[i];<br>    &#125;<br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å¦‚æœè¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå°±è¦æ³¨æ„ï¼Œå¦‚æœæ˜¯å•è¡¨è¾¾å¼ï¼Œè¿™ä¹ˆå†™çš„è¯ä¼šæŠ¥é”™ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// SyntaxError:</span><br>x =&gt; &#123; <span class="hljs-attr">foo</span>: x &#125;<br></code></pre></div></td></tr></table></figure><p>å› ä¸ºå’Œå‡½æ•°ä½“çš„{ â€¦ }æœ‰è¯­æ³•å†²çªï¼Œæ‰€ä»¥è¦æ”¹ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// ok:</span><br>x =&gt; (&#123; <span class="hljs-attr">foo</span>: x &#125;)<br></code></pre></div></td></tr></table></figure><h3 id="2-ç®­å¤´å‡½æ•°ä¸åŒ¿åå‡½æ•°å¼‚åŒ"><a href="#2-ç®­å¤´å‡½æ•°ä¸åŒ¿åå‡½æ•°å¼‚åŒ" class="headerlink" title="2. ç®­å¤´å‡½æ•°ä¸åŒ¿åå‡½æ•°å¼‚åŒ"></a>2. ç®­å¤´å‡½æ•°ä¸åŒ¿åå‡½æ•°å¼‚åŒ</h3><p>ç®­å¤´å‡½æ•°çœ‹ä¸Šå»æ˜¯åŒ¿åå‡½æ•°çš„ä¸€ç§ç®€å†™ï¼Œä½†å®é™…ä¸Šï¼Œç®­å¤´å‡½æ•°å’ŒåŒ¿åå‡½æ•°æœ‰ä¸ªæ˜æ˜¾çš„åŒºåˆ«:</p><p>ç®­å¤´å‡½æ•°çš„æå‡ºï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³å¤šå±‚å‡½æ•°åµŒå¥—ä¸­thisæŒ‡ä»£æ··ä¹±çš„é—®é¢˜ï¼›ç®­å¤´å‡½æ•°å†…éƒ¨çš„thisæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Œç”±ä¸Šä¸‹æ–‡ç¡®å®šã€‚</p><ul><li><p>ä½¿ç”¨æ™®é€šå‡½æ•°åµŒå¥—ä¼šäº§ç”ŸthisæŒ‡ä»£æ··ä¹±çš„é—®é¢˜</p>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> person = &#123;<br>    age: <span class="hljs-number">18</span>,<br>    getBirth: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">var</span> bth = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>          <span class="hljs-comment">// å¤šå±‚åµŒå¥—å‡½æ•°ä¸­ï¼Œthisä¼˜å…ˆå¯»æ‰¾çˆ¶çº§ä½œç”¨åŸŸå¯¹è±¡ï¼Œä¸å­˜åœ¨ï¼Œå³æŒ‡å‘å…¨å±€windowå¯¹è±¡</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear() - <span class="hljs-built_in">this</span>.age  <span class="hljs-comment">// this.age   undefined</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> bth()<br>    &#125;<br>&#125;<br><span class="hljs-built_in">console</span>.log(person.getBirth()) <span class="hljs-comment">// NaN</span><br></code></pre></div></td></tr></table></figure></li><li><p>ä½¿ç”¨ç®­å¤´å‡½æ•°å³å¯è§£å†³é—®é¢˜</p>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> person = &#123;<br>    age: <span class="hljs-number">18</span>,<br>    getBirth: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">var</span> bth = <span class="hljs-function">()=&gt;</span>&#123;<br>          <span class="hljs-comment">// åœ¨ç®­å¤´å‡½æ•°ä¸­ thisä¼šå¯»æ‰¾çˆ¶çº§ä½œç”¨åŸŸçš„å¯¹è±¡ï¼Œæ‰¾åˆ°ä¸ºæ­¢</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear() - <span class="hljs-built_in">this</span>.age  <span class="hljs-comment">// this.age  18</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> bth()<br>    &#125;<br>&#125;<br><span class="hljs-built_in">console</span>.log(person.getBirth()) <span class="hljs-comment">// 2002</span><br></code></pre></div></td></tr></table></figure><h3 id="3-ç®­å¤´å‡½æ•°ä¸é€‚ç”¨çš„åœºæ™¯"><a href="#3-ç®­å¤´å‡½æ•°ä¸é€‚ç”¨çš„åœºæ™¯" class="headerlink" title="3. ç®­å¤´å‡½æ•°ä¸é€‚ç”¨çš„åœºæ™¯"></a>3. ç®­å¤´å‡½æ•°ä¸é€‚ç”¨çš„åœºæ™¯</h3></li></ul><ol><li><p>ä½œä¸ºå¯¹è±¡çš„å±æ€§</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> obj = &#123;<br>    a: <span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); <span class="hljs-comment">// window</span><br>    &#125;<br>&#125;;<br></code></pre></div></td></tr></table></figure><p> ä½œä¸ºå¯¹è±¡çš„å±æ€§æ—¶ï¼Œthisçš„æŒ‡å‘åˆ™ä¸å†æ˜¯å¯¹è±¡æœ¬èº«äº†ï¼Œè¿™å°±é€ æˆäº†æ„æƒ³ä¸åˆ°çš„ç»“æœ</p></li><li><p>ä¸å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°æ¥ä½¿ç”¨</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> Person = <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> &#123; <span class="hljs-comment">// Uncaught TypeError: Person is not a constructor</span><br>    <span class="hljs-built_in">this</span>.name = name;<br>&#125;<br><br><span class="hljs-keyword">var</span> person = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&#x27;Jack&#x27;</span>);<br></code></pre></div></td></tr></table></figure><p> è¿™ä¸ªç‰¹æ€§å¾ˆå®¹æ˜“æµ‹è¯•ï¼Œå¦‚æœä¸Šä¸€æ¡æ˜ç™½çš„è¯ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼š ç®­å¤´å‡½æ•°å‹æ ¹å°±æ²¡æœ‰thisï¼Œå½“ç„¶ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ï¼ˆå¦‚æœæ˜ç™½æ„é€ å‡½æ•°newçš„è¿‡ç¨‹çš„è¯ï¼Œæ’ä¸€å¥ï¼š newçš„è¿‡ç¨‹å…¶å®å°±æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå°†thisæŒ‡å‘è¯¥å¯¹è±¡ï¼Œç„¶åæ‰§è¡Œä»£ç åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡ï¼Œæœ€åè¿”å›ï¼‰</p></li><li><p>ä¸å¯ä»¥ä½œä¸ºåŸå‹æ–¹æ³•</p><p> åŒæ ·çš„è§„åˆ™é€‚ç”¨äºåŸå‹æ–¹æ³•ï¼ˆprototype methodï¼‰çš„å®šä¹‰ï¼Œä½¿ç”¨ç®­å¤´å‡½æ•°ä¼šå¯¼è‡´è¿è¡Œæ—¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡é”™è¯¯</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Cat</span>(<span class="hljs-params">name</span>) </span>&#123;<br>    <span class="hljs-built_in">this</span>.name = name;<br>&#125;<br><br>Cat.prototype.sayCatName = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span> === <span class="hljs-built_in">window</span>); <span class="hljs-comment">// =&gt; true</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.name;<br>&#125;;<br><br><span class="hljs-keyword">const</span> cat = <span class="hljs-keyword">new</span> Cat(<span class="hljs-string">&#x27;Mew&#x27;</span>);<br>cat.sayCatName(); <span class="hljs-comment">// =&gt; undefined</span><br></code></pre></div></td></tr></table></figure><p> ä½¿ç”¨ä¼ ç»Ÿçš„å‡½æ•°è¡¨è¾¾å¼å°±èƒ½è§£å†³é—®é¢˜ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Cat</span>(<span class="hljs-params">name</span>) </span>&#123;<br>    <span class="hljs-built_in">this</span>.name = name;<br>&#125;<br><br>Cat.prototype.sayCatName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span> === cat); <span class="hljs-comment">// =&gt; true</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.name;<br>&#125;;<br><br><span class="hljs-keyword">const</span> cat = <span class="hljs-keyword">new</span> Cat(<span class="hljs-string">&#x27;Mew&#x27;</span>);<br>cat.sayCatName(); <span class="hljs-comment">// =&gt; &#x27;Mew&#x27;</span><br></code></pre></div></td></tr></table></figure><p> sayCatName å˜æˆæ™®é€šå‡½æ•°ä¹‹åï¼Œè¢«è°ƒç”¨æ—¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡å°±ä¼šæŒ‡å‘æ–°åˆ›å»ºçš„ cat å®ä¾‹ã€‚</p></li><li><p>ä¸ç»‘å®šargumentsï¼ˆå¦‚æœæœ‰è¦ä½¿ç”¨argumentsçš„æ—¶å€™å¯ä»¥ä½¿ç”¨restå‚æ•°ä»£æ›¿ï¼‰</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> foo = <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>); <span class="hljs-comment">// Uncaught ReferenceError: arguments is not defined</span><br>&#125;;<br>foo();<br></code></pre></div></td></tr></table></figure><p> è¿™ä¸ªç‰¹æ€§ä¹Ÿå¾ˆå¥½æµ‹è¯•ï¼Œä½†æ˜¯å®åœ¨è¦ä½¿ç”¨<code>arguments</code>å¯¹è±¡è¦æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨es6çš„å¦ä¸€ä¸ªæ–°ç‰¹æ€§restå‚æ•°ï¼Œå®Œç¾æ›¿ä»£</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> foo = <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(args); <span class="hljs-comment">// [1, 2, 3]</span><br>&#125;;<br>foo(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br></code></pre></div></td></tr></table></figure><h2 id="JSå¯¹è±¡åµŒå¥—å‡½æ•°"><a href="#JSå¯¹è±¡åµŒå¥—å‡½æ•°" class="headerlink" title="JSå¯¹è±¡åµŒå¥—å‡½æ•°"></a>JSå¯¹è±¡åµŒå¥—å‡½æ•°</h2></li></ol><p>åœ¨ <code>js</code> çš„è¯­æ³•è§„åˆ™ä¸­ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡å†…å­˜åœ¨æ–¹æ³•ï¼Œåˆ™è¯¥æ–¹æ³• <code>this</code> æŒ‡å‘å½“å‰å¯¹è±¡ã€‚<br>å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">let</span> obj = &#123;<br>    age: <span class="hljs-number">10</span>,<br>    getAge: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; <br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.age)<br>    &#125;<br>&#125;<br>obj.getAge();<span class="hljs-comment">// 10</span><br></code></pre></div></td></tr></table></figure><p>è‹¥æ–¹æ³•ä¸­å†æ¬¡åŒ…å«å‡½æ•°æ–¹æ³•ï¼Œåˆ™è¯¥åµŒå¥—å‡½æ•°æŒ‡å‘å…¨å±€ã€‚ä¸èƒ½è·å–åˆ°æœ¬å¯¹è±¡ä¸­çš„å±æ€§ã€‚<br>å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">let</span> obj = &#123;<br>    age: <span class="hljs-number">10</span>,<br>    getAge: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; <br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123; alert(<span class="hljs-built_in">this</span>.age)&#125;, <span class="hljs-number">1000</span>)<br>    &#125;<br>&#125;<br>obj.getAge();<span class="hljs-comment">// undefined</span><br></code></pre></div></td></tr></table></figure><p>å¯ä»¥é€šè¿‡å¦‚ä¸‹å‡ ç§åŠæ³•æ¥è§£å†³æ­¤é—®é¢˜ï¼š<br>ï¼ˆ1ï¼‰å®šä¹‰å˜é‡ï¼Œä¿å­˜å¯¹è±¡ <code>this</code></p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">getAge: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; <br><span class="hljs-keyword">let</span> self = <span class="hljs-built_in">this</span>;<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123; alert(self.age)&#125;, <span class="hljs-number">1000</span>)<br>    &#125;<br></code></pre></div></td></tr></table></figure><p>(2) é€šè¿‡ç®­å¤´å‡½æ•°çš„æ–¹å¼ </p><p>ç”±äºç®­å¤´å‡½æ•°å…·æœ‰é»˜è®¤æŒ‡å‘çˆ¶çº§è°ƒç”¨å¯¹è±¡ obj çš„ç‰¹ç‚¹ï¼Œå› æ­¤ä¹Ÿå¯ä»¥è§£å†³æœ¬é—®é¢˜</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">getAge: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; <br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123; alert(<span class="hljs-built_in">this</span>.age)&#125;, <span class="hljs-number">1000</span>)<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="è§£æ„èµ‹å€¼"><a href="#è§£æ„èµ‹å€¼" class="headerlink" title="è§£æ„èµ‹å€¼"></a>è§£æ„èµ‹å€¼</h2><h3 id="ä»€ä¹ˆæ˜¯è§£æ„èµ‹å€¼ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯è§£æ„èµ‹å€¼ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯è§£æ„èµ‹å€¼ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯è§£æ„èµ‹å€¼ï¼Ÿ</h3><p>è§£æ„èµ‹å€¼å…è®¸ä½ ä½¿ç”¨ç±»ä¼¼æ•°ç»„æˆ–å¯¹è±¡å­—é¢é‡çš„è¯­æ³•å°†æ•°ç»„å’Œå¯¹è±¡çš„å±æ€§èµ‹ç»™å„ç§å˜é‡ã€‚è¿™ç§èµ‹å€¼è¯­æ³•æåº¦ç®€æ´ï¼ŒåŒæ—¶è¿˜æ¯”ä¼ ç»Ÿçš„å±æ€§è®¿é—®æ–¹æ³•æ›´ä¸ºæ¸…æ™°ã€‚</p><p>é€šå¸¸æ¥è¯´ï¼Œä½ å¾ˆå¯èƒ½è¿™æ ·è®¿é—®æ•°ç»„ä¸­çš„å‰ä¸‰ä¸ªå…ƒç´ ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> first = someArray[<span class="hljs-number">0</span>];<br><span class="hljs-keyword">var</span> second = someArray[<span class="hljs-number">1</span>];<br><span class="hljs-keyword">var</span> third = someArray[<span class="hljs-number">2</span>];<br></code></pre></div></td></tr></table></figure><p>å¦‚æœä½¿ç”¨è§£æ„èµ‹å€¼çš„ç‰¹æ€§ï¼Œå°†ä¼šä½¿ç­‰æ•ˆçš„ä»£ç å˜å¾—æ›´åŠ ç®€æ´å¹¶ä¸”å¯è¯»æ€§æ›´é«˜ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> [first, second, third] = someArray;<br></code></pre></div></td></tr></table></figure><p><code>SpiderMonkey</code>ï¼ˆFirefox çš„ JavaScript å¼•æ“ï¼‰å·²ç»æ”¯æŒè§£æ„çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œä½†æ˜¯ä»ä¸å¥å…¨ã€‚ä½ å¯ä»¥é€šè¿‡ <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=694100">bug 694100</a> è·Ÿè¸ªè§£æ„å’Œå…¶å®ƒ ES6 ç‰¹æ€§åœ¨ <code>SpiderMonkey</code> ä¸­çš„æ”¯æŒæƒ…å†µã€‚</p><h3 id="æ•°ç»„ä¸è¿­ä»£å™¨çš„è§£æ„"><a href="#æ•°ç»„ä¸è¿­ä»£å™¨çš„è§£æ„" class="headerlink" title="æ•°ç»„ä¸è¿­ä»£å™¨çš„è§£æ„"></a>æ•°ç»„ä¸è¿­ä»£å™¨çš„è§£æ„</h3><p>ä»¥ä¸Šæ˜¯æ•°ç»„è§£æ„èµ‹å€¼çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œå…¶è¯­æ³•çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">[ variable1, variable2, ..., variableN ] = array;<br></code></pre></div></td></tr></table></figure><p>è¿™å°†ä¸º variable1 åˆ° variableN çš„å˜é‡èµ‹äºˆæ•°ç»„ä¸­ç›¸åº”å…ƒç´ é¡¹çš„å€¼ã€‚å¦‚æœä½ æƒ³åœ¨èµ‹å€¼çš„åŒæ—¶å£°æ˜å˜é‡ï¼Œå¯åœ¨èµ‹å€¼è¯­å¥å‰åŠ å…¥<code>var</code>ã€<code>let</code>æˆ–<code>const</code>å…³é”®å­—ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> [ variable1, variable2, ..., variableN ] = array;<br><span class="hljs-keyword">let</span> [ variable1, variable2, ..., variableN ] = array;<br><span class="hljs-keyword">const</span> [ variable1, variable2, ..., variableN ] = array;<br></code></pre></div></td></tr></table></figure><p>äº‹å®ä¸Šï¼Œç”¨<code>å˜é‡</code>æ¥æè¿°å¹¶ä¸æ°å½“ï¼Œå› ä¸ºä½ å¯ä»¥å¯¹ä»»æ„æ·±åº¦çš„åµŒå¥—æ•°ç»„è¿›è¡Œè§£æ„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> [foo, [[bar], baz]] = [<span class="hljs-number">1</span>, [[<span class="hljs-number">2</span>], <span class="hljs-number">3</span>]];<br><span class="hljs-built_in">console</span>.log(foo);  <span class="hljs-comment">// 1</span><br><span class="hljs-built_in">console</span>.log(bar);  <span class="hljs-comment">// 2</span><br><span class="hljs-built_in">console</span>.log(baz);  <span class="hljs-comment">// 3</span><br></code></pre></div></td></tr></table></figure><p>æ­¤å¤–ï¼Œä½ å¯ä»¥åœ¨å¯¹åº”ä½ç•™ç©ºæ¥è·³è¿‡è¢«è§£æ„æ•°ç»„ä¸­çš„æŸäº›å…ƒç´ ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> [,,third] = [<span class="hljs-string">&quot;foo&quot;</span>, <span class="hljs-string">&quot;bar&quot;</span>, <span class="hljs-string">&quot;baz&quot;</span>];<br><span class="hljs-built_in">console</span>.log(third);  <span class="hljs-comment">// &quot;baz&quot;</span><br></code></pre></div></td></tr></table></figure><p>è€Œä¸”ä½ è¿˜å¯ä»¥é€šè¿‡ â€œ<a href="http://www.infoq.com/cn/articles/es6-in-depth-rest-parameters-and-defaults">ä¸å®šå‚æ•°</a>â€ æ¨¡å¼æ•è·æ•°ç»„ä¸­çš„æ‰€æœ‰å°¾éšå…ƒç´ ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> [head, ...tail] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];<br><span class="hljs-built_in">console</span>.log(tail); <span class="hljs-comment">// [2, 3, 4]</span><br></code></pre></div></td></tr></table></figure><p>å½“è®¿é—®ç©ºæ•°ç»„æˆ–è¶Šç•Œè®¿é—®æ•°ç»„æ—¶ï¼Œå¯¹å…¶è§£æ„ä¸å¯¹å…¶ç´¢å¼•çš„è¡Œä¸ºä¸€è‡´ï¼Œæœ€ç»ˆå¾—åˆ°çš„ç»“æœéƒ½æ˜¯ï¼š<code>undefined</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-built_in">console</span>.log([][<span class="hljs-number">0</span>]);   <span class="hljs-comment">// undefined</span><br><span class="hljs-keyword">var</span> [missing] = [];<br><span class="hljs-built_in">console</span>.log(missing); <span class="hljs-comment">// undefined</span><br></code></pre></div></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œæ•°ç»„è§£æ„èµ‹å€¼çš„æ¨¡å¼åŒæ ·é€‚ç”¨äºä»»æ„è¿­ä»£å™¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">fibs</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">var</span> a = <span class="hljs-number">0</span>;<br>      <span class="hljs-keyword">var</span> b = <span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>        <span class="hljs-keyword">yield</span> a;<br>        [a, b] = [b, a + b];<br>      &#125;<br>&#125;<br><span class="hljs-keyword">var</span> [first, second, third, fourth, fifth, sixth] = fibs();<br><span class="hljs-built_in">console</span>.log(sixth);  <span class="hljs-comment">// 5</span><br></code></pre></div></td></tr></table></figure><h3 id="å¯¹è±¡çš„è§£æ„"><a href="#å¯¹è±¡çš„è§£æ„" class="headerlink" title="å¯¹è±¡çš„è§£æ„"></a>å¯¹è±¡çš„è§£æ„</h3><p>é€šè¿‡è§£æ„å¯¹è±¡ï¼Œä½ å¯ä»¥æŠŠå®ƒçš„æ¯ä¸ªå±æ€§ä¸ä¸åŒçš„å˜é‡ç»‘å®šï¼Œé¦–å…ˆæŒ‡å®šè¢«ç»‘å®šçš„å±æ€§ï¼Œç„¶åç´§è·Ÿä¸€ä¸ªè¦è§£æ„çš„å˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> robotA = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Bender&quot;</span> &#125;;<br><span class="hljs-keyword">var</span> robotB = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Flexo&quot;</span> &#125;;<br><span class="hljs-keyword">var</span> &#123; <span class="hljs-attr">name</span>: nameA &#125; = robotA;<br><span class="hljs-keyword">var</span> &#123; <span class="hljs-attr">name</span>: nameB &#125; = robotB;<br><br><span class="hljs-built_in">console</span>.log(nameA);  <span class="hljs-comment">// &quot;Bender&quot;</span><br><span class="hljs-built_in">console</span>.log(nameB);  <span class="hljs-comment">// &quot;Flexo&quot;</span><br></code></pre></div></td></tr></table></figure><p>å½“å±æ€§åä¸å˜é‡åä¸€è‡´æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¸€ç§å®ç”¨çš„å¥æ³•ç®€å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> &#123; foo, bar &#125; = &#123; <span class="hljs-attr">foo</span>: <span class="hljs-string">&quot;lorem&quot;</span>, <span class="hljs-attr">bar</span>: <span class="hljs-string">&quot;ipsum&quot;</span> &#125;;<br><br><span class="hljs-built_in">console</span>.log(foo);  <span class="hljs-comment">// &quot;lorem&quot;</span><br><span class="hljs-built_in">console</span>.log(bar);  <span class="hljs-comment">// &quot;ipsum&quot;</span><br></code></pre></div></td></tr></table></figure><p>ä¸æ•°ç»„è§£æ„ä¸€æ ·ï¼Œä½ å¯ä»¥éšæ„åµŒå¥—å¹¶è¿›ä¸€æ­¥ç»„åˆå¯¹è±¡è§£æ„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> complicatedObj = &#123;<br>  arrayProp: [<br>    <span class="hljs-string">&quot;Zapp&quot;</span>,<br>    &#123; <span class="hljs-attr">second</span>: <span class="hljs-string">&quot;Brannigan&quot;</span> &#125;<br>  ]<br>&#125;;<br><span class="hljs-keyword">var</span> &#123; <span class="hljs-attr">arrayProp</span>: [first, &#123; second &#125;] &#125; = complicatedObj;<br><span class="hljs-built_in">console</span>.log(first);<br><span class="hljs-comment">// &quot;Zapp&quot;</span><br><span class="hljs-built_in">console</span>.log(second);<br><span class="hljs-comment">// &quot;Brannigan&quot;</span><br></code></pre></div></td></tr></table></figure><p>å½“ä½ è§£æ„ä¸€ä¸ªæœªå®šä¹‰çš„å±æ€§æ—¶ï¼Œå¾—åˆ°çš„å€¼ä¸º<code>undefined</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> &#123; missing &#125; = &#123;&#125;;<br><span class="hljs-built_in">console</span>.log(missing);<br><span class="hljs-comment">// undefined</span><br></code></pre></div></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œå½“ä½ è§£æ„å¯¹è±¡å¹¶èµ‹å€¼ç»™å˜é‡æ—¶ï¼Œå¦‚æœä½ å·²ç»å£°æ˜æˆ–ä¸æ‰“ç®—å£°æ˜è¿™äº›å˜é‡ï¼ˆäº¦å³èµ‹å€¼è¯­å¥å‰æ²¡æœ‰<code>let</code>ã€<code>const</code>æˆ–<code>var</code>å…³é”®å­—ï¼‰ï¼Œä½ åº”è¯¥æ³¨æ„è¿™æ ·ä¸€ä¸ªæ½œåœ¨çš„è¯­æ³•é”™è¯¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">&#123; blowUp &#125; = &#123; <span class="hljs-attr">blowUp</span>: <span class="hljs-number">10</span> &#125;;<br><span class="hljs-comment">// Syntax error è¯­æ³•é”™è¯¯</span><br></code></pre></div></td></tr></table></figure><p>ä¸ºä»€ä¹ˆä¼šå‡ºé”™ï¼Ÿè¿™æ˜¯å› ä¸º JavaScript è¯­æ³•é€šçŸ¥è§£æå¼•æ“å°†ä»»ä½•ä»¥ {å¼€å§‹çš„è¯­å¥è§£æä¸ºä¸€ä¸ªå—è¯­å¥ï¼ˆä¾‹å¦‚ï¼Œ<code>&#123;console&#125;</code>æ˜¯ä¸€ä¸ªåˆæ³•å—è¯­å¥ï¼‰ã€‚è§£å†³æ–¹æ¡ˆæ˜¯å°†æ•´ä¸ªè¡¨è¾¾å¼ç”¨ä¸€å¯¹å°æ‹¬å·åŒ…è£¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">(&#123; safe &#125; = &#123;&#125;);<br><span class="hljs-comment">// No errors æ²¡æœ‰è¯­æ³•é”™è¯¯</span><br></code></pre></div></td></tr></table></figure><h3 id="è§£æ„å€¼ä¸æ˜¯å¯¹è±¡ã€æ•°ç»„æˆ–è¿­ä»£å™¨"><a href="#è§£æ„å€¼ä¸æ˜¯å¯¹è±¡ã€æ•°ç»„æˆ–è¿­ä»£å™¨" class="headerlink" title="è§£æ„å€¼ä¸æ˜¯å¯¹è±¡ã€æ•°ç»„æˆ–è¿­ä»£å™¨"></a>è§£æ„å€¼ä¸æ˜¯å¯¹è±¡ã€æ•°ç»„æˆ–è¿­ä»£å™¨</h3><p>å½“ä½ å°è¯•è§£æ„<code>null</code>æˆ–<code>undefined</code>æ—¶ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªç±»å‹é”™è¯¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> &#123;blowUp&#125; = <span class="hljs-literal">null</span>;<br><span class="hljs-comment">// TypeError: null has no propertiesï¼ˆnullæ²¡æœ‰å±æ€§ï¼‰</span><br></code></pre></div></td></tr></table></figure><p>ç„¶è€Œï¼Œä½ å¯ä»¥è§£æ„å…¶å®ƒåŸå§‹ç±»å‹ï¼Œä¾‹å¦‚ï¼š<code>å¸ƒå°”å€¼</code>ã€<code>æ•°å€¼</code>ã€<code>å­—ç¬¦ä¸²</code>ï¼Œä½†æ˜¯ä½ å°†å¾—åˆ°<code>undefined</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> &#123;wtf&#125; = <span class="hljs-literal">NaN</span>;<br><span class="hljs-built_in">console</span>.log(wtf);<br><span class="hljs-comment">// undefined</span><br></code></pre></div></td></tr></table></figure><p>ä½ å¯èƒ½å¯¹æ­¤æ„Ÿåˆ°æ„å¤–ï¼Œä½†ç»è¿‡è¿›ä¸€æ­¥å®¡æŸ¥ä½ å°±ä¼šå‘ç°ï¼ŒåŸå› å…¶å®éå¸¸ç®€å•ã€‚å½“ä½¿ç”¨å¯¹è±¡èµ‹å€¼æ¨¡å¼æ—¶ï¼Œè¢«è§£æ„çš„å€¼<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-requireobjectcoercible">éœ€è¦è¢«å¼ºåˆ¶è½¬æ¢ä¸ºå¯¹è±¡</a>ã€‚å¤§å¤šæ•°ç±»å‹éƒ½å¯ä»¥è¢«è½¬æ¢ä¸ºå¯¹è±¡ï¼Œä½†<code>null</code>å’Œ<code>undefined</code>å´æ— æ³•è¿›è¡Œè½¬æ¢ã€‚å½“ä½¿ç”¨æ•°ç»„èµ‹å€¼æ¨¡å¼æ—¶ï¼Œè¢«è§£æ„çš„å€¼ä¸€å®šè¦<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-getiterator">åŒ…å«ä¸€ä¸ªè¿­ä»£å™¨</a>ã€‚</p><h3 id="é»˜è®¤å€¼"><a href="#é»˜è®¤å€¼" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h3><p>å½“ä½ è¦è§£æ„çš„å±æ€§æœªå®šä¹‰æ—¶ä½ å¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> [missing = <span class="hljs-literal">true</span>] = [];<br><span class="hljs-built_in">console</span>.log(missing);<br><span class="hljs-comment">// true</span><br><span class="hljs-keyword">var</span> &#123; <span class="hljs-attr">message</span>: msg = <span class="hljs-string">&quot;Something went wrong&quot;</span> &#125; = &#123;&#125;;<br><span class="hljs-built_in">console</span>.log(msg);<br><span class="hljs-comment">// &quot;Something went wrong&quot;</span><br><span class="hljs-keyword">var</span> &#123; x = <span class="hljs-number">3</span> &#125; = &#123;&#125;;<br><span class="hljs-built_in">console</span>.log(x);<br><span class="hljs-comment">// 3</span><br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
            <tag> ES6 </tag>
            
            <tag> var </tag>
            
            <tag> let </tag>
            
            <tag> const </tag>
            
            <tag> ç®­å¤´å‡½æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonç¯å¢ƒé…ç½®</title>
      <link href="2020/04/11/gong-ju-python-huan-jing-pei-zhi/"/>
      <url>2020/04/11/gong-ju-python-huan-jing-pei-zhi/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡æ–‡ç« å°†ä»‹ç»å¦‚ä½•åœ¨æœ¬åœ°æ­å»ºPythonå¼€å‘ç¯å¢ƒã€‚</p><p>Pythonå¯åº”ç”¨äºå¤šå¹³å°åŒ…æ‹¬ Linux å’Œ Mac OS Xã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ç»ˆç«¯çª—å£è¾“å…¥ â€œpythonâ€ å‘½ä»¤æ¥æŸ¥çœ‹æœ¬åœ°æ˜¯å¦å·²ç»å®‰è£…Pythonä»¥åŠPythonçš„å®‰è£…ç‰ˆæœ¬ã€‚</p><h2 id="Pythonç¯å¢ƒé…ç½®"><a href="#Pythonç¯å¢ƒé…ç½®" class="headerlink" title="Pythonç¯å¢ƒé…ç½®"></a>Pythonç¯å¢ƒé…ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># ubuntu</span><br>sudo apt-get install python3-pip<br>sudo apt-get install python-pip<br><br><span class="hljs-comment"># windows</span><br>python3 -m pip install --upgrade pip --force-reinstall<br>python2 -m pip install --upgrade pip --force-reinstall<br><br><span class="hljs-comment"># mac</span><br>brew install python  <span class="hljs-comment"># è¿™ä¸€æ­¥å®‰è£…äº†python3å’Œpip3</span><br>brew install python@2 <span class="hljs-comment"># è¿™ä¸€æ­¥å®‰è£…äº†python2å’Œpip2</span><br><br><span class="hljs-comment"># ipython2</span><br>pip install ipython <br><span class="hljs-comment"># ipython3</span><br>pip3 install ipython <br></code></pre></div></td></tr></table></figure><h2 id="pipé•œåƒæº"><a href="#pipé•œåƒæº" class="headerlink" title="pipé•œåƒæº"></a>pipé•œåƒæº</h2><h3 id="é•œåƒæº"><a href="#é•œåƒæº" class="headerlink" title="é•œåƒæº"></a>é•œåƒæº</h3><ul><li>æ¸…åï¼š<code>https://pypi.tuna.tsinghua.edu.cn/simple</code></li><li>é˜¿é‡Œäº‘ï¼š<code>http://mirrors.aliyun.com/pypi/simple/</code></li><li>ä¸­å›½ç§‘æŠ€å¤§å­¦ <code>https://pypi.mirrors.ustc.edu.cn/simple/</code></li><li>åä¸­ç†å·¥å¤§å­¦ï¼š<code>http://pypi.hustunique.com/</code></li><li>å±±ä¸œç†å·¥å¤§å­¦ï¼š<code>http://pypi.sdutlinux.org/</code></li><li>è±†ç“£ï¼š<code>http://pypi.douban.com/simple/</code></li></ul><h3 id="æ–‡ä»¶ä¿®æ”¹"><a href="#æ–‡ä»¶ä¿®æ”¹" class="headerlink" title="æ–‡ä»¶ä¿®æ”¹"></a>æ–‡ä»¶ä¿®æ”¹</h3><h4 id="Linux-Mac"><a href="#Linux-Mac" class="headerlink" title="Linux/Mac"></a>Linux/Mac</h4><p>ä¿®æ”¹ <code>~/.pip/pip.conf</code> (æ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åŠæ–‡ä»¶ã€‚æ–‡ä»¶å¤¹è¦åŠ <code>.</code>ï¼Œè¡¨ç¤ºæ˜¯éšè—æ–‡ä»¶å¤¹)</p><blockquote><p>å†…å®¹å¦‚ä¸‹</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">[global]<br>index-url = https://pypi.tuna.tsinghua.edu.cn/simple<br>[install]<br>trusted-host=mirrors.aliyun.com<br></code></pre></div></td></tr></table></figure><h4 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h4><p>ç›´æ¥åœ¨ user ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª pip ç›®å½•ï¼Œå¦‚ï¼š<code>C:\Users\xx\pip</code>ï¼Œæ–°å»ºæ–‡ä»¶<code>pip.ini</code>ã€‚å†…å®¹åŒä¸Šã€‚</p><h3 id="ç»ˆç«¯ä¿®æ”¹"><a href="#ç»ˆç«¯ä¿®æ”¹" class="headerlink" title="ç»ˆç«¯ä¿®æ”¹"></a>ç»ˆç«¯ä¿®æ”¹</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pip config <span class="hljs-built_in">set</span> global.index-url http://mirrors.aliyun.com/pypi/simple/ <span class="hljs-comment"># ç»ˆç«¯ä½¿ç”¨å‘½ä»¤è®¾ç½®pipé•œåƒ</span><br>pip install pip -U  <span class="hljs-comment"># å‡çº§pipåŒ…ç®¡ç†å·¥å…·</span><br></code></pre></div></td></tr></table></figure><h2 id="è™šæ‹Ÿç¯å¢ƒä¹‹pipenv"><a href="#è™šæ‹Ÿç¯å¢ƒä¹‹pipenv" class="headerlink" title="è™šæ‹Ÿç¯å¢ƒä¹‹pipenv"></a>è™šæ‹Ÿç¯å¢ƒä¹‹pipenv</h2><ol><li><p>å®‰è£…<code>pipenv</code></p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pip install pipenv<br></code></pre></div></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>pipenv</code>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># å°½é‡åœ¨ä¸€ä¸ªé¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span><br>pip install<br></code></pre></div></td></tr></table></figure></li><li><p>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># åœ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„ä½ç½®è¿è¡Œå‘½ä»¤</span><br>pipenv shell<br></code></pre></div></td></tr></table></figure></li><li><p>ä¿®æ”¹è™šæ‹Ÿç¯å¢ƒçš„é•œåƒæº</p><p> æ‰“å¼€è™šæ‹Ÿç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶: <code>Pipfile</code></p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">[[<span class="hljs-built_in">source</span>]]<br>name = <span class="hljs-string">&quot;pypi&quot;</span><br>url = <span class="hljs-string">&quot;https://pypi.org/simple&quot;</span><br>verify_ssl = <span class="hljs-literal">true</span><br>    <br>[dev-packages]<br>    <br>[packages]<br>    <br>[requires]<br>python_version = <span class="hljs-string">&quot;3.7&quot;</span><br></code></pre></div></td></tr></table></figure><p> ä¿®æ”¹urlä¸ºå›½å†…é•œåƒæº:</p><ul><li><p>æ¸…å: <code>https://pypi.tuna.tsinghua.edu.cn/simple</code></p></li><li><p>é˜¿é‡Œäº‘: <code>http://mirrors.aliyun.com/pypi/simple/</code></p></li><li><p>ä¸­å›½ç§‘æŠ€å¤§å­¦: <code>https://pypi.mirrors.ustc.edu.cn/simple/</code></p></li><li><p>åä¸­ç†å·¥å¤§å­¦: <code>http://pypi.hustunique.com/</code></p></li><li><p>å±±ä¸œç†å·¥å¤§å­¦: <code>http://pypi.sdutlinux.org/</code></p></li><li><p>è±†ç“£: <code>http://pypi.douban.com/simple/</code></p></li></ul></li><li><p>åœ¨è™šæ‹Ÿç¯å¢ƒå®‰è£…ç¬¬ä¸‰æ–¹åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pipenv install django<br></code></pre></div></td></tr></table></figure></li><li><p>ä½¿ç”¨pipenvå¸è½½ç¬¬ä¸‰æ–¹æ¨¡å—</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pipev uninstall django<br></code></pre></div></td></tr></table></figure></li><li><p>æŸ¥çœ‹ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pipenv graph<br></code></pre></div></td></tr></table></figure></li><li><p>å°†å®‰è£…çš„æ¨¡å—æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶å†…</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pip freeze &gt; requirements.txt<br></code></pre></div></td></tr></table></figure></li><li><p>å°†ä¸€ä¸ªæ–‡ä»¶å†…çš„ç¬¬ä¸‰æ–¹æ‰©å±•å®‰è£…åˆ°è™šæ‹Ÿç¯å¢ƒä¸­</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pip install -r requirements.txt<br></code></pre></div></td></tr></table></figure></li><li><p>é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">exit</span><br></code></pre></div></td></tr></table></figure></li><li><p>åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pipenv --rm<br></code></pre></div></td></tr></table></figure></li><li><p>ä¸æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼Œç›´æ¥è¿è¡Œå‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pipenv run django-amdin start project djangodemo<br></code></pre></div></td></tr></table></figure><h2 id="è™šæ‹Ÿç¯å¢ƒä¹‹virtualenv"><a href="#è™šæ‹Ÿç¯å¢ƒä¹‹virtualenv" class="headerlink" title="è™šæ‹Ÿç¯å¢ƒä¹‹virtualenv"></a>è™šæ‹Ÿç¯å¢ƒä¹‹virtualenv</h2></li><li><p>å®‰è£…<code>virtualenv</code></p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pip install virtualenv <span class="hljs-comment"># è™šæ‹Ÿç¯å¢ƒ</span><br>pip install virtualenvwrappern <span class="hljs-comment"># mac/linuxç³»ç»Ÿ</span><br>pip install virtualenvwrapper-win <span class="hljs-comment"># windowsç³»ç»Ÿ</span><br></code></pre></div></td></tr></table></figure></li><li><p>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mkvirtualenv django<br></code></pre></div></td></tr></table></figure></li><li><p>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># åœ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒåä¼šé»˜è®¤æ¿€æ´»</span><br>workon django  <span class="hljs-comment"># æ¿€æ´»djangoè™šæ‹Ÿç¯å¢ƒ</span><br>workon  <span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰è™šæ‹Ÿç¯å¢ƒ</span><br></code></pre></div></td></tr></table></figure></li><li><p>ä¿®æ”¹è™šæ‹Ÿç¯å¢ƒçš„é•œåƒæº</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pip config <span class="hljs-built_in">set</span> global.index-url http://mirrors.aliyun.com/pypi/simple/ <span class="hljs-comment"># ç»ˆç«¯ä½¿ç”¨å‘½ä»¤è®¾ç½®pipé•œåƒ</span><br>pip install pip -U  <span class="hljs-comment"># å‡çº§pipåŒ…ç®¡ç†å·¥å…·</span><br></code></pre></div></td></tr></table></figure></li><li><p>åœ¨è™šæ‹Ÿç¯å¢ƒå®‰è£…ç¬¬ä¸‰æ–¹åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pip install django  <span class="hljs-comment"># å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span><br></code></pre></div></td></tr></table></figure></li><li><p>å¸è½½ç¬¬ä¸‰æ–¹æ¨¡å—</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pip uninstall django <span class="hljs-comment"># å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span><br></code></pre></div></td></tr></table></figure></li><li><p>å°†å®‰è£…çš„æ¨¡å—æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶å†…</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pip freeze &gt; requirements.txt<br></code></pre></div></td></tr></table></figure></li><li><p>å°†ä¸€ä¸ªæ–‡ä»¶å†…çš„ç¬¬ä¸‰æ–¹æ‰©å±•å®‰è£…åˆ°è™šæ‹Ÿç¯å¢ƒä¸­</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pip install -r requirements.txt<br></code></pre></div></td></tr></table></figure></li><li><p>é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">exit</span><br></code></pre></div></td></tr></table></figure></li><li><p>åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">rmvirtualenv django<br></code></pre></div></td></tr></table></figure><h2 id="è™šæ‹Ÿç¯å¢ƒä¹‹conda"><a href="#è™šæ‹Ÿç¯å¢ƒä¹‹conda" class="headerlink" title="è™šæ‹Ÿç¯å¢ƒä¹‹conda"></a>è™šæ‹Ÿç¯å¢ƒä¹‹conda</h2></li></ol><h3 id="1-Anacondaç®€ä»‹"><a href="#1-Anacondaç®€ä»‹" class="headerlink" title="1. Anacondaç®€ä»‹"></a>1. Anacondaç®€ä»‹</h3><ul><li><p>Anacondaæ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„pythonåŒ…ç®¡ç†å’Œç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¸€èˆ¬ç”¨æ¥é…ç½®ä¸åŒçš„é¡¹ç›®ç¯å¢ƒã€‚</p></li><li><p>Anacondaé€šè¿‡ç®¡ç†å·¥å…·åŒ…ã€å¼€å‘ç¯å¢ƒã€Pythonç‰ˆæœ¬ï¼Œå¤§å¤§ç®€åŒ–äº†ä½ çš„å·¥ä½œæµç¨‹ã€‚ä¸ä»…å¯ä»¥æ–¹ä¾¿åœ°å®‰è£…ã€æ›´æ–°ã€å¸è½½å·¥å…·åŒ…ï¼Œè€Œä¸”å®‰è£…æ—¶èƒ½è‡ªåŠ¨å®‰è£…ç›¸åº”çš„ä¾èµ–åŒ…ï¼ŒåŒæ—¶è¿˜èƒ½ä½¿ç”¨ä¸åŒçš„è™šæ‹Ÿç¯å¢ƒéš”ç¦»ä¸åŒè¦æ±‚çš„é¡¹ç›®ã€‚</p></li><li><p>Anaconda é•œåƒä½¿ç”¨å¸®åŠ©</p><ul><li><p>Anaconda æ˜¯ä¸€ä¸ªç”¨äºç§‘å­¦è®¡ç®—çš„ Python å‘è¡Œç‰ˆï¼Œæ”¯æŒ Linux, Mac, Windows, åŒ…å«äº†ä¼—å¤šæµè¡Œçš„ç§‘å­¦è®¡ç®—ã€æ•°æ®åˆ†æçš„ Python åŒ…ã€‚</p></li><li><p>Anaconda å®‰è£…åŒ…å¯ä»¥åˆ° <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</a> ä¸‹è½½ã€‚</p></li></ul></li><li><p>Miniconda é•œåƒä½¿ç”¨å¸®åŠ©</p><ul><li><p>Miniconda æ˜¯ä¸€ä¸ª Anaconda çš„è½»é‡çº§æ›¿ä»£ï¼Œé»˜è®¤åªåŒ…å«äº† python å’Œ condaï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ pip å’Œ conda æ¥å®‰è£…æ‰€éœ€è¦çš„åŒ…ã€‚</p></li><li><p>Miniconda å®‰è£…åŒ…å¯ä»¥åˆ° <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/</a> ä¸‹è½½ã€‚</p></li></ul></li></ul><h3 id="2-Anacondaå®‰è£…"><a href="#2-Anacondaå®‰è£…" class="headerlink" title="2. Anacondaå®‰è£…"></a>2. Anacondaå®‰è£…</h3><ul><li><p>Windowså®‰è£…</p><ul><li><p>ç‚¹å‡»å®‰è£…æ–‡ä»¶<code>Anaconda3-2019.07-Windows-x86_64.exe</code>,é€‰æ‹©å®‰è£…è·¯å¾„,å¦‚<code>D:\python\Anaconda</code>,ç„¶åä¸€ç›´nextå³å¯ã€‚</p></li><li><p><strong>é…ç½®ç¯å¢ƒå˜é‡:</strong> å°†å®‰è£…çš„æ ¹è·¯å¾„,å¦‚<code>D:\python\Anaconda</code>å’Œ<code>scripts</code>æ–‡ä»¶å¤¹è·¯å¾„<code>D:\python\Anaconda\scripts</code>æ·»åŠ åˆ°ç”µè„‘ç¯å¢ƒå˜é‡ä¹‹ä¸­</p></li></ul></li><li><p>Linux/Macå®‰è£…</p><ul><li><p>å°†å®‰è£…æ–‡ä»¶<code>Anaconda3-2019.07-Linux-x86_64.sh</code>ç§»åŠ¨åˆ°ç”¨æˆ·å®¶ç›®å½•</p></li><li><p>åœ¨ç”¨æˆ·å®¶ç›®å½•,æ‰“å¼€ç»ˆç«¯,æ‰§è¡Œ<code>./Anaconda3-2019.07-Linux-x86_64.sh</code>,ç„¶åè¾“å…¥yes,ä¸€è·¯å›è½¦å³å¯ã€‚</p></li><li><p><strong>é…ç½®ç¯å¢ƒå˜é‡:</strong></p><ul><li><p>æ‰“å¼€.bashrc æ–‡ä»¶,åœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤:</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">vi ~/.bashrc<br></code></pre></div></td></tr></table></figure></li><li><p>è¾“å…¥Gï¼Œè·³è½¬åˆ°æ–‡ä»¶æœ«å°¾,åœ¨æ–‡ä»¶æœ€åä¸€è¡Œæ–°å¢ç¯å¢ƒå˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> PATH=~/anaconda3/bin:<span class="hljs-variable">$PATH</span><br></code></pre></div></td></tr></table></figure></li><li><p>ä¿®æ”¹å®Œæˆ,å…ˆæŒ‰escé”®è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œç„¶åæŒ‰<code>shift+ï¼š</code>è¿›å…¥æœ«è¡Œæ¨¡å¼ï¼Œè¾“å…¥<code>wq</code>,ä¿å­˜é€€å‡º</p></li><li><p>åœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤,ä½¿å…¶ç«‹å³ç”Ÿæ•ˆ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></div></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šåœ¨Macä¸­ï¼Œä¿®æ”¹æ–‡ä»¶<code>.bash_profile</code>,å…¶ä½™å’ŒLinuxæ“ä½œä¸€æ ·</p></blockquote></li></ul></li></ul></li></ul><h3 id="3-ä¿®æ”¹Anacondaé•œåƒæº"><a href="#3-ä¿®æ”¹Anacondaé•œåƒæº" class="headerlink" title="3. ä¿®æ”¹Anacondaé•œåƒæº"></a>3. ä¿®æ”¹Anacondaé•œåƒæº</h3><ul><li><p>Anacondaé»˜è®¤è®¿é—®å›½å¤–æœåŠ¡å™¨ï¼Œç½‘é€Ÿè¾ƒæ…¢ï¼Œæ•…éœ€è¦ä¿®æ”¹é»˜è®¤é•œåƒ</p></li><li><p>TUNA è¿˜æä¾›äº† Anaconda ä»“åº“ä¸ç¬¬ä¸‰æ–¹æºï¼ˆconda-forgeã€msys2ã€pytorchç­‰ï¼ŒæŸ¥çœ‹å®Œæ•´åˆ—è¡¨ï¼‰çš„é•œåƒï¼Œå„ç³»ç»Ÿéƒ½å¯ä»¥é€šè¿‡ä¿®æ”¹ç”¨æˆ·ç›®å½•ä¸‹çš„ .condarc æ–‡ä»¶:</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">channels:<br>  - defaults<br>show_channel_urls: <span class="hljs-literal">true</span><br>channel_alias: https://mirrors.tuna.tsinghua.edu.cn/anaconda<br>default_channels:<br>  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main<br>  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free<br>  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r<br>  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/pro<br>  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2<br>custom_channels:<br>  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud<br>  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud<br>  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud<br>  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud<br>  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud<br>  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud<br></code></pre></div></td></tr></table></figure><p>å³å¯æ·»åŠ  Anaconda Python å…è´¹ä»“åº“ã€‚Windows ç”¨æˆ·æ— æ³•ç›´æ¥åˆ›å»ºåä¸º <code>.condarc</code> çš„æ–‡ä»¶ï¼Œå¯å…ˆæ‰§è¡Œ <code>conda config --set show_channel_urls yes</code> ç”Ÿæˆè¯¥æ–‡ä»¶ä¹‹åå†ä¿®æ”¹ã€‚</p></li></ul><h3 id="4-AncondaåŸºæœ¬ä½¿ç”¨"><a href="#4-AncondaåŸºæœ¬ä½¿ç”¨" class="headerlink" title="4. AncondaåŸºæœ¬ä½¿ç”¨"></a>4. AncondaåŸºæœ¬ä½¿ç”¨</h3><h4 id="ç®¡ç†ç¯å¢ƒ"><a href="#ç®¡ç†ç¯å¢ƒ" class="headerlink" title="ç®¡ç†ç¯å¢ƒ"></a>ç®¡ç†ç¯å¢ƒ</h4><ul><li><p>æ£€æŸ¥condaç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda --version<br></code></pre></div></td></tr></table></figure></li><li><p>å‡çº§å½“å‰ç‰ˆæœ¬conda</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda update conda<br></code></pre></div></td></tr></table></figure></li><li><p>ç®¡ç†ï¼ˆè™šæ‹Ÿï¼‰ç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªåä¸ºpython37çš„ç¯å¢ƒï¼ŒæŒ‡å®šPythonç‰ˆæœ¬æ˜¯3.7ï¼ˆä¸ç”¨ç®¡æ˜¯3.7.xï¼Œcondaä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨å¯»æ‰¾3.7.xä¸­çš„æœ€æ–°ç‰ˆæœ¬ï¼‰</span><br>conda create --name python37 python=3.7<br><br><span class="hljs-comment"># å®‰è£…å¥½åï¼Œä½¿ç”¨activateæ¿€æ´»æŸä¸ªç¯å¢ƒ</span><br>activate python37 <span class="hljs-comment"># for Windows</span><br><span class="hljs-built_in">source</span> activate python37 <span class="hljs-comment"># for Linux &amp; Mac</span><br><span class="hljs-comment"># æ¿€æ´»åï¼Œä¼šå‘ç°terminalè¾“å…¥çš„åœ°æ–¹å¤šäº†python37çš„å­—æ ·</span><br><br><span class="hljs-comment"># å¦‚æœæƒ³è¿”å›é»˜è®¤çš„pythonç¯å¢ƒï¼Œè¿è¡Œ</span><br>deactivate python37 <span class="hljs-comment"># for Windows</span><br><span class="hljs-built_in">source</span> deactivate python37 <span class="hljs-comment"># for Linux &amp; Mac</span><br><br><span class="hljs-comment"># åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç¯å¢ƒ</span><br>conda remove --name python37 --all<br><br><span class="hljs-comment"># å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨condaå‘½ä»¤æ›¿æ¢sourceå‘½ä»¤ç”¨æ¥æ¿€æ´»å’Œå…³é—­ç¯å¢ƒ</span><br>conda activate python37<br>conda deactivate<br><br><span class="hljs-comment"># å–æ¶ˆæ¯æ¬¡æ‰“å¼€ç»ˆç«¯ï¼Œé»˜è®¤æ¿€æ´»bashç¯å¢ƒ</span><br>conda config --<span class="hljs-built_in">set</span> auto_activate_base <span class="hljs-literal">false</span><br><br><span class="hljs-comment"># é‡æ–°æ¿€æ´»æ¯æ¬¡æ‰“å¼€ç»ˆç«¯ï¼Œé»˜è®¤è¿›å…¥baseç¯å¢ƒ</span><br>conda config --<span class="hljs-built_in">set</span> auto_activate_base <span class="hljs-literal">true</span><br><br></code></pre></div></td></tr></table></figure><p>æ–°çš„å¼€å‘ç¯å¢ƒä¼šè¢«é»˜è®¤å®‰è£…åœ¨ä½ condaç›®å½•ä¸‹çš„envsæ–‡ä»¶ç›®å½•ä¸‹ã€‚</p><p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šå®‰è£…pythonçš„ç‰ˆæœ¬ï¼Œcondaä¼šå®‰è£…æˆ‘ä»¬æœ€åˆå®‰è£…condaæ—¶æ‰€è£…çš„é‚£ä¸ªç‰ˆæœ¬çš„pythonã€‚</p></li><li><p>åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda info -e<br>conda info â€“-envs<br></code></pre></div></td></tr></table></figure><blockquote><p>æ³¨æ„:condaä¼šå¯¹å½“å‰æ´»åŠ¨çš„ç¯å¢ƒè¿½åŠ æ˜Ÿå·æ ‡è®°ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">macdeMacBook-Pro:~ mac$ conda info -e<br><span class="hljs-comment"># conda environments:</span><br><span class="hljs-comment">#</span><br>base                  *  /Users/mac/anaconda3<br>myenv                    /Users/mac/anaconda3/envs/myenv<br>py3                      /Users/mac/anaconda3/envs/py3<br></code></pre></div></td></tr></table></figure></li><li><p>å¤åˆ¶ä¸€ä¸ªç¯å¢ƒ<br>é€šè¿‡å…‹éš†æ¥å¤åˆ¶ä¸€ä¸ªç¯å¢ƒã€‚è¿™å„¿å°†é€šè¿‡å…‹éš†py3æ¥åˆ›å»ºä¸€ä¸ªç§°ä¸ºpy32çš„å‰¯æœ¬ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda create -n py32 --<span class="hljs-built_in">clone</span> py3<br></code></pre></div></td></tr></table></figure><p>é€šè¿‡</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda info â€“-envs<br></code></pre></div></td></tr></table></figure><p>æ¥æ£€æŸ¥ç¯å¢ƒã€‚</p></li><li><p>é‡å‘½åenv</p><p>condaæ˜¯æ²¡æœ‰é‡å‘½åç¯å¢ƒçš„åŠŸèƒ½çš„, è¦å®ç°è¿™ä¸ªåŸºæœ¬éœ€æ±‚, åªèƒ½é€šè¿‡æ„šè ¢çš„å…‹éš†-åˆ é™¤çš„è¿‡ç¨‹ã€‚</p><p>åˆ‡è®°ä¸è¦ç›´æ¥mvç§»åŠ¨ç¯å¢ƒçš„æ–‡ä»¶å¤¹æ¥é‡å‘½å, ä¼šå¯¼è‡´ä¸€ç³»åˆ—æ— æ³•æƒ³è±¡çš„é”™è¯¯çš„å‘ç”Ÿ!</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda create --name newname --<span class="hljs-built_in">clone</span> oldname      <span class="hljs-comment"># å…‹éš†ç¯å¢ƒ</span><br>conda remove --name oldname --all      <span class="hljs-comment"># å½»åº•åˆ é™¤æ—§ç¯å¢ƒ</span><br></code></pre></div></td></tr></table></figure></li><li><p>åˆ†äº«ç¯å¢ƒ</p><p>å¦‚æœä½ æƒ³æŠŠä½ å½“å‰çš„ç¯å¢ƒé…ç½®ä¸åˆ«äººåˆ†äº«ï¼Œè¿™æ ·taå¯ä»¥å¿«é€Ÿå»ºç«‹ä¸€ä¸ªä¸ä½ ä¸€æ¨¡ä¸€æ ·çš„ç¯å¢ƒï¼ˆåŒä¸€ä¸ªç‰ˆæœ¬çš„pythonåŠå„ç§åŒ…ï¼‰æ¥å…±åŒå¼€å‘/è¿›è¡Œæ–°çš„å®éªŒã€‚</p><p><strong>ä¸€ä¸ªåˆ†äº«ç¯å¢ƒçš„å¿«é€Ÿæ–¹æ³•å°±æ˜¯ç»™taä¸€ä¸ªä½ çš„ç¯å¢ƒçš„.ymlæ–‡ä»¶ã€‚</strong></p><p>é¦–å…ˆé€šè¿‡activate target_envè¦åˆ†äº«çš„ç¯å¢ƒtarget_envï¼Œç„¶åè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ä¼šåœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªenvironment.ymlæ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda env <span class="hljs-built_in">export</span> &gt; environment.yml<br></code></pre></div></td></tr></table></figure><p>å°ä¼™ä¼´æ‹¿åˆ°environment.ymlæ–‡ä»¶åï¼Œå°†è¯¥æ–‡ä»¶æ”¾åœ¨å·¥ä½œç›®å½•ä¸‹ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä»è¯¥æ–‡ä»¶åˆ›å»ºç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda env create -f environment.yml<br></code></pre></div></td></tr></table></figure><h4 id="ç®¡ç†åŒ…"><a href="#ç®¡ç†åŒ…" class="headerlink" title="ç®¡ç†åŒ…"></a>ç®¡ç†åŒ…</h4></li><li><p>condaå®‰è£…å’Œç®¡ç†pythonåŒ…éå¸¸æ–¹ä¾¿ï¼Œå¯ä»¥åœ¨æŒ‡å®šçš„pythonç¯å¢ƒä¸­å®‰è£…åŒ…ï¼Œä¸”è‡ªåŠ¨å®‰è£…æ‰€éœ€è¦çš„ä¾èµ–åŒ…ï¼Œé¿å…äº†å¾ˆå¤šæ‹“å±•åŒ…å†²çªå…¼å®¹é—®é¢˜ã€‚</p></li><li><p><strong>ä¸å»ºè®®ä½¿ç”¨easy_installå®‰è£…åŒ…</strong>ã€‚å¤§éƒ¨åˆ†åŒ…éƒ½å¯ä»¥ä½¿ç”¨condaå®‰è£…ï¼Œæ— æ³•ä½¿ç”¨condaå’Œanaconda.orgå®‰è£…çš„åŒ…å¯ä»¥é€šè¿‡pipå‘½ä»¤å®‰è£…</p></li><li><p>ä½¿ç”¨åˆé€‚çš„æºå¯ä»¥æå‡å®‰è£…çš„é€Ÿåº¦</p></li><li><p>æŸ¥çœ‹å·²å®‰è£…åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda list<br></code></pre></div></td></tr></table></figure><p>ä½¿ç”¨è¿™æ¡å‘½ä»¤æ¥æŸ¥çœ‹å“ªä¸ªç‰ˆæœ¬çš„pythonæˆ–å…¶ä»–ç¨‹åºå®‰è£…åœ¨äº†è¯¥ç¯å¢ƒä¸­ï¼Œæˆ–è€…ç¡®ä¿æŸäº›åŒ…å·²ç»è¢«å®‰è£…äº†æˆ–è¢«åˆ é™¤äº†ã€‚</p></li><li><p>å‘æŒ‡å®šç¯å¢ƒå®‰è£…åŒ…<br>æˆ‘ä»¬åœ¨æŒ‡å®šç¯å¢ƒä¸­å®‰è£…requestsåŒ…ï¼Œæœ‰ä¸¤ç§æ–¹å¼:</p><ul><li><p>ç›´æ¥é€šè¿‡-né€‰é¡¹æŒ‡å®šå®‰è£…ç¯å¢ƒçš„åå­—</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda install --name py3 requests<br></code></pre></div></td></tr></table></figure><blockquote><p>æç¤ºï¼šä½ å¿…é¡»å‘Šè¯‰condaä½ è¦å®‰è£…ç¯å¢ƒçš„åå­—ï¼ˆ-n py3ï¼‰å¦åˆ™å®ƒå°†ä¼šè¢«å®‰è£…åˆ°å½“å‰ç¯å¢ƒä¸­ã€‚</p></blockquote></li><li><p>æ¿€æ´»py3ç¯å¢ƒï¼Œå†ä½¿ç”¨conda installå‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda activate py3<br>conda install requests<br></code></pre></div></td></tr></table></figure></li></ul></li><li><p>é€šè¿‡pipå‘½ä»¤</p><p>å¯¹äºé‚£äº›æ— æ³•é€šè¿‡condaå®‰è£…æˆ–è€…ä»Anaconda.orgè·å¾—çš„åŒ…ï¼Œæˆ‘ä»¬é€šå¸¸å¯ä»¥ç”¨pipå‘½ä»¤æ¥å®‰è£…åŒ…ã€‚</p><p>å¯ä»¥ä¸Špypiç½‘ç«™æŸ¥è¯¢è¦å®‰è£…çš„åŒ…ï¼ŒæŸ¥å¥½ä»¥åè¾“å…¥pip installå‘½ä»¤å°±å¯ä»¥å®‰è£…è¿™ä¸ªåŒ…äº†ã€‚</p><p>æˆ‘ä»¬æ¿€æ´»æƒ³è¦æ”¾ç½®ç¨‹åºçš„pythonç¯å¢ƒï¼Œç„¶åé€šè¿‡pipå®‰è£…ä¸€ä¸ªå«â€œPyMysqlâ€çš„åŒ…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># Linux, OS X</span><br><span class="hljs-built_in">source</span> activate bunnies<br><br><span class="hljs-comment"># Windows</span><br>activate py3<br><span class="hljs-comment"># å®‰è£…</span><br>pip install pymysql<br></code></pre></div></td></tr></table></figure><p>pipåªæ˜¯ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼Œæ‰€ä»¥å®ƒä¸èƒ½ä¸ºä½ ç®¡ç†ç¯å¢ƒã€‚pipç”šè‡³ä¸èƒ½å‡çº§pythonï¼Œå› ä¸ºå®ƒä¸åƒcondaä¸€æ ·æŠŠpythonå½“åšåŒ…æ¥å¤„ç†ã€‚ä½†æ˜¯å®ƒå¯ä»¥å®‰è£…ä¸€äº›condaå®‰è£…ä¸äº†çš„åŒ…ã€‚</p><blockquote><p>å°æŠ€å·§ï¼šåœ¨ä»»ä½•æ—¶å€™ä½ å¯ä»¥é€šè¿‡åœ¨å‘½ä»¤åè¾¹è·Ÿä¸Š-helpæ¥è·å¾—è¯¥å‘½ä»¤çš„å®Œæ•´æ–‡æ¡£ã€‚å¾ˆå¤šè·Ÿåœ¨â€“åè¾¹å¸¸ç”¨çš„å‘½ä»¤é€‰é¡¹ï¼Œå¯ä»¥è¢«ç•¥å†™ä¸ºä¸€ä¸ªçŸ­çº¿åŠ å‘½ä»¤é¦–å­—æ¯ã€‚æ‰€ä»¥â€“nameé€‰é¡¹å’Œ-nçš„ä½œç”¨æ˜¯ä¸€æ ·çš„ã€‚é€šè¿‡conda -hæˆ–conda â€“-helpæ¥çœ‹å¤§é‡çš„ç¼©å†™ã€‚</p></blockquote></li></ul><h4 id="ç§»é™¤åŒ…ã€ç¯å¢ƒã€æˆ–è€…conda"><a href="#ç§»é™¤åŒ…ã€ç¯å¢ƒã€æˆ–è€…conda" class="headerlink" title="ç§»é™¤åŒ…ã€ç¯å¢ƒã€æˆ–è€…conda"></a>ç§»é™¤åŒ…ã€ç¯å¢ƒã€æˆ–è€…conda</h4><ul><li><p>ç§»é™¤åŒ…</p><p>å‡è®¾ä½ å†³å®šä¸å†ä½¿ç”¨åŒ…pymysqlã€‚ä½ å¯ä»¥åœ¨py3ç¯å¢ƒä¸­ç§»é™¤å®ƒã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda remove -n py3 pymysql<br></code></pre></div></td></tr></table></figure></li><li><p>ç§»é™¤ç¯å¢ƒ</p><p>æˆ‘ä»¬ä¸å†éœ€è¦snakesç¯å¢ƒäº†ï¼Œå¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">conda remove -n myenv --all<br></code></pre></div></td></tr></table></figure></li><li><p>åˆ é™¤conda</p><ul><li><p>Linux/OS Xï¼š</p><p>ç§»é™¤Anaconda æˆ– Miniconda å®‰è£…æ–‡ä»¶å¤¹</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">rm -rf ~/miniconda<br><span class="hljs-comment"># OR</span><br>rm -rf ~/anaconda<br></code></pre></div></td></tr></table></figure></li><li><p>Windowsï¼š<br>å»æ§åˆ¶é¢æ¿ï¼Œç‚¹å‡»â€œæ·»åŠ æˆ–åˆ é™¤ç¨‹åºâ€ï¼Œé€‰æ‹©â€œPython2.7/3.6ï¼ˆAnacondaï¼‰â€æˆ–â€œPython2.7/3.6ï¼ˆMinicondaï¼‰â€å¹¶ç‚¹å‡»åˆ é™¤ç¨‹åºã€‚</p></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> virtualenv </tag>
            
            <tag> pipenv </tag>
            
            <tag> conda </tag>
            
            <tag> è™šæ‹Ÿç¯å¢ƒ </tag>
            
            <tag> pip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DRF-åç«¯è·¨åŸŸ</title>
      <link href="2020/03/17/drf-hou-duan-kua-yu/"/>
      <url>2020/03/17/drf-hou-duan-kua-yu/</url>
      
        <content type="html"><![CDATA[<p>å‰åç«¯åˆ†ç¦»å¼€å‘æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯<code>è·¨åŸŸé—®é¢˜</code>,å› ä¸ºè¿™æ—¶å€™å‰ç«¯å’Œåç«¯çš„ä»£ç æ˜¯åœ¨ä¸åŒæœºå™¨ä¸Šè¿è¡Œçš„ï¼Œä¸¤ä¸ªåœ°å€ä¸åœ¨ä¸€ä¸ªåŸŸåä¸‹ï¼Œè¿™ä¸ªæ—¶å€™å‰ç«¯è„šæœ¬åœ¨è¿›è¡Œajaxè®¿é—®çš„æ—¶å€™æµè§ˆå™¨å°±ä¼šæŠ¥è·¨åŸŸç›¸å…³çš„é”™è¯¯ã€‚</p><p>åŸå› ï¼šæµè§ˆå™¨çš„åŒæºç­–ç•¥ä¸å…è®¸è·¨åŸŸè®¿é—®ï¼Œæ‰€è°“åŒæºç­–ç•¥æ˜¯æŒ‡åè®®ã€åŸŸåã€ç«¯å£ç›¸åŒã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨å‰ç«¯å’Œåå°é…ç½®å‡å¯ï¼Œæ­¤æ—¶ï¼Œä»¥åå°djangoé…ç½®ä¸ºä¾‹</p><h2 id="1-å®‰è£…æ’ä»¶"><a href="#1-å®‰è£…æ’ä»¶" class="headerlink" title="1. å®‰è£…æ’ä»¶"></a>1. å®‰è£…æ’ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">pip install django-cors-headers<br></code></pre></div></td></tr></table></figure><h2 id="2-æ³¨å†Œåº”ç”¨"><a href="#2-æ³¨å†Œåº”ç”¨" class="headerlink" title="2. æ³¨å†Œåº”ç”¨"></a>2. æ³¨å†Œåº”ç”¨</h2><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">INSTALLED_APPS = [<br>    ...<br>    <span class="hljs-string">&#x27;corsheaders&#x27;</span>,<br>    ...<br>]<br></code></pre></div></td></tr></table></figure><h2 id="3-ä¸­é—´ä»¶è®¾ç½®"><a href="#3-ä¸­é—´ä»¶è®¾ç½®" class="headerlink" title="3. ä¸­é—´ä»¶è®¾ç½®"></a>3. ä¸­é—´ä»¶è®¾ç½®</h2><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">MIDDLEWARE = [<br>    ...<br>    <span class="hljs-string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;corsheaders.middleware.CorsMiddleware&#x27;</span>,  <span class="hljs-comment"># æ³¨æ„ï¼Œä½ç½®æœ‰é™åˆ¶</span><br>    <span class="hljs-string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,<br>    ...<br>]<br></code></pre></div></td></tr></table></figure><h2 id="4-é…ç½®è·¨åŸŸå‚æ•°"><a href="#4-é…ç½®è·¨åŸŸå‚æ•°" class="headerlink" title="4. é…ç½®è·¨åŸŸå‚æ•°"></a>4. é…ç½®è·¨åŸŸå‚æ•°</h2><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">CORS_ORIGIN_ALLOW_ALL = <span class="hljs-literal">True</span>  <span class="hljs-comment"># å…è®¸æ‰€æœ‰hostè®¿é—®</span><br><span class="hljs-comment"># æ·»åŠ ç™½åå•</span><br>CORS_ORIGIN_WHITELIST = (<br>    <span class="hljs-string">&#x27;127.0.0.1:8080&#x27;</span>,<br>    <span class="hljs-string">&#x27;localhost:8080&#x27;</span>,<br>)<br><span class="hljs-comment"># ä»¥ä¸Šé…ç½®äºŒé€‰ä¸€å³å¯</span><br><br>CORS_ALLOW_CREDENTIALS = <span class="hljs-literal">True</span>  <span class="hljs-comment"># å…è®¸æºå¸¦cookie,ä¸éœ€è¦å¯ä»¥ä¸è®¾ç½®</span><br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> DRF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è·¨åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DRF-æ•°æ®åˆ†é¡µ</title>
      <link href="2020/03/16/drf-shu-ju-fen-ye/"/>
      <url>2020/03/16/drf-shu-ju-fen-ye/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å½“éœ€è¦å±•ç¤ºçš„æ•°æ®è¿‡å¤šæ—¶ï¼Œå°±éœ€è¦å°†å…¨éƒ¨æ•°æ®åˆ†æ‰¹æ˜¾ç¤ºï¼Œè¿™å°±éœ€è¦ç”¨åˆ° <strong>åˆ†é¡µ</strong> åŠŸèƒ½</p></blockquote><h2 id="Djangoå†…ç½®åˆ†é¡µ"><a href="#Djangoå†…ç½®åˆ†é¡µ" class="headerlink" title="Djangoå†…ç½®åˆ†é¡µ"></a>Djangoå†…ç½®åˆ†é¡µ</h2><p>åœ¨DRFæä¾›çš„APIè§†å›¾ä¸­ï¼Œå¹¶ä¸æ”¯æŒ <code>pagination_class</code> åˆ†é¡µå±æ€§ï¼Œå› æ­¤ï¼Œéœ€è¦åˆ†é¡µï¼Œåªèƒ½ä½¿ç”¨djangoå†…ç½®çš„åˆ†é¡µå™¨ <code>Paginator</code> ã€‚</p><p>Paginator ç±»çš„ä½œç”¨æ˜¯å°†æˆ‘ä»¬éœ€è¦åˆ†é¡µçš„æ•°æ®åˆ†å‰²æˆè‹¥å¹²ä»½ã€‚å½“æˆ‘ä»¬å®ç°åŒ–ä¸€ä¸ª Paginator ç±»çš„å®ä¾‹æ—¶ï¼Œéœ€è¦ç»™ Paginator ä¼ å…¥ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°æ®æºï¼Œå¯ä»¥æ˜¯<strong>ä¸€ä¸ªåˆ—è¡¨ã€å…ƒç»„ã€ä»¥åŠæŸ¥è¯¢ç»“æœé›† QuerySet</strong>ã€‚ç¬¬äºŒä¸ªå‚æ•°<strong>éœ€è¦ä¼ å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ¯é¡µæ˜¾ç¤ºæ•°æ®æ¡æ•°</strong>ã€‚å…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š</p><h3 id="å¯¼å…¥åˆ†é¡µæ¨¡å—"><a href="#å¯¼å…¥åˆ†é¡µæ¨¡å—" class="headerlink" title="å¯¼å…¥åˆ†é¡µæ¨¡å—"></a>å¯¼å…¥åˆ†é¡µæ¨¡å—</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.core.paginator <span class="hljs-keyword">import</span> Paginator<br></code></pre></div></td></tr></table></figure><h3 id="è·å–querysetå¯¹è±¡"><a href="#è·å–querysetå¯¹è±¡" class="headerlink" title="è·å–querysetå¯¹è±¡"></a>è·å–querysetå¯¹è±¡</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">goods_list = Goods.objects.<span class="hljs-built_in">all</span>().order_by(<span class="hljs-string">&#x27;id&#x27;</span>)<br></code></pre></div></td></tr></table></figure><h3 id="å®ä¾‹åŒ–åˆ†é¡µç±»å¯¹è±¡"><a href="#å®ä¾‹åŒ–åˆ†é¡µç±»å¯¹è±¡" class="headerlink" title="å®ä¾‹åŒ–åˆ†é¡µç±»å¯¹è±¡"></a>å®ä¾‹åŒ–åˆ†é¡µç±»å¯¹è±¡</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">paginator = Paginator(goods_list, <span class="hljs-number">2</span>)<br></code></pre></div></td></tr></table></figure><h4 id="Paginatorç±»å¯¹è±¡çš„å±æ€§"><a href="#Paginatorç±»å¯¹è±¡çš„å±æ€§" class="headerlink" title="Paginatorç±»å¯¹è±¡çš„å±æ€§"></a>Paginatorç±»å¯¹è±¡çš„å±æ€§</h4><table><thead><tr><th>åºå·</th><th>å±æ€§å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>num_pages</td><td>è¿”å›åˆ†é¡µä¹‹åçš„æ€»é¡µæ•°</td></tr><tr><td>2</td><td>page_range</td><td>è¿”å›åˆ†é¡µåçš„é¡µç åˆ—è¡¨</td></tr><tr><td>3</td><td>count</td><td>éœ€è¦åˆ†é¡µçš„æ€»è®°å½•æ•°</td></tr></tbody></table><h4 id="Paginatorç±»å¯¹è±¡çš„æ–¹æ³•"><a href="#Paginatorç±»å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="Paginatorç±»å¯¹è±¡çš„æ–¹æ³•"></a>Paginatorç±»å¯¹è±¡çš„æ–¹æ³•</h4><table><thead><tr><th>åºå·</th><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>get_page(self, number)</td><td>è¿”å›ç¬¬numberé¡µçš„pageç±»å®ä¾‹å¯¹è±¡</td></tr></tbody></table><h4 id="Pageå®ä¾‹å¯¹è±¡çš„å±æ€§"><a href="#Pageå®ä¾‹å¯¹è±¡çš„å±æ€§" class="headerlink" title="Pageå®ä¾‹å¯¹è±¡çš„å±æ€§"></a>Pageå®ä¾‹å¯¹è±¡çš„å±æ€§</h4><table><thead><tr><th>åºå·</th><th>å±æ€§å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>number</td><td>è¿”å›å½“å‰é¡µçš„é¡µç </td></tr><tr><td>2</td><td>object_list</td><td>è¿”å›å½“å‰é¡µçš„æ•°æ®æŸ¥è¯¢é›†</td></tr><tr><td>3</td><td>paginator</td><td>è¿”å›å¯¹åº”çš„<strong>Paginator</strong>ç±»å¯¹è±¡</td></tr></tbody></table><h4 id="pageå®ä¾‹å¯¹è±¡çš„æ–¹æ³•"><a href="#pageå®ä¾‹å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="pageå®ä¾‹å¯¹è±¡çš„æ–¹æ³•"></a>pageå®ä¾‹å¯¹è±¡çš„æ–¹æ³•</h4><table><thead><tr><th>åºå·</th><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>has_previous</td><td>åˆ¤æ–­å½“å‰é¡µæ˜¯å¦æœ‰å‰ä¸€é¡µ</td></tr><tr><td>2</td><td>has_next</td><td>åˆ¤æ–­å½“å‰é¡µæ˜¯å¦æœ‰ä¸‹ä¸€é¡µ</td></tr><tr><td>3</td><td>previous_page_number</td><td>è¿”å›å‰ä¸€é¡µçš„é¡µç </td></tr><tr><td>4</td><td>next_page_number</td><td>è¿”å›ä¸‹ä¸€é¡µçš„é¡µç </td></tr></tbody></table><h3 id="åˆ†é¡µåŠŸèƒ½å®ç°"><a href="#åˆ†é¡µåŠŸèƒ½å®ç°" class="headerlink" title="åˆ†é¡µåŠŸèƒ½å®ç°"></a>åˆ†é¡µåŠŸèƒ½å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.response <span class="hljs-keyword">import</span> Response<br><span class="hljs-keyword">from</span> rest_framework.views <span class="hljs-keyword">import</span> APIView<br><span class="hljs-keyword">from</span> school.serializers <span class="hljs-keyword">import</span> *<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StudentsAPIView</span>(<span class="hljs-params">APIView</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>        page_number = request.GET.get(<span class="hljs-string">&#x27;page&#x27;</span>, <span class="hljs-number">1</span>)  <span class="hljs-comment"># è·å–å®¢æˆ·ç«¯å‘é€çš„é¡µç ï¼Œé»˜è®¤ä¸º1</span><br>        page_size = request.GET.get(<span class="hljs-string">&#x27;page_size&#x27;</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># è·å–å®¢æˆ·ç«¯å‘é€çš„æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ä¸º1</span><br>        <span class="hljs-keyword">try</span>:<br>            page_number = <span class="hljs-built_in">int</span>(page_number)  <span class="hljs-comment"># å¤„ç†é¡µç ï¼Œ è¿‡æ»¤æ— æ•ˆçš„æ•°æ®</span><br>        <span class="hljs-keyword">except</span>:<br>            page_number = <span class="hljs-number">1</span><br><br>        goods_set = Student.objects.<span class="hljs-built_in">all</span>().order_by(<span class="hljs-string">&#x27;id&#x27;</span>)<br><br>        paginator = Paginator(goods_set, page_size)  <span class="hljs-comment"># å¾—åˆ°åˆ†é¡µå™¨å¯¹è±¡</span><br>        page = paginator.get_page(page_number)  <span class="hljs-comment"># å¾—åˆ°å½“å‰é¡µç å¯¹è±¡</span><br><br>        ser = StudentSerializer(page.object_list, many=<span class="hljs-literal">True</span>)<br><br>        <span class="hljs-keyword">return</span> Response(ser.data)<br></code></pre></div></td></tr></table></figure><h2 id="DRF-åˆ†é¡µ"><a href="#DRF-åˆ†é¡µ" class="headerlink" title="DRF åˆ†é¡µ"></a>DRF åˆ†é¡µ</h2><blockquote><p>  RESTæ¡†æ¶åŒ…æ‹¬å¯¹å¯å®šåˆ¶çš„åˆ†é¡µæ ·å¼çš„æ”¯æŒã€‚</p></blockquote><h3 id="åˆ†é¡µç±»"><a href="#åˆ†é¡µç±»" class="headerlink" title="åˆ†é¡µç±»"></a>åˆ†é¡µç±»</h3><h4 id="PageNumberPaginationï¼š"><a href="#PageNumberPaginationï¼š" class="headerlink" title="PageNumberPaginationï¼š"></a>PageNumberPaginationï¼š</h4><p>å¯ä»¥è¿›è¡Œç›´æ¥çš„é¡µç å¤„ç†ï¼Œè¿”å›æŸä¸€é¡µåˆ†é¡µæ•°æ®</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">http://127.0.0.1:8000/user/?page=2<br><span class="hljs-comment"># pageï¼šå½“å‰çš„é¡µç </span><br></code></pre></div></td></tr></table></figure><blockquote><p>é™¤äº†é»˜è®¤çš„åˆ†é¡µæ ·å¼ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ç»§æ‰¿åˆ†é¡µç±»çš„æ–¹å¼é‡å†™åˆ†é¡µæ ·å¼</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.pagination <span class="hljs-keyword">import</span> PageNumberPagination<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">class</span> <span class="hljs-title">PagerPagination</span>(<span class="hljs-params">PageNumberPagination</span>):</span><br>    max_page_size = <span class="hljs-number">3</span>  <span class="hljs-comment"># æ¯é¡µæœ€å¤§æ•°ç›®</span><br>    page_size = <span class="hljs-number">1</span>  <span class="hljs-comment"># é»˜è®¤æ¯é¡µæ•°ç›®</span><br>    page_query_param = <span class="hljs-string">&#x27;page&#x27;</span>  <span class="hljs-comment"># é¡µç å…³é”®å­—åï¼Œ é»˜è®¤ä¸º&quot;page&quot;</span><br>    page_size_query_param = <span class="hljs-string">&#x27;size&#x27;</span>  <span class="hljs-comment"># æ¯é¡µæ•°ç›®å…³é”®å­—å, ï¼Œé»˜è®¤ä¸ºNone</span><br></code></pre></div></td></tr></table></figure><h4 id="LimitOffsetPagination"><a href="#LimitOffsetPagination" class="headerlink" title="LimitOffsetPagination"></a>LimitOffsetPagination</h4><p>å¯ä»¥é€šè¿‡è¿æ¥å¯é€‰çš„å‚æ•°è¿›è¡Œåˆ†é¡µå•é¡µæ•°é‡å¤§å°çš„æ§åˆ¶ï¼Œåˆ†é¡µæ•°æ®åç§»çš„é€‰æ‹©</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">http://127.0.0.1:8000/path/?limit=2&amp;offset=2<br><span class="hljs-comment"># limitï¼šæ¯é¡µçš„æ•°æ®å¤§å°</span><br><span class="hljs-comment"># offsetï¼šä»æŸä¸€ä¸ªæ•°æ®ä½ç½®å¼€å§‹åç§»</span><br></code></pre></div></td></tr></table></figure><blockquote><p>é™¤äº†é»˜è®¤çš„åˆ†é¡µæ ·å¼ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ç»§æ‰¿åˆ†é¡µç±»çš„æ–¹å¼é‡å†™åˆ†é¡µæ ·å¼</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.pagination <span class="hljs-keyword">import</span> LimitOffsetPagination<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LimitPagination</span>(<span class="hljs-params">LimitOffsetPagination</span>):</span><br>    max_limit = <span class="hljs-number">2</span>  <span class="hljs-comment"># æœ€å¤§limité™åˆ¶ï¼Œé»˜è®¤None</span><br>    default_limit = <span class="hljs-number">1</span>  <span class="hljs-comment"># é»˜è®¤é™åˆ¶ï¼Œå’Œpage_sizeä½œç”¨ä¸€æ ·</span><br>    limit_query_param = <span class="hljs-string">&#x27;limit&#x27;</span>  <span class="hljs-comment"># å‚æ•°åï¼Œé»˜è®¤limit</span><br>    offset_query_param = <span class="hljs-string">&#x27;offset&#x27;</span>  <span class="hljs-comment"># å‚æ•°åï¼Œé»˜è®¤offset</span><br></code></pre></div></td></tr></table></figure><h4 id="è‡ªå®šä¹‰åˆ†é¡µç±»"><a href="#è‡ªå®šä¹‰åˆ†é¡µç±»" class="headerlink" title="è‡ªå®šä¹‰åˆ†é¡µç±»"></a>è‡ªå®šä¹‰åˆ†é¡µç±»</h4><blockquote><p>  å¯ä»¥ç»§æ‰¿çˆ¶ç±»ï¼Œå¹¶é‡å†™å“åº”å¯¹è±¡</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> OrderedDict<br><span class="hljs-keyword">from</span> rest_framework.pagination <span class="hljs-keyword">import</span> PageNumberPagination<br><span class="hljs-keyword">from</span> rest_framework.response <span class="hljs-keyword">import</span> Response<br><span class="hljs-keyword">from</span> rest_framework.utils.urls <span class="hljs-keyword">import</span> replace_query_param<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Pagination</span>(<span class="hljs-params">PageNumberPagination</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_num_pages_link</span>(<span class="hljs-params">self</span>):</span><br>        url = self.request.build_absolute_uri()<br>        num_pages = self.page.paginator.num_pages<br>        <span class="hljs-keyword">return</span> [replace_query_param(url, self.page_query_param, page) <span class="hljs-keyword">for</span> page <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, num_pages + <span class="hljs-number">1</span>)]<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_paginated_response</span>(<span class="hljs-params">self, data</span>):</span><br>        <span class="hljs-keyword">return</span> Response(OrderedDict([<br>            (<span class="hljs-string">&#x27;count&#x27;</span>, self.page.paginator.count),<br>            (<span class="hljs-string">&#x27;num_pages&#x27;</span>, self.page.paginator.num_pages),  <span class="hljs-comment"># åˆ†é¡µçš„æ€»é¡µç </span><br>            (<span class="hljs-string">&#x27;next&#x27;</span>, self.get_next_link()),<br>            (<span class="hljs-string">&#x27;previous&#x27;</span>, self.get_previous_link()),<br>            (<span class="hljs-string">&#x27;pages&#x27;</span>, self.get_num_pages_link()),  <span class="hljs-comment"># æ‰€æœ‰åˆ†é¡µçš„é“¾æ¥</span><br>            (<span class="hljs-string">&#x27;results&#x27;</span>, data)<br>        ]))<br><br></code></pre></div></td></tr></table></figure><h3 id="åˆ†é¡µåº”ç”¨"><a href="#åˆ†é¡µåº”ç”¨" class="headerlink" title="åˆ†é¡µåº”ç”¨"></a>åˆ†é¡µåº”ç”¨</h3><h4 id="å…¨å±€åˆ†é¡µ"><a href="#å…¨å±€åˆ†é¡µ" class="headerlink" title="å…¨å±€åˆ†é¡µ"></a>å…¨å±€åˆ†é¡µ</h4><blockquote><p><strong>æ³¨æ„</strong>ï¼šéœ€è¦ä¿®æ”¹Djangoçš„å…¨å±€é…ç½®æ–‡ä»¶ <code>settings.py</code></p></blockquote><p>åˆ†é¡µæ ·å¼å¯ä»¥ä½¿ç”¨<code>DEFAULT_PAGINATION_CLASS</code>å’Œ<code>PAGE_SIZE</code>è®¾ç½®é”®è¿›è¡Œå…¨å±€è®¾ç½®ã€‚</p><p>ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨å†…ç½®çš„é™åˆ¶/åç§»åˆ†é¡µï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">REST_FRAMEWORK = &#123;<br>    <span class="hljs-string">&#x27;DEFAULT_PAGINATION_CLASS&#x27;</span>:<br>        <span class="hljs-string">&#x27;rest_framework.pagination.LimitOffsetPagination&#x27;</span>,  <span class="hljs-comment"># æŒ‡æ˜åˆ†é¡µç±»</span><br>        <span class="hljs-comment"># &#x27;rest_framework.pagination.PageNumberPagination&#x27;,</span><br>        <span class="hljs-comment"># &#x27;utils.pagination.Pagination&#x27;, # è‡ªå®šä¹‰åˆ†é¡µç±»</span><br>    <br>    <span class="hljs-string">&#x27;PAGE_SIZE&#x27;</span>: <span class="hljs-number">2</span>  <span class="hljs-comment"># æ¯é¡µæ•°ç›®</span><br>&#125;<br></code></pre></div></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œæ‚¨éœ€è¦åŒæ—¶è®¾ç½®åˆ†é¡µç±»å’Œåº”ä½¿ç”¨çš„é¡µé¢å¤§å°ã€‚</p><h4 id="å±€éƒ¨åˆ†é¡µ"><a href="#å±€éƒ¨åˆ†é¡µ" class="headerlink" title="å±€éƒ¨åˆ†é¡µ"></a>å±€éƒ¨åˆ†é¡µ</h4><p>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨<code>pagination_class</code>å±æ€§åœ¨å•ä¸ªè§†å›¾ä¸Šè®¾ç½®åˆ†é¡µç±»ã€‚é…ç½®å®Œäº†ï¼Œå¦‚æœä¸æƒ³ç”¨ï¼Œé‚£ä¹ˆå°±ç›´æ¥åœ¨è§†å›¾ç±»ä¸‹ä½¿ç”¨å¦‚ä¸‹å±æ€§å…³é—­å…¨å±€åˆ†é¡µåŠŸèƒ½</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.generics <span class="hljs-keyword">import</span> ListCreateAPIView<br><span class="hljs-keyword">from</span> .serializer <span class="hljs-keyword">import</span> BookSerializer<br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> BookModel<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BookListView</span>(<span class="hljs-params">ListCreateAPIView</span>):</span><br>    serializer_class = BookSerializer<br>    queryset = BookModel.objects.<span class="hljs-built_in">all</span>()<br>    pagination_class = <span class="hljs-literal">None</span>  <span class="hljs-comment"># æŒ‡å®šåˆ†é¡µç±»ï¼Œä¸ºNoneï¼Œå³å½“å‰è§†å›¾ä¸åˆ†é¡µ</span><br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> DRF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†é¡µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django-å›¾ç‰‡ä¸Šä¼ </title>
      <link href="2020/03/16/django-tu-pian-shang-chuan/"/>
      <url>2020/03/16/django-tu-pian-shang-chuan/</url>
      
        <content type="html"><![CDATA[<h2 id="å›¾ç‰‡ä¸Šä¼ "><a href="#å›¾ç‰‡ä¸Šä¼ " class="headerlink" title="å›¾ç‰‡ä¸Šä¼ "></a>å›¾ç‰‡ä¸Šä¼ </h2><p>static å’Œ media éƒ½æ˜¯å­˜æ”¾æ–‡ä»¶çš„åœ°æ–¹ï¼Œä½†æ˜¯åˆæœ‰åŒºåˆ«ï¼Œä»¥ä¸‹æ˜¯ä¸¤ä¸ªæ–‡ä»¶å¤¹çš„åŒºåˆ«å’Œç”¨æ³•</p><h3 id="static"><a href="#static" class="headerlink" title="static"></a>static</h3><h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>static æ˜¯é™æ€æ–‡ä»¶ï¼Œä¸»è¦å­˜çš„æ˜¯ CSS, JavaScript, ç½‘ç«™ logo ç­‰ä¸å˜çš„æ–‡ä»¶ã€‚</p><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>é…ç½® <code>settings.py</code></p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">STATIC_URL = <span class="hljs-string">&#x27;/static/&#x27;</span>  <span class="hljs-comment"># é™æ€æ–‡ä»¶åˆ«åï¼ˆç›¸å¯¹è·¯å¾„ï¼‰ å’Œ ç»å¯¹è·¯å¾„</span><br>STATICFILES_DIRS = [<br>    os.path.join(BASE_DIR, <span class="hljs-string">&#x27;app01/static&#x27;</span>),<br>]<br><span class="hljs-comment"># STATIC_ROOT é…ç½®éƒ¨ç½²çš„æ—¶å€™æ‰ç”¨</span><br></code></pre></div></td></tr></table></figure><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>åœ¨é¡¹ç›®ä¸­å°†æ¨¡æ¿å±‚ç”¨åˆ°çš„é™æ€æ–‡ä»¶éƒ½æ”¾å…¥è¯¥æ–‡ä»¶å¤¹ä¸­</p><h3 id="media"><a href="#media" class="headerlink" title="media"></a>media</h3><h4 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>media ä¸»è¦ç”¨æ¥ä¿å­˜ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä¾‹å¦‚å›¾ç‰‡ç­‰</p><h4 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>é…ç½® <code>settings.py</code></p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">MEDIA_URL = <span class="hljs-string">&quot;/media/&quot;</span>   <span class="hljs-comment"># åª’ä½“æ–‡ä»¶åˆ«å(ç›¸å¯¹è·¯å¾„) å’Œ ç»å¯¹è·¯å¾„</span><br>MEDIA_ROOT = [<br>    os.path.join(BASE_DIR, <span class="hljs-string">&#x27;app01/media&#x27;</span>)<br>]<br></code></pre></div></td></tr></table></figure><p>é…ç½®è·¯ç”±</p><ul><li><p>åœ¨å­åº”ç”¨æ­£å¸¸é…ç½®è·¯ç”±</p>  <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> app01.views <span class="hljs-keyword">import</span> *<br>app_name = <span class="hljs-string">&#x27;goods&#x27;</span><br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;goods/&#x27;</span>, GoodsCreateView.as_view(), name=<span class="hljs-string">&#x27;create&#x27;</span>),<br>    path(<span class="hljs-string">&#x27;&#x27;</span>, IndexView.as_view(), name=<span class="hljs-string">&#x27;index&#x27;</span>),<br>]<br></code></pre></div></td></tr></table></figure></li><li><p>åœ¨é¡¹ç›®çš„ä¸»è·¯ç”±ä¸­å¯¹å›¾ç‰‡ä¸Šä¼ çš„è·¯å¾„ä¿¡æ¯è¿›è¡Œé…ç½®</p>  <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.conf.urls.static <span class="hljs-keyword">import</span> static<br><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin<br><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path, include<br><span class="hljs-keyword">from</span> django01 <span class="hljs-keyword">import</span> settings<br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;admin/&#x27;</span>, admin.site.urls),<br>    path(<span class="hljs-string">&#x27;&#x27;</span>, include(<span class="hljs-string">&#x27;app01.urls&#x27;</span>)),<br>] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)<br><span class="hljs-comment"># å¯¹å¤–å±•ç¤ºå›¾ç‰‡çš„åœ°å€ä¿¡æ¯</span><br></code></pre></div></td></tr></table></figure></li></ul><h3 id="æ¨¡å‹ç±»"><a href="#æ¨¡å‹ç±»" class="headerlink" title="æ¨¡å‹ç±»"></a>æ¨¡å‹ç±»</h3><ul><li><p>å®šä¹‰åŒ…å«å›¾ç‰‡å­—æ®µçš„æ¨¡å‹ç±»</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Goods</span>(<span class="hljs-params">models.Model</span>):</span><br>    name = models.CharField(max_length=<span class="hljs-number">20</span>, verbose_name=<span class="hljs-string">&quot;åç§°&quot;</span>)<br>    price = models.DecimalField(max_digits=<span class="hljs-number">7</span>, decimal_places=<span class="hljs-number">2</span>, verbose_name=<span class="hljs-string">&quot;å•ä»·&quot;</span>)<br>    nums = models.IntegerField(verbose_name=<span class="hljs-string">&quot;æ•°é‡&quot;</span>)<br>    img = models.ImageField(upload_to=<span class="hljs-string">&#x27;img&#x27;</span>, verbose_name=<span class="hljs-string">&quot;å›¾ç‰‡&quot;</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">&quot;tb_goods&quot;</span><br>        verbose_name = <span class="hljs-string">&quot;å•†å“&quot;</span><br>        verbose_name_plural = verbose_name<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.name<br></code></pre></div></td></tr></table></figure></li></ul><h3 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h3><h4 id="æ·»åŠ é¡µé¢"><a href="#æ·»åŠ é¡µé¢" class="headerlink" title="æ·»åŠ é¡µé¢"></a>æ·»åŠ é¡µé¢</h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&#123;% url &#x27;goods:create&#x27; %&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;</span><br>    &#123;% csrf_token %&#125;<br>    åç§°:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    ä»·æ ¼:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;price&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    æ•°é‡:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;nums&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    å›¾ç‰‡:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;img&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h4 id="å±•ç¤ºé¡µé¢"><a href="#å±•ç¤ºé¡µé¢" class="headerlink" title="å±•ç¤ºé¡µé¢"></a>å±•ç¤ºé¡µé¢</h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>    &#123;% for good in goods %&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; good.id &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; good.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; good.price &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; good.nums &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/media/&#123;&#123; good.img &#125;&#125;&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 300px;height: 200px&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    &#123;% endfor %&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h3 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h3><h4 id="æ·»åŠ å•†å“"><a href="#æ·»åŠ å•†å“" class="headerlink" title="æ·»åŠ å•†å“"></a>æ·»åŠ å•†å“</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render, redirect<br><span class="hljs-keyword">from</span> django.views <span class="hljs-keyword">import</span> View<br><span class="hljs-keyword">from</span> app01.models <span class="hljs-keyword">import</span> Goods<br><br><br><span class="hljs-comment"># Create your views here.</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GoodsCreateView</span>(<span class="hljs-params">View</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>        <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;goods.html&#x27;</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">post</span>(<span class="hljs-params">self, request</span>):</span><br>        name = request.POST.get(<span class="hljs-string">&#x27;name&#x27;</span>)<br>        price = request.POST.get(<span class="hljs-string">&#x27;price&#x27;</span>)<br>        nums = request.POST.get(<span class="hljs-string">&#x27;nums&#x27;</span>)<br>        img = request.FILES.get(<span class="hljs-string">&#x27;img&#x27;</span>)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">all</span>([name, price, nums, img]):<br>            <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">&#x27;goods:create&#x27;</span>)<br><br>        <span class="hljs-keyword">try</span>:<br>            Goods.objects.create(name=name, price=price, nums=nums, img=img)<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            print(e)<br>            <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">&#x27;goods:create&#x27;</span>)<br>        <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">&#x27;goods:index&#x27;</span>)<br></code></pre></div></td></tr></table></figure><h4 id="å±•ç¤ºå•†å“"><a href="#å±•ç¤ºå•†å“" class="headerlink" title="å±•ç¤ºå•†å“"></a>å±•ç¤ºå•†å“</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IndexView</span>(<span class="hljs-params">View</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>        goods = Goods.objects.<span class="hljs-built_in">all</span>()<br><br>        <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;index.html&#x27;</span>, context=&#123;<span class="hljs-string">&#x27;goods&#x27;</span>: goods&#125;)<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¨¡æ¿ </tag>
            
            <tag> å›¾ç‰‡ä¸Šä¼  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DRF-JWTè®¤è¯ã€æƒé™ã€é™æµ</title>
      <link href="2020/03/15/drf-jwt-ren-zheng-quan-xian-xian-liu/"/>
      <url>2020/03/15/drf-jwt-ren-zheng-quan-xian-xian-liu/</url>
      
        <content type="html"><![CDATA[<p>ä¸»è¦ä»¥ Django+DRF + Vueçš„å¼€å‘æ¨¡å¼ï¼Œç®€å•ä»‹ç»ä»¥ jwtä½œä¸ºå‡­è¯ï¼Œå®ç° ç”¨æˆ·æ³¨å†Œã€ç™»å½• ä¸€ç³»åˆ—æµç¨‹</p><h2 id="ä»¥-Django-ä½œä¸ºæœåŠ¡ç«¯"><a href="#ä»¥-Django-ä½œä¸ºæœåŠ¡ç«¯" class="headerlink" title="ä»¥ Django ä½œä¸ºæœåŠ¡ç«¯"></a>ä»¥ Django ä½œä¸ºæœåŠ¡ç«¯</h2><h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">pip install django  django-cors-headers djangorestframework djangorestframework-jwt<br></code></pre></div></td></tr></table></figure><h3 id="é¡¹ç›®é…ç½®ä¿¡æ¯"><a href="#é¡¹ç›®é…ç½®ä¿¡æ¯" class="headerlink" title="é¡¹ç›®é…ç½®ä¿¡æ¯"></a>é¡¹ç›®é…ç½®ä¿¡æ¯</h3><blockquote><p><code>djangodemo/settings.py</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">INSTALLED_APPS = [<br>   ...,<br>    <span class="hljs-string">&#x27;rest_framework&#x27;</span>,<br>    <span class="hljs-string">&#x27;corsheaders&#x27;</span>,<br>    <span class="hljs-string">&#x27;users&#x27;</span><br>]<br><br>MIDDLEWARE = [<br>    <span class="hljs-string">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;corsheaders.middleware.CorsMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,<br>    <span class="hljs-comment"># &#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;,</span><br>    <span class="hljs-string">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span>,<br>]<br><br><span class="hljs-comment"># è·¨åŸŸå‚æ•°,å…è®¸æ‰€æœ‰æºè®¿é—®</span><br>CORS_ORIGIN_ALLOW_ALL = <span class="hljs-literal">True</span><br><br><span class="hljs-comment"># è‡ªå®šä¹‰ç”¨æˆ·æ¨¡å‹ç±»</span><br>AUTH_USER_MODEL = <span class="hljs-string">&#x27;users.UserModel&#x27;</span><br></code></pre></div></td></tr></table></figure><h3 id="ç”¨æˆ·æ¨¡å‹ç±»"><a href="#ç”¨æˆ·æ¨¡å‹ç±»" class="headerlink" title="ç”¨æˆ·æ¨¡å‹ç±»"></a>ç”¨æˆ·æ¨¡å‹ç±»</h3><blockquote><p><code>users/models.py</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><span class="hljs-keyword">from</span> django.contrib.auth.models <span class="hljs-keyword">import</span> AbstractUser<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserModel</span>(<span class="hljs-params">AbstractUser</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;ç»§æ‰¿djangoå†…ç½®çš„ç”¨æˆ·ç±»ï¼Œå¹¶é‡å†™ï¼Œæ³¨æ„ï¼šå¿…é¡»åœ¨settings.pyä¸­æŒ‡æ˜&quot;&quot;&quot;</span><br>    phone = models.CharField(max_length=<span class="hljs-number">11</span>, unique=<span class="hljs-literal">True</span>, verbose_name=<span class="hljs-string">&#x27;æ‰‹æœº&#x27;</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        ordering = [<span class="hljs-string">&#x27;id&#x27;</span>]<br>        db_table = <span class="hljs-string">&#x27;db_user&#x27;</span><br>        verbose_name = <span class="hljs-string">&#x27;ç”¨æˆ·&#x27;</span><br>        verbose_name_plural = <span class="hljs-string">&#x27;ç”¨æˆ·&#x27;</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.username<br></code></pre></div></td></tr></table></figure><h3 id="åºåˆ—åŒ–ç±»"><a href="#åºåˆ—åŒ–ç±»" class="headerlink" title="åºåˆ—åŒ–ç±»"></a>åºåˆ—åŒ–ç±»</h3><blockquote><p><code>users/ser.py</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework <span class="hljs-keyword">import</span> serializers<br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> UserModel<br><span class="hljs-keyword">from</span> django.contrib.auth.hashers <span class="hljs-keyword">import</span> make_password<br><span class="hljs-keyword">import</span> re<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserSerializer</span>(<span class="hljs-params">serializers.ModelSerializer</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span>(<span class="hljs-params">self, validated_data</span>):</span><br>        <span class="hljs-keyword">return</span> UserModel.objects.create_user(**validated_data)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update</span>(<span class="hljs-params">self, instance, validated_data</span>):</span><br>        instance.username = validated_data.get(<span class="hljs-string">&#x27;username&#x27;</span>, instance.username)<br>        instance.phone = validated_data.get(<span class="hljs-string">&#x27;phone&#x27;</span>, instance.phone)<br>        instance.email = validated_data.get(<span class="hljs-string">&#x27;email&#x27;</span>, instance.email)<br><br>        password = validated_data[<span class="hljs-string">&#x27;password&#x27;</span>]<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> password:<br>            instance.password = make_password(password)<br><br>        instance.save()<br><br>        <span class="hljs-keyword">return</span> instance<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_password</span>(<span class="hljs-params">self, value</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        éªŒè¯å¯†ç ä¸èƒ½å…¨æ˜¯å°å†™å­—æ¯ï¼Œä¸èƒ½å…¨æ˜¯å¤§å†™å­—æ¯ï¼Œä¹Ÿä¸èƒ½å…¨æ˜¯æ•°å­—</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> re.match(<span class="hljs-string">r&#x27;(?!^\d*$)(?![a-z]$)(?![A-Z]$).&#123;6,&#125;$&#x27;</span>, value):<br>            <span class="hljs-keyword">raise</span> serializers.ValidationError(<span class="hljs-string">&#x27;å¯†ç ç­‰çº§ä¸å¤Ÿ&#x27;</span>)<br>        <span class="hljs-keyword">return</span> value<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_phone</span>(<span class="hljs-params">self, value</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ ¡éªŒæ‰‹æœºå·æ˜¯å¦åˆæ³•</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> re.match(<span class="hljs-string">r&#x27;1[3-7]\d&#123;9&#125;$&#x27;</span>, value):<br>            <span class="hljs-keyword">raise</span> serializers.ValidationError(<span class="hljs-string">&#x27;æ‰‹æœºå·ä¸åˆæ³•&#x27;</span>)<br>        <span class="hljs-keyword">return</span> value<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        model = UserModel<br>        fields = (<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;username&#x27;</span>, <span class="hljs-string">&#x27;phone&#x27;</span>, <span class="hljs-string">&#x27;password&#x27;</span>, <span class="hljs-string">&#x27;email&#x27;</span>)<br>        read_only_fields = (<span class="hljs-string">&#x27;id&#x27;</span>,)<br>        extra_kwargs = &#123;<br>            <span class="hljs-string">&#x27;password&#x27;</span>: &#123;<br>                <span class="hljs-string">&#x27;write_only&#x27;</span>: <span class="hljs-literal">True</span><br>            &#125;<br>        &#125;<br></code></pre></div></td></tr></table></figure><h3 id="æ³¨å†Œ"><a href="#æ³¨å†Œ" class="headerlink" title="æ³¨å†Œ"></a>æ³¨å†Œ</h3><h4 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h4><blockquote><p>  <code>users/views.py</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.generics <span class="hljs-keyword">import</span> GenericAPIView<br><span class="hljs-keyword">from</span> rest_framework.mixins <span class="hljs-keyword">import</span> CreateModelMixin<br><span class="hljs-keyword">from</span> users.ser <span class="hljs-keyword">import</span> UserSerializer, UserModel<br><br><br><span class="hljs-comment"># åˆ›å»ºæ³¨å†Œè§†å›¾ç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RegisterView</span>(<span class="hljs-params">GenericAPIView, CreateModelMixin</span>):</span><br>    queryset = UserModel.objects.<span class="hljs-built_in">all</span>()<br>    serializer_class = UserSerializer<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">post</span>(<span class="hljs-params">self, request, *args, **kwargs</span>):</span><br>        <span class="hljs-keyword">return</span> self.create(request, *args, **kwargs)<br></code></pre></div></td></tr></table></figure><h4 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> .views <span class="hljs-keyword">import</span> *<br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;register/&#x27;</span>, RegisterView.as_view()), <span class="hljs-comment"># æ³¨å†Œè·¯ç”±  </span><br>]<br></code></pre></div></td></tr></table></figure><h3 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h3><h4 id="è‡ªå®šä¹‰Djangoç™»å½•éªŒè¯"><a href="#è‡ªå®šä¹‰Djangoç™»å½•éªŒè¯" class="headerlink" title="è‡ªå®šä¹‰Djangoç™»å½•éªŒè¯"></a>è‡ªå®šä¹‰Djangoç™»å½•éªŒè¯</h4><p>é»˜è®¤djangoåªæ”¯æŒç”¨æˆ·åå’Œå¯†ç ç™»å½•ï¼Œæƒ³è¦æ”¯æŒå¤šç§æ–¹å¼ç™»å½•ï¼Œå¿…é¡»é‡å†™è®¤è¯ç±»</p><blockquote><p><code>users/utils.py</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> UserModel<br><span class="hljs-keyword">from</span> django.contrib.auth.backends <span class="hljs-keyword">import</span> ModelBackend<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserModelBackend</span>(<span class="hljs-params">ModelBackend</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;useréªŒè¯&quot;&quot;&quot;</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">authenticate</span>(<span class="hljs-params">self, request, username=<span class="hljs-literal">None</span>, password=<span class="hljs-literal">None</span>, **kwargs</span>):</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&#x27;^1[3-9]\d&#123;9&#125;$&#x27;</span>, username):<br>                user = UserModel.objects.get(phone=username)<br>            <span class="hljs-keyword">else</span>:<br>                user = UserModel.objects.get(username=username)<br>        <span class="hljs-keyword">except</span> UserModel.DoesNotExist:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">if</span> user.check_password(password) <span class="hljs-keyword">and</span> self.user_can_authenticate(user):<br>            <span class="hljs-keyword">return</span> user<br></code></pre></div></td></tr></table></figure><h4 id="è‡ªå®šä¹‰è¿”å›æ•°æ®"><a href="#è‡ªå®šä¹‰è¿”å›æ•°æ®" class="headerlink" title="è‡ªå®šä¹‰è¿”å›æ•°æ®"></a>è‡ªå®šä¹‰è¿”å›æ•°æ®</h4><blockquote><p>ç™»å½•æˆåŠŸï¼Œéœ€è¦ç”ŸæˆJWTï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œä¹‹åçš„è®¤è¯é€šè¿‡ç”Ÿæˆçš„jwtå®ç°</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># rest_framework_jwtæ’ä»¶å·²ç»å†…ç½®äº†ç™»å½•è§†å›¾ï¼Œç™»å½•æˆåŠŸï¼Œè¿”å›JWT,æ³¨æ„ï¼Œé»˜è®¤ç™»å½•æˆåŠŸåªä¼šè¿”å›tokenï¼Œå¦‚æœæƒ³è¦å…¶ä»–ç”¨æˆ·ä¿¡æ¯ï¼Œå¿…é¡»è‡ªå®šä¹‰è¿”å›æ•°æ®</span><br>rest_framework_jwt.views.obtain_jwt_token <br><br><span class="hljs-comment"># rest_framework_jwtæ’ä»¶å·²ç»å†…ç½®äº†åˆ·æ–°jwtè§†å›¾ï¼Œåœ¨ jwtå¤±æ•ˆä¹‹å‰ï¼Œè¿”å›æ–°çš„jwt</span><br>rest_framework_jwt.views.refresh_jwt_token<br></code></pre></div></td></tr></table></figure><blockquote><p><code>users/utils.py</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">jwt_response_payload_handler</span>(<span class="hljs-params">token, user=<span class="hljs-literal">None</span>, request=<span class="hljs-literal">None</span></span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è‡ªå®šä¹‰jwtè®¤è¯æˆåŠŸè¿”å›æ•°æ®</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-string">&#x27;token&#x27;</span>: token,<br>        <span class="hljs-string">&#x27;id&#x27;</span>: user.<span class="hljs-built_in">id</span>,<br>        <span class="hljs-string">&#x27;username&#x27;</span>: user.username<br>    &#125;<br></code></pre></div></td></tr></table></figure><h4 id="é…ç½®ä¿¡æ¯"><a href="#é…ç½®ä¿¡æ¯" class="headerlink" title="é…ç½®ä¿¡æ¯"></a>é…ç½®ä¿¡æ¯</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> datetime<br><br><span class="hljs-comment"># å¤šç§æ–¹å¼ç™»å½•éªŒè¯</span><br>AUTHENTICATION_BACKENDS = [<span class="hljs-string">&#x27;users.utils.UserModelBackend&#x27;</span>]<br><br><span class="hljs-comment"># JWTé…ç½®ä¿¡æ¯</span><br>JWT_AUTH = &#123;<br>    <span class="hljs-comment"># æŒ‡æ˜tokençš„æœ‰æ•ˆæœŸï¼Œ é»˜è®¤5åˆ†</span><br>    <span class="hljs-string">&#x27;JWT_EXPIRATION_DELTA&#x27;</span>: datetime.timedelta(minutes=<span class="hljs-number">5</span>),<br>    <span class="hljs-string">&#x27;JWT_ALLOW_REFRESH&#x27;</span>: <span class="hljs-literal">True</span>,<br>    <span class="hljs-comment"># åœ¨å¤šä¹…é—´éš”å†…å¯ä»¥ç”¨å®ƒæ¥åˆ·æ–°ä»¥ä¾¿è·å–æ–°çš„tokenï¼Œé»˜è®¤æ˜¯7å¤©</span><br>    <span class="hljs-string">&#x27;JWT_REFRESH_EXPIRATION_DELTA&#x27;</span>: datetime.timedelta(days=<span class="hljs-number">7</span>),<br>    <span class="hljs-comment"># å®¢æˆ·ç«¯é¦–å…ˆè°ƒç”¨obtain_jwt_tokenè¿›è¡Œç™»å½•æ“ä½œï¼Œ</span><br>    <span class="hljs-comment"># ä¹‹åå¿…é¡»æ¯éš”å°äº5åˆ†é’Ÿå°±åˆ·æ–°ä¸€æ¬¡tokenï¼Œæ‰èƒ½ä¿è¯ä¸æ‰çº¿ã€‚</span><br>    <span class="hljs-comment"># ç„¶è€Œå³ä½¿ä¸€ç›´ä¿æŒåœ¨çº¿ï¼Œä¸Šé™ä¹Ÿåªæœ‰7å¤©ï¼Œ7å¤©è¿‡åå¿…é¡»é‡æ–°ç™»å½•ï¼Œè¿™æ‰æ˜¯5mins + 7daysçš„ç¡®åˆ‡å«ä¹‰</span><br><br>    <span class="hljs-comment"># è‡ªå®šä¹‰jwtè®¤è¯æˆåŠŸè¿”å›æ•°æ®</span><br>    <span class="hljs-string">&#x27;JWT_RESPONSE_PAYLOAD_HANDLER&#x27;</span>: <span class="hljs-string">&#x27;users.utils.jwt_response_payload_handler&#x27;</span>,<br>&#125;<br></code></pre></div></td></tr></table></figure><h4 id="è·¯ç”±-1"><a href="#è·¯ç”±-1" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> rest_framework_jwt.views <span class="hljs-keyword">import</span> obtain_jwt_token, refresh_jwt_token<br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;login/&#x27;</span>, obtain_jwt_token), <span class="hljs-comment"># ç™»å½•è·¯ç”±</span><br>    path(<span class="hljs-string">&#x27;refresh/&#x27;</span>, refresh_jwt_token), <span class="hljs-comment"># åˆ·æ–°token</span><br>]<br></code></pre></div></td></tr></table></figure><h3 id="ä¸ªäººä¸­å¿ƒ"><a href="#ä¸ªäººä¸­å¿ƒ" class="headerlink" title="ä¸ªäººä¸­å¿ƒ"></a>ä¸ªäººä¸­å¿ƒ</h3><p>å½“å®¢æˆ·ç«¯è¯·æ±‚ä¸ªäººä¿¡æ¯æ—¶ï¼Œéœ€è¦æºå¸¦ä¸Šä¸€æ­¥ç”Ÿæˆçš„<code>token</code>ï¼Œå› æ­¤ï¼Œéœ€è¦åœ¨ æœåŠ¡ç«¯éªŒè¯<code>token</code>ï¼Œä»è€Œåˆ¤æ–­æ˜¯å¦å…è®¸è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ</p><h4 id="å…¨å±€è®¤è¯"><a href="#å…¨å±€è®¤è¯" class="headerlink" title="å…¨å±€è®¤è¯"></a>å…¨å±€è®¤è¯</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">REST_FRAMEWORK = &#123;<br>    <span class="hljs-comment"># æŒ‡å®šdrfè®¤è¯æœºåˆ¶</span><br>    <span class="hljs-string">&#x27;DEFAULT_AUTHENTICATION_CLASSES&#x27;</span>: [<br>        <span class="hljs-string">&#x27;rest_framework_jwt.authentication.JSONWebTokenAuthentication&#x27;</span>,  <span class="hljs-comment"># JWTè®¤è¯</span><br>        <span class="hljs-comment"># &#x27;rest_framework.authentication.SessionAuthentication&#x27;,  # sessionè®¤è¯</span><br>        <span class="hljs-comment"># &#x27;rest_framework.authentication.BasicAuthentication&#x27;,  # åŸºæœ¬è®¤è¯</span><br>    ]<br>&#125;<br></code></pre></div></td></tr></table></figure><h4 id="å±€éƒ¨è®¤è¯"><a href="#å±€éƒ¨è®¤è¯" class="headerlink" title="å±€éƒ¨è®¤è¯"></a>å±€éƒ¨è®¤è¯</h4><p>å¯ä»¥åœ¨å…·ä½“çš„è§†å›¾ä¸­é€šè¿‡<code>authentication_classes</code>å±æ€§æ¥è®¾ç½®</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework_jwt.authentication <span class="hljs-keyword">import</span> JSONWebTokenAuthentication<br><br><br><span class="hljs-comment"># ä¸ªäººä¿¡æ¯    </span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserInfoAPIView</span>(<span class="hljs-params">APIView</span>):</span><br>    authentication_classes = [JSONWebTokenAuthentication]  <span class="hljs-comment"># æŒ‡æ˜è®¤è¯ç±»</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>        user = request.user  <span class="hljs-comment"># åªè¦è®¤è¯æˆåŠŸï¼Œè¯·æ±‚å¯¹è±¡ä¸­å°±ä¼šå­˜åœ¨ userå¯¹è±¡</span><br>        ser = UserInfoSerializer(user)<br>        <span class="hljs-keyword">return</span> Response(ser.data)<br></code></pre></div></td></tr></table></figure><h3 id="è®¿é—®æƒé™"><a href="#è®¿é—®æƒé™" class="headerlink" title="è®¿é—®æƒé™"></a>è®¿é—®æƒé™</h3><p>ä¸Šé¢çš„è§†å›¾ï¼Œä»ç„¶å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå®¢æˆ·ç«¯å‘é€jwtï¼ŒæœåŠ¡å™¨å¯ä»¥æ­£å¸¸è§£æå‡ºç™»å½•ç”¨æˆ·ï¼›ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰å‘é€jwtï¼Œå†é€šè¿‡<code>request.user</code>è·å–ç”¨æˆ·å¯¹è±¡ï¼Œå°±ä¼šå‡ºé”™ã€‚å› æ­¤ï¼Œéœ€è¦å¯¹è¯¥åŠŸèƒ½è¿›è¡Œæƒé™éªŒè¯ï¼Œåªæœ‰ç™»å½•ç”¨æˆ·æ‰å¯ä»¥è®¿é—®ï¼Œå¦åˆ™ï¼Œå°±æ‹’ç»è®¿é—®</p><p>æ€»è€Œè¨€ä¹‹ï¼Œæƒé™æ§åˆ¶å¯ä»¥é™åˆ¶ç”¨æˆ·å¯¹äºè§†å›¾çš„è®¿é—®å’Œå¯¹äºå…·ä½“æ•°æ®å¯¹è±¡çš„è®¿é—®ã€‚</p><p>åœ¨æ‰§è¡Œè§†å›¾çš„<code>dispatch()</code>æ–¹æ³•å‰ï¼Œä¼šå…ˆè¿›è¡Œè§†å›¾è®¿é—®æƒé™çš„åˆ¤æ–­<br>åœ¨é€šè¿‡<code>get_object()</code>è·å–å…·ä½“å¯¹è±¡æ—¶ï¼Œä¼šè¿›è¡Œå¯¹è±¡è®¿é—®æƒé™çš„åˆ¤æ–­</p><p>æƒé™åˆ†ä¸ºå››ç±»ï¼š</p><ul><li><code>AllowAny</code>: å…è®¸æ‰€æœ‰ç”¨æˆ·ï¼Œ é»˜è®¤æƒé™</li><li><code>IsAuthenticated</code>: ä»…é€šè¿‡è®¤è¯çš„ç”¨æˆ·</li><li><code>IsAdminUser</code>: ä»…ç®¡ç†å‘˜ç”¨æˆ·</li><li><code>IsAuthenticatedOrReadOnly</code>: è®¤è¯çš„ç”¨æˆ·å¯ä»¥å®Œå…¨æ“ä½œï¼Œå¦åˆ™åªèƒ½<code>get</code>è¯»å–</li></ul><h4 id="å…¨å±€é…ç½®"><a href="#å…¨å±€é…ç½®" class="headerlink" title="å…¨å±€é…ç½®"></a>å…¨å±€é…ç½®</h4><p>å¯ä»¥åœ¨é¡¹ç›®çš„é…ç½®æ–‡ä»¶<code>settings.py</code>ä¸­è®¾ç½®é»˜è®¤çš„æƒé™ç®¡ç†ç±»</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">REST_FRAMEWORK = &#123;<br>    <span class="hljs-string">&#x27;DEFAULT_PERMISSION_CLASSES&#x27;</span>: (<br>        <span class="hljs-string">&#x27;rest_framework.permissions.IsAuthenticated&#x27;</span>,<br>    )<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å¦‚æœæœªæŒ‡æ˜ï¼Œåˆ™é‡‡ç”¨å¦‚ä¸‹é»˜è®¤é…ç½®</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">REST_FRAMEWORK = &#123;<br>    <span class="hljs-string">&#x27;DEFAULT_PERMISSION_CLASSES&#x27;</span>: (<br>        <span class="hljs-string">&#x27;rest_framework.permissions.AllowAny&#x27;</span>,<br>    )<br>&#125;<br></code></pre></div></td></tr></table></figure><h4 id="å±€éƒ¨é…ç½®"><a href="#å±€éƒ¨é…ç½®" class="headerlink" title="å±€éƒ¨é…ç½®"></a>å±€éƒ¨é…ç½®</h4><p>å¯ä»¥åœ¨å…·ä½“çš„è§†å›¾ä¸­é€šè¿‡<code>permission_classes</code>å±æ€§æ¥è®¾ç½®</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># ä¸ªäººä¿¡æ¯    </span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserInfoAPIView</span>(<span class="hljs-params">APIView</span>):</span><br>    authentication_classes = [JSONWebTokenAuthentication] <span class="hljs-comment"># æŒ‡æ˜è®¤è¯ç±»</span><br>    permission_classes = [IsAuthenticated]  <span class="hljs-comment"># æŒ‡æ˜åªæœ‰è®¤è¯ç”¨æˆ·å¯ä»¥è®¿é—®</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>        user = request.user  <span class="hljs-comment"># åªè¦è®¤è¯æˆåŠŸï¼Œä¸”æƒé™æ ¡éªŒé€šè¿‡ï¼Œè¯·æ±‚å¯¹è±¡ä¸­å°±ä¸€å®šä¼šå­˜åœ¨ userå¯¹è±¡</span><br>        ser = UserInfoSerializer(user)<br>        <span class="hljs-keyword">return</span> Response(ser.data)<br>    <br><span class="hljs-comment"># åˆ›å»ºå…è®¸ç®¡ç†å‘˜æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„è§†å›¾ç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserView</span>(<span class="hljs-params">GenericAPIView, ListModelMixin</span>):</span><br>  <span class="hljs-string">&quot;&quot;&quot;æŸ¥è¯¢æ‰€æœ‰æ³¨å†Œç”¨æˆ·&quot;&quot;&quot;</span><br>    queryset = UserModel.objects.<span class="hljs-built_in">all</span>()<br>    serializer_class = UserSerializer<br>    authentication_classes = [JSONWebTokenAuthentication] <span class="hljs-comment"># æŒ‡æ˜è®¤è¯ç±»</span><br>    permission_classes = [IsAdminUser]  <span class="hljs-comment"># æŒ‡å®šæƒé™éªŒè¯,é™åˆ¶ç®¡ç†å‘˜æ‰å¯ä»¥æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request, *args, **kwrags</span>):</span><br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">list</span>(request, *args, **kwrags)<br></code></pre></div></td></tr></table></figure><h3 id="é™æµThrottling"><a href="#é™æµThrottling" class="headerlink" title="é™æµThrottling"></a>é™æµThrottling</h3><p>ä¸Šé¢çš„è§†å›¾å¯ä»¥æ­£å¸¸è®¿é—®ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼Œä½†æ˜¯éœ€è¦å¯¹æ¥å£è®¿é—®çš„é¢‘æ¬¡è¿›è¡Œé™åˆ¶ï¼Œä»¥å‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚ç‰¹åˆ«æ˜¯é™åˆ¶çˆ¬è™«çš„æŠ“å–ã€‚</p><h4 id="é’ˆå¯¹ç”¨æˆ·è¿›è¡Œé™åˆ¶"><a href="#é’ˆå¯¹ç”¨æˆ·è¿›è¡Œé™åˆ¶" class="headerlink" title="é’ˆå¯¹ç”¨æˆ·è¿›è¡Œé™åˆ¶"></a>é’ˆå¯¹ç”¨æˆ·è¿›è¡Œé™åˆ¶</h4><blockquote><p>  å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨<code>DEFAULT_THROTTLE_CLASSES</code> å’Œ <code>DEFAULT_THROTTLE_RATES</code>è¿›è¡Œå…¨å±€é…ç½®</p></blockquote><h5 id="å…¨å±€é…ç½®-1"><a href="#å…¨å±€é…ç½®-1" class="headerlink" title="å…¨å±€é…ç½®"></a>å…¨å±€é…ç½®</h5><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">REST_FRAMEWORK = &#123;<br>    <span class="hljs-string">&#x27;DEFAULT_THROTTLE_CLASSES&#x27;</span>: (<br>        <span class="hljs-comment"># é™åˆ¶æ‰€æœ‰åŒ¿åæœªè®¤è¯ç”¨æˆ·ï¼Œä½¿ç”¨IPåŒºåˆ†ç”¨æˆ·</span><br>        <span class="hljs-string">&#x27;rest_framework.throttling.AnonRateThrottle&#x27;</span>,<br>        <span class="hljs-comment"># é™åˆ¶è®¤è¯ç”¨æˆ·ï¼Œä½¿ç”¨User id æ¥åŒºåˆ†</span><br>        <span class="hljs-string">&#x27;rest_framework.throttling.UserRateThrottle&#x27;</span><br>    ),<br>    <span class="hljs-string">&#x27;DEFAULT_THROTTLE_RATES&#x27;</span>: &#123;<br>        <span class="hljs-comment"># å¯ä»¥ä½¿ç”¨ second, minute, hour æˆ–dayæ¥æŒ‡æ˜å‘¨æœŸ</span><br>        <span class="hljs-string">&#x27;anon&#x27;</span>: <span class="hljs-string">&#x27;3/minute&#x27;</span>,<br>        <span class="hljs-string">&#x27;user&#x27;</span>: <span class="hljs-string">&#x27;5/minute&#x27;</span><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h5 id="å±€éƒ¨é…ç½®-1"><a href="#å±€éƒ¨é…ç½®-1" class="headerlink" title="å±€éƒ¨é…ç½®"></a>å±€éƒ¨é…ç½®</h5><p>è§†å›¾ä¸­ä½¿ç”¨<code>throttle_classes</code>å±æ€§è®¾ç½®é™æµç”¨æˆ·ç±»å‹</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.generics <span class="hljs-keyword">import</span> GenericAPIView<br><span class="hljs-keyword">from</span> rest_framework.mixins <span class="hljs-keyword">import</span> ListModelMixin<br><span class="hljs-keyword">from</span> rest_framework.throttling <span class="hljs-keyword">import</span> UserRateThrottle, AnonRateThrottle<br><br><span class="hljs-keyword">from</span> .serializer <span class="hljs-keyword">import</span> UserSerializer, User<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserView</span>(<span class="hljs-params">GenericAPIView, ListModelMixin</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;æŸ¥è¯¢æ‰€æœ‰æ³¨å†Œç”¨æˆ·&quot;&quot;&quot;</span><br>    queryset = UserModel.objects.<span class="hljs-built_in">all</span>()<br>    serializer_class = UserSerializer<br>    authentication_classes = [JSONWebTokenAuthentication]<br>    permission_classes = [IsAdminUser]<br>    throttle_classes = (UserRateThrottle, AnonRateThrottle)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request, *args, **kwargs</span>):</span><br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">list</span>(request, *args, **kwargs)<br></code></pre></div></td></tr></table></figure><p>åœ¨é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­é’ˆå¯¹ç”¨æˆ·ç±»å‹è®¾ç½®å…·ä½“é¢‘ç‡</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">REST_FRAMEWORK = &#123;<br>    <span class="hljs-string">&#x27;DEFAULT_THROTTLE_RATES&#x27;</span>: &#123;<br>        <span class="hljs-comment"># å¯ä»¥ä½¿ç”¨ second, minute, hour æˆ–dayæ¥æŒ‡æ˜å‘¨æœŸ</span><br>        <span class="hljs-string">&#x27;anon&#x27;</span>: <span class="hljs-string">&#x27;3/minute&#x27;</span>,<br>        <span class="hljs-string">&#x27;user&#x27;</span>: <span class="hljs-string">&#x27;5/minute&#x27;</span><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h4 id="é’ˆå¯¹è§†å›¾é™åˆ¶"><a href="#é’ˆå¯¹è§†å›¾é™åˆ¶" class="headerlink" title="é’ˆå¯¹è§†å›¾é™åˆ¶"></a>é’ˆå¯¹è§†å›¾é™åˆ¶</h4><p>è§†å›¾ä¸­ä½¿ç”¨<code>throttle_scope</code>å±æ€§è®¾ç½®å…·ä½“é…ç½®ä¿¡æ¯</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.generics <span class="hljs-keyword">import</span> GenericAPIView<br><span class="hljs-keyword">from</span> rest_framework.mixins <span class="hljs-keyword">import</span> ListModelMixin<br><span class="hljs-keyword">from</span> rest_framework.permissions <span class="hljs-keyword">import</span> IsAuthenticated<br><br><span class="hljs-keyword">from</span> .serializer <span class="hljs-keyword">import</span> UserSerializer, User<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserView</span>(<span class="hljs-params">GenericAPIView, ListModelMixin</span>):</span><br>    queryset = User.objects.<span class="hljs-built_in">all</span>()<br>    serializer_class = UserSerializer<br>    throttle_scope = <span class="hljs-string">&#x27;downloads&#x27;</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request, *args, **kwargs</span>):</span><br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">list</span>(request, *args, **kwargs)<br></code></pre></div></td></tr></table></figure><p>åœ¨é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å…·ä½“é¢‘ç‡</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-string">&#x27;DEFAULT_THROTTLE_CLASSES&#x27;</span>: (<br>    <span class="hljs-comment"># é™åˆ¶ç”¨æˆ·å¯¹äºæ¯ä¸ªè§†å›¾çš„è®¿é—®é¢‘æ¬¡ï¼Œä½¿ç”¨ipæˆ–user id</span><br>    <span class="hljs-string">&#x27;rest_framework.throttling.ScopedRateThrottle&#x27;</span>,<br>),<br><span class="hljs-string">&#x27;DEFAULT_THROTTLE_RATES&#x27;</span>: &#123;<br>    <span class="hljs-string">&#x27;downloads&#x27;</span>: <span class="hljs-string">&#x27;3/minute&#x27;</span><br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="ä»¥-Vue-ä½œä¸ºå‰ç«¯"><a href="#ä»¥-Vue-ä½œä¸ºå‰ç«¯" class="headerlink" title="ä»¥ Vue ä½œä¸ºå‰ç«¯"></a>ä»¥ Vue ä½œä¸ºå‰ç«¯</h2><h4 id="è·¯ç”±å‰ç½®å®ˆå«"><a href="#è·¯ç”±å‰ç½®å®ˆå«" class="headerlink" title="è·¯ç”±å‰ç½®å®ˆå«"></a>è·¯ç”±å‰ç½®å®ˆå«</h4><blockquote><p><code>router/index.js</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> Router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> Login <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/Login&#x27;</span><br><span class="hljs-keyword">import</span> Users <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/Users&#x27;</span><br><br>Vue.use(Router);<br><br><span class="hljs-keyword">let</span> router = <span class="hljs-keyword">new</span> Router(&#123;<br>  routes: [<br>    &#123;<br>      path: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>      name: <span class="hljs-string">&#x27;Login&#x27;</span>,<br>      component: Login<br>    &#125;,<br>    &#123;<br>      path: <span class="hljs-string">&#x27;/Users&#x27;</span>,<br>      name: <span class="hljs-string">&#x27;Users&#x27;</span>,<br>      component: Users<br>    &#125;<br>  ]<br>&#125;)<br><br>router.beforeEach(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> isLogin = <span class="hljs-built_in">localStorage</span>.getItem(<span class="hljs-string">&#x27;token&#x27;</span>) ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br>  <span class="hljs-keyword">if</span> (to.path == <span class="hljs-string">&#x27;/login&#x27;</span> || to.path == <span class="hljs-string">&#x27;/register&#x27;</span>) &#123;<br>    <span class="hljs-comment">//&#x27;login&#x27;å’Œ&#x27;register&#x27;ç›¸å½“äºæ˜¯è·¯ç”±ç™½åå•</span><br>    <span class="hljs-built_in">localStorage</span>.setItem(<span class="hljs-string">&quot;preRoute&quot;</span>, router.currentRoute.fullPath);<br>    next();<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">//å¦‚æœtokenå­˜åœ¨ï¼Œå°±æ­£å¸¸è·³è½¬ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¯´æ˜æœªç™»é™†ï¼Œåˆ™è·³è½¬åˆ°&#x27;login&#x27;</span><br>    isLogin ? next() : next(<span class="hljs-string">&quot;/login&quot;</span>);<br>  &#125;<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></div></td></tr></table></figure><h4 id="axiosæ‹¦æˆªå™¨"><a href="#axiosæ‹¦æˆªå™¨" class="headerlink" title="axiosæ‹¦æˆªå™¨"></a>axiosæ‹¦æˆªå™¨</h4><blockquote><p><code>main.js</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br>axios.defaults.baseURL = <span class="hljs-string">&#x27;http://127.0.0.1:8000/&#x27;</span><br><br><span class="hljs-comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span><br>axios.interceptors.request.use(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) </span>&#123;<br>  <span class="hljs-comment">// åœ¨å‘é€è¯·æ±‚ä¹‹å‰, æ·»åŠ  token åˆ°è¯·æ±‚å¤´</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">localStorage</span>.token) &#123;<br>    config.headers[<span class="hljs-string">&#x27;Authorization&#x27;</span>] = <span class="hljs-string">&#x27;JWT &#x27;</span> + <span class="hljs-built_in">localStorage</span>.getItem(<span class="hljs-string">&#x27;token&#x27;</span>);<br>    config.headers[<span class="hljs-string">&#x27;Accept&#x27;</span>] = <span class="hljs-string">&#x27;application/json&#x27;</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> config;<br>&#125;, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>&#123;<br>  <span class="hljs-comment">// å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);<br>&#125;);<br><br><span class="hljs-comment">// è‡ªå®šä¹‰çš„ axios å“åº”æ‹¦æˆªå™¨</span><br>axios.interceptors.response.use(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// åˆ¤æ–­ä¸€ä¸‹å“åº”ä¸­æ˜¯å¦æœ‰ tokenï¼Œå¦‚æœæœ‰å°±ç›´æ¥ä½¿ç”¨æ­¤ token æ›¿æ¢æ‰æœ¬åœ°çš„ tokenã€‚ä½ å¯ä»¥æ ¹æ®ä½ çš„ä¸šåŠ¡éœ€æ±‚è‡ªå·±ç¼–å†™æ›´æ–° token çš„é€»è¾‘</span><br>  <span class="hljs-keyword">var</span> token = response.data.token;<br><br>  <span class="hljs-keyword">if</span> (token) &#123;<br>    <span class="hljs-built_in">localStorage</span>.setItem(<span class="hljs-string">&#x27;token&#x27;</span>, token);<br>  &#125;<br>  <span class="hljs-keyword">return</span> response<br>&#125;, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (error.response) &#123;<br>    <span class="hljs-keyword">switch</span> (error.response.status) &#123;<br>      <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:<br>        <span class="hljs-comment">// è¿™é‡Œå†™æ¸…é™¤tokençš„ä»£ç </span><br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;401&quot;</span>)<br>        <span class="hljs-built_in">localStorage</span>.removeItem(<span class="hljs-string">&#x27;token&#x27;</span>);<br>        <span class="hljs-comment">/* æ™®é€š401æ‹¦æˆªç›´æ¥è¿”å›åˆ°ç™»å½•é¡µé¢ */</span><br>        router.push(<span class="hljs-string">&#x27;/login&#x27;</span>);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error)<br>&#125;);<br><br>Vue.prototype.$axios = axios<br></code></pre></div></td></tr></table></figure><h4 id="ç™»å½•é¡µé¢"><a href="#ç™»å½•é¡µé¢" class="headerlink" title="ç™»å½•é¡µé¢"></a>ç™»å½•é¡µé¢</h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    ç”¨æˆ·å: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;userInfo.username&quot;</span>/&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    å¯†ç : <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;userInfo.password&quot;</span>/&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;login&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  name: <span class="hljs-string">&quot;login&quot;</span>,</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">return</span> &#123;</span><br>      userInfo: &#123;<br><span class="javascript">        username: <span class="hljs-string">&quot;&quot;</span>,</span><br><span class="javascript">        password: <span class="hljs-string">&quot;&quot;</span>,</span><br>      &#125;,<br>    &#125;;<br>  &#125;,<br>  methods: &#123;<br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">login</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">      <span class="hljs-built_in">this</span>.$axios</span><br><span class="javascript">        .post(<span class="hljs-string">&quot;users/login/&quot;</span>, <span class="hljs-built_in">this</span>.userInfo)</span><br><span class="javascript">        .then(<span class="hljs-function">(<span class="hljs-params">resp</span>) =&gt;</span> &#123;</span><br><span class="javascript">          <span class="hljs-keyword">const</span> curr = <span class="hljs-built_in">localStorage</span>.getItem(<span class="hljs-string">&#x27;preRoute&#x27;</span>);</span><br><span class="javascript">          <span class="hljs-keyword">if</span> (curr == <span class="hljs-literal">null</span>) &#123;</span><br><span class="javascript">            <span class="hljs-built_in">this</span>.$router.push(&#123;<span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user_center&quot;</span>&#125;);</span><br><span class="javascript">          &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="javascript">            <span class="hljs-built_in">this</span>.$router.push(&#123;<span class="hljs-attr">path</span>: curr&#125;);</span><br>          &#125;<br><span class="javascript">          <span class="hljs-built_in">this</span>.$router.push(&#123;<span class="hljs-attr">path</span>: <span class="hljs-built_in">decodeURIComponent</span>(url)&#125;);</span><br>        &#125;)<br><span class="javascript">        .catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;</span><br>        &#125;);<br>    &#125;,<br>  &#125;,<br>&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h4 id="ç”¨æˆ·ä¸ªäººä¸­å¿ƒ"><a href="#ç”¨æˆ·ä¸ªäººä¸­å¿ƒ" class="headerlink" title="ç”¨æˆ·ä¸ªäººä¸­å¿ƒ"></a>ç”¨æˆ·ä¸ªäººä¸­å¿ƒ</h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span> &#123;&#123; user.id &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span> &#123;&#123; user.username &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span> &#123;&#123; user.phone &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">      user: <span class="hljs-string">&quot;&quot;</span></span><br>    &#125;<br>  &#125;,<br>  methods: &#123;<br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">getData</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">      <span class="hljs-built_in">this</span>.$axios.get(<span class="hljs-string">&#x27;/userinfo/&#x27;</span>)</span><br><span class="javascript">        .then(<span class="hljs-function"><span class="hljs-params">resp</span> =&gt;</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(resp.data)</span><br><span class="javascript">          <span class="hljs-built_in">this</span>.user = resp.data</span><br>        &#125;)<br>    &#125;<br>  &#125;,<br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-built_in">this</span>.getData();</span><br>  &#125;<br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> DRF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¤è¯ </tag>
            
            <tag> JWT </tag>
            
            <tag> æƒé™ </tag>
            
            <tag> é™æµ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django-ç”¨æˆ·è®¤è¯</title>
      <link href="2020/03/10/django-yong-hu-ren-zheng-xi-tong/"/>
      <url>2020/03/10/django-yong-hu-ren-zheng-xi-tong/</url>
      
        <content type="html"><![CDATA[<h2 id="é¡¹ç›®æ¡†æ¶"><a href="#é¡¹ç›®æ¡†æ¶" class="headerlink" title="é¡¹ç›®æ¡†æ¶"></a>é¡¹ç›®æ¡†æ¶</h2><ol><li><p>é¡¹ç›®ç»“æ„</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">.<br>â”œâ”€â”€ users<br>â”‚Â Â   â”œâ”€â”€ __init__.py<br>â”‚Â Â   â”œâ”€â”€ admin.py<br>â”‚Â Â   â”œâ”€â”€ apps.py<br>â”‚Â Â   â”œâ”€â”€ migrations<br>â”‚Â Â   â”‚Â Â  â””â”€â”€ __init__.py<br>â”‚Â Â   â”œâ”€â”€ models.py<br>â”‚Â Â   â”œâ”€â”€ tests.py<br>â”‚Â Â   â”œâ”€â”€ urls.py<br>â”‚Â Â   â””â”€â”€ views.py<br>â”œâ”€â”€ db.sqlite3<br>â”œâ”€â”€ manage.py<br>â”œâ”€â”€ django_demo<br>â”‚    â”œâ”€â”€ __init__.py<br>â”‚    â”œâ”€â”€ settings.py<br>â”‚    â”œâ”€â”€ urls.py<br>â”‚    â””â”€â”€ wsgi.py<br>â””â”€â”€ templates<br>    â”œâ”€â”€ base.html<br>    â”œâ”€â”€ index.html<br>    â”œâ”€â”€ login.html<br>    â”œâ”€â”€ register.html<br>    â””â”€â”€ user.html<br><br></code></pre></div></td></tr></table></figure><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2></li></ol><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><p>é€šè¿‡ç»ˆç«¯å‘½ä»¤,åˆ›å»ºé¡¹ç›®</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">django_admin startproject django_demo<br></code></pre></div></td></tr></table></figure><h3 id="ç”Ÿæˆåº”ç”¨"><a href="#ç”Ÿæˆåº”ç”¨" class="headerlink" title="ç”Ÿæˆåº”ç”¨"></a>ç”Ÿæˆåº”ç”¨</h3><p>é€šè¿‡ç»ˆç«¯å‘½ä»¤,ç”Ÿæˆusersåº”ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># æ­¤æ—¶åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¹‹ä¸‹æ‰§è¡Œå‘½ä»¤</span><br>python manage.py startapp users<br></code></pre></div></td></tr></table></figure><h3 id="ä¿®æ”¹é…ç½®ä¿¡æ¯"><a href="#ä¿®æ”¹é…ç½®ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹é…ç½®ä¿¡æ¯"></a>ä¿®æ”¹é…ç½®ä¿¡æ¯</h3><p>åœ¨<code>settings.py</code>ä¿®æ”¹é…ç½®</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># æ³¨å†Œapp</span><br>INSTALLED_APPS = [<br>    <span class="hljs-string">&#x27;django.contrib.admin&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.auth&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.contenttypes&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.sessions&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.messages&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.staticfiles&#x27;</span>,<br>    <span class="hljs-string">&#x27;users.apps.UsersConfig&#x27;</span> <span class="hljs-comment"># æ³¨å†Œusersåº”ç”¨</span><br>]<br><br><span class="hljs-comment"># é…ç½®æ¨¡æ¿è·¯å¾„</span><br>TEMPLATES = [<br>    &#123;<br>        <span class="hljs-string">&#x27;BACKEND&#x27;</span>: <span class="hljs-string">&#x27;django.template.backends.django.DjangoTemplates&#x27;</span>,<br>        <span class="hljs-string">&#x27;DIRS&#x27;</span>: [os.path.join(BASE_DIR, <span class="hljs-string">&quot;templates&quot;</span>)],<br>        <span class="hljs-string">&#x27;APP_DIRS&#x27;</span>: <span class="hljs-literal">True</span>,<br>        <span class="hljs-string">&#x27;OPTIONS&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;context_processors&#x27;</span>: [<br>                <span class="hljs-string">&#x27;django.template.context_processors.debug&#x27;</span>,<br>                <span class="hljs-string">&#x27;django.template.context_processors.request&#x27;</span>,<br>                <span class="hljs-string">&#x27;django.contrib.auth.context_processors.auth&#x27;</span>,<br>                <span class="hljs-string">&#x27;django.contrib.messages.context_processors.messages&#x27;</span>,<br>            ],<br>        &#125;,<br>    &#125;,<br>]<br></code></pre></div></td></tr></table></figure><h3 id="åˆ›å»ºæ¨¡æ¿"><a href="#åˆ›å»ºæ¨¡æ¿" class="headerlink" title="åˆ›å»ºæ¨¡æ¿"></a>åˆ›å»ºæ¨¡æ¿</h3><p>åœ¨é¡¹ç›®æ ¹è·¯å¾„ä¸‹,åˆ›å»º<code>templates</code>,åœ¨ç›®å½•ä¸‹åˆ›å»º<code>base.html</code>æ–‡ä»¶,ä»¥ä¾¿åé¢å¤ç”¨</p><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html">&#123;% block nav %&#125;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;% url &#x27;users:index&#x27; %&#125;&quot;</span>&gt;</span>Index<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br>        &#123;% if user.is_authenticated %&#125;<br>            Hello, <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;% url &#x27;users:user&#x27; %&#125;&quot;</span>&gt;</span>&#123;&#123; user.username &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> .<br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;% url &#x27;users:logout&#x27; %&#125;&quot;</span>&gt;</span>log out<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        &#123;% else %&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;% url &#x27;users:register&#x27; %&#125;&quot;</span>&gt;</span>register<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;% url &#x27;users:login&#x27; %&#125;&quot;</span>&gt;</span>log in<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        &#123;% endif %&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>&#123;% endblock %&#125;<br><br>&#123;% block err %&#125;<br>    &#123;% if account_msg %&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;account_msg&#125;&#125;. Please try again.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    &#123;% endif %&#125;<br><br>&#123;% endblock %&#125;<br><br>&#123;% block body %&#125;<br><br>&#123;% endblock %&#125;<br></code></pre></div></td></tr></table></figure><h3 id="æŒ‡å®šç”¨æˆ·æ¨¡å‹ç±»"><a href="#æŒ‡å®šç”¨æˆ·æ¨¡å‹ç±»" class="headerlink" title="æŒ‡å®šç”¨æˆ·æ¨¡å‹ç±»"></a>æŒ‡å®šç”¨æˆ·æ¨¡å‹ç±»</h3><ol><li><p>åœ¨<code>users/models.py</code>ä¸­åˆ›å»ºæ¨¡å‹ç±»</p> <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><span class="hljs-keyword">from</span> django.contrib.auth.models <span class="hljs-keyword">import</span> AbstractUser<br><br><span class="hljs-comment"># Create your models here.</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserProfile</span>(<span class="hljs-params">AbstractUser</span>):</span><br>    phone = models.CharField(max_length=<span class="hljs-number">11</span>, unique=<span class="hljs-literal">True</span>, verbose_name=<span class="hljs-string">&quot;æ‰‹æœºå·&quot;</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">&#x27;tb_users&#x27;</span>  <span class="hljs-comment"># æŒ‡å®šè¡¨å</span><br>        verbose_name = <span class="hljs-string">&#x27;ç”¨æˆ·&#x27;</span>  <span class="hljs-comment"># åå°æ˜¾ç¤ºè¡¨å</span><br>        verbose_name_plural = verbose_name<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.username<br></code></pre></div></td></tr></table></figure></li><li><p>åœ¨<code>settings.py</code>æ–‡ä»¶ä¸­,æŒ‡å®šæœ¬é¡¹ç›®ç”¨æˆ·æ¨¡å‹ç±»<br> Djangoç”¨æˆ·æ¨¡å‹ç±»æ˜¯é€šè¿‡å…¨å±€é…ç½®é¡¹ AUTH_USER_MODEL å†³å®šçš„</p> <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># é…ç½®è§„åˆ™ï¼šAUTH_USER_MODEL = &#x27;åº”ç”¨å.æ¨¡å‹ç±»å&#x27;</span><br>AUTH_USER_MODEL = <span class="hljs-string">&#x27;users.UserProfile&#x27;</span><br></code></pre></div></td></tr></table></figure></li><li><p>é€šè¿‡ç»ˆç«¯å‘½ä»¤,ç”Ÿæˆè¿ç§»æ–‡ä»¶å’Œè¿ç§»è¡¨</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">python manage.py makemigrations<br>python manage.py migrate<br></code></pre></div></td></tr></table></figure><h2 id="é€»è¾‘å®ç°"><a href="#é€»è¾‘å®ç°" class="headerlink" title="é€»è¾‘å®ç°"></a>é€»è¾‘å®ç°</h2></li></ol><h3 id="å®ç°æ³¨å†Œé€»è¾‘"><a href="#å®ç°æ³¨å†Œé€»è¾‘" class="headerlink" title="å®ç°æ³¨å†Œé€»è¾‘"></a>å®ç°æ³¨å†Œé€»è¾‘</h3><h4 id="å®šä¹‰è§†å›¾"><a href="#å®šä¹‰è§†å›¾" class="headerlink" title="å®šä¹‰è§†å›¾"></a>å®šä¹‰è§†å›¾</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.contrib.auth.hashers <span class="hljs-keyword">import</span> make_password<br><span class="hljs-keyword">from</span> django.contrib.auth <span class="hljs-keyword">import</span> login<br><br><span class="hljs-keyword">from</span> django.views <span class="hljs-keyword">import</span> View<br><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render<br><span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> JsonResponse, HttpResponseForbidden<br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> UserProfile<br>  <br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RegisterView</span>(<span class="hljs-params">View</span>):</span><br><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>      <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;register.html&#x27;</span>)<br><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">post</span>(<span class="hljs-params">self, request</span>):</span><br>      username = request.POST.get(<span class="hljs-string">&quot;username&quot;</span>)<br>      password = request.POST.get(<span class="hljs-string">&quot;password&quot;</span>)<br>      password2 = request.POST.get(<span class="hljs-string">&quot;password2&quot;</span>)<br>      phone = request.POST.get(<span class="hljs-string">&quot;phone&quot;</span>)<br><br>      <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">all</span>([username, password, password2, phone]):<br>          <span class="hljs-keyword">return</span> JsonResponse(<span class="hljs-string">&quot;ç¼ºå°‘å¿…è¦å‚æ•°&quot;</span>)<br><br>      <span class="hljs-keyword">if</span> password != password2:<br>          <span class="hljs-keyword">return</span> HttpResponseForbidden(<span class="hljs-string">&quot;å¯†ç ä¸ä¸€è‡´&quot;</span>)<br><br>      <span class="hljs-comment"># æ­¤æ—¶ æ‰‹åŠ¨åŠ å¯†å¯†ç </span><br>      <span class="hljs-comment"># hash_password = make_password(password)</span><br>      <span class="hljs-comment"># try:</span><br>      <span class="hljs-comment">#   user = UserProfile(username=username, password=hash_password, phone=phone)</span><br>      <span class="hljs-comment">#   user.save()</span><br>      <span class="hljs-comment"># except Exception as e:</span><br>      <span class="hljs-comment">#     return HttpResponseForbidden(&quot;åˆ›å»ºå¤±è´¥&quot;)</span><br><br>      <span class="hljs-keyword">try</span>:<br>          <span class="hljs-comment"># Djangoè®¤è¯ç³»ç»Ÿç”¨æˆ·æ¨¡å‹ç±»æä¾›çš„ create_user() æ–¹æ³•åˆ›å»ºæ–°çš„ç”¨æˆ·ã€‚</span><br>          <span class="hljs-comment"># create_user() æ–¹æ³•ä¸­å°è£…äº† set_password() æ–¹æ³•åŠ å¯†å¯†ç </span><br>          user = UserProfile.objects.create_user(username=username, password=password, phone=phone)<br>      <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>          <span class="hljs-keyword">return</span> HttpResponseForbidden(<span class="hljs-string">&quot;åˆ›å»ºå¤±è´¥&quot;</span>)<br><br>      <span class="hljs-comment"># çŠ¶æ€ä¿æŒ</span><br>      login(request, user)<br><br>      <span class="hljs-keyword">return</span> JsonResponse(&#123;<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ok&quot;</span>, <span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-number">200</span>&#125;)<br></code></pre></div></td></tr></table></figure><h4 id="å®ç°æ¨¡æ¿"><a href="#å®ç°æ¨¡æ¿" class="headerlink" title="å®ç°æ¨¡æ¿"></a>å®ç°æ¨¡æ¿</h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html">&#123;% extends &quot;base.html&quot; %&#125;<br><br>&#123;% block body %&#125;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&#123;% url &#x27;users:register&#x27; %&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>        ç”¨æˆ·å:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br>        å¯†ç :<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><br>        ç¡®è®¤å¯†ç :<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password2&quot;</span>&gt;</span><br>        æ‰‹æœºå·: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;phone&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;phone&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>&#123;% endblock %&#125;<br></code></pre></div></td></tr></table></figure><h3 id="å®ç°ç™»å½•é€»è¾‘"><a href="#å®ç°ç™»å½•é€»è¾‘" class="headerlink" title="å®ç°ç™»å½•é€»è¾‘"></a>å®ç°ç™»å½•é€»è¾‘</h3><h4 id="å®šä¹‰è§†å›¾-1"><a href="#å®šä¹‰è§†å›¾-1" class="headerlink" title="å®šä¹‰è§†å›¾"></a>å®šä¹‰è§†å›¾</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginView</span>(<span class="hljs-params">View</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br><br>        <span class="hljs-comment"># åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•(å±æ€§) user.is_authenticated</span><br>        <span class="hljs-keyword">if</span> request.user.is_authenticated:<br>            <span class="hljs-keyword">return</span> redirect(reverse(<span class="hljs-string">&#x27;users:index&#x27;</span>))<br><br>        <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&quot;login.html&quot;</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">post</span>(<span class="hljs-params">self, request</span>):</span><br>        username = request.POST.get(<span class="hljs-string">&quot;username&quot;</span>)<br>        password = request.POST.get(<span class="hljs-string">&quot;password&quot;</span>)<br>        remembered = request.POST.get(<span class="hljs-string">&quot;remembered&quot;</span>)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">all</span>([username, password]):<br>            <span class="hljs-comment"># return JsonResponse(&#123;&quot;account_msg&quot;: &quot;ç¼ºå°‘å¿…è¦å‚æ•°&quot;, &quot;code&quot;: 403&#125;)</span><br>            <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;login.html&#x27;</span>, &#123;<span class="hljs-string">&#x27;account_msg&#x27;</span>: <span class="hljs-string">&#x27;ç¼ºå°‘å¿…è¦å‚æ•°&#x27;</span>, <span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-number">403</span>&#125;)<br><br>        <span class="hljs-comment"># æ ¡éªŒç”¨æˆ·ä¿¡æ¯ï¼ŒæˆåŠŸè¿”å›userå¯¹è±¡ï¼Œå¦åˆ™ä¸ºNone</span><br>        user = authenticate(username=username, password=password)<br><br>        <span class="hljs-keyword">if</span> user <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;login.html&#x27;</span>, &#123;<span class="hljs-string">&#x27;account_msg&#x27;</span>: <span class="hljs-string">&#x27;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&#x27;</span>, <span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-number">403</span>&#125;)<br><br>        <span class="hljs-comment"># å®ç°çŠ¶æ€ä¿æŒ</span><br>        login(request, user)<br><br>        <span class="hljs-comment"># è®¾ç½®çŠ¶æ€ä¿æŒçš„å‘¨æœŸ</span><br>        <span class="hljs-keyword">if</span> remembered != <span class="hljs-string">&#x27;on&#x27;</span>:<br>            <span class="hljs-comment"># æ²¡æœ‰è®°ä½ç”¨æˆ·ï¼šæµè§ˆå™¨ä¼šè¯ç»“æŸå°±è¿‡æœŸ</span><br>            request.session.set_expiry(<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># è®°ä½ç”¨æˆ·ï¼šNoneè¡¨ç¤ºä¸¤å‘¨åè¿‡æœŸ</span><br>            request.session.set_expiry(<span class="hljs-literal">None</span>)<br><br>        <span class="hljs-comment"># å“åº”ç™»å½•ç»“æœ</span><br>        <span class="hljs-keyword">return</span> redirect(reverse(<span class="hljs-string">&#x27;users:index&#x27;</span>))<br></code></pre></div></td></tr></table></figure><h4 id="å®ç°æ¨¡æ¿-1"><a href="#å®ç°æ¨¡æ¿-1" class="headerlink" title="å®ç°æ¨¡æ¿"></a>å®ç°æ¨¡æ¿</h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html">&#123;% extends &quot;base.html&quot; %&#125;<br><br>&#123;% block body %&#125;<br><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&#123;% url &#x27;users:login&#x27; %&#125;&quot;</span>&gt;</span><br>        &#123;% csrf_token %&#125;<br>        ç”¨æˆ·å:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br>        å¯†ç :<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>login<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;next&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&#123;% url &#x27;users:index&#x27; %&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br>&#123;% endblock %&#125;<br></code></pre></div></td></tr></table></figure><h3 id="æ³¨é”€"><a href="#æ³¨é”€" class="headerlink" title="æ³¨é”€"></a>æ³¨é”€</h3><h4 id="å®šä¹‰è§†å›¾-2"><a href="#å®šä¹‰è§†å›¾-2" class="headerlink" title="å®šä¹‰è§†å›¾"></a>å®šä¹‰è§†å›¾</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogoutView</span>(<span class="hljs-params">View</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;å®ç°é€€å‡ºç™»å½•é€»è¾‘&quot;&quot;&quot;</span><br>        <span class="hljs-comment"># æ¸…ç†session</span><br>        logout(request)<br><br>        <span class="hljs-comment"># é€€å‡ºç™»å½•ï¼Œé‡å®šå‘åˆ°é¦–é¡µ</span><br>        response = redirect(reverse(<span class="hljs-string">&#x27;users:index&#x27;</span>))<br><br>        <span class="hljs-comment"># é€€å‡ºç™»å½•æ—¶æ¸…é™¤cookieä¸­çš„username</span><br>        response.delete_cookie(<span class="hljs-string">&#x27;username&#x27;</span>)<br>        <span class="hljs-keyword">return</span> response<br></code></pre></div></td></tr></table></figure><h3 id="ç”¨æˆ·ä¿¡æ¯"><a href="#ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="ç”¨æˆ·ä¿¡æ¯"></a>ç”¨æˆ·ä¿¡æ¯</h3><h4 id="å®šä¹‰è§†å›¾-3"><a href="#å®šä¹‰è§†å›¾-3" class="headerlink" title="å®šä¹‰è§†å›¾"></a>å®šä¹‰è§†å›¾</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserView</span>(<span class="hljs-params">View</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, requset</span>):</span><br>        <span class="hljs-comment"># å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»é™†å°±è®¿é—®æœ¬åº”ç™»é™†æ‰èƒ½è®¿é—®çš„é¡µé¢æ—¶ä¼šç›´æ¥è·³è½¬åˆ°ç™»é™†é¡µé¢</span><br>        <span class="hljs-keyword">if</span> requset.user.is_authenticated:<br>            <span class="hljs-keyword">return</span> render(requset, <span class="hljs-string">&#x27;user.html&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> redirect(reverse(<span class="hljs-string">&#x27;users:login&#x27;</span>))<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">post</span>(<span class="hljs-params">self, request</span>):</span><br>        old_password = request.POST.get(<span class="hljs-string">&quot;old_password&quot;</span>)<br>        new_password = request.POST.get(<span class="hljs-string">&quot;new_password&quot;</span>)<br>        conf_password = request.POST.get(<span class="hljs-string">&quot;conf_password&quot;</span>)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">all</span>([old_password, new_password, conf_password]):<br>            <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;user.html&#x27;</span>, &#123;<span class="hljs-string">&#x27;account_msg&#x27;</span>: <span class="hljs-string">&#x27;ç¼ºå°‘å¿…è¦å‚æ•°&#x27;</span>, <span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-number">403</span>&#125;)<br><br>        <span class="hljs-keyword">if</span> new_password != conf_password:<br>            <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;user.html&#x27;</span>, &#123;<span class="hljs-string">&#x27;account_msg&#x27;</span>: <span class="hljs-string">&#x27;å¯†ç ä¸ä¸€è‡´&#x27;</span>, <span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-number">403</span>&#125;)<br><br>        <span class="hljs-comment"># æ ¡éªŒå¯†ç   check_password()</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> request.user.check_password(old_password):<br>            <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;user.html&#x27;</span>, &#123;<span class="hljs-string">&#x27;account_msg&#x27;</span>: <span class="hljs-string">&#x27;å¯†ç ä¸æ­£ç¡®&#x27;</span>, <span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-number">403</span>&#125;)<br><br>        user = request.user<br><br>        <span class="hljs-comment"># ä¿®æ”¹å¯†ç </span><br>        user.set_password(new_password)<br>        <span class="hljs-comment"># user.password = make_password(new_password)</span><br><br>        <span class="hljs-comment"># ä¿å­˜ä¿®æ”¹</span><br>        user.save()<br><br>        <span class="hljs-comment"># çŠ¶æ€ä¿æŒ</span><br>        login(request, user)<br><br>        <span class="hljs-keyword">return</span> redirect(reverse(<span class="hljs-string">&#x27;users:index&#x27;</span>))<br><br></code></pre></div></td></tr></table></figure><h4 id="å®ç°æ¨¡æ¿-2"><a href="#å®ç°æ¨¡æ¿-2" class="headerlink" title="å®ç°æ¨¡æ¿"></a>å®ç°æ¨¡æ¿</h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html">&#123;% extends &#x27;base.html&#x27; %&#125;<br><br>&#123;% block body %&#125;<br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&#123;% url &#x27;users:user&#x27; %&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>        æ—§å¯†ç : <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;old_password&quot;</span>&gt;</span><br>        æ–°å¯†ç : <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;new_password&quot;</span>&gt;</span><br>        ç¡®è®¤å¯†ç : <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;conf_password&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>ç¡®è®¤ä¿®æ”¹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;next&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&#123;% url &#x27;users:index&#x27; %&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br>&#123;% endblock %&#125;<br></code></pre></div></td></tr></table></figure><h3 id="é¦–é¡µ"><a href="#é¦–é¡µ" class="headerlink" title="é¦–é¡µ"></a>é¦–é¡µ</h3><h4 id="å®šä¹‰è§†å›¾-4"><a href="#å®šä¹‰è§†å›¾-4" class="headerlink" title="å®šä¹‰è§†å›¾"></a>å®šä¹‰è§†å›¾</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IndexView</span>(<span class="hljs-params">View</span>):</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">self, request</span>):</span><br>    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;index.html&#x27;</span>)<br></code></pre></div></td></tr></table></figure><h4 id="å®ç°æ¨¡æ¿-3"><a href="#å®ç°æ¨¡æ¿-3" class="headerlink" title="å®ç°æ¨¡æ¿"></a>å®ç°æ¨¡æ¿</h4><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html">&#123;% extends &#x27;base.html&#x27; %&#125;<br><br>&#123;% block body %&#125;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿æ¥åˆ°é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>&#123;% endblock %&#125;<br></code></pre></div></td></tr></table></figure><h2 id="é…ç½®è·¯ç”±"><a href="#é…ç½®è·¯ç”±" class="headerlink" title="é…ç½®è·¯ç”±"></a>é…ç½®è·¯ç”±</h2><p><code>django_demo\urls.py</code>ä¸­é…ç½®æ€»è·¯ç”±</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin<br><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path,include<br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;admin/&#x27;</span>, admin.site.urls),<br>    path(<span class="hljs-string">&#x27;users/&#x27;</span>, include(<span class="hljs-string">&quot;users.urls&quot;</span>,<span class="hljs-string">&quot;users&quot;</span>))<br>]<br></code></pre></div></td></tr></table></figure><p><code>users\urls.py</code>ä¸­é…ç½®å­è·¯ç”±</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> .views <span class="hljs-keyword">import</span> RegisterView, LoginView, IndexView, LogoutView, UserView<br><br>app_name = <span class="hljs-string">&quot;users&quot;</span><br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;register/&#x27;</span>, RegisterView.as_view(), name=<span class="hljs-string">&quot;register&quot;</span>),<br>    path(<span class="hljs-string">&#x27;login/&#x27;</span>, LoginView.as_view(), name=<span class="hljs-string">&quot;login&quot;</span>),<br>    path(<span class="hljs-string">&#x27;logout/&#x27;</span>, LogoutView.as_view(), name=<span class="hljs-string">&quot;logout&quot;</span>),<br>    path(<span class="hljs-string">&quot;user/&quot;</span>, UserView.as_view(), name=<span class="hljs-string">&#x27;user&#x27;</span>),<br>    path(<span class="hljs-string">&#x27;&#x27;</span>, IndexView.as_view(), name=<span class="hljs-string">&quot;index&quot;</span>)<br>]<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¨¡æ¿ </tag>
            
            <tag> auth </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Axios(å››):è·¨åŸŸè¯·æ±‚</title>
      <link href="2020/03/03/vue-axios-si-kua-yu-qing-qiu/"/>
      <url>2020/03/03/vue-axios-si-kua-yu-qing-qiu/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å‰åç«¯å¼€å‘è¿‡ç¨‹ä¸­ä¸€ç›´ä¼šä¼´éšæˆ‘ä»¬çš„é—®é¢˜å°±æ˜¯è·¨åŸŸé—®é¢˜ï¼Œå› ä¸ºè¿™æ—¶å€™å‰ç«¯å’Œåç«¯çš„ä»£ç æ˜¯åœ¨ä¸åŒæœºå™¨ä¸Šè¿è¡Œçš„ï¼Œä¸¤ä¸ªåœ°å€ä¸åœ¨ä¸€ä¸ªåŸŸåä¸‹ï¼Œè¿™ä¸ªæ—¶å€™å‰ç«¯è„šæœ¬åœ¨è¿›è¡Œaxiosè®¿é—®çš„æ—¶å€™æµè§ˆå™¨å°±ä¼šæŠ¥è·¨åŸŸç›¸å…³çš„é”™è¯¯ã€‚</p><p>åŸå› ï¼šæµè§ˆå™¨çš„åŒæºç­–ç•¥ä¸å…è®¸è·¨åŸŸè®¿é—®ï¼Œæ‰€è°“åŒæºç­–ç•¥æ˜¯æŒ‡åè®®ã€åŸŸåã€ç«¯å£ç›¸åŒã€‚</p><h2 id="1-è®¾ç½®ä»£ç†æœåŠ¡å™¨-å®ç°è·¨åŸŸè¯·æ±‚è½¬å‘"><a href="#1-è®¾ç½®ä»£ç†æœåŠ¡å™¨-å®ç°è·¨åŸŸè¯·æ±‚è½¬å‘" class="headerlink" title="1. è®¾ç½®ä»£ç†æœåŠ¡å™¨,å®ç°è·¨åŸŸè¯·æ±‚è½¬å‘"></a>1. è®¾ç½®ä»£ç†æœåŠ¡å™¨,å®ç°è·¨åŸŸè¯·æ±‚è½¬å‘</h2><p>æ–¹æ¡ˆï¼šé‡‡ç”¨proxyTableè§£å†³ã€‚</p><ol><li><p>proxyTableæ˜¯ä»€ä¹ˆï¼Ÿ</p><p> vue-cliæä¾›çš„è§£å†³vueå¼€å‘ç¯å¢ƒä¸‹è·¨åŸŸé—®é¢˜çš„æ–¹æ³•ï¼ŒproxyTableçš„åº•å±‚ä½¿ç”¨äº†<a href="https://github.com/chimurai/http-proxy-middleware">http-proxy-middleware</a>,å®ƒæ˜¯httpä»£ç†ä¸­é—´ä»¶ï¼Œå®ƒä¾èµ–node.jsï¼ŒåŸºæœ¬åŸç†æ˜¯ç”¨æœåŠ¡ç«¯ä»£ç†è§£å†³æµè§ˆå™¨è·¨åŸŸ</p><p> å®ç°çš„è¿‡ç¨‹å°±æ˜¯åœ¨æˆ‘ä»¬å‰ç«¯çš„æœ¬åœ°èµ·ä¸€ä¸ªæœåŠ¡ï¼Œç„¶åæˆ‘ä»¬å‰ç«¯çš„æ‰€æœ‰ajaxè®¿é—®é¦–é€‰è®¿é—®æˆ‘ä»¬æœ¬åœ°çš„æœåŠ¡ï¼Œæœ¬åœ°çš„æœåŠ¡ä¸ä¼šå¯¹æ¥çš„è¯·æ±‚åšåŠ å·¥å¤„ç†ï¼Œåªæ˜¯å°†è¯·æ±‚è½¬å‘åˆ°æˆ‘ä»¬çœŸå®çš„åå°æœåŠ¡ä¸Šå»ã€‚æˆ‘ä»¬æœ¬åœ°çš„æœåŠ¡å…¶å®ä½ å°±æ˜¯ä¸€ä¸ªä¸­è½¬ç«™ã€‚è¿™ç§è§£å†³æ–¹æ¡ˆå°±æ˜¯åˆ©ç”¨<strong>åç«¯ä¹‹é—´è®¿é—®æ˜¯ä¸å­˜åœ¨è·¨åŸŸçš„é—®é¢˜</strong>ã€‚</p></li><li><p>å…·ä½“æµç¨‹</p><ol><li><p>é¦–å…ˆåœ¨<code>config/index.js</code>é‡Œé¢æ‰¾åˆ°<code>proxyTable:&#123;&#125;</code>,ç„¶ååœ¨é‡Œé¢åŠ å…¥</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-string">&quot;/api&quot;</span>:&#123;<br>    target: <span class="hljs-string">&#x27;https://www.runoob.com&#x27;</span>,<br>    changeOrigin: <span class="hljs-literal">true</span>,<br>    pathRewrite:&#123;<br>        <span class="hljs-string">&#x27;^/api&#x27;</span>:<span class="hljs-string">&#x27;&#x27;</span><br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><blockquote><p>æ³¨æ„:</p></blockquote><ul><li><p><code>/api</code>: æ˜¯è‡ªå®šä¹‰çš„ï¼Œå†™æˆä»€ä¹ˆéƒ½å¯ä»¥ã€‚</p></li><li><p><code>target</code>: è®¾ç½®è¦è°ƒç”¨çš„æ¥å£åŸŸåå’Œç«¯å£å·ã€‚</p></li><li><p><code>^/api</code>: ä»£æ›¿<code>target</code>é‡Œé¢çš„åœ°å€ï¼Œåé¢ç»„ä»¶ä¸­æˆ‘ä»¬è°ƒæ¥å£æ—¶ç›´æ¥ç”¨<code>/api</code>ä»£æ›¿</p></li></ul></li><li><p>åœ¨ç»„ä»¶ä¸­å®ç°è·¨åŸŸè¯·æ±‚</p><ul><li><p>æ¯”å¦‚è¦è®¿é—®<code>&#39;https://www.runoob.com/ajax/json_demo.json&#39;</code>ï¼Œç›´æ¥å†™<code>/api/ajax/json_demo.json</code>å³å¯ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br>axios.get(<span class="hljs-string">&#x27;/api/ajax/json_demo.json&#x27;</span>)<br>    .then(<span class="hljs-function"><span class="hljs-params">resp</span>=&gt;</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(resp.data)<br>    &#125;)<br>    .cath(<span class="hljs-function"><span class="hljs-params">err</span>=&gt;</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(err)<br>    &#125;)<br></code></pre></div></td></tr></table></figure></li><li><p>ç„¶è€Œæˆ‘ä»¬å¯ä»¥åœ¨<code>src/main.js</code>è®¾ç½®ä¸€ä¸ªåŸºç¡€è·¯å¾„ï¼Œè¿™æ ·ä½ è°ƒç”¨æ¥å£çš„æ—¶å€™å¯ä»¥ä¸å†™<code>api</code>,ç›´æ¥å†™<code>/ajax/json_demo.json</code>å³å¯ã€‚</p><ul><li><p>åœ¨<code>src/main.js</code>è®¾ç½®<code>axios.defaults.baseURL=&quot;/api&quot;</code>;</p>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br>axios.defaults.baseURL=<span class="hljs-string">&quot;/api&quot;</span>;<br></code></pre></div></td></tr></table></figure></li><li><p>åœ¨ç»„ä»¶ä¸­ç›´æ¥è°ƒç”¨æ¥å£å³å¯ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br>axios.get(<span class="hljs-string">&#x27;/ajax/json_demo.json&#x27;</span>)<br>    .then(<span class="hljs-function"><span class="hljs-params">resp</span>=&gt;</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(resp.data)<br>    &#125;)<br>    .cath(<span class="hljs-function"><span class="hljs-params">err</span>=&gt;</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(err)<br>    &#125;)<br></code></pre></div></td></tr></table></figure><h2 id="2-åœ¨åå°djangoä¸­é…ç½®è·¨åŸŸè¯·æ±‚å…è®¸"><a href="#2-åœ¨åå°djangoä¸­é…ç½®è·¨åŸŸè¯·æ±‚å…è®¸" class="headerlink" title="2. åœ¨åå°djangoä¸­é…ç½®è·¨åŸŸè¯·æ±‚å…è®¸"></a>2. åœ¨åå°djangoä¸­é…ç½®è·¨åŸŸè¯·æ±‚å…è®¸</h2></li></ul></li></ul></li></ol></li></ol><p>ä½†æ˜¯ä»Šå¤©æˆ‘ä»¬è¿™é‡Œä¸è®²è¿™ç§æ–¹å¼ï¼Œæœ‰å…´è¶£çš„å¯ä»¥åœ¨æˆ‘çš„å¦ä¸€ç¯‡åšå®¢çœ‹åˆ°</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è·¨åŸŸ </tag>
            
            <tag> vue </tag>
            
            <tag> axios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Axios(ä¸€):axiosåœ¨vueä¸­çš„ä½¿ç”¨æ•™ç¨‹</title>
      <link href="2020/03/03/vue-axios-yi-axios-zai-vue-zhong-de-shi-yong-jiao-cheng/"/>
      <url>2020/03/03/vue-axios-yi-axios-zai-vue-zhong-de-shi-yong-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ vueé¡¹ç›®ä¸­ä½¿ç”¨axiosåˆ†ä¸ºå±€éƒ¨ä½¿ç”¨å’Œå…¨å±€ä½¿ç”¨</p><h2 id="åœ¨vueä¸­å±€éƒ¨ä½¿ç”¨"><a href="#åœ¨vueä¸­å±€éƒ¨ä½¿ç”¨" class="headerlink" title="åœ¨vueä¸­å±€éƒ¨ä½¿ç”¨"></a>åœ¨vueä¸­å±€éƒ¨ä½¿ç”¨</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br>axios.get(<span class="hljs-string">&#x27;/api/goods/add_info/?ID=12345&amp;firstName=Fred&amp;lastName=Flintstone&#x27;</span>)<br>.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(response);<br>&#125;)<br>.catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(error);<br>&#125;);<br></code></pre></div></td></tr></table></figure><h2 id="åœ¨vueä¸­å…¨éƒ¨ä½¿ç”¨"><a href="#åœ¨vueä¸­å…¨éƒ¨ä½¿ç”¨" class="headerlink" title="åœ¨vueä¸­å…¨éƒ¨ä½¿ç”¨"></a>åœ¨vueä¸­å…¨éƒ¨ä½¿ç”¨</h2><p>axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œæ‰€ä»¥æ˜¯ä¸èƒ½ä½¿ç”¨vue.use()æ–¹æ³•çš„ã€‚<br>é‚£ä¹ˆéš¾é“æˆ‘ä»¬è¦åœ¨æ¯ä¸ªæ–‡ä»¶éƒ½è¦æ¥å¼•ç”¨ä¸€æ¬¡axioså—ï¼Ÿå¤šç¹çï¼ï¼ï¼<br>â˜è§£å†³æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼š</p><h3 id="1-ç»“åˆ-vue-axiosä½¿ç”¨"><a href="#1-ç»“åˆ-vue-axiosä½¿ç”¨" class="headerlink" title="1.ç»“åˆ vue-axiosä½¿ç”¨"></a>1.ç»“åˆ vue-axiosä½¿ç”¨</h3><p>çœ‹äº†vue-axiosçš„æºç ï¼Œå®ƒæ˜¯æŒ‰ç…§vueæ’ä»¶çš„æ–¹å¼å»å†™çš„ã€‚é‚£ä¹ˆç»“åˆvue-axiosï¼Œå°±å¯ä»¥å»ä½¿ç”¨vue.useæ–¹æ³•äº†</p><ol><li><p>é¦–å…ˆåœ¨ä¸»å…¥å£æ–‡ä»¶main.jsä¸­å¼•ç”¨ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><span class="hljs-keyword">import</span> VueAxios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-axios&#x27;</span><br><br>Vue.use(VueAxios,axios);<br></code></pre></div></td></tr></table></figure></li><li><p>ä¹‹åå°±å¯ä»¥ä½¿ç”¨äº†ï¼Œåœ¨ç»„ä»¶æ–‡ä»¶ä¸­çš„methodsé‡Œå»ä½¿ç”¨äº†ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-title">getNewsList</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">this</span>.axios.get(<span class="hljs-string">&#x27;api/getNewsList&#x27;</span>).then(<span class="hljs-function">(<span class="hljs-params">response</span>)=&gt;</span>&#123;<br>        <span class="hljs-built_in">this</span>.newsList=response.data.data;<br>    &#125;).catch(<span class="hljs-function">(<span class="hljs-params">response</span>)=&gt;</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(response);<br>    &#125;)<br>&#125;<br></code></pre></div></td></tr></table></figure><h3 id="2-axios-æ”¹å†™ä¸º-Vue-çš„åŸå‹å±æ€§ï¼ˆä¸æ¨èè¿™æ ·ç”¨ï¼‰"><a href="#2-axios-æ”¹å†™ä¸º-Vue-çš„åŸå‹å±æ€§ï¼ˆä¸æ¨èè¿™æ ·ç”¨ï¼‰" class="headerlink" title="2.axios æ”¹å†™ä¸º Vue çš„åŸå‹å±æ€§ï¼ˆä¸æ¨èè¿™æ ·ç”¨ï¼‰"></a>2.axios æ”¹å†™ä¸º Vue çš„åŸå‹å±æ€§ï¼ˆä¸æ¨èè¿™æ ·ç”¨ï¼‰</h3></li><li><p>é¦–å…ˆåœ¨ä¸»å…¥å£æ–‡ä»¶main.jsä¸­å¼•ç”¨ï¼Œä¹‹åæŒ‚åœ¨vueçš„åŸå‹é“¾ä¸Šï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br>Vue.prototype.$axios= axios<br></code></pre></div></td></tr></table></figure></li><li><p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">this</span>.$ajax.get(<span class="hljs-string">&#x27;api/getNewsList&#x27;</span>)<br>.then(<span class="hljs-function">(<span class="hljs-params">response</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">this</span>.newsList=response.data.data;<br>&#125;).catch(<span class="hljs-function">(<span class="hljs-params">response</span>)=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(response);<br>&#125;)<br></code></pre></div></td></tr></table></figure><h3 id="3-ç»“åˆVuexçš„action"><a href="#3-ç»“åˆVuexçš„action" class="headerlink" title="3. ç»“åˆVuexçš„action"></a>3. ç»“åˆVuexçš„action</h3></li><li><p>åœ¨vuexçš„ä»“åº“æ–‡ä»¶store.jsä¸­å¼•ç”¨ï¼Œä½¿ç”¨actionæ·»åŠ æ–¹æ³•</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;Vue&#x27;</span><br><span class="hljs-keyword">import</span> Vuex <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br>Vue.use(Vuex)<br><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> Vuex.Store(&#123;<br><span class="hljs-comment">// å®šä¹‰çŠ¶æ€</span><br>state: &#123;<br>    user: &#123;<br>    name: <span class="hljs-string">&#x27;xiaoming&#x27;</span><br>    &#125;<br>&#125;,<br>actions: &#123;<br>    <span class="hljs-comment">// å°è£…ä¸€ä¸ª ajax æ–¹æ³•</span><br>    login (context) &#123;<br>    axios(&#123;<br>        method: <span class="hljs-string">&#x27;post&#x27;</span>,<br>        url: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>        data: context.state.user<br>    &#125;)<br>    &#125;<br>&#125;<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store<br></code></pre></div></td></tr></table></figure></li><li><p>åœ¨ç»„ä»¶ä¸­å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨ this.$store.dispatch</p> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">methods: &#123;<br>    submitForm () &#123;<br>        <span class="hljs-built_in">this</span>.$store.dispatch(<span class="hljs-string">&#x27;login&#x27;</span>)<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> axios </tag>
            
            <tag> vue-axios </tag>
            
            <tag> å±€éƒ¨axios </tag>
            
            <tag> å…¨å±€axios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Axios(ä¸‰):GETå’ŒPOSTæäº¤æ•°æ®</title>
      <link href="2020/03/03/vue-axios-san-get-he-post-ti-jiao-shu-ju/"/>
      <url>2020/03/03/vue-axios-san-get-he-post-ti-jiao-shu-ju/</url>
      
        <content type="html"><![CDATA[<h2 id="GET-è¯·æ±‚ä¼ é€’å‚æ•°"><a href="#GET-è¯·æ±‚ä¼ é€’å‚æ•°" class="headerlink" title="GET è¯·æ±‚ä¼ é€’å‚æ•°"></a>GET è¯·æ±‚ä¼ é€’å‚æ•°</h2><h3 id="1ã€ç›´æ¥åœ¨-URL-ä¸Šæ·»åŠ å‚æ•°"><a href="#1ã€ç›´æ¥åœ¨-URL-ä¸Šæ·»åŠ å‚æ•°" class="headerlink" title="1ã€ç›´æ¥åœ¨ URL ä¸Šæ·»åŠ å‚æ•°"></a>1ã€ç›´æ¥åœ¨ URL ä¸Šæ·»åŠ å‚æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br>axios.get(<span class="hljs-string">&#x27;/api/goods/add_info/?ID=12345&amp;firstName=Fred&amp;lastName=Flintstone&#x27;</span>)<br>.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(response);<br>&#125;)<br>.catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(error);<br>&#125;);<br></code></pre></div></td></tr></table></figure><h3 id="2ã€å¯ä»¥é€šè¿‡-params-è®¾ç½®å‚æ•°"><a href="#2ã€å¯ä»¥é€šè¿‡-params-è®¾ç½®å‚æ•°" class="headerlink" title="2ã€å¯ä»¥é€šè¿‡ params è®¾ç½®å‚æ•°"></a>2ã€å¯ä»¥é€šè¿‡ params è®¾ç½®å‚æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br>axios.get(<span class="hljs-string">&#x27;/api/goods/add_info/&#x27;</span>, &#123;<br>    params: &#123;<br>        ID: <span class="hljs-number">12345</span>,<br>        firstName: <span class="hljs-string">&#x27;Fred&#x27;</span>,<br>        lastName: <span class="hljs-string">&#x27;Flintstone&#x27;</span>,<br>    &#125;<br>&#125;)<br>.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(response);<br>&#125;)<br>.catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(error);<br>&#125;);<br></code></pre></div></td></tr></table></figure><h2 id="POST-è¯·æ±‚ä¼ é€’å‚æ•°"><a href="#POST-è¯·æ±‚ä¼ é€’å‚æ•°" class="headerlink" title="POST è¯·æ±‚ä¼ é€’å‚æ•°"></a>POST è¯·æ±‚ä¼ é€’å‚æ•°</h2><h3 id="1ã€Content-Type-application-json"><a href="#1ã€Content-Type-application-json" class="headerlink" title="1ã€Content-Type: application/json"></a>1ã€Content-Type: application/json</h3><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-keyword">let</span> data = &#123;<span class="hljs-string">&quot;code&quot;</span>:<span class="hljs-string">&quot;1234&quot;</span>,<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;yyyy&quot;</span>&#125;;<br>axios.post(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">this</span>.$url&#125;</span>/test/testRequest`</span>,data)<br>.then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;res=&gt;&#x27;</span>,res);<br>&#125;)<br></code></pre></div></td></tr></table></figure><h3 id="2ã€Content-Type-multipart-form-data"><a href="#2ã€Content-Type-multipart-form-data" class="headerlink" title="2ã€Content-Type: multipart/form-data"></a>2ã€Content-Type: multipart/form-data</h3><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><span class="hljs-keyword">let</span> data = <span class="hljs-keyword">new</span> FormData();<br>data.append(<span class="hljs-string">&#x27;code&#x27;</span>,<span class="hljs-string">&#x27;1234&#x27;</span>);<br>data.append(<span class="hljs-string">&#x27;name&#x27;</span>,<span class="hljs-string">&#x27;yyyy&#x27;</span>);<br>axios.post(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">this</span>.$url&#125;</span>/test/testRequest`</span>,data)<br>.then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;res=&gt;&#x27;</span>,res);<br>&#125;)<br></code></pre></div></td></tr></table></figure><h3 id="3ã€Content-Type-application-x-www-form-urlencoded"><a href="#3ã€Content-Type-application-x-www-form-urlencoded" class="headerlink" title="3ã€Content-Type: application/x-www-form-urlencoded"></a>3ã€Content-Type: application/x-www-form-urlencoded</h3><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><span class="hljs-keyword">import</span> qs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;Qs&#x27;</span><br><span class="hljs-keyword">let</span> data = &#123;<span class="hljs-string">&quot;code&quot;</span>:<span class="hljs-string">&quot;1234&quot;</span>,<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;yyyy&quot;</span>&#125;;<br>axios.post(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">this</span>.$url&#125;</span>/test/testRequest`</span>,qs.stringify(&#123;<br>    data<br>&#125;))<br>.then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;res=&gt;&#x27;</span>,res);<br>&#125;)<br></code></pre></div></td></tr></table></figure><p>æ€»ç»“ï¼š<br>1ã€ä¸Šé¢ä¸‰ç§æ–¹å¼ä¼šå¯¹åº”åå°çš„è¯·æ±‚æ–¹å¼ï¼Œè¿™ä¸ªä¹Ÿè¦æ³¨æ„ï¼Œæ¯”å¦‚django POSTå‚æ•°è·å–</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> axios </tag>
            
            <tag> GET </tag>
            
            <tag> POST </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Axios(äºŒ):APIè¯´æ˜</title>
      <link href="2020/03/03/vue-axios-er-api-shuo-ming/"/>
      <url>2020/03/03/vue-axios-er-api-shuo-ming/</url>
      
        <content type="html"><![CDATA[<h2 id="Axios-API"><a href="#Axios-API" class="headerlink" title="Axios API"></a>Axios API</h2><ol><li><p>å¯ä»¥é€šè¿‡å‘ axios ä¼ é€’ç›¸å…³é…ç½®æ¥åˆ›å»ºè¯·æ±‚</p><ul><li><p>axiosé…ç½®å…¨éƒ¨å‚æ•°</p>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">axios(config)<br></code></pre></div></td></tr></table></figure>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å‘é€ POST è¯·æ±‚</span><br>axios(&#123;<br>    method: <span class="hljs-string">&#x27;post&#x27;</span>,<br>    url: <span class="hljs-string">&#x27;/user/12345&#x27;</span>,<br>    data: &#123;<br>    firstName: <span class="hljs-string">&#x27;Fred&#x27;</span>,<br>    lastName: <span class="hljs-string">&#x27;Flintstone&#x27;</span><br>    &#125;<br>&#125;);<br></code></pre></div></td></tr></table></figure></li><li><p>axiosä¸­æŒ‡å®šurlå’Œå‚æ•°é…ç½®</p>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">axios(url[, config])<br></code></pre></div></td></tr></table></figure>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å‘é€ GET è¯·æ±‚ï¼ˆé»˜è®¤çš„æ–¹æ³•ï¼‰</span><br>axios(<span class="hljs-string">&#x27;/user/12345&#x27;</span>);<br></code></pre></div></td></tr></table></figure>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å‘é€ POST è¯·æ±‚</span><br>axios(<span class="hljs-string">&#x27;/user/12345&#x27;</span>, &#123;<br>    method: <span class="hljs-string">&#x27;post&#x27;</span>,<br>    data: &#123;<br>    firstName: <span class="hljs-string">&#x27;Fred&#x27;</span>,<br>    lastName: <span class="hljs-string">&#x27;Flintstone&#x27;</span><br>    &#125;<br>&#125;);<br></code></pre></div></td></tr></table></figure></li></ul></li><li><p>è¯·æ±‚æ–¹æ³•çš„åˆ«å</p><ul><li><p>ä¸ºæ–¹ä¾¿èµ·è§ï¼Œä¸ºæ‰€æœ‰æ”¯æŒçš„è¯·æ±‚æ–¹æ³•æä¾›äº†åˆ«å</p>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">axios.request(config)<br>axios.get(url[, config])<br>axios.delete(url[, config])<br>axios.head(url[, config])<br>axios.post(url[, data[, config]])<br>axios.put(url[, data[, config]])<br>axios.patch(url[, data[, config]])<br></code></pre></div></td></tr></table></figure><blockquote><p>NOTE:åœ¨ä½¿ç”¨åˆ«åæ–¹æ³•æ—¶ï¼Œ urlã€methodã€data è¿™äº›å±æ€§éƒ½ä¸å¿…åœ¨é…ç½®ä¸­æŒ‡å®šã€‚</p></blockquote></li><li><p>axiosè¯·æ±‚æ–¹æ³•</p>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å‘é€ POST è¯·æ±‚</span><br>axios.post(<span class="hljs-string">&#x27;/user/12345&#x27;</span>,&#123;<br>    firstName: <span class="hljs-string">&#x27;Fred&#x27;</span>,<br>    lastName: <span class="hljs-string">&#x27;Flintstone&#x27;</span><br>&#125;);<br></code></pre></div></td></tr></table></figure></li></ul></li><li><p>å¹¶å‘</p><ul><li><p>å¤„ç†å¹¶å‘è¯·æ±‚çš„åŠ©æ‰‹å‡½æ•°</p>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">axios.all(iterable)<br>axios.spread(callback)<br></code></pre></div></td></tr></table></figure></li><li><p>æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserAccount</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> axios.get(<span class="hljs-string">&#x27;/user/12345&#x27;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserPermissions</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> axios.get(<span class="hljs-string">&#x27;/user/12345/permissions&#x27;</span>);<br>&#125;<br><br>axios.all([getUserAccount(), getUserPermissions()])<br>.then(axios.spread(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">acct, perms</span>) </span>&#123;<br>    <span class="hljs-comment">// ä¸¤ä¸ªè¯·æ±‚ç°åœ¨éƒ½æ‰§è¡Œå®Œæˆ</span><br>&#125;));<br></code></pre></div></td></tr></table></figure></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> axios </tag>
            
            <tag> API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸»é”®çº¦æŸå’Œå”¯ä¸€æ€§çº¦æŸçš„åŒºåˆ«</title>
      <link href="2020/02/26/shu-ju-ku-mysql-zhu-jian-yue-shu-he-wei-yi-xing-yue-shu-de-qu-bie/"/>
      <url>2020/02/26/shu-ju-ku-mysql-zhu-jian-yue-shu-he-wei-yi-xing-yue-shu-de-qu-bie/</url>
      
        <content type="html"><![CDATA[<p>ä¸»é”®å¿…ç„¶æ˜¯å”¯ä¸€ä¸”ä¸ä¸ºç©ºï¼Œä½†æ˜¯å”¯ä¸€ä¸ä¸€å®šæ˜¯ä¸»é”®ï¼Œè€Œä¸”ä¸»é”®åªèƒ½æœ‰ä¸€ä¸ªï¼Œä½†æ˜¯å”¯ä¸€çº¦æŸä»…ä»…æ˜¯ä¸ºäº†ä¿æŒæŸäº›åˆ—å…·æœ‰å”¯ä¸€æ€§è€Œå·²ã€‚æ‰€ä»¥å¯ä»¥æœ‰å¤šåˆ—<br>ä¸€å¼ è¡¨é‡Œåªèƒ½æœ‰ä¸€ä¸ªä¸»é”®çº¦æŸï¼Œå¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€çº¦æŸ<br>ä¸»é”®çº¦æŸçš„å­—æ®µä¸èƒ½ä¸ºnullï¼Œè€Œå”¯ä¸€çº¦æŸçš„å­—æ®µå¯ä»¥ä¸ºnullå€¼</p><a id="more"></a><h3 id="ä¸»é”®çº¦æŸï¼ˆPRIMARY-KEYï¼‰"><a href="#ä¸»é”®çº¦æŸï¼ˆPRIMARY-KEYï¼‰" class="headerlink" title="ä¸»é”®çº¦æŸï¼ˆPRIMARY KEYï¼‰"></a>ä¸»é”®çº¦æŸï¼ˆPRIMARY KEYï¼‰</h3><p>1) ä¸»é”®ç”¨äºå”¯ä¸€åœ°æ ‡è¯†è¡¨ä¸­çš„æ¯ä¸€æ¡è®°å½•ï¼Œå¯ä»¥å®šä¹‰ä¸€åˆ—æˆ–å¤šåˆ—ä¸ºä¸»é”®ã€‚<br>2) æ˜¯ä¸å¯èƒ½ï¼ˆæˆ–å¾ˆéš¾ï¼‰æ›´æ–°ï¼<br>3) ä¸»é”®åˆ—ä¸Šæ²¡æœ‰ä»»ä½•ä¸¤è¡Œå…·æœ‰ç›¸åŒå€¼ï¼ˆå³é‡å¤å€¼ï¼‰ï¼Œä¸å…è®¸ç©ºï¼ˆNULLï¼‰ï¼<br>4) ä¸»å¥å¯ä½œå¤–å¥ï¼Œå”¯ä¸€ç´¢å¼•ä¸å¯ï¼›</p><h3 id="å”¯ä¸€æ€§çº¦æŸï¼ˆUNIQUEï¼‰"><a href="#å”¯ä¸€æ€§çº¦æŸï¼ˆUNIQUEï¼‰" class="headerlink" title="å”¯ä¸€æ€§çº¦æŸï¼ˆUNIQUEï¼‰"></a>å”¯ä¸€æ€§çº¦æŸï¼ˆUNIQUEï¼‰</h3><p>1) å”¯ä¸€æ€§çº¦æŸç”¨æ¥é™åˆ¶ä¸å—ä¸»é”®çº¦æŸçš„åˆ—ä¸Šçš„æ•°æ®çš„å”¯ä¸€æ€§ï¼Œç”¨äºä½œä¸ºè®¿é—®æŸè¡Œçš„å¯é€‰æ‰‹æ®µï¼Œä¸€ä¸ªè¡¨ä¸Šå¯ä»¥æ”¾ç½®å¤šä¸ªå”¯ä¸€æ€§çº¦æŸï¼<br>2) åªè¦å”¯ä¸€å°±å¯ä»¥æ›´æ–°ï¼<br>3) å³è¡¨ä¸­ä»»æ„ä¸¤è¡Œåœ¨ æŒ‡å®šåˆ—ä¸Šéƒ½ä¸å…è®¸æœ‰ç›¸åŒçš„å€¼ï¼Œå…è®¸ç©ºï¼ˆNULLï¼‰ï¼<br>4) ä¸€ä¸ªè¡¨ä¸Šå¯ä»¥æ”¾ç½®å¤šä¸ªå”¯ä¸€æ€§çº¦æŸ</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> æ•°æ®åº“ </category>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸»é”®çº¦æŸ </tag>
            
            <tag> å”¯ä¸€çº¦æŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlæ“ä½œ</title>
      <link href="2019/12/12/shu-ju-ku-mysql-cao-zuo/"/>
      <url>2019/12/12/shu-ju-ku-mysql-cao-zuo/</url>
      
        <content type="html"><![CDATA[<p>ä»‹ç»å¦‚ä½•åœ¨ Ubuntuç³»ç»Ÿä¸Š å®‰è£…mysqlè½¯ä»¶ã€ä»¥åŠå¦‚ä½•åˆ›å»ºç”¨æˆ·ä¿¡æ¯ã€‚</p><h3 id="Mysqlè½¯ä»¶æ“ä½œ"><a href="#Mysqlè½¯ä»¶æ“ä½œ" class="headerlink" title="Mysqlè½¯ä»¶æ“ä½œ"></a>Mysqlè½¯ä»¶æ“ä½œ</h3><p>ä»¥ä¸‹æ‰€æœ‰æ“ä½œä»¥Ubuntuä¸ºä¾‹</p><h4 id="mysqlå®‰è£…"><a href="#mysqlå®‰è£…" class="headerlink" title="mysqlå®‰è£…"></a>mysqlå®‰è£…</h4><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo apt install mysql-server <span class="hljs-comment"># å®‰è£…mysql</span><br></code></pre></div></td></tr></table></figure><h4 id="mysqlåˆ é™¤"><a href="#mysqlåˆ é™¤" class="headerlink" title="mysqlåˆ é™¤"></a>mysqlåˆ é™¤</h4><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo apt remove --upgrade mysql-* -y <span class="hljs-comment"># å¸è½½mysql</span><br><br>dpkg -l|grep ^rc|awk <span class="hljs-string">&#x27;&#123;print$2&#125;&#x27;</span>|sudo xargs dpkg -P <span class="hljs-comment">#æ¸…é™¤é…ç½®</span><br></code></pre></div></td></tr></table></figure><h4 id="mysqlæœåŠ¡"><a href="#mysqlæœåŠ¡" class="headerlink" title="mysqlæœåŠ¡"></a>mysqlæœåŠ¡</h4><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">service mysql start <span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span><br>service mysql stop  <span class="hljs-comment"># åœæ­¢æœåŠ¡</span><br>service mysql restart  <span class="hljs-comment"># é‡å¯æœåŠ¡</span><br></code></pre></div></td></tr></table></figure><h3 id="mysqlç”¨æˆ·æ“ä½œ"><a href="#mysqlç”¨æˆ·æ“ä½œ" class="headerlink" title="mysqlç”¨æˆ·æ“ä½œ"></a>mysqlç”¨æˆ·æ“ä½œ</h3><h4 id="ä¸€ã€åˆ›å»ºç”¨æˆ·"><a href="#ä¸€ã€åˆ›å»ºç”¨æˆ·" class="headerlink" title="ä¸€ã€åˆ›å»ºç”¨æˆ·"></a>ä¸€ã€åˆ›å»ºç”¨æˆ·</h4><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;username&#x27;</span>@<span class="hljs-string">&#x27;host&#x27;</span> identified <span class="hljs-keyword">with</span> mysql_native_password <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;password&#x27;</span>;<br></code></pre></div></td></tr></table></figure><ul><li><code>username</code>ï¼šä½ å°†åˆ›å»ºçš„ç”¨æˆ·å</li><li><code>host</code>ï¼šæŒ‡å®šè¯¥ç”¨æˆ·åœ¨å“ªä¸ªä¸»æœºä¸Šå¯ä»¥ç™»é™†ï¼Œå¦‚æœæ˜¯æœ¬åœ°ç”¨æˆ·å¯ç”¨<code>localhost</code>ï¼Œå¦‚æœæƒ³è®©è¯¥ç”¨æˆ·å¯ä»¥ä»ä»»æ„è¿œç¨‹ä¸»æœºç™»é™†ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦<code>%</code></li><li><code>password</code>ï¼šè¯¥ç”¨æˆ·çš„ç™»é™†å¯†ç ï¼Œå¯†ç å¯ä»¥ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºåˆ™è¯¥ç”¨æˆ·å¯ä»¥ä¸éœ€è¦å¯†ç ç™»é™†æœåŠ¡å™¨</li><li><code>mysql_native_password</code>ï¼šç”¨æˆ·åŠ å¯†æ–¹å¼ï¼Œè¯¥æ–¹å¼ä¸ºmysql8.0ä¹‹å‰çš„åŠ å¯†æ–¹å¼ï¼Œå¦‚æœä¸å†™ï¼Œåˆ™æ˜¯mysql 8.0ä¹‹åçš„åŠ å¯†æ–¹å¼<code>caching_sha2_password</code></li></ul><h4 id="äºŒã€-ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯"><a href="#äºŒã€-ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="äºŒã€ ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯"></a>äºŒã€ ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</h4><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;username&#x27;</span>@<span class="hljs-string">&#x27;host&#x27;</span> identified <span class="hljs-keyword">with</span> mysql_native_password <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;password&#x27;</span>;<br></code></pre></div></td></tr></table></figure><ul><li>å‚æ•°åŒä¸Š</li></ul><h4 id="ä¸‰ã€åˆ é™¤ç”¨æˆ·"><a href="#ä¸‰ã€åˆ é™¤ç”¨æˆ·" class="headerlink" title="ä¸‰ã€åˆ é™¤ç”¨æˆ·"></a>ä¸‰ã€åˆ é™¤ç”¨æˆ·</h4><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;username&#x27;</span>@<span class="hljs-string">&#x27;host&#x27;</span>;<br></code></pre></div></td></tr></table></figure><ul><li>å‚æ•°åŒä¸Š</li></ul><h4 id="å››ã€æˆæƒ"><a href="#å››ã€æˆæƒ" class="headerlink" title="å››ã€æˆæƒ"></a>å››ã€æˆæƒ</h4><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">grant</span> privileges <span class="hljs-keyword">on</span> databasename.tablename <span class="hljs-keyword">to</span> <span class="hljs-string">&#x27;username&#x27;</span>@<span class="hljs-string">&#x27;host&#x27;</span>;<br></code></pre></div></td></tr></table></figure><ul><li>privilegesï¼šç”¨æˆ·çš„æ“ä½œæƒé™ï¼Œå¦‚SELECTï¼ŒINSERTï¼ŒUPDATEç­‰ï¼Œå¦‚æœè¦æˆäºˆæ‰€çš„æƒé™åˆ™ä½¿ç”¨ALL</li><li>databasenameï¼šæ•°æ®åº“å</li><li>tablenameï¼šè¡¨åï¼Œå¦‚æœè¦æˆäºˆè¯¥ç”¨æˆ·å¯¹æ‰€æœ‰æ•°æ®åº“å’Œè¡¨çš„ç›¸åº”æ“ä½œæƒé™åˆ™å¯ç”¨<em>è¡¨ç¤ºï¼Œå¦‚</em>.*</li><li>å…¶ä½™å‚æ•°åŒä¸Š</li></ul><h4 id="äº”ã€åˆ é™¤æƒé™"><a href="#äº”ã€åˆ é™¤æƒé™" class="headerlink" title="äº”ã€åˆ é™¤æƒé™"></a>äº”ã€åˆ é™¤æƒé™</h4><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">revoke</span> privileges <span class="hljs-keyword">on</span> databasename.tablename <span class="hljs-keyword">to</span> <span class="hljs-string">&#x27;username&#x27;</span>@<span class="hljs-string">&#x27;host&#x27;</span>;<br></code></pre></div></td></tr></table></figure><ul><li>å‚æ•°åŒä¸Š</li></ul><h4 id="å…­ã€æ¼”ç¤º"><a href="#å…­ã€æ¼”ç¤º" class="headerlink" title="å…­ã€æ¼”ç¤º"></a>å…­ã€æ¼”ç¤º</h4><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># åˆ›å»ºä¸€ä¸ªå¯ä»¥ä»ä»»æ„è¿œç¨‹ä¸»æœºç™»é™†çš„ç”¨æˆ·test<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;test&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> identified <span class="hljs-keyword">with</span> mysql_native_password <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;123456&#x27;</span>;<br><br># åˆ›å»ºæ•°æ®åº“mydata<br><span class="hljs-keyword">create</span> database mydata charset<span class="hljs-operator">=</span>utf8;<br><br># å¯¹ç”¨æˆ·testæˆæƒï¼Œåªèƒ½æ“ä½œæ•°æ®åº“mydata<br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">on</span> mydata.<span class="hljs-operator">*</span> <span class="hljs-keyword">to</span> <span class="hljs-string">&#x27;test&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span>;<br><br># åˆ·æ–°é…ç½®ï¼Œç«‹å³å¯ç”¨ä¿®æ”¹<br>flush privileges;<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> æ•°æ®åº“ </category>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”¨æˆ·ç®¡ç† </tag>
            
            <tag> mysqlè½¯ä»¶æ“ä½œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jsonæ¨¡å—</title>
      <link href="2019/11/25/python-mo-kuai-json-mo-kuai/"/>
      <url>2019/11/25/python-mo-kuai-json-mo-kuai/</url>
      
        <content type="html"><![CDATA[<h3 id="JSONä»‹ç»"><a href="#JSONä»‹ç»" class="headerlink" title="JSONä»‹ç»"></a>JSONä»‹ç»</h3><p>JSON(JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚æ˜“äºäººé˜…è¯»å’Œç¼–å†™ã€‚åŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚å®ƒåŸºäºJavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999çš„ä¸€ä¸ªå­é›†ã€‚</p><h4 id="JSON-è¯­æ³•è§„åˆ™"><a href="#JSON-è¯­æ³•è§„åˆ™" class="headerlink" title="JSON è¯­æ³•è§„åˆ™"></a>JSON è¯­æ³•è§„åˆ™</h4><p>JSONæ˜¯ä¸€ä¸ªæ ‡è®°ç¬¦çš„åºåˆ—ã€‚<br>JSONæ˜¯ä¸€ä¸ªåºåˆ—åŒ–çš„å¯¹è±¡æˆ–æ•°ç»„ã€‚</p><h4 id="JSON-ä¸-JS-å¯¹è±¡çš„å…³ç³»"><a href="#JSON-ä¸-JS-å¯¹è±¡çš„å…³ç³»" class="headerlink" title="JSON ä¸ JS å¯¹è±¡çš„å…³ç³»"></a>JSON ä¸ JS å¯¹è±¡çš„å…³ç³»</h4><p>å¾ˆå¤šäººæä¸æ¸…æ¥š JSON å’Œ JS å¯¹è±¡çš„å…³ç³»ï¼Œç”šè‡³è¿è°æ˜¯è°éƒ½ä¸æ¸…æ¥šã€‚å…¶å®ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼š<br><strong>JSON æ˜¯ JS å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ³•ï¼Œå®ƒä½¿ç”¨æ–‡æœ¬è¡¨ç¤ºä¸€ä¸ª JS å¯¹è±¡çš„ä¿¡æ¯ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</strong><br>å¦‚</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> obj = &#123;<span class="hljs-attr">a</span>: <span class="hljs-string">&#x27;Hello&#x27;</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">&#x27;World&#x27;</span>&#125;; <span class="hljs-comment">//è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ³¨æ„é”®åä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨å¼•å·åŒ…è£¹çš„</span><br><br><span class="hljs-keyword">var</span> json = <span class="hljs-string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>; <span class="hljs-comment">//è¿™æ˜¯ä¸€ä¸ª JSON å­—ç¬¦ä¸²ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span><br></code></pre></div></td></tr></table></figure><h4 id="JSON-å’Œ-JS-å¯¹è±¡äº’è½¬"><a href="#JSON-å’Œ-JS-å¯¹è±¡äº’è½¬" class="headerlink" title="JSON å’Œ JS å¯¹è±¡äº’è½¬"></a>JSON å’Œ JS å¯¹è±¡äº’è½¬</h4><p>è¦å®ç°ä»JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJSå¯¹è±¡ï¼Œä½¿ç”¨ JSON.parse() æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> obj = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>); <span class="hljs-comment">//ç»“æœæ˜¯ &#123;a: &#x27;Hello&#x27;, b: &#x27;World&#x27;&#125;</span><br></code></pre></div></td></tr></table></figure><p>è¦å®ç°ä»JSå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ JSON.stringify() æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.stringify(&#123;<span class="hljs-attr">a</span>: <span class="hljs-string">&#x27;Hello&#x27;</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">&#x27;World&#x27;</span>&#125;); <span class="hljs-comment">//ç»“æœæ˜¯ &#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span><br></code></pre></div></td></tr></table></figure><h4 id="JSON-å’Œ-PYTHON-å¯¹è±¡äº’è½¬"><a href="#JSON-å’Œ-PYTHON-å¯¹è±¡äº’è½¬" class="headerlink" title="JSON å’Œ PYTHON å¯¹è±¡äº’è½¬"></a>JSON å’Œ PYTHON å¯¹è±¡äº’è½¬</h4><p>è¦å®ç°ä»JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºPythonå¯¹è±¡ï¼Œä½¿ç”¨ json.loads() æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br><br>a_dict = json.loads(<span class="hljs-string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>) //ç»“æœæ˜¯ &#123;<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;Hello&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-string">&#x27;World&#x27;</span>&#125;<br>b_list = json.loads(<span class="hljs-string">&#x27;[1, 2, 3, 4]&#x27;</span>) //ç»“æœæ˜¯ [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<br></code></pre></div></td></tr></table></figure><p>è¦å®ç°ä»Pythonå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ json.dumps() æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br><br>a_obj = json.dumps(&#123;a: <span class="hljs-string">&#x27;Hello&#x27;</span>, b: <span class="hljs-string">&#x27;World&#x27;</span>&#125;) //ç»“æœæ˜¯ <span class="hljs-string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span><br>b_obj = json.dumps([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, &#123;<span class="hljs-string">&quot;a&quot;</span>:<span class="hljs-number">7</span>&#125;]) //ç»“æœæ˜¯ <span class="hljs-string">&#x27;[1, 2, 3, &#123;&quot;a&quot;: 7&#125;]&#x27;</span><br></code></pre></div></td></tr></table></figure><p>è¦å®ç°ä»Pythonå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå¹¶å†™å…¥åˆ°jsonæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ json.dump() æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br><br>a_obj = <span class="hljs-string">&#x27;[12, 34, 56]&#x27;</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;1.json&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>) <span class="hljs-keyword">as</span> f:<br>json.dump(a_obj,f)<br></code></pre></div></td></tr></table></figure><p>è¦å®ç°ä»jsonæ–‡ä»¶ä¸­è¯»å–JSONå­—ç¬¦ä¸²ï¼Œå¹¶è½¬æ¢ä¸ºPythonå¯¹è±¡ï¼Œä½¿ç”¨ json.load() æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;1.json&#x27;</span>, <span class="hljs-string">&quot;r&quot;</span>) <span class="hljs-keyword">as</span> f:<br>a_str = json.load(f)<br>print(a_str)<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> æ¨¡å— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Json </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythoné¢å‘å¯¹è±¡</title>
      <link href="2019/11/04/python-mian-xiang-dui-xiang-ji-chu/"/>
      <url>2019/11/04/python-mian-xiang-dui-xiang-ji-chu/</url>
      
        <content type="html"><![CDATA[<h2 id="ç±»ä¸å®ä¾‹"><a href="#ç±»ä¸å®ä¾‹" class="headerlink" title="ç±»ä¸å®ä¾‹"></a>ç±»ä¸å®ä¾‹</h2><p>é¢å‘å¯¹è±¡æœ€é‡è¦çš„æ¦‚å¿µå°±æ˜¯ç±»ï¼ˆ<code>Class</code>ï¼‰å’Œå®ä¾‹ï¼ˆ<code>Instance</code>ï¼‰ï¼Œå¿…é¡»ç‰¢è®°ç±»æ˜¯æŠ½è±¡çš„æ¨¡æ¿ï¼Œæ¯”å¦‚Studentç±»ï¼Œè€Œå®ä¾‹æ˜¯æ ¹æ®ç±»åˆ›å»ºå‡ºæ¥çš„ä¸€ä¸ªä¸ªå…·ä½“çš„â€œå¯¹è±¡â€ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œä½†å„è‡ªçš„æ•°æ®å¯èƒ½ä¸åŒã€‚</p><p>ä»ä»¥Studentç±»ä¸ºä¾‹ï¼Œåœ¨Pythonä¸­ï¼Œå®šä¹‰ç±»æ˜¯é€šè¿‡<code>class</code>å…³é”®å­—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-keyword">pass</span><br></code></pre></div></td></tr></table></figure><p><code>class</code>åé¢ç´§æ¥ç€æ˜¯ç±»åï¼Œå³<code>Student</code>ï¼Œç±»åé€šå¸¸æ˜¯å¤§å†™å¼€å¤´çš„å•è¯ï¼Œç´§æ¥ç€æ˜¯<code>(object)</code>ï¼Œè¡¨ç¤ºè¯¥ç±»æ˜¯ä»å“ªä¸ªç±»ç»§æ‰¿ä¸‹æ¥çš„ï¼Œç»§æ‰¿çš„æ¦‚å¿µæˆ‘ä»¬åé¢å†è®²ï¼Œé€šå¸¸ï¼Œå¦‚æœæ²¡æœ‰åˆé€‚çš„ç»§æ‰¿ç±»ï¼Œå°±ä½¿ç”¨<code>object</code>ç±»ï¼Œè¿™æ˜¯æ‰€æœ‰ç±»æœ€ç»ˆéƒ½ä¼šç»§æ‰¿çš„ç±»ã€‚</p><p>å®šä¹‰å¥½äº†<code>Student</code>ç±»ï¼Œå°±å¯ä»¥æ ¹æ®<code>Student</code>ç±»åˆ›å»ºå‡º<code>Student</code>çš„å®ä¾‹ï¼Œåˆ›å»ºå®ä¾‹æ˜¯é€šè¿‡<code>ç±»å+()</code>å®ç°çš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">5</span>]: s = Student()<br><br>In [<span class="hljs-number">6</span>]: s<br>Out[<span class="hljs-number">6</span>]: &lt;__main__.Student at <span class="hljs-number">0x107615860</span>&gt;<br><br>In [<span class="hljs-number">7</span>]: Student<br>Out[<span class="hljs-number">7</span>]: &lt;<span class="hljs-class"><span class="hljs-keyword">class</span> &#x27;<span class="hljs-title">__main__</span>.<span class="hljs-title">Student</span>&#x27;&gt;</span><br></code></pre></div></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå˜é‡<code>s</code>æŒ‡å‘çš„å°±æ˜¯ä¸€ä¸ª<code>Student</code>çš„å®ä¾‹ï¼Œåé¢çš„<code>0x107615860</code>æ˜¯å†…å­˜åœ°å€ï¼Œæ¯ä¸ªobjectçš„åœ°å€éƒ½ä¸ä¸€æ ·ï¼Œè€Œ<code>Student</code>æœ¬èº«åˆ™æ˜¯ä¸€ä¸ªç±»ã€‚</p><p>å¯ä»¥è‡ªç”±åœ°ç»™ä¸€ä¸ªå®ä¾‹å˜é‡ç»‘å®šå±æ€§ï¼Œæ¯”å¦‚ï¼Œç»™å®ä¾‹<code>s</code>ç»‘å®šä¸€ä¸ª<code>name</code>å±æ€§ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">9</span>]: s.name = <span class="hljs-string">&#x27;Bart Simpson&#x27;</span><br><br>In [<span class="hljs-number">10</span>]: s.name<br>Out[<span class="hljs-number">10</span>]: <span class="hljs-string">&#x27;Bart Simpson&#x27;</span><br></code></pre></div></td></tr></table></figure><p> ç”±äºç±»å¯ä»¥èµ·åˆ°æ¨¡æ¿çš„ä½œç”¨ï¼Œå› æ­¤ï¼Œå¯ä»¥åœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼ŒæŠŠä¸€äº›æˆ‘ä»¬è®¤ä¸ºå¿…é¡»ç»‘å®šçš„å±æ€§å¼ºåˆ¶å¡«å†™è¿›å»ã€‚é€šè¿‡å®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„<code>__init__</code>æ–¹æ³•ï¼Œåœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼Œå°±æŠŠ<code>name</code>ï¼Œ<code>score</code>ç­‰å±æ€§ç»‘ä¸Šå»ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name, score</span>):</span><br>        self.name = name<br>        self.score = score<br></code></pre></div></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šç‰¹æ®Šæ–¹æ³•â€œ<strong>init</strong>â€å‰ååˆ†åˆ«æœ‰ä¸¤ä¸ªä¸‹åˆ’çº¿ï¼ï¼ï¼</p></blockquote><p>æ³¨æ„åˆ°<code>__init__</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ˜¯<code>self</code>ï¼Œè¡¨ç¤ºåˆ›å»ºçš„å®ä¾‹æœ¬èº«ï¼Œå› æ­¤ï¼Œåœ¨<code>__init__</code>æ–¹æ³•å†…éƒ¨ï¼Œå°±å¯ä»¥æŠŠå„ç§å±æ€§ç»‘å®šåˆ°<code>self</code>ï¼Œå› ä¸º<code>self</code>å°±æŒ‡å‘åˆ›å»ºçš„å®ä¾‹æœ¬èº«ã€‚</p><p>æœ‰äº†<code>__init__</code>æ–¹æ³•ï¼Œåœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼Œå°±ä¸èƒ½ä¼ å…¥ç©ºçš„å‚æ•°äº†ï¼Œå¿…é¡»ä¼ å…¥ä¸<code>__init__</code>æ–¹æ³•åŒ¹é…çš„å‚æ•°ï¼Œä½†<code>self</code>ä¸éœ€è¦ä¼ ï¼ŒPythonè§£é‡Šå™¨è‡ªå·±ä¼šæŠŠå®ä¾‹å˜é‡ä¼ è¿›å»ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">14</span>]: <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    ...:<br>    ...:     <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name, score</span>):</span><br>    ...:         self.name = name<br>    ...:         self.score = score<br>    ...:<br><br>In [<span class="hljs-number">15</span>]: s = Student(<span class="hljs-string">&#x27;Bart Simpson&#x27;</span>, <span class="hljs-number">59</span>)<br><br>In [<span class="hljs-number">16</span>]: s.name<br>Out[<span class="hljs-number">16</span>]: <span class="hljs-string">&#x27;Bart Simpson&#x27;</span><br><br>In [<span class="hljs-number">17</span>]: s.score<br>Out[<span class="hljs-number">17</span>]: <span class="hljs-number">59</span><br></code></pre></div></td></tr></table></figure><p>å’Œæ™®é€šçš„å‡½æ•°ç›¸æ¯”ï¼Œåœ¨ç±»ä¸­å®šä¹‰çš„å‡½æ•°åªæœ‰ä¸€ç‚¹ä¸åŒï¼Œå°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ˜¯å®ä¾‹å˜é‡<code>self</code>ï¼Œå¹¶ä¸”ï¼Œè°ƒç”¨æ—¶ï¼Œä¸ç”¨ä¼ é€’è¯¥å‚æ•°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç±»çš„æ–¹æ³•å’Œæ™®é€šå‡½æ•°æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ‰€ä»¥ï¼Œä½ ä»ç„¶å¯ä»¥ç”¨é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°ã€å…³é”®å­—å‚æ•°å’Œå‘½åå…³é”®å­—å‚æ•°ã€‚</p><h2 id="æ•°æ®å°è£…"><a href="#æ•°æ®å°è£…" class="headerlink" title="æ•°æ®å°è£…"></a>æ•°æ®å°è£…</h2><p>é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹å°±æ˜¯æ•°æ®å°è£…ã€‚åœ¨ä¸Šé¢çš„<code>Student</code>ç±»ä¸­ï¼Œæ¯ä¸ªå®ä¾‹å°±æ‹¥æœ‰å„è‡ªçš„<code>name</code>å’Œ<code>score</code>è¿™äº›æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°æ¥è®¿é—®è¿™äº›æ•°æ®ï¼Œæ¯”å¦‚æ‰“å°ä¸€ä¸ªå­¦ç”Ÿçš„æˆç»©ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">19</span>]: <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_score</span>(<span class="hljs-params">std</span>):</span><br>    ...:     print(<span class="hljs-string">&#x27;%s: %s&#x27;</span> % (std.name, std.score))<br>    ...:<br><br>In [<span class="hljs-number">20</span>]: print_score(s)<br>Bart Simpson: <span class="hljs-number">59</span><br></code></pre></div></td></tr></table></figure><p>ä½†æ˜¯ï¼Œæ—¢ç„¶<code>Student</code>å®ä¾‹æœ¬èº«å°±æ‹¥æœ‰è¿™äº›æ•°æ®ï¼Œè¦è®¿é—®è¿™äº›æ•°æ®ï¼Œå°±æ²¡æœ‰å¿…è¦ä»å¤–é¢çš„å‡½æ•°å»è®¿é—®ï¼Œå¯ä»¥ç›´æ¥åœ¨<code>Student</code>ç±»çš„å†…éƒ¨å®šä¹‰è®¿é—®æ•°æ®çš„å‡½æ•°ï¼Œè¿™æ ·ï¼Œå°±æŠŠâ€œæ•°æ®â€ç»™å°è£…èµ·æ¥äº†ã€‚è¿™äº›å°è£…æ•°æ®çš„å‡½æ•°æ˜¯å’Œ<code>Student</code>ç±»æœ¬èº«æ˜¯å…³è”èµ·æ¥çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç±»çš„æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">23</span>]: <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    ...:<br>    ...:     <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name, score</span>):</span><br>    ...:         self.name = name<br>    ...:         self.score = score<br>    ...:<br>    ...:     <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_score</span>(<span class="hljs-params">self</span>):</span><br>    ...:         print(<span class="hljs-string">&#x27;%s: %s&#x27;</span> % (self.name, self.score))<br>    ...:<br></code></pre></div></td></tr></table></figure><p>è¦å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>self</code>å¤–ï¼Œå…¶ä»–å’Œæ™®é€šå‡½æ•°ä¸€æ ·ã€‚è¦è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œåªéœ€è¦åœ¨å®ä¾‹å˜é‡ä¸Šç›´æ¥è°ƒç”¨ï¼Œé™¤äº†<code>self</code>ä¸ç”¨ä¼ é€’ï¼Œå…¶ä»–å‚æ•°æ­£å¸¸ä¼ å…¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">24</span>]: s = Student(<span class="hljs-string">&#x27;Bart Simpson&#x27;</span>, <span class="hljs-number">59</span>)<br><br>In [<span class="hljs-number">25</span>]: s.print_score()<br>Bart Simpson: <span class="hljs-number">59</span><br></code></pre></div></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬ä»å¤–éƒ¨çœ‹<code>Student</code>ç±»ï¼Œå°±åªéœ€è¦çŸ¥é“ï¼Œåˆ›å»ºå®ä¾‹éœ€è¦ç»™å‡º<code>name</code>å’Œ<code>score</code>ï¼Œè€Œå¦‚ä½•æ‰“å°ï¼Œéƒ½æ˜¯åœ¨<code>Student</code>ç±»çš„å†…éƒ¨å®šä¹‰çš„ï¼Œè¿™äº›æ•°æ®å’Œé€»è¾‘è¢«â€œå°è£…â€èµ·æ¥äº†ï¼Œè°ƒç”¨å¾ˆå®¹æ˜“ï¼Œä½†å´ä¸ç”¨çŸ¥é“å†…éƒ¨å®ç°çš„ç»†èŠ‚ã€‚</p><p>å°è£…çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥ç»™<code>Student</code>ç±»å¢åŠ æ–°çš„æ–¹æ³•ï¼Œæ¯”å¦‚<code>get_grade</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name, score</span>):</span><br>        self.name = name<br>        self.score = score<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_grade</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">if</span> self.score &gt;= <span class="hljs-number">90</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;A&#x27;</span><br>        <span class="hljs-keyword">elif</span> self.score &gt;= <span class="hljs-number">60</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;B&#x27;</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;C&#x27;</span><br> <br></code></pre></div></td></tr></table></figure><p>åŒæ ·çš„ï¼Œ<code>get_grade</code>æ–¹æ³•å¯ä»¥ç›´æ¥åœ¨å®ä¾‹å˜é‡ä¸Šè°ƒç”¨ï¼Œä¸éœ€è¦çŸ¥é“å†…éƒ¨å®ç°ç»†èŠ‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">lisa = Student(<span class="hljs-string">&#x27;Lisa&#x27;</span>, <span class="hljs-number">99</span>)<br>bart = Student(<span class="hljs-string">&#x27;Bart&#x27;</span>, <span class="hljs-number">59</span>)<br>print(lisa.name, lisa.get_grade())<br>print(bart.name, bart.get_grade())<br></code></pre></div></td></tr></table></figure><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><ul><li>åœ¨ç¨‹åºä¸­ï¼Œç»§æ‰¿æè¿°çš„æ˜¯å¤šä¸ªç±»ä¹‹é—´çš„æ‰€å±å…³ç³»ã€‚</li><li>å¦‚æœä¸€ä¸ªç±»Aé‡Œé¢çš„å±æ€§å’Œæ–¹æ³•å¯ä»¥å¤ç”¨ï¼Œåˆ™å¯ä»¥é€šè¿‡ç»§æ‰¿çš„æ–¹å¼ï¼Œä¼ é€’åˆ°ç±»Bé‡Œã€‚é‚£ä¹ˆç±»Aå°±æ˜¯åŸºç±»ï¼Œä¹Ÿå«åšçˆ¶ç±»ï¼›ç±»Bå°±æ˜¯æ´¾ç”Ÿç±»ï¼Œä¹Ÿå«åšå­ç±»ã€‚</li></ul><h3 id="1-å•ç»§æ‰¿"><a href="#1-å•ç»§æ‰¿" class="headerlink" title="1. å•ç»§æ‰¿"></a>1. å•ç»§æ‰¿</h3><blockquote><p>å­ç±»Aåªç»§æ‰¿äº†ä¸€ä¸ªçˆ¶ç±»B, é‚£ä¹ˆæ­¤æ—¶ä¸¤è€…ä¹‹é—´çš„å…³ç³»å°±æ˜¯å•ç»§æ‰¿</p></blockquote><ul><li><p>å•ç»§æ‰¿ï¼Œå­ç±»ç›´æ¥ç»§æ‰¿çˆ¶ç±»çš„<code>__init__</code>æ–¹æ³•</p>  <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>  <span class="hljs-comment"># åˆ›å»ºç”¨æˆ·ç±»</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name</span>):</span>  <span class="hljs-comment"># ç»™ç”¨æˆ·æ·»åŠ å±æ€§ï¼šname</span><br>        self.name = name<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VipUser</span>(<span class="hljs-params">User</span>):</span><br>    <span class="hljs-comment"># å­ç±»ç»§æ‰¿çˆ¶ç±»çš„__init__æ–¹æ³•ï¼Œæ·»åŠ nameå±æ€§</span><br>    <span class="hljs-keyword">pass</span><br><br>vip = VipUser(<span class="hljs-string">&quot;xw&quot;</span>)  <span class="hljs-comment"># vipåˆå§‹åŒ–æ—¶ï¼Œè‡ªå·±æœ¬èº«æ²¡æœ‰å®ç°__init__æ–¹æ³•,è€Œæ˜¯ç›´æ¥è°ƒç”¨ç»§æ‰¿è‡ªUserçš„__init__æ–¹æ³•ï¼Œvipæœ‰nameå±æ€§</span><br>print(vip.name)<br></code></pre></div></td></tr></table></figure></li><li><p>å•ç»§æ‰¿ï¼Œå­ç±»è‡ªå·±å®ç°<code>__init__</code>æ–¹æ³•</p>  <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>():</span>  <span class="hljs-comment"># åˆ›å»ºç”¨æˆ·ç±»</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name</span>):</span>  <span class="hljs-comment"># ç»™ç”¨æˆ·æ·»åŠ å±æ€§ï¼šname</span><br>        self.name = name<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VipUser</span>(<span class="hljs-params">User</span>):</span><br>    <span class="hljs-comment"># å­ç±»è‡ªå·±å®ç°__init__æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰ç›´æ¥ä½¿ç”¨ç»§æ‰¿çˆ¶ç±»çš„__init__æ–¹æ³•</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name</span>):</span>  <span class="hljs-comment"># ç»™vipç”¨æˆ·æ·»åŠ å±æ€§ï¼šname</span><br>        self.name = name<br><br>vip = VipUser(<span class="hljs-string">&quot;xw&quot;</span>)  <span class="hljs-comment"># vipåˆå§‹åŒ–æ—¶ï¼Œè‡ªå·±æœ¬èº«æ²¡æœ‰å®ç°__init__æ–¹æ³•,è€Œæ˜¯ç›´æ¥è°ƒç”¨ç»§æ‰¿è‡ªUserçš„__init__æ–¹æ³•ï¼Œvipæœ‰nameå±æ€§</span><br>print(vip.name)<br></code></pre></div></td></tr></table></figure></li><li><p>å•ç»§æ‰¿ï¼Œå­ç±»åœ¨è‡ªå·±å®ç°çš„<code>__init__</code>æ–¹æ³•ä¸­ï¼Œè¿˜è°ƒç”¨äº†çˆ¶ç±»çš„<code>__init__</code>æ–¹æ³•</p>  <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># å¯¹è±¡åˆå§‹åŒ–ï¼Œ__init__æ–¹æ³•åªä¼šæ‰§è¡Œä¸€æ¬¡</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>():</span>  <span class="hljs-comment"># åˆ›å»ºç”¨æˆ·ç±»</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name</span>):</span>  <span class="hljs-comment"># ç»™ç”¨æˆ·æ·»åŠ å±æ€§ï¼šname</span><br>        self.name = name<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VipUser</span>(<span class="hljs-params">User</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name, money</span>):</span><br>        <span class="hljs-comment"># self.name = name</span><br>        <span class="hljs-comment"># User.__init__(self)   # é€šè¿‡çˆ¶ç±»åç›´æ¥è°ƒç”¨çˆ¶ç±»çš„__init__æ–¹æ³•å®ç°nameå±æ€§çš„æ·»åŠ </span><br>        <span class="hljs-built_in">super</span>().__init__(name)  <span class="hljs-comment"># é€šè¿‡super()è°ƒç”¨çˆ¶ç±»çš„__init__æ–¹æ³•æ·»åŠ nameå±æ€§</span><br>        self.money = money  <span class="hljs-comment"># è‡ªå·±æ·»åŠ moneyå±æ€§</span><br><br>vip = VipUser(<span class="hljs-string">&quot;xw&quot;</span>, <span class="hljs-number">300</span>)  <span class="hljs-comment"># vipåˆå§‹åŒ–æ—¶ï¼Œ__init__æ–¹æ³•æ‰§è¡Œä¸€æ¬¡</span><br>print(vip.name, vip.money)<br><br></code></pre></div></td></tr></table></figure><h3 id="2-å¤šç»§æ‰¿"><a href="#2-å¤šç»§æ‰¿" class="headerlink" title="2. å¤šç»§æ‰¿"></a>2. å¤šç»§æ‰¿</h3></li></ul><blockquote><p>å¤šç»§æ‰¿å¯ä»¥ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ï¼Œä¹Ÿç»§æ‰¿äº†æ‰€æœ‰çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•</p></blockquote><ul><li><p>å¦‚æœå¤šä¸ªçˆ¶ç±»ä¸­æœ‰åŒåçš„ å±æ€§å’Œæ–¹æ³•ï¼Œåˆ™é»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªçˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼ˆæ ¹æ®ç±»çš„é­”æ³•å±æ€§<code>__mro__</code>çš„é¡ºåºæ¥æŸ¥æ‰¾ï¼‰</p></li><li><p>å¤šä¸ªçˆ¶ç±»ä¸­ï¼Œä¸é‡åçš„å±æ€§å’Œæ–¹æ³•ï¼Œä¸ä¼šæœ‰ä»»ä½•å½±å“ã€‚</p> <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>():</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        self.name = <span class="hljs-string">&quot;A&quot;</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span>():</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        self.name = <span class="hljs-string">&quot;B&quot;</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span>(<span class="hljs-params">A, B</span>):</span><br>    <span class="hljs-keyword">pass</span><br><br>c = C()<br>print(C.mro())  <span class="hljs-comment"># [&lt;class &#x27;__main__.C&#x27;&gt;, &lt;class &#x27;__main__.A&#x27;&gt;, &lt;class &#x27;__main__.B&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;]</span><br>print(c.name)  <span class="hljs-comment"># A</span><br></code></pre></div></td></tr></table></figure><h3 id="3-å¤šå±‚ç»§æ‰¿"><a href="#3-å¤šå±‚ç»§æ‰¿" class="headerlink" title="3. å¤šå±‚ç»§æ‰¿"></a>3. å¤šå±‚ç»§æ‰¿</h3></li></ul><blockquote><p> å¤šå±‚ç»§æ‰¿ä¸»è¦è¯´çš„æ˜¯<code>super</code>çš„æœç´¢é¡ºåº,è€Œæœç´¢é¡ºåºä¸»è¦æ˜¯æ ¹æ®ç±»çš„é­”æ³•å±æ€§<code>__mro__</code>çš„é¡ºåºæ¥æŸ¥æ‰¾</p></blockquote><ul><li><p><code>super()</code>è°ƒç”¨æ–¹æ³•é¡ºåºç¤ºä¾‹</p>  <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>():</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        print(<span class="hljs-string">&quot;&gt;&gt;&gt;A&lt;&lt;&lt;&quot;</span>)<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B1</span>(<span class="hljs-params">A</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        print(<span class="hljs-string">&quot;&gt;&gt;&gt;B1&lt;&lt;&lt;&quot;</span>)<br>        <span class="hljs-built_in">super</span>().run()<br>        <br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B2</span>(<span class="hljs-params">A</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        print(<span class="hljs-string">&quot;&gt;&gt;&gt;B2&lt;&lt;&lt;&quot;</span>)<br>        <span class="hljs-built_in">super</span>().run()<br>        <br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span>(<span class="hljs-params">B1, B2</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        print(<span class="hljs-string">&quot;&gt;&gt;&gt;C&lt;&lt;&lt;&quot;</span>)<br>        <span class="hljs-built_in">super</span>().run()<br>        <br>c= C()<br>print(C.mro())<br>c.run()<br></code></pre></div></td></tr></table></figure><blockquote><p>ç¨‹åºè¿è¡Œç»“æœï¼š</p></blockquote>  <figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">[&lt;class &#x27;__main__.C&#x27;&gt;, &lt;class &#x27;__main__.B1&#x27;&gt;, &lt;class &#x27;__main__.B2&#x27;&gt;, &lt;class &#x27;__main__.A&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;]<br><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt;C&lt;&lt;&lt;</span><br><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt;B1&lt;&lt;&lt;</span><br><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt;B2&lt;&lt;&lt;</span><br><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt;A&lt;&lt;&lt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>å‚æ•°ä¼ é€’ç¤ºä¾‹</p>  <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Father</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name</span>):</span><br>        print(<span class="hljs-string">&#x27;father&#x27;</span>)<br>        self.name = name<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Son1</span>(<span class="hljs-params">Father</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name, age, *args</span>):</span><br>        print(<span class="hljs-string">&#x27;Son1&#x27;</span>)<br>        self.age = age<br>        <span class="hljs-built_in">super</span>().__init__(name, *args)<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Son2</span>(<span class="hljs-params">Father</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name, gender</span>):</span><br>        print(<span class="hljs-string">&#x27;Son2&#x27;</span>)<br>        self.gender = gender<br>        <span class="hljs-built_in">super</span>().__init__(name)<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Grandson</span>(<span class="hljs-params">Son1, Son2</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name, age, gender</span>):</span><br>        print(<span class="hljs-string">&quot;Grandson&quot;</span>)<br>        <span class="hljs-built_in">super</span>().__init__(name, age, gender)<br><br>print(Grandson.mro())<br>print(<span class="hljs-string">&quot;+&quot;</span> * <span class="hljs-number">30</span>)<br><br>grand_son = Grandson(<span class="hljs-string">&#x27;ç‹æ˜&#x27;</span>, <span class="hljs-number">14</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>)<br><br>print(<span class="hljs-string">&quot;+&quot;</span> * <span class="hljs-number">30</span>)<br>print(grand_son.name, grand_son.age, grand_son.gender)<br></code></pre></div></td></tr></table></figure><blockquote><p>ç¨‹åºè¿è¡Œç»“æœï¼š</p></blockquote>  <figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">++++++++++++++++++++++++++++++<br>Grandson<br>Son1<br>Son2<br>father<br>++++++++++++++++++++++++++++++<br>ç‹æ˜ 14 ç”·<br></code></pre></div></td></tr></table></figure><h2 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h2></li></ul><h3 id="1-å¤šæ€"><a href="#1-å¤šæ€" class="headerlink" title="1. å¤šæ€"></a>1. å¤šæ€</h3><p>æ‰€è°“çš„å¤šæ€å°±æ˜¯åŒä¸€ç±»äº‹ç‰©æœ‰ä¸åŒçš„å½¢æ€,(ä¸€ä¸ªæŠ½è±¡ç±»æœ‰å¤šä¸ªå­ç±»ï¼Œå› è€Œå¤šæ€çš„æ¦‚å¿µä¾èµ–äºç»§æ‰¿)</p><ul><li>åºåˆ—ç±»å‹æœ‰å¤šç§å½¢æ€ï¼šå­—ç¬¦ä¸²ï¼Œåˆ—è¡¨ï¼Œå…ƒç»„</li><li>åŠ¨ç‰©æœ‰å¤šç§å½¢æ€ï¼šçŒ«ï¼Œç‹—</li></ul><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># å¤šæ€ï¼šåŒä¸€ç§äº‹ç‰©çš„å¤šç§å½¢æ€ï¼ŒåŠ¨ç‰©åˆ†ä¸ºçŒ«ç±»ï¼Œç‹—ç±»ï¼ˆåœ¨å®šä¹‰è§’åº¦ï¼‰</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span>():</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, name, foods</span>):</span><br>        self.name = name<br>        self.foods = foods<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">eat</span>(<span class="hljs-params">self</span>):</span><br>        print(<span class="hljs-string">&quot;%sçš„é£Ÿç‰©æ˜¯%s&quot;</span> % (self.name, self.foods))<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        print(<span class="hljs-string">&quot;%sè·‘çš„å¾ˆå¿«&quot;</span> % self.name)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">call</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">pass</span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span>(<span class="hljs-params">Animal</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">call</span>(<span class="hljs-params">self</span>):</span><br>        print(<span class="hljs-string">&quot;%s:æ±ªæ±ªå¤§å«&quot;</span> % self.name)<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cat</span>(<span class="hljs-params">Animal</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">call</span>(<span class="hljs-params">self</span>):</span><br>        print(<span class="hljs-string">&quot;%s:å–µå–µå¤§å«&quot;</span> % self.name)<br><br><br>dog = Dog(<span class="hljs-string">&quot;å“ˆå£«å¥‡&quot;</span>, <span class="hljs-string">&quot;ç‹—ç²®&quot;</span>)<br>dog.eat()<br>dog.call()<br><br>cat = Cat(<span class="hljs-string">&quot;ä¹å‘½å¦–çŒ«&quot;</span>, <span class="hljs-string">&quot;ä»™éœ²&quot;</span>)<br>cat.eat()<br>cat.run()<br><br></code></pre></div></td></tr></table></figure><h3 id="2-å¤šæ€æ€§"><a href="#2-å¤šæ€æ€§" class="headerlink" title="2. å¤šæ€æ€§"></a>2. å¤šæ€æ€§</h3><blockquote><p>ä»€ä¹ˆæ˜¯å¤šæ€æ€§ï¼ˆæ³¨æ„ï¼šå¤šæ€ä¸å¤šæ€æ€§æ˜¯ä¸¤ç§æ¦‚å¿µï¼‰</p></blockquote><ul><li>å¤šæ€æ€§æ˜¯æŒ‡å…·æœ‰ä¸åŒåŠŸèƒ½çš„å‡½æ•°å¯ä»¥ä½¿ç”¨ç›¸åŒçš„å‡½æ•°åï¼Œè¿™æ ·å°±å¯ä»¥ç”¨ä¸€ä¸ªå‡½æ•°åè°ƒç”¨ä¸åŒå†…å®¹çš„å‡½æ•°ã€‚</li><li>åœ¨é¢å‘å¯¹è±¡æ–¹æ³•ä¸­ä¸€èˆ¬æ˜¯è¿™æ ·è¡¨è¿°å¤šæ€æ€§ï¼šå‘ä¸åŒçš„å¯¹è±¡å‘é€åŒä¸€æ¡æ¶ˆæ¯ï¼Œä¸åŒçš„å¯¹è±¡åœ¨æ¥æ”¶æ—¶ä¼šäº§ç”Ÿä¸åŒçš„è¡Œä¸ºï¼ˆå³æ–¹æ³•ï¼‰ã€‚</li><li>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªå¯¹è±¡å¯ä»¥ç”¨è‡ªå·±çš„æ–¹å¼å»å“åº”å…±åŒçš„æ¶ˆæ¯ã€‚æ‰€è°“æ¶ˆæ¯ï¼Œå°±æ˜¯è°ƒç”¨å‡½æ•°ï¼Œä¸åŒçš„è¡Œä¸ºå°±æ˜¯æŒ‡ä¸åŒçš„å®ç°ï¼Œå³æ‰§è¡Œä¸åŒçš„å‡½æ•°ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># å¤šæ€æ€§ä¾èµ–äºï¼šç»§æ‰¿</span><br><span class="hljs-comment">##å¤šæ€æ€§ï¼šå®šä¹‰ç»Ÿä¸€çš„æ¥å£ï¼Œ</span><br><span class="hljs-comment">#å¤šæ€æ€§ï¼šä¸€ç§è°ƒç”¨æ–¹å¼ï¼Œä¸åŒçš„æ‰§è¡Œæ•ˆæœï¼ˆå¤šæ€æ€§ï¼‰</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">obj</span>):</span> <span class="hljs-comment"># objè¿™ä¸ªå‚æ•°æ²¡æœ‰ç±»å‹é™åˆ¶ï¼Œå¯ä»¥ä¼ å…¥ä¸åŒç±»å‹çš„å€¼</span><br>obj.eat()  <span class="hljs-comment">#è°ƒç”¨çš„é€»è¾‘éƒ½ä¸€æ ·ï¼Œæ‰§è¡Œçš„ç»“æœå´ä¸ä¸€æ ·</span><br><br>func(dog)<br>func(cat)<br></code></pre></div></td></tr></table></figure><blockquote><p>ä¸ºä»€ä¹ˆè¦ç”¨å¤šæ€æ€§ï¼ˆå¤šæ€æ€§çš„å¥½å¤„ï¼‰</p></blockquote><p>å…¶å®å¤§å®¶ä»ä¸Šé¢å¤šæ€æ€§çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å¢åŠ ä¸Šé¢æ–°çš„çŸ¥è¯†ï¼Œä¹Ÿå°±æ˜¯è¯´Pythonæœ¬èº«å°±æ˜¯æ”¯æŒå¤šæ€æ€§çš„ï¼Œè¿™ä¹ˆåšçš„å¥½å¤„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li>å¢åŠ äº†ç¨‹åºçš„çµæ´»æ€§<br>ä»¥ä¸å˜åº”ä¸‡å˜ï¼Œä¸è®ºå¯¹è±¡åƒå˜ä¸‡åŒ–ï¼Œä½¿ç”¨è€…éƒ½æ˜¯åŒä¸€ç§å½¢å¼å»è°ƒç”¨ï¼Œå¦‚func(animal)</li><li>å¢åŠ äº†ç¨‹åºé¢å¯æ‰©å±•æ€§<br>é€šè¿‡ç»§æ‰¿animalç±»åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç±»ï¼Œä½¿ç”¨è€…æ— éœ€æ›´æ”¹è‡ªå·±çš„ä»£ç ï¼Œè¿˜æ˜¯ç”¨func(animal)å»è°ƒç”¨</li></ul><blockquote><ul><li>å¤šæ€ï¼šåŒä¸€ç§äº‹ç‰©çš„å¤šç§å½¢æ€ï¼ŒåŠ¨ç‰©åˆ†ä¸ºçŒ«ç±»ï¼Œç‹—ç±»ï¼ˆåœ¨å®šä¹‰è§’åº¦ï¼‰ </li><li>å¤šæ€æ€§ï¼šä¸€ç§è°ƒç”¨æ–¹å¼ï¼Œä¸åŒçš„æ‰§è¡Œæ•ˆæœï¼ˆå¤šæ€æ€§ï¼‰</li></ul></blockquote><h2 id="ç±»å‹åˆ¤æ–­"><a href="#ç±»å‹åˆ¤æ–­" class="headerlink" title="ç±»å‹åˆ¤æ–­"></a>ç±»å‹åˆ¤æ–­</h2><h2 id="è®¿é—®æƒé™"><a href="#è®¿é—®æƒé™" class="headerlink" title="è®¿é—®æƒé™"></a>è®¿é—®æƒé™</h2><h2 id="å®ä¾‹å±æ€§ä¸ç±»å±æ€§"><a href="#å®ä¾‹å±æ€§ä¸ç±»å±æ€§" class="headerlink" title="å®ä¾‹å±æ€§ä¸ç±»å±æ€§"></a>å®ä¾‹å±æ€§ä¸ç±»å±æ€§</h2><h2 id="å®ä¾‹æ–¹æ³•ã€é™æ€æ–¹æ³•ä¸ç±»æ–¹æ³•"><a href="#å®ä¾‹æ–¹æ³•ã€é™æ€æ–¹æ³•ä¸ç±»æ–¹æ³•" class="headerlink" title="å®ä¾‹æ–¹æ³•ã€é™æ€æ–¹æ³•ä¸ç±»æ–¹æ³•"></a>å®ä¾‹æ–¹æ³•ã€é™æ€æ–¹æ³•ä¸ç±»æ–¹æ³•</h2><h3 id="1-æ–¹æ³•åˆ†ç±»"><a href="#1-æ–¹æ³•åˆ†ç±»" class="headerlink" title="1. æ–¹æ³•åˆ†ç±»"></a>1. æ–¹æ³•åˆ†ç±»</h3><p>å…ˆçœ‹è¯­æ³•ï¼Œ<code>python</code> ç±»è¯­æ³•ä¸­æœ‰ä¸‰ç§æ–¹æ³•ï¼Œå®ä¾‹æ–¹æ³•ï¼Œé™æ€æ–¹æ³•ï¼Œç±»æ–¹æ³•ã€‚</p><blockquote><p><code>python</code>ä¸­<code>self</code>ï¼Œ<code>cls</code>çš„åŒºåˆ«:</p></blockquote><ul><li>æ™®é€šå®ä¾‹æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦æ˜¯<code>self</code>ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„å®ä¾‹æœ¬èº«ã€‚</li><li>å¦‚æœç”¨äº†<code>staticmethod</code>ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ— è§†è¿™ä¸ª<code>self</code>ï¼Œè€Œå°†è¿™ä¸ªæ–¹æ³•å½“æˆä¸€ä¸ªæ™®é€šçš„å‡½æ•°ä½¿ç”¨ã€‚</li><li>è€Œå¯¹äº<code>classmethod</code>ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯<code>self</code>ï¼Œæ˜¯<code>cls</code>ï¼Œå®ƒè¡¨ç¤ºè¿™ä¸ªç±»æœ¬èº«ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># coding:utf-8</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;ç±»ä¸‰ç§æ–¹æ³•è¯­æ³•å½¢å¼&quot;&quot;&quot;</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">instance_method</span>(<span class="hljs-params">self</span>):</span><br>        print(<span class="hljs-string">&quot;æ˜¯ç±»&#123;&#125;çš„å®ä¾‹æ–¹æ³•ï¼Œåªèƒ½è¢«å®ä¾‹å¯¹è±¡è°ƒç”¨&quot;</span>.<span class="hljs-built_in">format</span>(Foo))<br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">static_method</span>():</span><br>        print(<span class="hljs-string">&quot;æ˜¯é™æ€æ–¹æ³•&quot;</span>)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">class_method</span>(<span class="hljs-params">cls</span>):</span><br>        print(<span class="hljs-string">&quot;æ˜¯ç±»æ–¹æ³•&quot;</span>)<br><br><br>foo = Foo()<br>foo.instance_method()<br>foo.static_method()<br>foo.class_method()<br>print(<span class="hljs-string">&#x27;----------------&#x27;</span>)<br>Foo.static_method()<br>Foo.class_method()<br><br></code></pre></div></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">æ˜¯ç±»&lt;class &#x27;__main__.Foo&#x27;&gt;çš„å®ä¾‹æ–¹æ³•ï¼Œåªèƒ½è¢«å®ä¾‹å¯¹è±¡è°ƒç”¨<br>æ˜¯é™æ€æ–¹æ³•<br>æ˜¯ç±»æ–¹æ³•<br>----------------<br>æ˜¯é™æ€æ–¹æ³•<br>æ˜¯ç±»æ–¹æ³•<br></code></pre></div></td></tr></table></figure><blockquote><p>è¯´æ˜</p></blockquote><ul><li>è°ƒç”¨<ul><li>å®ä¾‹æ–¹æ³•åªèƒ½è¢«å®ä¾‹å¯¹è±¡è°ƒç”¨</li><li>é™æ€æ–¹æ³•(ç”±<code>@staticmethod</code>è£…é¥°çš„æ–¹æ³•)ã€ç±»æ–¹æ³•(ç”±<code>@classmethod</code>è£…é¥°çš„æ–¹æ³•)ï¼Œå¯ä»¥è¢«ç±»æˆ–ç±»çš„å®ä¾‹å¯¹è±¡è°ƒç”¨ã€‚</li></ul></li><li>å‚æ•°<ul><li>å®ä¾‹æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»è¦é»˜è®¤ä¼ å®ä¾‹å¯¹è±¡ï¼Œä¸€èˆ¬ä¹ æƒ¯ç”¨<code>self</code>ã€‚</li><li>é™æ€æ–¹æ³•ï¼Œå‚æ•°æ²¡æœ‰è¦æ±‚ã€‚</li><li>ç±»æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»è¦é»˜è®¤ä¼ ç±»ï¼Œä¸€èˆ¬ä¹ æƒ¯ç”¨<code>cls</code>ã€‚</li></ul></li></ul><h3 id="2-æ–¹æ³•è°ƒç”¨"><a href="#2-æ–¹æ³•è°ƒç”¨" class="headerlink" title="2. æ–¹æ³•è°ƒç”¨"></a>2. æ–¹æ³•è°ƒç”¨</h3><blockquote><p>é™æ€æ–¹æ³•è°ƒç”¨å¦ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¦‚æœæ”¹ç”¨ç±»æ–¹æ³•è°ƒç”¨é™æ€æ–¹æ³•ï¼Œå¯ä»¥è®©<code>cls</code>ä»£æ›¿ç±»ï¼Œè®©ä»£ç çœ‹èµ·æ¥ç²¾ç®€ä¸€äº›ã€‚ä¹Ÿé˜²æ­¢ç±»åä¿®æ”¹äº†ï¼Œä¸ç”¨åœ¨ç±»å®šä¹‰ä¸­ä¿®æ”¹åŸæ¥çš„ç±»åã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># coding:utf-8</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    X = <span class="hljs-number">1</span><br>    Y = <span class="hljs-number">2</span><br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">averag</span>(<span class="hljs-params">*mixes</span>):</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(mixes) / <span class="hljs-built_in">len</span>(mixes)<br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">static_method</span>():</span>  <span class="hljs-comment"># åœ¨é™æ€æ–¹æ³•ä¸­è°ƒç”¨é™æ€æ–¹æ³•</span><br>        print(<span class="hljs-string">&quot;åœ¨é™æ€æ–¹æ³•ä¸­è°ƒç”¨é™æ€æ–¹æ³•&quot;</span>)<br>        <span class="hljs-keyword">return</span> Foo.averag(Foo.X, Foo.Y)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">class_method</span>(<span class="hljs-params">cls</span>):</span>  <span class="hljs-comment"># åœ¨ç±»æ–¹æ³•ä¸­ä½¿ç”¨é™æ€æ–¹æ³•</span><br>        print(<span class="hljs-string">&quot;åœ¨ç±»æ–¹æ³•ä¸­ä½¿ç”¨é™æ€æ–¹æ³•&quot;</span>)<br>        <span class="hljs-keyword">return</span> cls.averag(cls.X, cls.Y)<br><br>foo = Foo()<br>print(foo.static_method())<br>print(foo.class_method())<br></code></pre></div></td></tr></table></figure><blockquote><p>è¿è¡Œç»“æœï¼š</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">åœ¨é™æ€æ–¹æ³•ä¸­è°ƒç”¨é™æ€æ–¹æ³•<br>1.5<br>åœ¨ç±»æ–¹æ³•ä¸­ä½¿ç”¨é™æ€æ–¹æ³•<br>1.5<br></code></pre></div></td></tr></table></figure><h3 id="3-ç»§æ‰¿ç±»ä¸­çš„åŒºåˆ«"><a href="#3-ç»§æ‰¿ç±»ä¸­çš„åŒºåˆ«" class="headerlink" title="3.ç»§æ‰¿ç±»ä¸­çš„åŒºåˆ«"></a>3.ç»§æ‰¿ç±»ä¸­çš„åŒºåˆ«</h3><p>ä»ä¸‹é¢ä»£ç å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœå­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•ï¼Œå­ç±»è¦†ç›–äº†çˆ¶ç±»çš„é™æ€æ–¹æ³•:</p><ul><li>å­ç±»çš„å®ä¾‹ç»§æ‰¿äº†çˆ¶ç±»çš„<code>static_method</code>é™æ€æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œè¿˜æ˜¯è°ƒç”¨çš„çˆ¶ç±»çš„æ–¹æ³•å’Œç±»å±æ€§ã€‚</li><li>å­ç±»çš„å®ä¾‹ç»§æ‰¿äº†çˆ¶ç±»çš„<code>class_method</code>ç±»æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œè°ƒç”¨çš„æ˜¯å­ç±»çš„æ–¹æ³•å’Œå­ç±»çš„ç±»å±æ€§ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    X = <span class="hljs-number">1</span><br>    Y = <span class="hljs-number">14</span><br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">averag</span>(<span class="hljs-params">*mixes</span>):</span>  <span class="hljs-comment"># &quot;çˆ¶ç±»ä¸­çš„é™æ€æ–¹æ³•&quot;</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(mixes) / <span class="hljs-built_in">len</span>(mixes)<br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">static_method</span>():</span>  <span class="hljs-comment"># &quot;çˆ¶ç±»ä¸­çš„é™æ€æ–¹æ³•&quot;</span><br>        print(<span class="hljs-string">&quot;çˆ¶ç±»ä¸­çš„é™æ€æ–¹æ³•&quot;</span>)<br>        <span class="hljs-keyword">return</span> Foo.averag(Foo.X, Foo.Y)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">class_method</span>(<span class="hljs-params">cls</span>):</span>  <span class="hljs-comment"># çˆ¶ç±»ä¸­çš„ç±»æ–¹æ³•</span><br>        print(<span class="hljs-string">&quot;çˆ¶ç±»ä¸­çš„ç±»æ–¹æ³•&quot;</span>)<br>        <span class="hljs-keyword">return</span> cls.averag(cls.X, cls.Y)<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Son</span>(<span class="hljs-params">Foo</span>):</span><br>    X = <span class="hljs-number">3</span><br>    Y = <span class="hljs-number">5</span><br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">averag</span>(<span class="hljs-params">*mixes</span>):</span>  <span class="hljs-comment"># &quot;å­ç±»ä¸­é‡è½½äº†çˆ¶ç±»çš„é™æ€æ–¹æ³•&quot;</span><br>        print(<span class="hljs-string">&quot;å­ç±»ä¸­é‡è½½äº†çˆ¶ç±»çš„é™æ€æ–¹æ³•&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(mixes) / <span class="hljs-built_in">len</span>(mixes)<br><br><br>p = Son()<br>print(<span class="hljs-string">&quot;result of p.averag(1,5)&quot;</span>)<br>print(p.averag(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>))<br>print(<span class="hljs-string">&quot;result of p.static_method()&quot;</span>)<br>print(p.static_method())<br>print(<span class="hljs-string">&quot;result of p.class_method()&quot;</span>)<br>print(p.class_method())<br></code></pre></div></td></tr></table></figure><blockquote><p>è¿è¡Œç»“æœï¼š</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">result of p.averag(<span class="hljs-number">1</span>,<span class="hljs-number">5</span>)<br>å­ç±»ä¸­é‡è½½äº†çˆ¶ç±»çš„é™æ€æ–¹æ³•<br><span class="hljs-number">3.0</span><br>result of p.static_method()<br>çˆ¶ç±»ä¸­çš„é™æ€æ–¹æ³•<br><span class="hljs-number">7.5</span><br>result of p.class_method()<br>çˆ¶ç±»ä¸­çš„ç±»æ–¹æ³•<br>å­ç±»ä¸­é‡è½½äº†çˆ¶ç±»çš„é™æ€æ–¹æ³•<br><span class="hljs-number">4.0</span><br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢å‘å¯¹è±¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlä¸­varbinaryã€binaryã€charã€varcharå¼‚åŒ</title>
      <link href="2019/06/01/shu-ju-ku-mysql-zhong-varbinary-binary-char-varchar-yi-tong/"/>
      <url>2019/06/01/shu-ju-ku-mysql-zhong-varbinary-binary-char-varchar-yi-tong/</url>
      
        <content type="html"><![CDATA[<p>binary ä¸ varbinary ç±»å‹å’Œcharä¸varcharç±»å‹æ˜¯ç›¸ä¼¼çš„ï¼Œåªæ˜¯ä»–ä»¬å­˜å‚¨çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä»¬æ˜¯åŒ…å«å­—èŠ‚æµè€Œä¸æ˜¯å­—ç¬¦æµï¼Œä»–ä»¬æœ‰äºŒè¿›åˆ¶å­—ç¬¦çš„é›†åˆå’Œé¡ºåºï¼Œä»–ä»¬çš„å¯¹æ¯”ï¼Œæ’åºæ˜¯åŸºäºå­—èŠ‚çš„æ•°å€¼è¿›è¡Œçš„</p><p>binaryä¸varbinaryçš„æœ€å¤§é•¿åº¦å’Œcharä¸varcharæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ä»–ä»¬æ˜¯å®šä¹‰<strong>å­—èŠ‚é•¿åº¦</strong>ï¼Œè€Œcharå’Œvarcharå¯¹åº”çš„æ˜¯<strong>å­—ç¬¦é•¿åº¦</strong>ã€‚</p><h4 id="å­˜å‚¨å’Œå–å‡ºæ—¶å¯¹å°¾éƒ¨ç©ºæ ¼çš„å¤„ç†"><a href="#å­˜å‚¨å’Œå–å‡ºæ—¶å¯¹å°¾éƒ¨ç©ºæ ¼çš„å¤„ç†" class="headerlink" title="å­˜å‚¨å’Œå–å‡ºæ—¶å¯¹å°¾éƒ¨ç©ºæ ¼çš„å¤„ç†"></a>å­˜å‚¨å’Œå–å‡ºæ—¶å¯¹å°¾éƒ¨ç©ºæ ¼çš„å¤„ç†</h4><ul><li><p>char(N)ç”¨æ¥å­˜å‚¨éäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œæ’å…¥æ—¶ï¼Œå¯¹äºå°‘äºNä¸ªå­—ç¬¦çš„ä¼šè‡ªåŠ¨åœ¨å°¾éƒ¨åŠ ç©ºæ ¼ï¼ŒæŸ¥è¯¢æ—¶ï¼Œå°¾éƒ¨çš„ç©ºæ ¼å°±ä¼šè¢«ä¸¢å¼ƒæ‰</p></li><li><p>vachar(N) ç”¨æ¥å­˜å‚¨éäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œæ’å…¥æ—¶ï¼Œå¯¹äºå°‘äºNä¸ªå­—ç¬¦çš„ä¸å¡«è¡¥ç©ºæ ¼ï¼ŒæŸ¥è¯¢æ—¶ï¼Œå°¾éƒ¨çš„ç©ºæ ¼ä¸ä¼šè¢«ä¸¢å¼ƒæ‰</p></li><li><p>binary(N)å­˜å‚¨äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œæ’å…¥è¿›ï¼Œå°‘äºNä¸ªå­—èŠ‚çš„ä¼šè‡ªåŠ¨åœ¨å°¾éƒ¨åŠ 0x00ï¼Œå–å‡ºæ—¶ï¼Œæ‰€æœ‰çš„å­—èŠ‚éƒ½ä¿ç•™ï¼Œè¿”å›å®šä¹‰é•¿åº¦çš„å­—èŠ‚é•¿åº¦ï¼Œåœ¨æ¯”è¾ƒçš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å­—èŠ‚éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œå¹¶ä¸”0x00&lt;space (spaceå¯¹åº”çš„æ˜¯0x20)</p></li><li><p>varbinaryåœ¨æ’å…¥ä¸ä¼šå»å¡«è¡¥0x00å­—èŠ‚ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ä¹Ÿä¸ä¼šä¸¢å¼ƒä»»ä½•å­—èŠ‚ï¼Œåœ¨æ¯”è¾ƒçš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å­—èŠ‚éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œå¹¶ä¸”0x00&lt;space (spaceå¯¹åº”çš„æ˜¯0x20)</p></li></ul><h4 id="å¤§å°æ¯”è¾ƒæ—¶"><a href="#å¤§å°æ¯”è¾ƒæ—¶" class="headerlink" title="å¤§å°æ¯”è¾ƒæ—¶"></a>å¤§å°æ¯”è¾ƒæ—¶</h4><p>charä¸varcharçš„å­—ç¬¦æ¯”è¾ƒä¸­ï¼Œæ˜¯å¿½ç•¥å¤§å°å†™ä¸æœ€åçš„ç©ºæ ¼çš„ï¼Œå¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select <span class="hljs-string">&#x27;a&#x27;</span>=<span class="hljs-string">&#x27;a &#x27;</span> , <span class="hljs-string">&#x27;a&#x27;</span>=<span class="hljs-string">&#x27;A&#x27;</span> , <span class="hljs-string">&#x27;a&#x27;</span>=<span class="hljs-string">&#x27;A &#x27;</span>;<br><br>+----------+---------+----------+<br>| <span class="hljs-string">&#x27;a&#x27;</span>=<span class="hljs-string">&#x27;a &#x27;</span> | <span class="hljs-string">&#x27;a&#x27;</span>=<span class="hljs-string">&#x27;A&#x27;</span> | <span class="hljs-string">&#x27;a&#x27;</span>=<span class="hljs-string">&#x27;A &#x27;</span> |<br>+----------+---------+----------+<br>|        1 |       1 |        1 |<br>+----------+---------+----------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><p>è€ŒbinaryåŠvarbinaryçš„å­—èŠ‚æ¯”è¾ƒä¸­ï¼Œæ‰€æœ‰çš„ä¿¡æ¯éƒ½ä¸ä¼šè¢«å¿½ç•¥ï¼Œå¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create table t (c BINARY(3));<br>Query OK, 0 rows affected (0.01 sec)<br><br>mysql&gt; insert into t <span class="hljs-built_in">set</span> c = <span class="hljs-string">&#x27;a&#x27;</span>;<br>Query OK, 1 row affected (0.01 sec)<br><br>mysql&gt; select hex(c), c = <span class="hljs-string">&#x27;a&#x27;</span>, c = <span class="hljs-string">&#x27;a\0\0&#x27;</span> from t;<br>+--------+---------+-------------+<br>| HEX(c) | c = <span class="hljs-string">&#x27;a&#x27;</span> | c = <span class="hljs-string">&#x27;a\0\0&#x27;</span> |<br>+--------+---------+-------------+<br>| 610000 |       0 |           1 |<br>+--------+---------+-------------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.08 sec)<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> æ•°æ®åº“ </category>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> varbinary </tag>
            
            <tag> binary </tag>
            
            <tag> char </tag>
            
            <tag> varchar </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlä¸­çš„Decimalç±»å‹è¯´æ˜</title>
      <link href="2019/06/01/shu-ju-ku-mysql-zhong-de-decimal-lei-xing-shuo-ming/"/>
      <url>2019/06/01/shu-ju-ku-mysql-zhong-de-decimal-lei-xing-shuo-ming/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬åœ¨Mysqlä¸­å­˜å­—æ®µçš„æ—¶å€™ï¼Œæ¯”å¦‚ï¼Œä¸€äº›ä¸é‡‘é’±æœ‰å…³çš„æ•°æ®ã€‚è¿™ä¸ªæ—¶å€™å°±ä¼šå¯¹ç²¾ç¡®åˆ°çš„è¦æ±‚éå¸¸é«˜ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œå°±ä¼šå‘ç°æˆ‘ä»¬ä¹‹å‰æ‰€å­¦çš„å…«å¤§åŸºæœ¬ç±»å‹ä¸å†èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ï¼Œæ— è®ºæ˜¯æ•´å½¢è¿˜æ˜¯æµ®ç‚¹å‹ï¼Œæœ‰äººä¼šè¯´å­˜æ•´å½¢æœ‰ä»€ä¹ˆä¸å¯ï¼Œä½†æ˜¯ä½ è¦çŸ¥é“ä¸æ˜¯æ¯ä¸ªäººçš„é‡‘é¢éƒ½æ˜¯æ•´æ•°çš„ï¼›è¿™æ ·ä¸è¡Œçš„è¯ï¼Œå­˜æµ®ç‚¹å‹çš„å°±å¯ä»¥äº†å˜›ï¼Œå¯¹äºé“¶è¡Œå­˜é’±æ¥è¯´ï¼Œä¸€ä¸ªå°æ•°ç‚¹çš„é—®é¢˜éƒ½ä¼šå°†ä¸€ç¬”é’±çš„é‡‘é¢å˜å¾—å¾ˆå¤§æˆ–è€…å¾ˆå°â€¦â€¦Soï¼Œè¿™ä¸ªæ—¶å€™ä½ å¯ä»¥å°è¯•ä¸€ä¸‹Decimalç±»å‹ï¼Œä½ ä¼šå‘ç°èƒ½å¤Ÿå¾ˆå¥½åœ°è§£å†³ä½ çš„é—®é¢˜ã€‚</p><h3 id="decimalè¯¦ç»†ä»‹ç»ï¼š"><a href="#decimalè¯¦ç»†ä»‹ç»ï¼š" class="headerlink" title="decimalè¯¦ç»†ä»‹ç»ï¼š"></a>decimalè¯¦ç»†ä»‹ç»ï¼š</h3><p><strong>decimal(a,b)</strong></p><ul><li><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><p>a:æŒ‡å®šå°æ•°ç‚¹å·¦è¾¹å’Œå³è¾¹å¯ä»¥å­˜å‚¨çš„åè¿›åˆ¶æ•°å­—çš„æœ€å¤§ä¸ªæ•°ï¼Œæœ€å¤§ç²¾åº¦ä¸º38.</p></li><li><p>b:æŒ‡å®šå°æ•°ç‚¹å³è¾¹å¯ä»¥å­˜å‚¨çš„åè¿›åˆ¶æ•°å­—çš„æœ€å¤§ä¸ªæ•°ã€‚å°æ•°ä½æ•°å¿…é¡»æ˜¯ä»0~aä¹‹é—´çš„å€¼ï¼Œé»˜è®¤å°æ•°ä½æ•°æ˜¯0.</p></li></ul></li><li><p>ä¸¾ä¾‹è¯´æ˜ï¼Œ11615.23653234568è¿™ä¸ªæ•°å­˜ä½ è¯´çš„ä¸‰ä¸ªæ ¼å¼</p><ul><li>decimalï¼š11615</li><li>decimal(3)ï¼š999</li><li>decdimal(3,2)ï¼š9.99</li><li>decimal(10,5)11615.23653</li></ul><p><strong>è¶…å‡ºç²¾åº¦èŒƒå›´çš„æ•°ä¼šè¢«å¼ºåˆ¶è¿›ä½å¹¶åªæ˜¾ç¤ºæ•°æ®ç±»å‹å®šä¹‰çš„æ ¼å¼</strong></p></li><li><p>å¤‡æ³¨ï¼š</p><p>decimalæ•°æ®ç±»å‹ç”¨äºè¦æ±‚éå¸¸é«˜çš„ç²¾ç¡®è®¡ç®—ä¸­ï¼Œè¿™äº›ç±»å‹å…è®¸æŒ‡å®šæ•°å€¼çš„ç²¾ç¡®åº¦å’Œè®¡ç®—æ–¹æ³•ä½œä¸ºé€‰æ‹©å‚æ•°ã€‚ç²¾ç¡®åº¦åœ¨è¿™é‡ŒæŒ‡ä¸ºè¿™ä¸ªå€¼ä¿å­˜çš„æœ‰æ•ˆæ•°å­—çš„æ€»ä¸ªæ•°ã€‚è€Œè®¡æ•°æ–¹æ³•æŒ‡çš„æ˜¯å°æ•°ç‚¹åæ•°å­—çš„ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼šdecimal(5,2)è§„å®šäº†å­˜å‚¨çš„å€¼å°†ä¸ä¼šè¶…è¿‡äº”ä½æ•°å­— ï¼Œè€Œä¸”å°æ•°ç‚¹åé¢æœ‰ä¸¤ä½æ•°å­—ã€‚</p></li></ul><h4 id="å®ä¾‹1ï¼š"><a href="#å®ä¾‹1ï¼š" class="headerlink" title="å®ä¾‹1ï¼š"></a>å®ä¾‹1ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create table t1(c1 <span class="hljs-built_in">float</span>(10,2), c3decimal(10,2));<br><br>Query OK, 0 rows affected (0.02 sec)<br><br>mysql&gt; insert into t1 values(9876543.21, 9876543.12);<br><br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; select * from t1;<br><br>+------------+------------+<br>| c1         | c3         |<br>+------------+------------+<br>| 9876543.00 | 9876543.12 |<br>+------------+------------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¼šå‘ç°ï¼Œflocatç±»å‹çš„å­—æ®µä¼šè‡ªåŠ¨å°†å€¼å››èˆäº”å…¥ï¼Œè€Œdecimalç±»å‹çš„ä¸ä¼šï¼Œå¦‚æœç”¨flocatç±»å‹çš„å»å­˜ä¸é‡‘é¢æœ‰å…³çš„æ•°æ®çš„æ—¶å€™å°±ä¼šå‡ºç°é—®é¢˜ï¼Œè€Œdecimalç±»å‹çš„å°±ä¸ä¼šã€‚</strong></p><h4 id="å®ä¾‹2ï¼šdecimal-5-2"><a href="#å®ä¾‹2ï¼šdecimal-5-2" class="headerlink" title="å®ä¾‹2ï¼šdecimal(5,2)"></a>å®ä¾‹2ï¼šdecimal(5,2)</h4><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create table t1(id1 <span class="hljs-built_in">float</span>(5,2) default null,id2 double(5,2) default null,<br>id3 decimal(5,2) default null );<br>Query OK, 0 rows affected (0.03 sec)<br><br>mysql&gt; insert into t1 values(1.2345,1.2345,1.2345);<br>Query OK, 1 row affected, 1 warning (0.04 sec)<br><br>mysql&gt; show warnings;<br>+-------+------+------------------------------------------+<br>| Level | Code | Message                                  |<br>+-------+------+------------------------------------------+<br>| Note  | 1265 | Data truncated <span class="hljs-keyword">for</span> column <span class="hljs-string">&#x27;id3&#x27;</span> at row 1 |<br>+-------+------+------------------------------------------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><ul><li><p>1.2345 â€” å°æ•°ç‚¹åæœ€å¤š2ä½ï¼Œæ‰€ä»¥ä¿å­˜å¯ä»¥ï¼Œè‡ªåŠ¨å››èˆäº”å…¥æ•°æ®æˆªæ–­,ä½†ä¼šæŠ¥waning</p></li><li><p>12.34 â€” OK</p></li><li><p>1234.5 â€” å› ä¸ºå°æ•°éƒ¨åˆ†æœªæ»¡2ä½ï¼Œè¦è¡¥0.æ‰€ä»¥ä¿å­˜åº”è¯¥1234.50ã€‚æ‰€ä»¥æ•´ä¸ªä½æ•°è¶…å‡ºäº†5ï¼Œä¿å­˜æŠ¥é”™ã€‚</p></li><li><p>1.2 â€” å°æ•°æœªæ»¡éƒ¨åˆ†è¡¥0ã€‚æŒ‰ç…§1.20ä¿å­˜ã€‚</p></li></ul><h3 id="é»˜è®¤çŠ¶æ€æ¯”è¾ƒï¼š"><a href="#é»˜è®¤çŠ¶æ€æ¯”è¾ƒï¼š" class="headerlink" title="é»˜è®¤çŠ¶æ€æ¯”è¾ƒï¼š"></a>é»˜è®¤çŠ¶æ€æ¯”è¾ƒï¼š</h3><ul><li>æµ®ç‚¹æ•°<ul><li>å¦‚æœä¸å†™ç²¾åº¦å’Œæ ‡åº¦ï¼Œä¼šæŒ‰ç…§å®é™…ç²¾åº¦å€¼ä¿å­˜</li><li>å¦‚æœæœ‰ç²¾åº¦å’Œæ ‡åº¦ï¼Œåˆ™ä¼šè‡ªåŠ¨å°†å››èˆäº”å…¥åçš„ç»“æœæ’å…¥ï¼Œç³»ç»Ÿä¸ä¼šæŠ¥é”™</li></ul></li><li>å®šç‚¹æ•°<ul><li>å¦‚æœä¸å†™ç²¾åº¦å’Œæ ‡åº¦ï¼Œåˆ™æŒ‰ç…§é»˜è®¤å€¼decimal(10,0)æ¥æ“ä½œ</li><li>å¦‚æœæ•°æ®è¶…è¿‡äº†ç²¾åº¦å’Œæ ‡åº¦å€¼ï¼Œç³»ç»Ÿä¼šæŠ¥é”™</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> æ•°æ®åº“ </category>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> float </tag>
            
            <tag> decimal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åº“ç¬”è®°</title>
      <link href="2019/05/27/shu-ju-ku-mysql-bi-ji/"/>
      <url>2019/05/27/shu-ju-ku-mysql-bi-ji/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¹ æ•°æ®åº“å®‰è£…åï¼Œæœ€é‡è¦çš„å°±æ˜¯å­¦ä¹ SQLè¯­å¥ã€‚</p><h3 id="1-æ•°æ®è¯­å¥æ“ä½œç±»å‹"><a href="#1-æ•°æ®è¯­å¥æ“ä½œç±»å‹" class="headerlink" title="1. æ•°æ®è¯­å¥æ“ä½œç±»å‹"></a>1. æ•°æ®è¯­å¥æ“ä½œç±»å‹</h3><p>SQLæ˜¯æ“ä½œæ•°æ®åº“çš„æ ¸å¿ƒï¼Œ</p><p>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€(Structured Query Language)ç®€ç§°SQLï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šç›®çš„çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ˜¯ä¸€ç§æ•°æ®åº“æŸ¥è¯¢å’Œç¨‹åºè®¾è®¡è¯­è¨€ï¼Œç”¨äºå­˜å–æ•°æ®ä»¥åŠæŸ¥è¯¢ã€æ›´æ–°å’Œç®¡ç†å…³ç³»æ•°æ®åº“ç³»ç»Ÿï¼›åŒæ—¶ä¹Ÿæ˜¯æ•°æ®åº“è„šæœ¬æ–‡ä»¶çš„æ‰©å±•åã€‚</p><p>SQLæ˜¯æœ€é‡è¦çš„å…³ç³»æ•°æ®åº“æ“ä½œè¯­è¨€ï¼Œå¹¶ä¸”å®ƒçš„å½±å“å·²ç»è¶…å‡ºæ•°æ®åº“é¢†åŸŸï¼Œå¾—åˆ°å…¶ä»–é¢†åŸŸçš„é‡è§†å’Œé‡‡ç”¨ï¼Œå¦‚äººå·¥æ™ºèƒ½é¢†åŸŸçš„æ•°æ®æ£€ç´¢ç­‰ã€‚</p><p>SQLæ˜¯å…³ç³»æ¨¡å‹çš„æ•°æ®åº“åº”ç”¨è¯­è¨€ï¼Œç”±IBMåœ¨20ä¸–çºª70å¹´ä»£ä¸ºå…¶å…³ç³»å‹æ•°æ®åº“ System R æ‰€å¼€å‘ã€‚</p><p>SQL æ˜¯1986å¹´10 æœˆç”±ç¾å›½å›½å®¶æ ‡å‡†å±€ï¼ˆANSIï¼‰é€šè¿‡çš„æ•°æ®åº“è¯­è¨€ç¾å›½æ ‡å‡†ï¼Œæ¥ç€ï¼Œå›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰é¢å¸ƒäº†SQLæ­£å¼å›½é™…æ ‡å‡†ã€‚1989å¹´4æœˆï¼ŒISOæå‡ºäº†å…·æœ‰å®Œæ•´æ€§ç‰¹å¾çš„SQL89æ ‡å‡†ï¼Œ1992å¹´11æœˆåˆå…¬å¸ƒäº†SQL92æ ‡å‡†ã€‚</p><p>è™½ç„¶å„ä¸ªæ•°æ®åº“ç³»ç»Ÿç•¥æœ‰ä¸åŒï¼Œä½†æ˜¯ä»–ä»¬åŸºæœ¬å‡éµå¾ªSQL 92æ ‡å‡†ã€‚æˆ–è€…åœ¨SQL 92ä¸Šåšäº†ä¸€äº›ç®€å•çš„æ‰©å±•å’Œå˜åŒ–ã€‚</p><p>å­¦å¥½äº†MySQL çš„SQL è¯­æ³•ï¼Œå…¶ä»–çš„SQLè¯­æ³•å­¦ä¹ èµ·æ¥å‡æ˜¯ä¸‡å˜ä¸ç¦»å…¶ä¸­ã€‚</p><p>SQLè¯­å¥æŒ‰ç…§å…¶åŠŸèƒ½èŒƒå›´ä¸åŒå¯åˆ†ä¸º3ä¸ªç±»åˆ«ï¼š</p><ol><li><strong>æ•°æ®å®šä¹‰è¯­è¨€</strong>(DDL ï¼ŒData Defintion Language)è¯­å¥ï¼šæ•°æ®å®šä¹‰è¯­å¥ï¼Œç”¨äºå®šä¹‰ä¸åŒçš„æ•°æ®æ®µã€æ•°æ®åº“ã€è¡¨ã€åˆ—ã€ç´¢å¼•ç­‰ã€‚å¸¸ç”¨çš„è¯­å¥å…³é”®å­—åŒ…æ‹¬createã€dropã€alterç­‰ã€‚</li><li><strong>æ•°æ®æ“ä½œè¯­è¨€</strong>(DML ï¼Œ Data Manipulation Language)è¯­å¥ï¼šæ•°æ®æ“çºµè¯­å¥ï¼Œç”¨äºæ·»åŠ ã€åˆ é™¤ã€æ›´æ–°å’ŒæŸ¥è¯¢æ•°æ®åº“è®°å½•ï¼Œå¹¶æ£€æŸ¥æ•°æ®çš„å®Œæ•´æ€§ã€‚å¸¸ç”¨çš„è¯­å¥å…³é”®å­—ä¸»è¦åŒ…æ‹¬insertã€deleteã€updateå’Œselectç­‰ã€‚</li><li><strong>æ•°æ®æ§åˆ¶è¯­è¨€</strong>(DCLï¼Œ Data Control Language)è¯­å¥ï¼šæ•°æ®æ§åˆ¶è¯­å¥ï¼Œç”¨äºæ§åˆ¶ä¸åŒæ•°æ®æ®µç›´æ¥çš„è®¸å¯å’Œè®¿é—®çº§åˆ«çš„è¯­å¥ã€‚è¿™äº›è¯­å¥å®šä¹‰äº†æ•°æ®åº“ã€è¡¨ã€å­—æ®µã€ç”¨æˆ·çš„è®¿é—®æƒé™å’Œå®‰å…¨çº§åˆ«ã€‚ä¸»è¦çš„è¯­å¥å…³é”®å­—åŒ…æ‹¬grantã€revokeç­‰ã€‚</li></ol><h3 id="2-ç®¡ç†æ•°æ®åº“å‘½ä»¤"><a href="#2-ç®¡ç†æ•°æ®åº“å‘½ä»¤" class="headerlink" title="2. ç®¡ç†æ•°æ®åº“å‘½ä»¤"></a>2. ç®¡ç†æ•°æ®åº“å‘½ä»¤</h3><h4 id="å…ƒæ•°æ®"><a href="#å…ƒæ•°æ®" class="headerlink" title="å…ƒæ•°æ®"></a>å…ƒæ•°æ®</h4><p>ä»¥ä¸‹å‘½ä»¤è¯­å¥å¯ä»¥åœ¨ MySQL çš„å‘½ä»¤æç¤ºç¬¦ä½¿ç”¨ï¼Œè·å–æœåŠ¡å™¨å…ƒæ•°æ®</p><table><thead><tr><th align="center">å‘½ä»¤</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="center">select version( )</td><td align="left">æœåŠ¡å™¨ç‰ˆæœ¬ä¿¡æ¯</td></tr><tr><td align="center">select database( )</td><td align="left">å½“å‰æ•°æ®åº“å (æˆ–è€…è¿”å›ç©º)</td></tr><tr><td align="center">select user( )</td><td align="left">å½“å‰ç”¨æˆ·å</td></tr><tr><td align="center">show status</td><td align="left">æœåŠ¡å™¨çŠ¶æ€</td></tr><tr><td align="center">show variables</td><td align="left">æœåŠ¡å™¨é…ç½®å˜é‡</td></tr></tbody></table><h4 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h4><ul><li>create database æ•°æ®åº“å:<br>åˆ›å»ºæ•°æ®åº“</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create database data_test;<br>Query OK, 1 row affected (0.01 sec)<br></code></pre></div></td></tr></table></figure><h4 id="åˆ é™¤æ•°æ®åº“"><a href="#åˆ é™¤æ•°æ®åº“" class="headerlink" title="åˆ é™¤æ•°æ®åº“"></a>åˆ é™¤æ•°æ®åº“</h4><ul><li>drop database æ•°æ®åº“å:<br>åˆ é™¤æ•°æ®åº“</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; drop database data_test;<br>Query OK, 0 rows affected (0.01 sec)<br></code></pre></div></td></tr></table></figure><h4 id="å±•ç¤ºæ‰€æœ‰æ•°æ®åº“"><a href="#å±•ç¤ºæ‰€æœ‰æ•°æ®åº“" class="headerlink" title="å±•ç¤ºæ‰€æœ‰æ•°æ®åº“"></a>å±•ç¤ºæ‰€æœ‰æ•°æ®åº“</h4><ul><li>show databases:<br>åˆ—å‡º MySQL æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„æ•°æ®åº“åˆ—è¡¨ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; show databases;<br>+--------------------+<br>| Database           |<br>+--------------------+<br>| data_test          |<br>| information_schema |<br>| mysql              |<br>| performance_schema |<br>| sys                |<br>+--------------------+<br>5 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.01 sec)<br></code></pre></div></td></tr></table></figure><h4 id="æ”¹å˜æ•°æ®åº“"><a href="#æ”¹å˜æ•°æ®åº“" class="headerlink" title="æ”¹å˜æ•°æ®åº“"></a>æ”¹å˜æ•°æ®åº“</h4><ul><li>use æ•°æ®åº“å :<br>é€‰æ‹©è¦æ“ä½œçš„Mysqlæ•°æ®åº“ï¼Œä½¿ç”¨è¯¥å‘½ä»¤åæ‰€æœ‰Mysqlå‘½ä»¤éƒ½åªé’ˆå¯¹è¯¥æ•°æ®åº“ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; use data_test;<br>Database changed<br></code></pre></div></td></tr></table></figure><h4 id="å±•ç¤ºå½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨"><a href="#å±•ç¤ºå½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨" class="headerlink" title="å±•ç¤ºå½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨"></a>å±•ç¤ºå½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨</h4><ul><li>show tables:<br>æ˜¾ç¤ºæŒ‡å®šæ•°æ®åº“çš„æ‰€æœ‰è¡¨ï¼Œä½¿ç”¨è¯¥å‘½ä»¤å‰éœ€è¦ä½¿ç”¨ use å‘½ä»¤æ¥é€‰æ‹©è¦æ“ä½œçš„æ•°æ®åº“ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; show tables;<br>+---------------------+<br>| Tables_in_data_test |<br>+---------------------+<br>| customers           |<br>| orderitems          |<br>| orders              |<br>| productnotes        |<br>| products            |<br>| vendors             |<br>+---------------------+<br>6 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><h4 id="å±•ç¤ºç‰¹å®šè¡¨ä¸­æ¯åˆ—çš„ä¿¡æ¯"><a href="#å±•ç¤ºç‰¹å®šè¡¨ä¸­æ¯åˆ—çš„ä¿¡æ¯" class="headerlink" title="å±•ç¤ºç‰¹å®šè¡¨ä¸­æ¯åˆ—çš„ä¿¡æ¯"></a>å±•ç¤ºç‰¹å®šè¡¨ä¸­æ¯åˆ—çš„ä¿¡æ¯</h4><ul><li>show columns from æ•°æ®è¡¨(desc æ•°æ®è¡¨):<br>æ˜¾ç¤ºæ•°æ®è¡¨çš„å±æ€§ï¼Œå±æ€§ç±»å‹ï¼Œä¸»é”®ä¿¡æ¯ ï¼Œæ˜¯å¦ä¸º NULLï¼Œé»˜è®¤å€¼ç­‰å…¶ä»–ä¿¡æ¯ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; show columns from customers;<br>+--------------+-----------+------+-----+---------+----------------+<br>| Field        | Type      | Null | Key | Default | Extra          |<br>+--------------+-----------+------+-----+---------+----------------+<br>| cust_id      | int(11)   | NO   | PRI | NULL    | auto_increment |<br>| cust_name    | char(50)  | NO   |     | NULL    |                |<br>| cust_address | char(50)  | YES  |     | NULL    |                |<br>| cust_city    | char(50)  | YES  |     | NULL    |                |<br>| cust_state   | char(5)   | YES  |     | NULL    |                |<br>| cust_zip     | char(10)  | YES  |     | NULL    |                |<br>| cust_country | char(50)  | YES  |     | NULL    |                |<br>| cust_contact | char(50)  | YES  |     | NULL    |                |<br>| cust_email   | char(255) | YES  |     | NULL    |                |<br>+--------------+-----------+------+-----+---------+----------------+<br>9 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><h4 id="å±•ç¤ºæ•°æ®è¡¨çš„è¯¦ç»†ç´¢å¼•ä¿¡æ¯"><a href="#å±•ç¤ºæ•°æ®è¡¨çš„è¯¦ç»†ç´¢å¼•ä¿¡æ¯" class="headerlink" title="å±•ç¤ºæ•°æ®è¡¨çš„è¯¦ç»†ç´¢å¼•ä¿¡æ¯"></a>å±•ç¤ºæ•°æ®è¡¨çš„è¯¦ç»†ç´¢å¼•ä¿¡æ¯</h4><ul><li>show index from æ•°æ®è¡¨:<br>æ˜¾ç¤ºæ•°æ®è¡¨çš„è¯¦ç»†ç´¢å¼•ä¿¡æ¯ï¼ŒåŒ…æ‹¬PRIMARY KEYï¼ˆä¸»é”®ï¼‰ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; show index from customers;<br>+-----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+<br>| Table     | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment | Visible | Expression |<br>+-----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+<br>| customers |          0 | PRIMARY  |            1 | cust_id     | A         |           5 |  NULL    |   NULL |      | BTREE      |         |               | YES     | NULL       |<br>+-----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.01 sec)<br><br></code></pre></div></td></tr></table></figure><h4 id="å±•ç¤ºæ•°æ®åº“çš„æ€§èƒ½åŠç»Ÿè®¡ä¿¡æ¯"><a href="#å±•ç¤ºæ•°æ®åº“çš„æ€§èƒ½åŠç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="å±•ç¤ºæ•°æ®åº“çš„æ€§èƒ½åŠç»Ÿè®¡ä¿¡æ¯"></a>å±•ç¤ºæ•°æ®åº“çš„æ€§èƒ½åŠç»Ÿè®¡ä¿¡æ¯</h4><ul><li>show table status [from db_name] [like â€˜patternâ€™] \G:<br>è¯¥å‘½ä»¤å°†è¾“å‡ºMysqlæ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„æ€§èƒ½åŠç»Ÿè®¡ä¿¡æ¯ã€‚</li></ul><blockquote><p>æ˜¾ç¤ºæ•°æ®åº“ data_test ä¸­æ‰€æœ‰è¡¨çš„ä¿¡æ¯</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; show table status from data_test;<br>+--------------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+<br>| Name         | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time         | Check_time | Collation       | Checksum | Create_options | Comment |<br>+--------------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+<br>| customers    | InnoDB |      10 | Dynamic    |    5 |           3276 |       16384 |               0 |            0 |         0 |          10006 | 2019-05-26 10:15:02 | 2019-05-26 10:15:25 | NULL       | utf8_general_ci |     NULL |                |         |<br>| orderitems   | InnoDB |      10 | Dynamic    |   11 |           1489 |       16384 |               0 |        16384 |         0 |           NULL | 2019-05-26 10:15:02 | 2019-05-26 10:15:26 | NULL       | utf8_general_ci |     NULL |                |         |<br>| orders       | InnoDB |      10 | Dynamic    |    5 |           3276 |       16384 |               0 |        16384 |         0 |          20010 | 2019-05-26 10:15:02 | 2019-05-26 10:15:25 | NULL       | utf8_general_ci |     NULL |                |         |<br>| productnotes | MyISAM |      10 | Dynamic    |   14 |            135 |        1892 | 281474976710655 |         6144 |         0 |            115 | 2019-05-26 10:15:02 | 2019-05-26 10:15:26 | NULL       | utf8_general_ci |     NULL |                |         |<br>| products     | InnoDB |      10 | Dynamic    |   14 |           1170 |       16384 |               0 |        16384 |         0 |           NULL | 2019-05-26 10:15:02 | 2019-05-26 10:15:25 | NULL       | utf8_general_ci |     NULL |                |         |<br>| vendors      | InnoDB |      10 | Dynamic    |    6 |           2730 |       16384 |               0 |            0 |         0 |           1007 | 2019-05-26 10:15:02 | 2019-05-26 10:15:25 | NULL       | utf8_general_ci |     NULL |                |         |<br>+--------------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+<br>6 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.02 sec)<br></code></pre></div></td></tr></table></figure><blockquote><p>è¡¨åä»¥cuså¼€å¤´çš„è¡¨çš„ä¿¡æ¯</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; show table status from data_test like <span class="hljs-string">&quot;cus%&quot;</span>;<br>+-----------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+<br>| Name      | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time         | Check_time | Collation       | Checksum | Create_options | Comment |<br>+-----------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+<br>| customers | InnoDB |      10 | Dynamic    |    5 |           3276 |       16384 |               0 |            0 |         0 |          10006 | 2019-05-26 10:15:02 | 2019-05-26 10:15:25 | NULL       | utf8_general_ci |     NULL |                |         |<br>+-----------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><blockquote><p>è¡¨åä»¥cuså¼€å¤´çš„è¡¨çš„ä¿¡æ¯;<br>åŠ ä¸Š \Gï¼ŒæŸ¥è¯¢ç»“æœæŒ‰åˆ—æ‰“å°;\Gåé¢ä¸èƒ½å†åŠ åˆ†å·;<br>å› ä¸º\Gåœ¨åŠŸèƒ½ä¸Šç­‰åŒäº;<br>å¦‚æœåŠ äº†åˆ†å·ï¼Œé‚£ä¹ˆå°±æ˜¯;;(2ä¸ªåˆ†å·)ï¼ŒSQLè¯­æ³•é”™è¯¯<code>ERROR:No query specified</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; show table status from data_test like <span class="hljs-string">&quot;cus%&quot;</span>\G<br>*************************** 1. row ***************************<br>           Name: customers<br>         Engine: InnoDB<br>        Version: 10<br>     Row_format: Dynamic<br>           Rows: 5<br> Avg_row_length: 3276<br>    Data_length: 16384<br>Max_data_length: 0<br>   Index_length: 0<br>      Data_free: 0<br> Auto_increment: 10006<br>    Create_time: 2019-05-26 10:15:02<br>    Update_time: 2019-05-26 10:15:25<br>     Check_time: NULL<br>      Collation: utf8_general_ci<br>       Checksum: NULL<br> Create_options:<br>        Comment:<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><h3 id="3-æ•°æ®ç±»å‹"><a href="#3-æ•°æ®ç±»å‹" class="headerlink" title="3. æ•°æ®ç±»å‹"></a>3. æ•°æ®ç±»å‹</h3><h4 id="æ•°å€¼ç±»å‹"><a href="#æ•°å€¼ç±»å‹" class="headerlink" title="æ•°å€¼ç±»å‹"></a>æ•°å€¼ç±»å‹</h4><p>mysqlæ”¯æŒæ‰€æœ‰æ ‡å‡†sqlæ•°å€¼æ•°æ®ç±»å‹ã€‚</p><p>è¿™äº›ç±»å‹åŒ…æ‹¬ä¸¥æ ¼æ•°å€¼æ•°æ®ç±»å‹ï¼ˆintegerã€smallintã€decimalå’Œnumericï¼‰ï¼Œä»¥åŠè¿‘ä¼¼æ•°å€¼æ•°æ®ç±»å‹ï¼ˆfloatã€realå’Œdouble precisié”®å­—intæ˜¯integerçš„åŒä¹‰è¯ï¼Œå…³é”®å­—decæ˜¯decimalçš„åŒä¹‰è¯ã€‚</p><p>bitæ•°æ®ç±»å‹ä¿å­˜ä½å­—æ®µå€¼ï¼Œå¹¶ä¸”æ”¯æŒmyisamã€memoryã€innodbå’Œbdbè¡¨ã€‚</p><p>ä½œä¸ºsqlæ ‡å‡†çš„æ‰©å±•ï¼Œmysqlä¹Ÿæ”¯æŒæ•´æ•°ç±»å‹tinyintã€mediumintå’Œbigintã€‚ä¸‹é¢çš„è¡¨æ˜¾ç¤ºäº†éœ€è¦çš„æ¯ä¸ªæ•´æ•°ç±»å‹çš„å­˜å‚¨å’ŒèŒƒå›´ã€‚</p><table><thead><tr><th align="center">ç±»å‹</th><th align="center">å¤§å°</th><th align="left">èŒƒå›´ï¼ˆæœ‰ç¬¦å·ï¼‰</th><th align="left">èŒƒå›´ï¼ˆæ— ç¬¦å·ï¼‰</th><th align="center">ç”¨é€”</th></tr></thead><tbody><tr><td align="center"><strong>tinyint</strong></td><td align="center">1 å­—èŠ‚</td><td align="left">(-128ï¼Œ127)</td><td align="left">(0ï¼Œ255)</td><td align="center">å°æ•´æ•°å€¼</td></tr><tr><td align="center">smallint</td><td align="center">2 å­—èŠ‚</td><td align="left">(-32 768ï¼Œ32 767)</td><td align="left">(0ï¼Œ65 535)</td><td align="center">å¤§æ•´æ•°å€¼</td></tr><tr><td align="center">mediumint</td><td align="center">3 å­—èŠ‚</td><td align="left">(-8 388 608ï¼Œ8 388 607)</td><td align="left">(0ï¼Œ16 777 215)</td><td align="center">å¤§æ•´æ•°å€¼</td></tr><tr><td align="center"><strong>int</strong> æˆ– <strong>integer</strong></td><td align="center">4 å­—èŠ‚</td><td align="left">(-2 147 483 648ï¼Œ2 147 483 647)</td><td align="left">(0ï¼Œ4 294 967 295)</td><td align="center">å¤§æ•´æ•°å€¼</td></tr><tr><td align="center">bigint</td><td align="center">8 å­—èŠ‚</td><td align="left">(-9,223,372,036,854,775,808ï¼Œ9 223 372 036 854 775 807)</td><td align="left">(0ï¼Œ18 446 744 073 709 551 615)</td><td align="center">æå¤§æ•´æ•°å€¼</td></tr><tr><td align="center"><strong>float</strong></td><td align="center">4 å­—èŠ‚</td><td align="left">(-3.402 823 466 e+38ï¼Œ-1.175 494 351 e-38)ï¼Œ0ï¼Œ(1.175 494 351 e-38ï¼Œ3.402 823 466 351 e+38)</td><td align="left">0ï¼Œ(1.175 494 351 e-38ï¼Œ3.402 823 466 e+38)</td><td align="center">å•ç²¾åº¦<br/>æµ®ç‚¹æ•°å€¼</td></tr><tr><td align="center"><strong>double</strong></td><td align="center">8 å­—èŠ‚</td><td align="left">(-1.797 693 134 862 315 7 e+308ï¼Œ-2.225 073 858 507 201 4 e-308)ï¼Œ0ï¼Œ(2.225 073 858 507 201 4 e-308ï¼Œ1.797 693 134 862 315 7 e+308)</td><td align="left">0ï¼Œ(2.225 073 858 507 201 4 e-308ï¼Œ1.797 693 134 862 315 7 e+308)</td><td align="center">åŒç²¾åº¦<br/> æµ®ç‚¹æ•°å€¼</td></tr><tr><td align="center"><strong>decimal</strong></td><td align="center">decimal(m,d)</td><td align="left">ä¾èµ–äº m å’Œ d çš„å€¼</td><td align="left">ä¾èµ–äº m å’Œ d çš„å€¼</td><td align="center">å°æ•°å€¼</td></tr></tbody></table><hr><h4 id="æ—¥æœŸå’Œæ—¶é—´ç±»å‹"><a href="#æ—¥æœŸå’Œæ—¶é—´ç±»å‹" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´ç±»å‹"></a>æ—¥æœŸå’Œæ—¶é—´ç±»å‹</h4><p>è¡¨ç¤ºæ—¶é—´å€¼çš„æ—¥æœŸå’Œæ—¶é—´ç±»å‹ä¸º datetimeã€dateã€timestampã€time å’Œ yearã€‚</p><p>æ¯ä¸ªæ—¶é—´ç±»å‹æœ‰ä¸€ä¸ªæœ‰æ•ˆå€¼èŒƒå›´å’Œä¸€ä¸ª â€œé›¶â€ å€¼ï¼Œå½“æŒ‡å®šä¸åˆæ³•çš„ mysql ä¸èƒ½è¡¨ç¤ºçš„å€¼æ—¶ä½¿ç”¨ â€œé›¶â€ å€¼ã€‚</p><p>timestamp ç±»å‹æœ‰ä¸“æœ‰çš„è‡ªåŠ¨æ›´æ–°ç‰¹æ€§ï¼Œå°†åœ¨åé¢æè¿°ã€‚</p><table><thead><tr><th align="center">ç±»å‹</th><th align="center">å¤§å°(å­—èŠ‚)</th><th align="left">èŒƒå›´</th><th align="center">æ ¼å¼</th><th align="center">ç”¨é€”</th></tr></thead><tbody><tr><td align="center"><strong>date</strong></td><td align="center">3</td><td align="left">1000-01-01/9999-12-31</td><td align="center">yyyy-mm-dd</td><td align="center">æ—¥æœŸå€¼</td></tr><tr><td align="center"><strong>time</strong></td><td align="center">3</td><td align="left">â€˜-838:59:59â€™/â€˜838:59:59â€™</td><td align="center">hh:mm:ss</td><td align="center">æ—¶é—´å€¼æˆ–æŒç»­æ—¶é—´</td></tr><tr><td align="center">year</td><td align="center">1</td><td align="left">1901/2155</td><td align="center">yyyy</td><td align="center">å¹´ä»½å€¼</td></tr><tr><td align="center"><strong>datetime</strong></td><td align="center">8</td><td align="left">1000-01-01 00:00:00/9999-12-31 23:59:59</td><td align="center">yyyy-mm-dd hh:mm:ss</td><td align="center">æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼</td></tr><tr><td align="center"><strong>timestamp</strong></td><td align="center">4</td><td align="left">1970-01-01 00:00:00/2038<br/>ç»“æŸæ—¶é—´æ˜¯ç¬¬ <strong>2147483647</strong> ç§’<br/>åŒ—äº¬æ—¶é—´ <strong>2038-1-19 11:14:07</strong><br/>æ ¼æ—å°¼æ²»æ—¶é—´<strong>2038-1-19 03:14:07</strong></td><td align="center">yyyymmdd hhmmss</td><td align="center">æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼ï¼Œæ—¶é—´æˆ³</td></tr></tbody></table><hr><h4 id="å­—ç¬¦ä¸²ç±»å‹"><a href="#å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹"></a>å­—ç¬¦ä¸²ç±»å‹</h4><p>å­—ç¬¦ä¸²ç±»å‹æŒ‡ charã€varcharã€binaryã€varbinaryã€blobã€textã€enum å’Œ setã€‚è¯¥èŠ‚æè¿°äº†è¿™äº›ç±»å‹å¦‚ä½•å·¥ä½œä»¥åŠå¦‚ä½•åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨è¿™äº›ç±»å‹ã€‚</p><table><thead><tr><th align="left">ç±»å‹</th><th align="left">å¤§å°</th><th align="left">ç”¨é€”</th></tr></thead><tbody><tr><td align="left"><strong>char</strong></td><td align="left">0-255 å­—èŠ‚</td><td align="left">å®šé•¿å­—ç¬¦ä¸²</td></tr><tr><td align="left"><strong>varchar</strong></td><td align="left">0-65535 å­—èŠ‚</td><td align="left">å˜é•¿å­—ç¬¦ä¸²</td></tr><tr><td align="left">tinyblob</td><td align="left">0-255 å­—èŠ‚</td><td align="left">ä¸è¶…è¿‡ 255 ä¸ªå­—ç¬¦çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²</td></tr><tr><td align="left">tinytext</td><td align="left">0-255 å­—èŠ‚</td><td align="left">çŸ­æ–‡æœ¬å­—ç¬¦ä¸²</td></tr><tr><td align="left"><strong>blob</strong></td><td align="left">0-65 535 å­—èŠ‚</td><td align="left">äºŒè¿›åˆ¶å½¢å¼çš„é•¿æ–‡æœ¬æ•°æ®</td></tr><tr><td align="left"><strong>text</strong></td><td align="left">0-65 535 å­—èŠ‚</td><td align="left">é•¿æ–‡æœ¬æ•°æ®</td></tr><tr><td align="left">mediumblob</td><td align="left">0-16 777 215 å­—èŠ‚</td><td align="left">äºŒè¿›åˆ¶å½¢å¼çš„ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®</td></tr><tr><td align="left">mediumtext</td><td align="left">0-16 777 215 å­—èŠ‚</td><td align="left">ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®</td></tr><tr><td align="left">longblob</td><td align="left">0-4 294 967 295 å­—èŠ‚</td><td align="left">äºŒè¿›åˆ¶å½¢å¼çš„æå¤§æ–‡æœ¬æ•°æ®</td></tr><tr><td align="left">longtext</td><td align="left">0-4 294 967 295 å­—èŠ‚</td><td align="left">æå¤§æ–‡æœ¬æ•°æ®</td></tr></tbody></table><p>char å’Œ varchar ç±»å‹ç±»ä¼¼ï¼Œä½†å®ƒä»¬ä¿å­˜å’Œæ£€ç´¢çš„æ–¹å¼ä¸åŒã€‚å®ƒä»¬çš„æœ€å¤§é•¿åº¦å’Œæ˜¯å¦å°¾éƒ¨ç©ºæ ¼è¢«ä¿ç•™ç­‰æ–¹é¢ä¹Ÿä¸åŒã€‚åœ¨å­˜å‚¨æˆ–æ£€ç´¢è¿‡ç¨‹ä¸­ä¸è¿›è¡Œå¤§å°å†™è½¬æ¢ã€‚</p><p>binary å’Œ varbinary ç±»ä¼¼äº char å’Œ varcharï¼Œä¸åŒçš„æ˜¯å®ƒä»¬åŒ…å«äºŒè¿›åˆ¶å­—ç¬¦ä¸²è€Œä¸è¦éäºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬åŒ…å«å­—èŠ‚å­—ç¬¦ä¸²è€Œä¸æ˜¯å­—ç¬¦å­—ç¬¦ä¸²ã€‚è¿™è¯´æ˜å®ƒä»¬æ²¡æœ‰å­—ç¬¦é›†ï¼Œå¹¶ä¸”æ’åºå’Œæ¯”è¾ƒåŸºäºåˆ—å€¼å­—èŠ‚çš„æ•°å€¼å€¼ã€‚</p><p>blob æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼Œå¯ä»¥å®¹çº³å¯å˜æ•°é‡çš„æ•°æ®ã€‚æœ‰ 4 ç§ blob ç±»å‹ï¼štinyblobã€blobã€mediumblob å’Œ longblobã€‚å®ƒä»¬åŒºåˆ«åœ¨äºå¯å®¹çº³å­˜å‚¨èŒƒå›´ä¸åŒã€‚</p><p>æœ‰ 4 ç§ text ç±»å‹ï¼štinytextã€textã€mediumtext å’Œ longtextã€‚å¯¹åº”çš„è¿™ 4 ç§ blob ç±»å‹ï¼Œå¯å­˜å‚¨çš„æœ€å¤§é•¿åº¦ä¸åŒï¼Œå¯æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ã€‚</p><blockquote><p>æ³¨æ„ï¼š</p></blockquote><p>1ã€ä¸€ä¸ªæ±‰å­—å å¤šå°‘é•¿åº¦ä¸ç¼–ç æœ‰å…³ï¼š</p><p>UTFï¼8ï¼šä¸€ä¸ªæ±‰å­—ï¼3ä¸ªå­—èŠ‚</p><p>GBKï¼šä¸€ä¸ªæ±‰å­—ï¼2ä¸ªå­—èŠ‚</p><p>2ã€varchar(n) è¡¨ç¤º n ä¸ªå­—ç¬¦ï¼Œæ— è®ºæ±‰å­—å’Œè‹±æ–‡ï¼ŒMysql éƒ½èƒ½å­˜å…¥ n ä¸ªå­—ç¬¦ï¼Œä»…æ˜¯å®é™…å­—èŠ‚é•¿åº¦æœ‰æ‰€åŒºåˆ«</p><p>3ã€MySQL æ£€æŸ¥é•¿åº¦ï¼Œå¯ç”¨ SQL è¯­è¨€æ¥æŸ¥çœ‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">select length(fieldname) from table_name<br></code></pre></div></td></tr></table></figure><h3 id="4-åˆ›å»ºæ•°æ®è¡¨"><a href="#4-åˆ›å»ºæ•°æ®è¡¨" class="headerlink" title="4. åˆ›å»ºæ•°æ®è¡¨"></a>4. åˆ›å»ºæ•°æ®è¡¨</h3><p>åˆ›å»ºMySQLæ•°æ®è¡¨éœ€è¦ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li>è¡¨å</li><li>è¡¨å­—æ®µå</li><li>å®šä¹‰æ¯ä¸ªè¡¨å­—æ®µ</li></ul><p><strong>è¯­æ³•</strong><br>ä»¥ä¸‹ä¸ºåˆ›å»ºMySQLæ•°æ®è¡¨çš„SQLé€šç”¨è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">create table table_name (column_name column_type);<br></code></pre></div></td></tr></table></figure><p><strong>å®ä¾‹</strong><br>ä»¥ä¸‹ä¾‹å­ä¸­æˆ‘ä»¬å°†åœ¨ my_data æ•°æ®åº“ä¸­åˆ›å»ºæ•°æ®è¡¨studentsï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create table <span class="hljs-keyword">if</span> not exists students(id int unsigned auto_increment, name varchar(40) not null, adress varchar(100) , birthday date not null, primary key(id)) engine=innodb default charset=utf8mb4;<br>Query OK, 0 rows affected (0.03 sec)<br><br>mysql&gt; show columns from students;<br>+----------+------------------+------+-----+---------+----------------+<br>| Field    | Type             | Null | Key | Default | Extra          |<br>+----------+------------------+------+-----+---------+----------------+<br>| id       | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| name     | varchar(40)      | NO   |     | NULL    |                |<br>| adress   | varchar(100)     | YES  |     | NULL    |                |<br>| birthday | date             | NO   |     | NULL    |                |<br>+----------+------------------+------+-----+---------+----------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><p>å®ä¾‹è§£æï¼š</p><ul><li>å¦‚æœä½ ä¸æƒ³å­—æ®µä¸º null å¯ä»¥è®¾ç½®å­—æ®µçš„å±æ€§ä¸º not nullï¼Œ åœ¨æ“ä½œæ•°æ®åº“æ—¶å¦‚æœè¾“å…¥è¯¥å­—æ®µçš„æ•°æ®ä¸ºnull ï¼Œå°±ä¼šæŠ¥é”™ã€‚</li><li>auto_incrementå®šä¹‰åˆ—ä¸ºè‡ªå¢çš„å±æ€§ï¼Œä¸€èˆ¬ç”¨äºä¸»é”®ï¼Œæ•°å€¼ä¼šè‡ªåŠ¨åŠ 1ã€‚</li><li>primary keyå…³é”®å­—ç”¨äºå®šä¹‰åˆ—ä¸ºä¸»é”®ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å¤šåˆ—æ¥å®šä¹‰ä¸»é”®ï¼Œåˆ—é—´ä»¥é€—å·åˆ†éš”ã€‚</li><li>engine è®¾ç½®å­˜å‚¨å¼•æ“ï¼Œcharset è®¾ç½®ç¼–ç ã€‚</li></ul><h3 id="5-åˆ é™¤æ•°æ®è¡¨"><a href="#5-åˆ é™¤æ•°æ®è¡¨" class="headerlink" title="5. åˆ é™¤æ•°æ®è¡¨"></a>5. åˆ é™¤æ•°æ®è¡¨</h3><p>MySQLä¸­åˆ é™¤æ•°æ®è¡¨æ˜¯éå¸¸å®¹æ˜“æ“ä½œçš„ï¼Œ ä½†æ˜¯ä½ å†è¿›è¡Œåˆ é™¤è¡¨æ“ä½œæ—¶è¦éå¸¸å°å¿ƒï¼Œå› ä¸ºæ‰§è¡Œåˆ é™¤å‘½ä»¤åæ‰€æœ‰æ•°æ®éƒ½ä¼šæ¶ˆå¤±ã€‚</p><p><strong>è¯­æ³•</strong><br>ä»¥ä¸‹ä¸ºåˆ é™¤MySQLæ•°æ®è¡¨çš„é€šç”¨è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">drop table table_name;<br></code></pre></div></td></tr></table></figure><p><strong>å®ä¾‹</strong><br>ä»¥ä¸‹å®ä¾‹ä¸­æˆ‘ä»¬å°†åˆ é™¤ students è¡¨:</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; drop table students;<br>Query OK, 0 rows affected (0.01 sec)<br><br>mysql&gt; show tables;<br>Empty <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><h3 id="6-æ’å…¥æ•°æ®"><a href="#6-æ’å…¥æ•°æ®" class="headerlink" title="6. æ’å…¥æ•°æ®"></a>6. æ’å…¥æ•°æ®</h3><p>MySQL è¡¨ä¸­ä½¿ç”¨ insert into SQLè¯­å¥æ¥æ’å…¥æ•°æ®ã€‚</p><p><strong>è¯­æ³•</strong><br>ä»¥ä¸‹ä¸ºå‘MySQLæ•°æ®è¡¨æ’å…¥æ•°æ®é€šç”¨çš„ INSERT INTO SQLè¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">insert into table_name ( field1, field2,...fieldN ) values ( value1, value2,...valueN );<br></code></pre></div></td></tr></table></figure><p>insert æ’å…¥å¤šæ¡æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">insert into table_name  (field1, field2,...fieldn)  values  (valuea1,valuea2,...valuean),(valueb1,valueb2,...valuebn),(valuec1,valuec2,...valuecn)......;<br></code></pre></div></td></tr></table></figure><p>å¦‚æœæ•°æ®æ˜¯å­—ç¬¦å‹ï¼Œå¿…é¡»ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·ï¼Œå¦‚ï¼šâ€valueâ€ã€‚</p><p><strong>å®ä¾‹</strong><br>ä»¥ä¸‹å®ä¾‹ä¸­æˆ‘ä»¬å°†å‘ students è¡¨æ’å…¥æ•°æ®:</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># ä¸»é”®é»˜è®¤ä»1å¼€å§‹</span><br>mysql&gt; insert into students (name,birthday) values(<span class="hljs-string">&quot;ä¸½ä¸½&quot;</span>,<span class="hljs-string">&quot;1996-05-06&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br><span class="hljs-comment"># ä¸»é”®è®¾ä¸º0ï¼Œå³ä»æœ€åä¸€ä¸ªidå€¼è‡ªåŠ¨å¢é•¿</span><br>mysql&gt; insert into students values(0,<span class="hljs-string">&quot;ææ˜&quot;</span>,null,<span class="hljs-string">&quot;1993-12-16&quot;</span>);<br>Query OK, 1 row affected (0.01 sec)<br><br>mysql&gt; insert into students values(10,<span class="hljs-string">&quot;å¼ ç£Š&quot;</span>,<span class="hljs-string">&#x27;åŒ—äº¬å¸‚æµ·æ·€åŒº&#x27;</span>,<span class="hljs-string">&quot;1995-04-12&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br><span class="hljs-comment"># ä¸»é”®ä¸è®¾ç½®ï¼Œä»æœ€åä¸€ä¸ªidå€¼è‡ªåŠ¨å¢é•¿</span><br>mysql&gt; insert into students <span class="hljs-built_in">set</span> name=<span class="hljs-string">&quot;å­™é›¨&quot;</span>,adress=<span class="hljs-string">&#x27;æ²³åŒ—çœçŸ³å®¶åº„å¸‚&#x27;</span>,birthday=<span class="hljs-string">&quot;1989-07-18&quot;</span>;<br>Query OK, 1 row affected (0.01 sec)<br><br></code></pre></div></td></tr></table></figure><blockquote><p>å¦‚æœæ·»åŠ è¿‡ä¸»é”®è‡ªå¢ï¼ˆPRINARY KEY AUTO_INCREMENTï¼‰ç¬¬ä¸€åˆ—åœ¨å¢åŠ æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥å†™ä¸º0æˆ–è€…nullï¼Œè¿™æ ·æ·»åŠ æ•°æ®å¯ä»¥è‡ªå¢</p></blockquote><h3 id="7-æ¡ä»¶è¯­å¥"><a href="#7-æ¡ä»¶è¯­å¥" class="headerlink" title="7. æ¡ä»¶è¯­å¥"></a>7. æ¡ä»¶è¯­å¥</h3><ul><li>æŸ¥è¯¢è¯­å¥ä¸­ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¡¨ï¼Œè¡¨ä¹‹é—´ä½¿ç”¨é€—å·, åˆ†å‰²ï¼Œå¹¶ä½¿ç”¨whereè¯­å¥æ¥è®¾å®šæŸ¥è¯¢æ¡ä»¶ã€‚</li><li>where å­å¥ç±»ä¼¼äºç¨‹åºè¯­è¨€ä¸­çš„ if æ¡ä»¶ï¼Œæ ¹æ® MySQL è¡¨ä¸­çš„å­—æ®µå€¼æ¥è¯»å–æŒ‡å®šçš„æ•°æ®ã€‚</li><li>ä»¥ä¸‹ä¸ºæ“ä½œç¬¦åˆ—è¡¨ï¼Œå¯ç”¨äº where å­å¥ä¸­ã€‚</li><li>ä½ å¯ä»¥åœ¨ WHERE å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶ã€‚</li><li>ä½ å¯ä»¥ä½¿ç”¨ and æˆ–è€… or æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ã€‚</li><li>WHERE å­å¥ä¹Ÿå¯ä»¥è¿ç”¨äº SQL çš„ delete æˆ–è€… update å‘½ä»¤ã€‚</li></ul><blockquote><p>ä¸‹è¡¨ä¸­å®ä¾‹å‡å®š A ä¸º 10, B ä¸º 20</p></blockquote><table><thead><tr><th align="center">æ“ä½œç¬¦</th><th align="left">æè¿°</th><th align="left">å®ä¾‹</th></tr></thead><tbody><tr><td align="center">=</td><td align="left">ç­‰å·ï¼Œæ£€æµ‹ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰è¿”å›true</td><td align="left">(A = B) è¿”å›falseã€‚</td></tr><tr><td align="center">!=</td><td align="left">ä¸ç­‰äºï¼Œæ£€æµ‹ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰è¿”å›true</td><td align="left">(A != B) è¿”å› trueã€‚</td></tr><tr><td align="center">&gt;</td><td align="left">å¤§äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å¤§äºå³è¾¹çš„å€¼, å¦‚æœå·¦è¾¹çš„å€¼å¤§äºå³è¾¹çš„å€¼è¿”å›true</td><td align="left">(A &gt; B) è¿”å›falseã€‚</td></tr><tr><td align="center">&lt;</td><td align="left">å°äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å°äºå³è¾¹çš„å€¼, å¦‚æœå·¦è¾¹çš„å€¼å°äºå³è¾¹çš„å€¼è¿”å›true</td><td align="left">(A &lt; B) è¿”å› trueã€‚</td></tr><tr><td align="center">&gt;=</td><td align="left">å¤§äºç­‰äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å¤§äºæˆ–ç­‰äºå³è¾¹çš„å€¼, å¦‚æœå·¦è¾¹çš„å€¼å¤§äºæˆ–ç­‰äºå³è¾¹çš„å€¼è¿”å›true</td><td align="left">(A &gt;= B) è¿”å›falseã€‚</td></tr><tr><td align="center">&lt;=</td><td align="left">å°äºç­‰äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å°äºäºæˆ–ç­‰äºå³è¾¹çš„å€¼, å¦‚æœå·¦è¾¹çš„å€¼å°äºæˆ–ç­‰äºå³è¾¹çš„å€¼è¿”å›true</td><td align="left">(A &lt;= B) è¿”å› trueã€‚</td></tr></tbody></table><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨ MySQL æ•°æ®è¡¨ä¸­è¯»å–æŒ‡å®šçš„æ•°æ®ï¼Œwhere å­å¥æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><p>ä½¿ç”¨ä¸»é”®æ¥ä½œä¸º where å­å¥çš„æ¡ä»¶æŸ¥è¯¢æ˜¯éå¸¸å¿«é€Ÿçš„ã€‚</p><p>å¦‚æœç»™å®šçš„æ¡ä»¶åœ¨è¡¨ä¸­æ²¡æœ‰ä»»ä½•åŒ¹é…çš„è®°å½•ï¼Œé‚£ä¹ˆæŸ¥è¯¢ä¸ä¼šè¿”å›ä»»ä½•æ•°æ®ã€‚</p><h3 id="8-æŸ¥è¯¢æ•°æ®"><a href="#8-æŸ¥è¯¢æ•°æ®" class="headerlink" title="8. æŸ¥è¯¢æ•°æ®"></a>8. æŸ¥è¯¢æ•°æ®</h3><p>MySQL æ•°æ®åº“ä½¿ç”¨SQL selectè¯­å¥æ¥æŸ¥è¯¢æ•°æ®ã€‚</p><p><strong>è¯­æ³•</strong><br>ä»¥ä¸‹ä¸ºåœ¨MySQLæ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®é€šç”¨çš„ select è¯­æ³•</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">select column_name,column_name<br>from table_name<br>[<span class="hljs-built_in">where</span> Clause]<br>[<span class="hljs-built_in">limit</span> N][ offset M]<br></code></pre></div></td></tr></table></figure><ul><li>æŸ¥è¯¢è¯­å¥ä¸­ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¡¨ï¼Œè¡¨ä¹‹é—´ä½¿ç”¨é€—å·(,)åˆ†å‰²ï¼Œå¹¶ä½¿ç”¨whereè¯­å¥æ¥è®¾å®šæŸ¥è¯¢æ¡ä»¶ã€‚</li><li>select å‘½ä»¤å¯ä»¥è¯»å–ä¸€æ¡æˆ–è€…å¤šæ¡è®°å½•ã€‚</li><li>ä½ å¯ä»¥ä½¿ç”¨æ˜Ÿå·ï¼ˆ*ï¼‰æ¥ä»£æ›¿å…¶ä»–å­—æ®µï¼Œselectè¯­å¥ä¼šè¿”å›è¡¨çš„æ‰€æœ‰å­—æ®µæ•°æ®</li><li>ä½ å¯ä»¥ä½¿ç”¨ limit å±æ€§æ¥è®¾å®šè¿”å›çš„è®°å½•æ•°ã€‚</li><li>ä½ å¯ä»¥é€šè¿‡offsetæŒ‡å®šselectè¯­å¥å¼€å§‹æŸ¥è¯¢çš„æ•°æ®åç§»é‡ã€‚é»˜è®¤æƒ…å†µä¸‹åç§»é‡ä¸º0ã€‚</li></ul><p><strong>å®ä¾‹</strong><br>ä»¥ä¸‹å®ä¾‹æˆ‘ä»¬å°†é€šè¿‡ SQL select å‘½ä»¤æ¥è·å– MySQL æ•°æ®è¡¨ students çš„æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select * from students;<br>+----+------+----------------+------------+<br>| id | name | adress         | birthday   |<br>+----+------+----------------+------------+<br>|  1 | ä¸½ä¸½ | NULL           | 1996-05-06 |<br>|  2 | ææ˜ | NULL           | 1993-12-16 |<br>| 10 | å¼ ç£Š | åŒ—äº¬å¸‚æµ·æ·€åŒº    | 1995-04-12 |<br>| 11 | å­™é›¨ | æ²³åŒ—çœçŸ³å®¶åº„å¸‚  | 1989-07-18 |<br>+----+------+----------------+------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select id,name from students <span class="hljs-built_in">limit</span> 2 offset 1;<br>+----+------+<br>| id | name |<br>+----+------+<br>|  2 | ææ˜ |<br>| 10 | å¼ ç£Š |<br>+----+------+<br>2 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select * from students <span class="hljs-built_in">where</span> id&gt;=10;<br>+----+------+----------------+------------+<br>| id | name | adress         | birthday   |<br>+----+------+----------------+------------+<br>| 10 | å¼ ç£Š | åŒ—äº¬å¸‚æµ·æ·€åŒº   | 1995-04-12 |<br>| 11 | å­™é›¨ | æ²³åŒ—çœçŸ³å®¶åº„å¸‚ | 1989-07-18 |<br>+----+------+----------------+------------+<br>2 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select * from students <span class="hljs-built_in">where</span> id&gt;=10 <span class="hljs-built_in">limit</span> 1 offset 1;<br>+----+------+----------------+------------+<br>| id | name | adress         | birthday   |<br>+----+------+----------------+------------+<br>| 11 | å­™é›¨ | æ²³åŒ—çœçŸ³å®¶åº„å¸‚ | 1989-07-18 |<br>+----+------+----------------+------------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select * from students <span class="hljs-built_in">where</span> name=<span class="hljs-string">&quot;ææ˜&quot;</span>;<br>+----+------+--------+------------+<br>| id | name | adress | birthday   |<br>+----+------+--------+------------+<br>|  2 | ææ˜ | NULL   | 1993-12-16 |<br>+----+------+--------+------------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><h3 id="9-ä¿®æ”¹æ•°æ®"><a href="#9-ä¿®æ”¹æ•°æ®" class="headerlink" title="9. ä¿®æ”¹æ•°æ®"></a>9. ä¿®æ”¹æ•°æ®</h3><p>å¦‚æœæˆ‘ä»¬éœ€è¦ä¿®æ”¹æˆ–æ›´æ–° MySQL ä¸­çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ SQL update å‘½ä»¤æ¥æ“ä½œã€‚</p><p><strong>è¯­æ³•</strong><br>ä»¥ä¸‹æ˜¯ update å‘½ä»¤ä¿®æ”¹ MySQL æ•°æ®è¡¨æ•°æ®çš„é€šç”¨ SQL è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">update table_name <span class="hljs-built_in">set</span> field1=new-value1, field2=new-value2 [<span class="hljs-built_in">where</span> clause]<br></code></pre></div></td></tr></table></figure><p>å½“æˆ‘ä»¬éœ€è¦å°†å­—æ®µä¸­çš„ç‰¹å®šå­—ç¬¦ä¸²æ‰¹é‡ä¿®æ”¹ä¸ºå…¶ä»–å­—ç¬¦ä¸²æ—¶ï¼Œå¯å·²ä½¿ç”¨ä»¥ä¸‹æ“ä½œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">update table_name <span class="hljs-built_in">set</span> field=replace(field, <span class="hljs-string">&#x27;old-string&#x27;</span>, <span class="hljs-string">&#x27;new-string&#x27;</span>) [<span class="hljs-built_in">where</span> clause]<br></code></pre></div></td></tr></table></figure><ul><li>ä½ å¯ä»¥åŒæ—¶æ›´æ–°ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µã€‚</li><li>ä½ å¯ä»¥åœ¨ WHERE å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶ã€‚</li><li>ä½ å¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬è¡¨ä¸­åŒæ—¶æ›´æ–°æ•°æ®ã€‚<br>å½“ä½ éœ€è¦æ›´æ–°æ•°æ®è¡¨ä¸­æŒ‡å®šè¡Œçš„æ•°æ®æ—¶ where å­å¥æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li></ul><p><strong>å®ä¾‹</strong><br>ä»¥ä¸‹æˆ‘ä»¬å°†åœ¨ SQL update å‘½ä»¤ä½¿ç”¨ where å­å¥æ¥æ›´æ–° students è¡¨ä¸­æŒ‡å®šçš„æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; update students <span class="hljs-built_in">set</span> adress=<span class="hljs-string">&quot;åŒ—äº¬å¸‚æ˜Œå¹³åŒº&quot;</span> <span class="hljs-built_in">where</span> adress is null;<br>Query OK, 2 rows affected (0.01 sec)<br>Rows matched: 2  Changed: 2  Warnings: 0<br><br>mysql&gt; select * from students;<br>+----+------+----------------+------------+<br>| id | name | adress         | birthday   |<br>+----+------+----------------+------------+<br>|  1 | ä¸½ä¸½ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº   | 1996-05-06 |<br>|  2 | ææ˜ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº   | 1993-12-16 |<br>| 10 | å¼ ç£Š | åŒ—äº¬å¸‚æµ·æ·€åŒº   | 1995-04-12 |<br>| 11 | å­™é›¨ | æ²³åŒ—çœçŸ³å®¶åº„å¸‚ | 1989-07-18 |<br>+----+------+----------------+------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; update students <span class="hljs-built_in">set</span> adress=replace(adress, <span class="hljs-string">&quot;æ²³åŒ—çœçŸ³å®¶åº„&quot;</span>,<span class="hljs-string">&quot;æ¹–åŒ—çœæ­¦æ±‰&quot;</span>) wh<br>ere id=11;<br>Query OK, 1 row affected (0.01 sec)<br>Rows matched: 1  Changed: 1  Warnings: 0<br><br>mysql&gt; select * from students;<br>+----+------+--------------+------------+<br>| id | name | adress       | birthday   |<br>+----+------+--------------+------------+<br>|  1 | ä¸½ä¸½ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1996-05-06 |<br>|  2 | ææ˜ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1993-12-16 |<br>| 10 | å¼ ç£Š | åŒ—äº¬å¸‚æµ·æ·€åŒº | 1995-04-12 |<br>| 11 | å­™é›¨ | æ¹–åŒ—çœæ­¦æ±‰å¸‚ | 1989-07-18 |<br>+----+------+--------------+------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; update students <span class="hljs-built_in">set</span> id=id-7 <span class="hljs-built_in">where</span> id=10;<br>Query OK, 1 row affected (0.01 sec)<br>Rows matched: 1  Changed: 1  Warnings: 0<br><br>mysql&gt; select * from students;<br>+----+------+--------------+------------+<br>| id | name | adress       | birthday   |<br>+----+------+--------------+------------+<br>|  1 | ä¸½ä¸½ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1996-05-06 |<br>|  2 | ææ˜ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1993-12-16 |<br>|  3 | å¼ ç£Š | åŒ—äº¬å¸‚æµ·æ·€åŒº | 1995-04-12 |<br>| 11 | å­™é›¨ | æ¹–åŒ—çœæ­¦æ±‰å¸‚ | 1989-07-18 |<br>+----+------+--------------+------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><h3 id="10-åˆ é™¤æ•°æ®"><a href="#10-åˆ é™¤æ•°æ®" class="headerlink" title="10. åˆ é™¤æ•°æ®"></a>10. åˆ é™¤æ•°æ®</h3><p>ä½ å¯ä»¥ä½¿ç”¨ sql çš„ delete from å‘½ä»¤æ¥åˆ é™¤ mysql æ•°æ®è¡¨ä¸­çš„è®°å½•ã€‚</p><p><strong>è¯­æ³•</strong><br>ä»¥ä¸‹æ˜¯ sql delete è¯­å¥ä» mysql æ•°æ®è¡¨ä¸­åˆ é™¤æ•°æ®çš„é€šç”¨è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">delete from table_name [<span class="hljs-built_in">where</span> clause]<br></code></pre></div></td></tr></table></figure><ul><li>å¦‚æœæ²¡æœ‰æŒ‡å®š where å­å¥ï¼Œmysql è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å°†è¢«åˆ é™¤ã€‚</li><li>ä½ å¯ä»¥åœ¨ where å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶</li><li>æ‚¨å¯ä»¥åœ¨å•ä¸ªè¡¨ä¸­ä¸€æ¬¡æ€§åˆ é™¤è®°å½•ã€‚<br>å½“ä½ æƒ³åˆ é™¤æ•°æ®è¡¨ä¸­æŒ‡å®šçš„è®°å½•æ—¶ where å­å¥æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li></ul><p><strong>å®ä¾‹</strong><br>è¿™é‡Œæˆ‘ä»¬å°†åœ¨ sql delete å‘½ä»¤ä¸­ä½¿ç”¨ where å­å¥æ¥åˆ é™¤ mysql æ•°æ®è¡¨ students æ‰€é€‰çš„æ•°æ®:</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; delete from students <span class="hljs-built_in">where</span> id=11;<br>Query OK, 1 row affected (0.01 sec)<br><br>mysql&gt; select * from students;<br>+----+------+--------------+------------+<br>| id | name | adress       | birthday   |<br>+----+------+--------------+------------+<br>|  1 | ä¸½ä¸½ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1996-05-06 |<br>|  2 | ææ˜ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1993-12-16 |<br>|  3 | å¼ ç£Š | åŒ—äº¬å¸‚æµ·æ·€åŒº | 1995-04-12 |<br>+----+------+--------------+------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><blockquote><p>deleteï¼Œdropï¼Œtruncate éƒ½æœ‰åˆ é™¤è¡¨çš„ä½œç”¨ï¼ŒåŒºåˆ«åœ¨äºï¼š</p></blockquote><p>1ã€drop table table_name : åˆ é™¤è¡¨å…¨éƒ¨æ•°æ®å’Œè¡¨ç»“æ„ï¼Œç«‹åˆ»é‡Šæ”¾ç£ç›˜ç©ºé—´ï¼Œä¸ç®¡æ˜¯ Innodb å’Œ MyISAM;</p><p>å®ä¾‹ï¼Œåˆ é™¤å­¦ç”Ÿè¡¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">drop table students;<br></code></pre></div></td></tr></table></figure><p>2ã€truncate table table_name : åˆ é™¤è¡¨å…¨éƒ¨æ•°æ®ï¼Œä¿ç•™è¡¨ç»“æ„ï¼Œç«‹åˆ»é‡Šæ”¾ç£ç›˜ç©ºé—´ ï¼Œä¸ç®¡æ˜¯ Innodb å’Œ MyISAM;</p><p>å®ä¾‹ï¼Œåˆ é™¤å­¦ç”Ÿè¡¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">truncate table students;<br></code></pre></div></td></tr></table></figure><p>3ã€delete from table_name : åˆ é™¤è¡¨å…¨éƒ¨æ•°æ®ï¼Œè¡¨ç»“æ„ä¸å˜ï¼Œå¯¹äº MyISAM ä¼šç«‹åˆ»é‡Šæ”¾ç£ç›˜ç©ºé—´ï¼ŒInnoDB ä¸ä¼šé‡Šæ”¾ç£ç›˜ç©ºé—´;</p><p>å®ä¾‹ï¼Œåˆ é™¤å­¦ç”Ÿè¡¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">delete from students;<br></code></pre></div></td></tr></table></figure><p>4ã€delete from table_name where xxx : å¸¦æ¡ä»¶çš„åˆ é™¤ï¼Œè¡¨ç»“æ„ä¸å˜ï¼Œä¸ç®¡æ˜¯ innodb è¿˜æ˜¯ MyISAM éƒ½ä¸ä¼šé‡Šæ”¾ç£ç›˜ç©ºé—´;</p><p>å®ä¾‹ï¼Œåˆ é™¤å­¦ç”Ÿè¡¨ä¸­å§“åä¸º â€œå¼ ä¸‰â€ çš„æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">delete from student <span class="hljs-built_in">where</span> name = <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br></code></pre></div></td></tr></table></figure><p>5ã€delete æ“ä½œä»¥åï¼Œä½¿ç”¨ optimize table table_name ä¼šç«‹åˆ»é‡Šæ”¾ç£ç›˜ç©ºé—´ï¼Œä¸ç®¡æ˜¯ innodb è¿˜æ˜¯ myisam;</p><p>å®ä¾‹ï¼Œåˆ é™¤å­¦ç”Ÿè¡¨ä¸­å§“åä¸º â€œå¼ ä¸‰â€ çš„æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">delete from student <span class="hljs-built_in">where</span> name = <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br></code></pre></div></td></tr></table></figure><p>å®ä¾‹ï¼Œé‡Šæ”¾å­¦ç”Ÿè¡¨çš„è¡¨ç©ºé—´ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">optimize table students;<br></code></pre></div></td></tr></table></figure><p>6ã€delete from è¡¨ä»¥åè™½ç„¶æœªé‡Šæ”¾ç£ç›˜ç©ºé—´ï¼Œä½†æ˜¯ä¸‹æ¬¡æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨è¿™éƒ¨åˆ†ç©ºé—´ã€‚</p><h3 id="11-åŒ…å«æ¡ä»¶"><a href="#11-åŒ…å«æ¡ä»¶" class="headerlink" title="11. åŒ…å«æ¡ä»¶"></a>11. åŒ…å«æ¡ä»¶</h3><p>æˆ‘ä»¬çŸ¥é“åœ¨ mysql ä¸­ä½¿ç”¨ sql select å‘½ä»¤æ¥è¯»å–æ•°æ®ï¼Œ åŒæ—¶æˆ‘ä»¬å¯ä»¥åœ¨ select è¯­å¥ä¸­ä½¿ç”¨ where å­å¥æ¥è·å–æŒ‡å®šçš„è®°å½•ã€‚</p><p>where å­å¥ä¸­å¯ä»¥ä½¿ç”¨ç­‰å· = æ¥è®¾å®šè·å–æ•°æ®çš„æ¡ä»¶ï¼Œå¦‚ â€œadress = â€˜åŒ—äº¬å¸‚æ˜Œå¹³åŒºâ€™â€ã€‚</p><p>ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è·å– adress å­—æ®µå«æœ‰ â€œåŒ—äº¬å¸‚â€ å­—ç¬¦çš„æ‰€æœ‰è®°å½•ï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦åœ¨ where å­å¥ä¸­ä½¿ç”¨ sql like å­å¥ã€‚</p><p><strong>è¯­æ³•</strong><br>ä»¥ä¸‹æ˜¯ sql select è¯­å¥ä½¿ç”¨ like å­å¥ä»æ•°æ®è¡¨ä¸­è¯»å–æ•°æ®çš„é€šç”¨è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">select field1, field2,...fieldn from table_name <span class="hljs-built_in">where</span> field1 like condition1 [and [or]] filed2 = <span class="hljs-string">&#x27;somevalue&#x27;</span><br></code></pre></div></td></tr></table></figure><ul><li>sql like å­å¥ä¸­ä½¿ç”¨ç™¾åˆ†å· %å­—ç¬¦æ¥è¡¨ç¤ºä»»æ„å­—ç¬¦ï¼Œç±»ä¼¼äºunixæˆ–æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æ˜Ÿå· *ã€‚</li><li>å¦‚æœæ²¡æœ‰ä½¿ç”¨ç™¾åˆ†å· %, like å­å¥ä¸ç­‰å· = çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</li><li>like é€šå¸¸ä¸ % ä¸€åŒä½¿ç”¨ï¼Œç±»ä¼¼äºä¸€ä¸ªå…ƒå­—ç¬¦çš„æœç´¢ã€‚</li><li>å¯ä»¥ä½¿ç”¨ and æˆ–è€… or æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ã€‚</li><li>å¯ä»¥åœ¨ deleteã€selectæˆ– update å‘½ä»¤ä¸­ä½¿ç”¨ whereâ€¦like å­å¥æ¥æŒ‡å®šæ¡ä»¶ã€‚</li></ul><p><strong>å®ä¾‹</strong><br>ä»¥ä¸‹æˆ‘ä»¬å°†åœ¨ sql select å‘½ä»¤ä¸­ä½¿ç”¨ whereâ€¦like å­å¥æ¥ä»mysqlæ•°æ®è¡¨ students ä¸­è¯»å–æ•°æ®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select * from students <span class="hljs-built_in">where</span> adress like <span class="hljs-string">&quot;åŒ—äº¬å¸‚%&quot;</span>;<br>+----+------+--------------+------------+<br>| id | name | adress       | birthday   |<br>+----+------+--------------+------------+<br>|  1 | ä¸½ä¸½ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1996-05-06 |<br>|  2 | ææ˜ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1993-12-16 |<br>|  3 | å¼ ç£Š | åŒ—äº¬å¸‚æµ·æ·€åŒº | 1995-04-12 |<br>+----+------+--------------+------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><blockquote><p>åœ¨ where like çš„æ¡ä»¶æŸ¥è¯¢ä¸­ï¼ŒSQL æä¾›äº†å››ç§åŒ¹é…æ–¹å¼ã€‚</p></blockquote><ul><li><code>%</code>ï¼šè¡¨ç¤ºä»»æ„ 0 ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚å¯åŒ¹é…ä»»æ„ç±»å‹å’Œé•¿åº¦çš„å­—ç¬¦ï¼Œæœ‰äº›æƒ…å†µä¸‹è‹¥æ˜¯ä¸­æ–‡ï¼Œè¯·ä½¿ç”¨ä¸¤ä¸ªç™¾åˆ†å·ï¼ˆ%%ï¼‰è¡¨ç¤ºã€‚</li><li><code>_</code>ï¼šè¡¨ç¤ºä»»æ„å•ä¸ªå­—ç¬¦ã€‚åŒ¹é…å•ä¸ªä»»æ„å­—ç¬¦ï¼Œå®ƒå¸¸ç”¨æ¥é™åˆ¶è¡¨è¾¾å¼çš„å­—ç¬¦é•¿åº¦è¯­å¥ã€‚</li><li><code>[]</code>ï¼šè¡¨ç¤ºæ‹¬å·å†…æ‰€åˆ—å­—ç¬¦ä¸­çš„ä¸€ä¸ªï¼ˆç±»ä¼¼æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚æŒ‡å®šä¸€ä¸ªå­—ç¬¦ã€å­—ç¬¦ä¸²æˆ–èŒƒå›´ï¼Œè¦æ±‚æ‰€åŒ¹é…å¯¹è±¡ä¸ºå®ƒä»¬ä¸­çš„ä»»ä¸€ä¸ªã€‚</li><li><code>[^]</code>ï¼šè¡¨ç¤ºä¸åœ¨æ‹¬å·æ‰€åˆ—ä¹‹å†…çš„å•ä¸ªå­—ç¬¦ã€‚å…¶å–å€¼å’Œ [] ç›¸åŒï¼Œä½†å®ƒè¦æ±‚æ‰€åŒ¹é…å¯¹è±¡ä¸ºæŒ‡å®šå­—ç¬¦ä»¥å¤–çš„ä»»ä¸€ä¸ªå­—ç¬¦ã€‚</li><li>æŸ¥è¯¢å†…å®¹åŒ…å«é€šé…ç¬¦æ—¶,ç”±äºé€šé…ç¬¦çš„ç¼˜æ•…ï¼Œå¯¼è‡´æˆ‘ä»¬æŸ¥è¯¢ç‰¹æ®Šå­—ç¬¦ â€œ%â€ã€â€œ_â€ã€â€œ[â€ çš„è¯­å¥æ— æ³•æ­£å¸¸å®ç°ï¼Œè€ŒæŠŠç‰¹æ®Šå­—ç¬¦ç”¨ â€œ[ ]â€ æ‹¬èµ·ä¾¿å¯æ­£å¸¸æŸ¥è¯¢ã€‚</li></ul><blockquote><p>like åŒ¹é…/æ¨¡ç³ŠåŒ¹é…ï¼Œä¼šä¸ % å’Œ _ ç»“åˆä½¿ç”¨ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-string">&#x27;%a&#x27;</span>     //ä»¥aç»“å°¾çš„æ•°æ®<br><span class="hljs-string">&#x27;a%&#x27;</span>     //ä»¥aå¼€å¤´çš„æ•°æ®<br><span class="hljs-string">&#x27;%a%&#x27;</span>    //å«æœ‰açš„æ•°æ®<br><span class="hljs-string">&#x27;_a_&#x27;</span>    //ä¸‰ä½ä¸”ä¸­é—´å­—æ¯æ˜¯açš„<br><span class="hljs-string">&#x27;_a&#x27;</span>     //ä¸¤ä½ä¸”ç»“å°¾å­—æ¯æ˜¯açš„<br><span class="hljs-string">&#x27;a_&#x27;</span>     //ä¸¤ä½ä¸”å¼€å¤´å­—æ¯æ˜¯açš„<br></code></pre></div></td></tr></table></figure><h3 id="12-å…³è”æŸ¥è¯¢"><a href="#12-å…³è”æŸ¥è¯¢" class="headerlink" title="12. å…³è”æŸ¥è¯¢"></a>12. å…³è”æŸ¥è¯¢</h3><p>MySQL UNION æ“ä½œç¬¦ç”¨äºè¿æ¥ä¸¤ä¸ªä»¥ä¸Šçš„ SELECT è¯­å¥çš„ç»“æœç»„åˆåˆ°ä¸€ä¸ªç»“æœé›†åˆä¸­ã€‚å¤šä¸ª SELECT è¯­å¥ä¼šåˆ é™¤é‡å¤çš„æ•°æ®ã€‚</p><p><strong>è¯­æ³•</strong><br>mysql union æ“ä½œç¬¦è¯­æ³•æ ¼å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">select expression1, expression2, ... expression_n<br>from tables<br>[<span class="hljs-built_in">where</span> conditions]<br>union [all | distinct]<br>select expression1, expression2, ... expression_n<br>from tables<br>[<span class="hljs-built_in">where</span> conditions];<br></code></pre></div></td></tr></table></figure><p><strong>å‚æ•°</strong></p><ul><li><p>expression1, expression2, â€¦ expression_n: è¦æ£€ç´¢çš„åˆ—ã€‚</p></li><li><p>tables: è¦æ£€ç´¢çš„æ•°æ®è¡¨ã€‚</p></li><li><p>where conditions: å¯é€‰ï¼Œ æ£€ç´¢æ¡ä»¶ã€‚</p></li><li><p>distinct: å¯é€‰ï¼Œåˆ é™¤ç»“æœé›†ä¸­é‡å¤çš„æ•°æ®ã€‚é»˜è®¤æƒ…å†µä¸‹ union æ“ä½œç¬¦å·²ç»åˆ é™¤äº†é‡å¤æ•°æ®ï¼Œæ‰€ä»¥ distinct ä¿®é¥°ç¬¦å¯¹ç»“æœæ²¡å•¥å½±å“ã€‚</p></li><li><p>all: å¯é€‰ï¼Œè¿”å›æ‰€æœ‰ç»“æœé›†ï¼ŒåŒ…å«é‡å¤æ•°æ®ã€‚</p></li></ul><p><strong>å®ä¾‹</strong><br>ä¸‹é¢çš„ SQL è¯­å¥ä» â€œstudentsâ€ å’Œ â€œteachersâ€ è¡¨ä¸­é€‰å–æ‰€æœ‰ä¸åŒçš„adressï¼ˆåªæœ‰ä¸åŒçš„å€¼ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select * from students;<br>+----+------+--------------+------------+<br>| id | name | adress       | birthday   |<br>+----+------+--------------+------------+<br>|  1 | ä¸½ä¸½ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1996-05-06 |<br>|  2 | ææ˜ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1993-12-16 |<br>|  3 | å¼ ç£Š | åŒ—äº¬å¸‚æµ·æ·€åŒº | 1995-04-12 |<br>+----+------+--------------+------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select * from teachers;<br>+----+--------+--------------+----------+<br>| id | name   | adress       | birthday |<br>+----+--------+--------------+----------+<br>|  1 | åˆ˜è€å¸ˆ | åŒ—äº¬å¸‚æµ·æ·€åŒº | NULL     |<br>|  2 | å­™è€å¸ˆ | åŒ—äº¬å¸‚æœé˜³åŒº | NULL     |<br>|  3 | å¸¸è€å¸ˆ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | NULL     |<br>+----+--------+--------------+----------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select adress from students union select adress from teachers ;<br>+--------------+<br>| adress       |<br>+--------------+<br>| åŒ—äº¬å¸‚æ˜Œå¹³åŒº |<br>| åŒ—äº¬å¸‚æµ·æ·€åŒº |<br>| åŒ—äº¬å¸‚æœé˜³åŒº |<br>+--------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select name from students <span class="hljs-built_in">where</span> adress like <span class="hljs-string">&quot;%æ˜Œå¹³åŒº&quot;</span> union select name from teachers <span class="hljs-built_in">where</span> adress like <span class="hljs-string">&quot;%æ˜Œå¹³åŒº&quot;</span> ;<br>+--------+<br>| name   |<br>+--------+<br>| ä¸½ä¸½   |<br>| ææ˜   |<br>| å¸¸è€å¸ˆ |<br>+--------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><blockquote><p>UNION è¯­å¥ï¼šç”¨äºå°†ä¸åŒè¡¨ä¸­ç›¸åŒåˆ—ä¸­æŸ¥è¯¢çš„æ•°æ®å±•ç¤ºå‡ºæ¥ï¼›ï¼ˆä¸åŒ…æ‹¬é‡å¤æ•°æ®ï¼‰<br>UNION ALL è¯­å¥ï¼šç”¨äºå°†ä¸åŒè¡¨ä¸­ç›¸åŒåˆ—ä¸­æŸ¥è¯¢çš„æ•°æ®å±•ç¤ºå‡ºæ¥ï¼›ï¼ˆåŒ…æ‹¬é‡å¤æ•°æ®ï¼‰</p></blockquote><h3 id="13-æ’åº"><a href="#13-æ’åº" class="headerlink" title="13. æ’åº"></a>13. æ’åº</h3><p>æˆ‘ä»¬çŸ¥é“ä» mysql è¡¨ä¸­ä½¿ç”¨ sql select è¯­å¥æ¥è¯»å–æ•°æ®ã€‚</p><p>å¦‚æœæˆ‘ä»¬éœ€è¦å¯¹è¯»å–çš„æ•°æ®è¿›è¡Œæ’åºï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ mysql çš„ order by å­å¥æ¥è®¾å®šä½ æƒ³æŒ‰å“ªä¸ªå­—æ®µå“ªç§æ–¹å¼æ¥è¿›è¡Œæ’åºï¼Œå†è¿”å›æœç´¢ç»“æœã€‚</p><p><strong>è¯­æ³•</strong><br>ä»¥ä¸‹æ˜¯ sql select è¯­å¥ä½¿ç”¨ order by å­å¥å°†æŸ¥è¯¢æ•°æ®æ’åºåå†è¿”å›æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">select field1, field2,...fieldn table_name1, table_name2... order by field1 [asc [desc][é»˜è®¤ asc]], [field2...] [asc [desc][é»˜è®¤ asc]]<br></code></pre></div></td></tr></table></figure><ul><li>ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•å­—æ®µæ¥ä½œä¸ºæ’åºçš„æ¡ä»¶ï¼Œä»è€Œè¿”å›æ’åºåçš„æŸ¥è¯¢ç»“æœã€‚</li><li>ä½ å¯ä»¥è®¾å®šå¤šä¸ªå­—æ®µæ¥æ’åºã€‚</li><li>ä½ å¯ä»¥ä½¿ç”¨ asc æˆ– desc å…³é”®å­—æ¥è®¾ç½®æŸ¥è¯¢ç»“æœæ˜¯æŒ‰å‡åºæˆ–é™åºæ’åˆ—ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯æŒ‰å‡åºæ’åˆ—ã€‚</li><li>ä½ å¯ä»¥æ·»åŠ  whereâ€¦like å­å¥æ¥è®¾ç½®æ¡ä»¶ã€‚</li></ul><p><strong>å®ä¾‹</strong><br>å°è¯•ä»¥ä¸‹å®ä¾‹ï¼Œç»“æœå°†æŒ‰å‡åºåŠé™åºæ’åˆ—ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select * from students <span class="hljs-built_in">where</span> adress like <span class="hljs-string">&quot;åŒ—äº¬å¸‚%&quot;</span> order by birthday;<br>+----+------+--------------+------------+<br>| id | name | adress       | birthday   |<br>+----+------+--------------+------------+<br>|  2 | ææ˜ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1993-12-16 |<br>|  3 | å¼ ç£Š | åŒ—äº¬å¸‚æµ·æ·€åŒº | 1995-04-12 |<br>|  1 | ä¸½ä¸½ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1996-05-06 |<br>+----+------+--------------+------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select * from students <span class="hljs-built_in">where</span> adress like <span class="hljs-string">&quot;åŒ—äº¬å¸‚%&quot;</span> order by birthday desc;<br>+----+------+--------------+------------+<br>| id | name | adress       | birthday   |<br>+----+------+--------------+------------+<br>|  1 | ä¸½ä¸½ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1996-05-06 |<br>|  3 | å¼ ç£Š | åŒ—äº¬å¸‚æµ·æ·€åŒº | 1995-04-12 |<br>|  2 | ææ˜ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1993-12-16 |<br>+----+------+--------------+------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select * from students <span class="hljs-built_in">where</span> adress like <span class="hljs-string">&quot;åŒ—äº¬å¸‚%&quot;</span> order by birthday asc;<br>+----+------+--------------+------------+<br>| id | name | adress       | birthday   |<br>+----+------+--------------+------------+<br>|  2 | ææ˜ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1993-12-16 |<br>|  3 | å¼ ç£Š | åŒ—äº¬å¸‚æµ·æ·€åŒº | 1995-04-12 |<br>|  1 | ä¸½ä¸½ | åŒ—äº¬å¸‚æ˜Œå¹³åŒº | 1996-05-06 |<br>+----+------+--------------+------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><h3 id="14-åˆ†ç»„"><a href="#14-åˆ†ç»„" class="headerlink" title="14. åˆ†ç»„"></a>14. åˆ†ç»„</h3><p>group by è¯­å¥æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¯¹ç»“æœé›†è¿›è¡Œåˆ†ç»„ã€‚<br>åœ¨åˆ†ç»„çš„åˆ—ä¸Šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ count, sum, avgç­‰å‡½æ•°ã€‚</p><p><strong>è¯­æ³•</strong><br>ä»¥ä¸‹æ˜¯gruop byè¯­å¥çš„è¯­æ³•ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">select column_name, <span class="hljs-keyword">function</span>(column_name) from table_name <span class="hljs-built_in">where</span> column_name operator value group by column_name;<br></code></pre></div></td></tr></table></figure><p><strong>å®ä¾‹</strong><br>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ group by è¯­å¥ å°†æ•°æ®è¡¨æŒ‰åå­—è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ç»Ÿè®¡æ¯ä¸ªå•†å“æœ‰å¤šå°‘æ¡è®°å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select * from goods;<br>+----+--------+------+<br>| id | name   | nums |<br>+----+--------+------+<br>|  1 | è¥¿ç“œ   |   50 |<br>|  2 | ç”œç“œ   |   15 |<br>|  3 | ç”œç“œ   |   15 |<br>|  4 | è‹¹æœ   |   25 |<br>|  5 | è¥¿ç“œ   |   25 |<br>|  6 | è¥¿ç“œ   |   63 |<br>+----+--------+------+<br>6 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select name, count(name) from goods group by name;<br>+--------+-------------+<br>| name   | count(name) |<br>+--------+-------------+<br>| ç”œç“œ   |           2 |<br>| è‹¹æœ   |           1 |<br>| è¥¿ç“œ   |           3 |<br>+--------+-------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>with rollup å¯ä»¥å®ç°åœ¨åˆ†ç»„ç»Ÿè®¡æ•°æ®åŸºç¡€ä¸Šå†è¿›è¡Œç›¸åŒçš„ç»Ÿè®¡ï¼ˆsum,avg,countâ€¦ï¼‰ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬å°†ä»¥ä¸Šçš„æ•°æ®è¡¨æŒ‰å•†å“åç§°è¿›è¡Œåˆ†ç»„ï¼Œå†ç»Ÿè®¡æ¯ç±»å•†å“çš„æ€»æ•°é‡ï¼Œæˆ–è€…æ±‚å…¶å‡å€¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select name, sum(nums) as count_num from goods group by name;<br>+--------+-----------+<br>| name   | count_num |<br>+--------+-----------+<br>| ç”œç“œ   |        30 |<br>| è‹¹æœ   |        25 |<br>| è¥¿ç“œ   |       138 |<br>+--------+-----------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select name, avg(nums) as avg_num from goods group by name with rollup;<br>+--------+---------+<br>| name   | avg_num |<br>+--------+---------+<br>| ç”œç“œ   | 15.0000 |<br>| è‹¹æœ   | 25.0000 |<br>| è¥¿ç“œ   | 46.0000 |<br>| NULL   | 32.1667 |<br>+--------+---------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ coalesce æ¥è®¾ç½®ä¸€ä¸ªå¯ä»¥å–ä»£ NUll çš„åç§°ï¼Œcoalesce è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">select coalesce(a,b,c);<br></code></pre></div></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼šå¦‚æœa==null,åˆ™é€‰æ‹©bï¼›å¦‚æœb==null,åˆ™é€‰æ‹©cï¼›å¦‚æœa!=null,åˆ™é€‰æ‹©aï¼›å¦‚æœa b c éƒ½ä¸ºnull ï¼Œåˆ™è¿”å›ä¸ºnullï¼ˆæ²¡æ„ä¹‰ï¼‰ã€‚</p><p>ä»¥ä¸‹å®ä¾‹ä¸­å¦‚æœåå­—ä¸ºç©ºæˆ‘ä»¬ä½¿ç”¨æ€»æ•°ä»£æ›¿ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select coalesce(name, <span class="hljs-string">&#x27;æ€»è®¡&#x27;</span>) as åç§°, sum(nums) as æ•°é‡ from goods group by name with rollup;<br>+--------+--------+<br>| åç§°   | æ•°é‡   |<br>+--------+--------+<br>| ç”œç“œ   |     30 |<br>| è‹¹æœ   |     25 |<br>| è¥¿ç“œ   |    138 |<br>| æ€»è®¡   |    193 |<br>+--------+--------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><h3 id="15-è¿æ¥"><a href="#15-è¿æ¥" class="headerlink" title="15. è¿æ¥"></a>15. è¿æ¥</h3><p>åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šäº†å¦‚ä½•åœ¨ä¸€å¼ è¡¨ä¸­è¯»å–æ•°æ®ï¼Œè¿™æ˜¯ç›¸å¯¹ç®€å•çš„ï¼Œä½†æ˜¯åœ¨çœŸæ­£çš„åº”ç”¨ä¸­ç»å¸¸éœ€è¦ä»å¤šä¸ªæ•°æ®è¡¨ä¸­è¯»å–æ•°æ®ã€‚</p><p>æœ¬ç« èŠ‚æˆ‘ä»¬å°†å‘å¤§å®¶ä»‹ç»å¦‚ä½•ä½¿ç”¨ mysql çš„ join åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚</p><p>ä½ å¯ä»¥åœ¨ select, update å’Œ delete è¯­å¥ä¸­ä½¿ç”¨ mysql çš„ join æ¥è”åˆå¤šè¡¨æŸ¥è¯¢ã€‚</p><p>join æŒ‰ç…§åŠŸèƒ½å¤§è‡´åˆ†ä¸ºå¦‚ä¸‹ä¸‰ç±»ï¼š</p><ul><li>inner joinï¼ˆå†…è¿æ¥,æˆ–ç­‰å€¼è¿æ¥ï¼‰ï¼šè·å–ä¸¤ä¸ªè¡¨ä¸­å­—æ®µåŒ¹é…å…³ç³»çš„è®°å½•ã€‚</li><li>left joinï¼ˆå·¦è¿æ¥ï¼‰ï¼šè·å–å·¦è¡¨æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å³è¡¨æ²¡æœ‰å¯¹åº”åŒ¹é…çš„è®°å½•ã€‚</li><li>right joinï¼ˆå³è¿æ¥ï¼‰ï¼š ä¸ left join ç›¸åï¼Œç”¨äºè·å–å³è¡¨æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å·¦è¡¨æ²¡æœ‰å¯¹åº”åŒ¹é…çš„è®°å½•ã€‚</li></ul><p><strong>å®ä¾‹</strong><br>é¦–å…ˆåˆ›å»ºè¡¨ï¼Œå¹¶æ·»åŠ æµ‹è¯•æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create table web_counts(id int unsigned auto_increment primary key, web_name varchar(20) not null, nums int unsigned default 0) default charset=utf8;<br>Query OK, 0 rows affected (0.10 sec)<br><br>mysql&gt; create table web_info(id int unsigned auto_increment primary key, web_name varchar(20) not null, web_info varchar(50), create_time date not null) default charset=utf8;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; desc web_info;<br>+-------------+------------------+------+-----+---------+----------------+<br>| Field       | Type             | Null | Key | Default | Extra          |<br>+-------------+------------------+------+-----+---------+----------------+<br>| id          | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| web_name    | varchar(20)      | NO   |     | NULL    |                |<br>| web_info    | varchar(50)      | YES  |     | NULL    |                |<br>| create_time | date             | NO   |     | NULL    |                |<br>+-------------+------------------+------+-----+---------+----------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; desc web_counts;<br>+----------+------------------+------+-----+---------+----------------+<br>| Field    | Type             | Null | Key | Default | Extra          |<br>+----------+------------------+------+-----+---------+----------------+<br>| id       | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| web_name | varchar(20)      | NO   |     | NULL    |                |<br>| nums     | int(10) unsigned | YES  |     | 0       |                |<br>+----------+------------------+------+-----+---------+----------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; insert into web_counts values(0, <span class="hljs-string">&quot; æ·˜å®&quot;</span>,1000);<br>Query OK, 1 row affected (0.03 sec)<br><br>mysql&gt; insert into web_counts values(0, <span class="hljs-string">&quot;ç™¾åº¦&quot;</span>, 3000);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; insert into web_counts values(0, <span class="hljs-string">&quot;è…¾è®¯&quot;</span>, 2000);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; insert into web_counts values(0, <span class="hljs-string">&quot;ç½‘æ˜“&quot;</span>, 900);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; select * from web_counts;<br>+----+----------+------+<br>| id | web_name | nums |<br>+----+----------+------+<br>|  1 | æ·˜å®     | 1000 |<br>|  2 | ç™¾åº¦     | 3000 |<br>|  3 | è…¾è®¯     | 2000 |<br>|  4 | ç½‘æ˜“     |  900 |<br>+----+----------+------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; insert into web_info values(0, <span class="hljs-string">&quot;ç™¾åº¦&quot;</span>, <span class="hljs-string">&quot;æœç´¢ç½‘ç«™&quot;</span>,<span class="hljs-string">&quot;1989-9-01&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; insert into web_info values(0, <span class="hljs-string">&quot;è…¾è®¯&quot;</span>, <span class="hljs-string">&quot;ç¤¾äº¤ç½‘ç«™&quot;</span>,<span class="hljs-string">&quot;1991-02-05&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; insert into web_info values(0, <span class="hljs-string">&quot;ç½‘æ˜“&quot;</span>, <span class="hljs-string">&quot;é—¨æˆ·ç½‘ç«™&quot;</span>,<span class="hljs-string">&quot;1990-08-09&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; insert into web_info values(0, <span class="hljs-string">&quot;æ–°æµª&quot;</span>, <span class="hljs-string">&quot;ç¤¾äº¤ç½‘ç«™&quot;</span>,<span class="hljs-string">&quot;1993-05-12&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; select * from web_info;<br>+----+----------+--------------+-------------+<br>| id | web_name | web_info     | create_time |<br>+----+----------+--------------+-------------+<br>|  1 | ç™¾åº¦     | æœç´¢ç½‘ç«™     | 1989-09-01  |<br>|  2 | è…¾è®¯     | ç¤¾äº¤ç½‘ç«™     | 1991-02-05  |<br>|  3 | ç½‘æ˜“     | é—¨æˆ·ç½‘ç«™     | 1990-08-09  |<br>|  4 | æ–°æµª     | ç¤¾äº¤ç½‘ç«™     | 1993-05-12  |<br>+----+----------+--------------+-------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.01 sec)<br><br></code></pre></div></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä½¿ç”¨mysqlçš„inner join(ä¹Ÿå¯ä»¥çœç•¥ inner ä½¿ç”¨ joinï¼Œæ•ˆæœä¸€æ ·)æ¥è¿æ¥ä»¥ä¸Šä¸¤å¼ è¡¨æ¥è¯»å–web_countsè¡¨ä¸­æ‰€æœ‰web_nameå­—æ®µåœ¨web_infoè¡¨å¯¹åº”çš„å­—æ®µå€¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select b.id, a.web_name, a.nums,b.web_info, b.create_time from web_counts a inner join web_info b on a.web_name=b.web_name;<br>+----+----------+------+--------------+-------------+<br>| id | web_name | nums | web_info     | create_time |<br>+----+----------+------+--------------+-------------+<br>|  1 | ç™¾åº¦     | 3000 | æœç´¢ç½‘ç«™     | 1989-09-01  |<br>|  2 | è…¾è®¯     | 2000 | ç¤¾äº¤ç½‘ç«™     | 1991-02-05  |<br>|  3 | ç½‘æ˜“     |  900 | é—¨æˆ·ç½‘ç«™     | 1990-08-09  |<br>+----+----------+------+--------------+-------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>ä»¥ä¸Š SQL è¯­å¥ç­‰ä»·äºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select b.id, a.web_name, a.nums,b.web_info, b.create_time from web_counts a, web_info b <span class="hljs-built_in">where</span> a.web_name=b.web_name;<br>+----+----------+------+--------------+-------------+<br>| id | web_name | nums | web_info     | create_time |<br>+----+----------+------+--------------+-------------+<br>|  1 | ç™¾åº¦     | 3000 | æœç´¢ç½‘ç«™     | 1989-09-01  |<br>|  2 | è…¾è®¯     | 2000 | ç¤¾äº¤ç½‘ç«™     | 1991-02-05  |<br>|  3 | ç½‘æ˜“     |  900 | é—¨æˆ·ç½‘ç«™     | 1990-08-09  |<br>+----+----------+------+--------------+-------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>mysql left join ä¸ join æœ‰æ‰€ä¸åŒã€‚ mysql left join ä¼šè¯»å–å·¦è¾¹æ•°æ®è¡¨çš„å…¨éƒ¨æ•°æ®ï¼Œå³ä¾¿å³è¾¹è¡¨æ— å¯¹åº”æ•°æ®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select a.id, a.web_name, a.nums,b.web_info, b.create_time from web_counts a left join web_info b on a.web_name=b.web_name order by a.id;<br>+----+----------+------+--------------+-------------+<br>| id | web_name | nums | web_info     | create_time |<br>+----+----------+------+--------------+-------------+<br>|  1 | æ·˜å®     | 1000 | NULL         | NULL        |<br>|  2 | ç™¾åº¦     | 3000 | æœç´¢ç½‘ç«™     | 1989-09-01  |<br>|  3 | è…¾è®¯     | 2000 | ç¤¾äº¤ç½‘ç«™     | 1991-02-05  |<br>|  4 | ç½‘æ˜“     |  900 | é—¨æˆ·ç½‘ç«™     | 1990-08-09  |<br>+----+----------+------+--------------+-------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>mysql right join ä¼šè¯»å–å³è¾¹æ•°æ®è¡¨çš„å…¨éƒ¨æ•°æ®ï¼Œå³ä¾¿å·¦è¾¹è¾¹è¡¨æ— å¯¹åº”æ•°æ®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select b.id, b.web_name, a.nums,b.web_info, b.create_time from web_counts a right join web_info b on a.web_name=b.web_name order by b.id;<br>+----+----------+------+--------------+-------------+<br>| id | web_name | nums | web_info     | create_time |<br>+----+----------+------+--------------+-------------+<br>|  1 | ç™¾åº¦     | 3000 | æœç´¢ç½‘ç«™     | 1989-09-01  |<br>|  2 | è…¾è®¯     | 2000 | ç¤¾äº¤ç½‘ç«™     | 1991-02-05  |<br>|  3 | ç½‘æ˜“     |  900 | é—¨æˆ·ç½‘ç«™     | 1990-08-09  |<br>|  4 | æ–°æµª     | NULL | ç¤¾äº¤ç½‘ç«™     | 1993-05-12  |<br>+----+----------+------+--------------+-------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.01 sec)<br><br></code></pre></div></td></tr></table></figure><h3 id="16-æ­£åˆ™è¡¨è¾¾å¼"><a href="#16-æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="16. æ­£åˆ™è¡¨è¾¾å¼"></a>16. æ­£åˆ™è¡¨è¾¾å¼</h3><p>mysql æ­£åˆ™è¡¨è¾¾å¼<br>åœ¨å‰é¢çš„ç« èŠ‚æˆ‘ä»¬å·²ç»äº†è§£åˆ°mysqlå¯ä»¥é€šè¿‡ <code>like ...%</code> æ¥è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ã€‚</p><p>mysql åŒæ ·ä¹Ÿæ”¯æŒå…¶ä»–æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ï¼Œ mysqlä¸­ä½¿ç”¨ regexp æ“ä½œç¬¦æ¥è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚</p><p>ä¸‹è¡¨ä¸­çš„æ­£åˆ™æ¨¡å¼å¯åº”ç”¨äº <code>regexp</code> æ“ä½œç¬¦ä¸­ã€‚</p><table><thead><tr><th align="center">æ¨¡å¼</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="center"><code>^</code></td><td align="left">åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ã€‚å¦‚æœè®¾ç½®äº† regexp å¯¹è±¡çš„ multiline å±æ€§ï¼Œ^ ä¹ŸåŒ¹é… â€˜\nâ€™ æˆ– â€˜\râ€™ ä¹‹åçš„ä½ç½®ã€‚</td></tr><tr><td align="center"><code>$</code></td><td align="left">åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ã€‚å¦‚æœè®¾ç½®äº†regexp å¯¹è±¡çš„ multiline å±æ€§ï¼Œ$ ä¹ŸåŒ¹é… â€˜\nâ€™ æˆ– â€˜\râ€™ ä¹‹å‰çš„ä½ç½®ã€‚</td></tr><tr><td align="center"><code>.</code></td><td align="left">åŒ¹é…é™¤ â€œ\nâ€ ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚è¦åŒ¹é…åŒ…æ‹¬ â€˜\nâ€™ åœ¨å†…çš„ä»»ä½•å­—ç¬¦ï¼Œè¯·ä½¿ç”¨è±¡ â€˜[.\n]â€™ çš„æ¨¡å¼ã€‚</td></tr><tr><td align="center"><code>[...]</code></td><td align="left">å­—ç¬¦é›†åˆã€‚åŒ¹é…æ‰€åŒ…å«çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ â€˜[abc]â€™ å¯ä»¥åŒ¹é… â€œplainâ€ ä¸­çš„ â€˜aâ€™ã€‚</td></tr><tr><td align="center"><code>[^...]</code></td><td align="left">è´Ÿå€¼å­—ç¬¦é›†åˆã€‚åŒ¹é…æœªåŒ…å«çš„ä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ â€˜[^abc]â€™ å¯ä»¥åŒ¹é… â€œplainâ€ ä¸­çš„â€™pâ€™ã€‚</td></tr><tr><td align="center">`p1</td><td align="left">p2`</td></tr><tr><td align="center"><code>*</code></td><td align="left">åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚ä¾‹å¦‚ï¼Œzo* èƒ½åŒ¹é… â€œzâ€ ä»¥åŠ â€œzooâ€ã€‚* ç­‰ä»·äº{0,}ã€‚</td></tr><tr><td align="center"><code>+</code></td><td align="left">åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™zo+â€™ èƒ½åŒ¹é… â€œzoâ€ ä»¥åŠ â€œzooâ€ï¼Œä½†ä¸èƒ½åŒ¹é… â€œzâ€ã€‚+ ç­‰ä»·äº {1,}ã€‚</td></tr><tr><td align="center"><code>&#123;n&#125;</code></td><td align="left">n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚åŒ¹é…ç¡®å®šçš„ n æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™o{2}â€™ ä¸èƒ½åŒ¹é… â€œbobâ€ ä¸­çš„ â€˜oâ€™ï¼Œä½†æ˜¯èƒ½åŒ¹é… â€œfoodâ€ ä¸­çš„ä¸¤ä¸ª oã€‚</td></tr><tr><td align="center"><code>&#123;n,m&#125;</code></td><td align="left">m å’Œ n å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä¸­n &lt;= mã€‚æœ€å°‘åŒ¹é… n æ¬¡ä¸”æœ€å¤šåŒ¹é… m æ¬¡ã€‚</td></tr></tbody></table><p><strong>å®ä¾‹</strong><br>äº†è§£ä»¥ä¸Šçš„æ­£åˆ™éœ€æ±‚åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥ç¼–å†™å¸¦æœ‰æ­£åˆ™è¡¨è¾¾å¼çš„sqlè¯­å¥ã€‚ä»¥ä¸‹æˆ‘ä»¬å°†åˆ—å‡ºå‡ ä¸ªå°å®ä¾‹(è¡¨åï¼šperson_tbl )æ¥åŠ æ·±æˆ‘ä»¬çš„ç†è§£ï¼š</p><ul><li>æŸ¥æ‰¾nameå­—æ®µä¸­ä»¥â€™stâ€™ä¸ºå¼€å¤´çš„æ‰€æœ‰æ•°æ®ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select name from person_tbl <span class="hljs-built_in">where</span> name regexp <span class="hljs-string">&#x27;^st&#x27;</span>;<br></code></pre></div></td></tr></table></figure><ul><li>æŸ¥æ‰¾nameå­—æ®µä¸­ä»¥â€™okâ€™ä¸ºç»“å°¾çš„æ‰€æœ‰æ•°æ®ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select name from person_tbl <span class="hljs-built_in">where</span> name regexp <span class="hljs-string">&#x27;ok$&#x27;</span>;<br></code></pre></div></td></tr></table></figure><ul><li>æŸ¥æ‰¾nameå­—æ®µä¸­åŒ…å«â€™marâ€™å­—ç¬¦ä¸²çš„æ‰€æœ‰æ•°æ®ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select name from person_tbl <span class="hljs-built_in">where</span> name regexp <span class="hljs-string">&#x27;mar&#x27;</span>;<br></code></pre></div></td></tr></table></figure><ul><li>æŸ¥æ‰¾nameå­—æ®µä¸­ä»¥å…ƒéŸ³å­—ç¬¦å¼€å¤´æˆ–ä»¥â€™okâ€™å­—ç¬¦ä¸²ç»“å°¾çš„æ‰€æœ‰æ•°æ®ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select name from person_tbl <span class="hljs-built_in">where</span> name regexp <span class="hljs-string">&#x27;^[aeiou]|ok$&#x27;</span>;<br></code></pre></div></td></tr></table></figure><h3 id="17-NULL-å€¼å¤„ç†"><a href="#17-NULL-å€¼å¤„ç†" class="headerlink" title="17. NULL å€¼å¤„ç†"></a>17. NULL å€¼å¤„ç†</h3><p>ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼Œmysqlæä¾›äº†ä¸‰å¤§è¿ç®—ç¬¦:</p><ul><li>is null: å½“åˆ—çš„å€¼æ˜¯ null,æ­¤è¿ç®—ç¬¦è¿”å› trueã€‚</li><li>is not null: å½“åˆ—çš„å€¼ä¸ä¸º null, è¿ç®—ç¬¦è¿”å› trueã€‚</li><li>&lt;=&gt;: æ¯”è¾ƒæ“ä½œç¬¦ï¼ˆä¸åŒäº=è¿ç®—ç¬¦ï¼‰ï¼Œå½“æ¯”è¾ƒçš„çš„ä¸¤ä¸ªå€¼ä¸º null æ—¶è¿”å› trueã€‚</li></ul><blockquote><p>å…³äº null çš„æ¡ä»¶æ¯”è¾ƒè¿ç®—æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ã€‚ä½ ä¸èƒ½ä½¿ç”¨ = null æˆ– != null åœ¨åˆ—ä¸­æŸ¥æ‰¾ null å€¼ ã€‚</p></blockquote><blockquote><p>åœ¨ mysql ä¸­ï¼Œnull å€¼ä¸ä»»ä½•å…¶å®ƒå€¼çš„æ¯”è¾ƒï¼ˆå³ä½¿æ˜¯ nullï¼‰æ°¸è¿œè¿”å› falseï¼Œå³ null = null è¿”å›false ã€‚</p></blockquote><p>mysql ä¸­å¤„ç† null ä½¿ç”¨ is null å’Œ is not null è¿ç®—ç¬¦ã€‚</p><p><strong>å®ä¾‹</strong><br>åœ¨æ•°æ®åº“my_dataä¸­åˆ›å»ºstudentè¡¨ï¼Œå¹¶æ’å…¥ç›¸åº”æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create table student(ID int unsigned auto_increment primary key,name varchar(10) not null,age int unsigned) default charset=utf8;<br>Query OK, 0 rows affected (0.25 sec)<br><br>mysql&gt; insert into student values(0, <span class="hljs-string">&quot;æå&quot;</span>,25);<br>Query OK, 1 row affected (0.04 sec)<br><br>mysql&gt; insert into student values(0, <span class="hljs-string">&quot;æ•æŸ”&quot;</span>,null);<br>Query OK, 1 row affected (0.04 sec)<br><br>mysql&gt; insert into student values(0, <span class="hljs-string">&quot;èµµå¼º&quot;</span>,null);<br>Query OK, 1 row affected (0.04 sec)<br><br>mysql&gt; insert into student values(0, <span class="hljs-string">&quot;ç½—æ™´&quot;</span>,23);<br>Query OK, 1 row affected (0.03 sec)<br><br>mysql&gt; select * from student;<br>+----+--------+------+<br>| ID | name   | age  |<br>+----+--------+------+<br>|  1 | æå   |   25 |<br>|  2 | æ•æŸ”   | NULL |<br>|  3 | èµµå¼º   | NULL |<br>|  4 | ç½—æ™´   |   23 |<br>+----+--------+------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>ä»¥ä¸‹å®ä¾‹ä¸­ä½ å¯ä»¥çœ‹åˆ° = å’Œ != è¿ç®—ç¬¦æ˜¯ä¸èµ·ä½œç”¨çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select id,name,age=null from student;<br>+----+--------+----------+<br>| id | name   | age=null |<br>+----+--------+----------+<br>|  1 | æå   |     NULL |<br>|  2 | æ•æŸ”   |     NULL |<br>|  3 | èµµå¼º   |     NULL |<br>|  4 | ç½—æ™´   |     NULL |<br>+----+--------+----------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select id,name,age!=null from student;<br>+----+--------+-----------+<br>| id | name   | age!=null |<br>+----+--------+-----------+<br>|  1 | æå   |      NULL |<br>|  2 | æ•æŸ”   |      NULL |<br>|  3 | èµµå¼º   |      NULL |<br>|  4 | ç½—æ™´   |      NULL |<br>+----+--------+-----------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><p>æŸ¥æ‰¾æ•°æ®è¡¨ä¸­ age åˆ—æ˜¯å¦ä¸º nullï¼Œå¿…é¡»ä½¿ç”¨ &lt;=&gt; ã€is null å’Œ is not nullï¼Œå¦‚ä¸‹å®ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select id,name,age is null from student;<br>+----+--------+-------------+<br>| id | name   | age is null |<br>+----+--------+-------------+<br>|  1 | æå   |           0 |<br>|  2 | æ•æŸ”   |           1 |<br>|  3 | èµµå¼º   |           1 |<br>|  4 | ç½—æ™´   |           0 |<br>+----+--------+-------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; select id,name,age&lt;=&gt;null from student;<br>+----+--------+------------+<br>| id | name   | age&lt;=&gt;null |<br>+----+--------+------------+<br>|  1 | æå   |          0 |<br>|  2 | æ•æŸ”   |          1 |<br>|  3 | èµµå¼º   |          1 |<br>|  4 | ç½—æ™´   |          0 |<br>+----+--------+------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><h3 id="18-äº‹åŠ¡"><a href="#18-äº‹åŠ¡" class="headerlink" title="18.äº‹åŠ¡"></a>18.äº‹åŠ¡</h3><p>mysql äº‹åŠ¡ä¸»è¦ç”¨äºå¤„ç†æ“ä½œé‡å¤§ï¼Œå¤æ‚åº¦é«˜çš„æ•°æ®ã€‚æ¯”å¦‚è¯´ï¼Œåœ¨äººå‘˜ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä½ åˆ é™¤ä¸€ä¸ªäººå‘˜ï¼Œä½ å³éœ€è¦åˆ é™¤äººå‘˜çš„åŸºæœ¬èµ„æ–™ï¼Œä¹Ÿè¦åˆ é™¤å’Œè¯¥äººå‘˜ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚ä¿¡ç®±ï¼Œæ–‡ç« ç­‰ç­‰ï¼Œè¿™æ ·ï¼Œè¿™äº›æ•°æ®åº“æ“ä½œè¯­å¥å°±æ„æˆä¸€ä¸ªäº‹åŠ¡ï¼</p><ul><li>åœ¨ mysql ä¸­åªæœ‰ä½¿ç”¨äº† innodb æ•°æ®åº“å¼•æ“çš„æ•°æ®åº“æˆ–è¡¨æ‰æ”¯æŒäº‹åŠ¡ã€‚</li><li>äº‹åŠ¡å¤„ç†å¯ä»¥ç”¨æ¥ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ï¼Œä¿è¯æˆæ‰¹çš„ sql è¯­å¥è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚</li><li>äº‹åŠ¡ç”¨æ¥ç®¡ç† insert,update,delete è¯­å¥</li></ul><p>ä¸€èˆ¬æ¥è¯´ï¼Œäº‹åŠ¡æ˜¯å¿…é¡»æ»¡è¶³4ä¸ªæ¡ä»¶ï¼ˆacidï¼‰ï¼šï¼šåŸå­æ€§ï¼ˆatomicityï¼Œæˆ–ç§°ä¸å¯åˆ†å‰²æ€§ï¼‰ã€ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆisolationï¼Œåˆç§°ç‹¬ç«‹æ€§ï¼‰ã€æŒä¹…æ€§ï¼ˆdurabilityï¼‰ã€‚</p><ul><li><p><strong>åŸå­æ€§</strong>ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›æ»šï¼ˆrollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚</p></li><li><p><strong>ä¸€è‡´æ€§</strong>ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«èµ„æ–™çš„ç²¾ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘æ€§åœ°å®Œæˆé¢„å®šçš„å·¥ä½œã€‚</p></li><li><p><strong>éš”ç¦»æ€§</strong>ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆread uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆserializableï¼‰ã€‚</p></li><li><p><strong>æŒä¹…æ€§</strong>ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</p></li></ul><blockquote><p>åœ¨ mysql å‘½ä»¤è¡Œçš„é»˜è®¤è®¾ç½®ä¸‹ï¼Œäº‹åŠ¡éƒ½æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œå³æ‰§è¡Œ sql è¯­å¥åå°±ä¼šé©¬ä¸Šæ‰§è¡Œ commit æ“ä½œã€‚å› æ­¤è¦æ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡åŠ¡é¡»ä½¿ç”¨å‘½ä»¤ begin æˆ– start transactionï¼Œæˆ–è€…æ‰§è¡Œå‘½ä»¤ set autocommit=0ï¼Œç”¨æ¥ç¦æ­¢ä½¿ç”¨å½“å‰ä¼šè¯çš„è‡ªåŠ¨æäº¤ã€‚</p></blockquote><h4 id="äº‹åŠ¡æ§åˆ¶è¯­å¥ï¼š"><a href="#äº‹åŠ¡æ§åˆ¶è¯­å¥ï¼š" class="headerlink" title="äº‹åŠ¡æ§åˆ¶è¯­å¥ï¼š"></a>äº‹åŠ¡æ§åˆ¶è¯­å¥ï¼š</h4><ul><li><p>begin æˆ– start transaction æ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼›</p></li><li><p>commit ä¹Ÿå¯ä»¥ä½¿ç”¨ commit workï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚commit ä¼šæäº¤äº‹åŠ¡ï¼Œå¹¶ä½¿å·²å¯¹æ•°æ®åº“è¿›è¡Œçš„æ‰€æœ‰ä¿®æ”¹æˆä¸ºæ°¸ä¹…æ€§çš„ï¼›</p></li><li><p>rollback ä¹Ÿå¯ä»¥ä½¿ç”¨ rollback workï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚å›æ»šä¼šç»“æŸç”¨æˆ·çš„äº‹åŠ¡ï¼Œå¹¶æ’¤é”€æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ï¼›</p></li><li><p>savepoint identifierï¼Œsavepoint å…è®¸åœ¨äº‹åŠ¡ä¸­åˆ›å»ºä¸€ä¸ªä¿å­˜ç‚¹ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­å¯ä»¥æœ‰å¤šä¸ª savepointï¼›</p></li><li><p>release savepoint identifier åˆ é™¤ä¸€ä¸ªäº‹åŠ¡çš„ä¿å­˜ç‚¹ï¼Œå½“æ²¡æœ‰æŒ‡å®šçš„ä¿å­˜ç‚¹æ—¶ï¼Œæ‰§è¡Œè¯¥è¯­å¥ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼›</p></li><li><p>rollback to identifier æŠŠäº‹åŠ¡å›æ»šåˆ°æ ‡è®°ç‚¹ï¼›</p></li><li><p>set transaction ç”¨æ¥è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚innodb å­˜å‚¨å¼•æ“æä¾›äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰read uncommittedã€read committedã€repeatable read å’Œ serializableã€‚</p></li></ul><h4 id="mysql-äº‹åŠ¡å¤„ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š"><a href="#mysql-äº‹åŠ¡å¤„ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š" class="headerlink" title="mysql äº‹åŠ¡å¤„ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š"></a>mysql äº‹åŠ¡å¤„ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š</h4><p>1ã€ç”¨ begin, rollback, commitæ¥å®ç°</p><ul><li>begin å¼€å§‹ä¸€ä¸ªäº‹åŠ¡</li><li>rollback äº‹åŠ¡å›æ»š</li><li>commit äº‹åŠ¡ç¡®è®¤</li></ul><p>2ã€ç›´æ¥ç”¨ set æ¥æ”¹å˜ mysql çš„è‡ªåŠ¨æäº¤æ¨¡å¼:</p><ul><li>set autocommit=0 ç¦æ­¢è‡ªåŠ¨æäº¤</li><li>set autocommit=1 å¼€å¯è‡ªåŠ¨æäº¤</li></ul><p><strong>å®ä¾‹</strong><br>ä¸‹é¢å…·ä½“æ¼”ç¤ºMySQLäº‹åŠ¡çš„ä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select * from student;<br>+----+--------+------+<br>| ID | name   | age  |<br>+----+--------+------+<br>|  1 | æå   |   25 |<br>|  2 | æ•æŸ”   | NULL |<br>|  3 | èµµå¼º   | NULL |<br>|  4 | ç½—æ™´   |   23 |<br>+----+--------+------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; begin; <span class="hljs-comment"># å¼€å¯äº‹åŠ¡</span><br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; insert into student values(0,<span class="hljs-string">&quot;å¯’æ¢…&quot;</span>,28); <span class="hljs-comment"># æ’å…¥æ•°æ®</span><br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; select * from student;<br>+----+--------+------+<br>| ID | name   | age  |<br>+----+--------+------+<br>|  1 | æå   |   25 |<br>|  2 | æ•æŸ”   | NULL |<br>|  3 | èµµå¼º   | NULL |<br>|  4 | ç½—æ™´   |   23 |<br>|  5 | å¯’æ¢…   |   28 |<br>+----+--------+------+<br>5 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; rollback; <span class="hljs-comment"># å›æ»š</span><br>Query OK, 0 rows affected (0.04 sec)<br><br>mysql&gt; select * from student;<br>+----+--------+------+<br>| ID | name   | age  |<br>+----+--------+------+<br>|  1 | æå   |   25 |<br>|  2 | æ•æŸ”   | NULL |<br>|  3 | èµµå¼º   | NULL |<br>|  4 | ç½—æ™´   |   23 |<br>+----+--------+------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; insert into student values(0,<span class="hljs-string">&quot;å¯’æ¢…&quot;</span>,28); <span class="hljs-comment"># æ’å…¥æ•°æ®</span><br>Query OK, 1 row affected (0.15 sec)<br><br>mysql&gt; select * from student;<br>+----+--------+------+<br>| ID | name   | age  |<br>+----+--------+------+<br>|  1 | æå   |   25 |<br>|  2 | æ•æŸ”   | NULL |<br>|  3 | èµµå¼º   | NULL |<br>|  4 | ç½—æ™´   |   23 |<br>|  6 | å¯’æ¢…   |   28 |<br>+----+--------+------+<br>5 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; insert into student values(5,<span class="hljs-string">&quot;æç£Š&quot;</span>,26);<br>Query OK, 1 row affected (0.04 sec)<br><br>mysql&gt; insert into student values(0,<span class="hljs-string">&quot;å¼ é›·&quot;</span>,20);<br>Query OK, 1 row affected (0.04 sec)<br><br>mysql&gt; <span class="hljs-built_in">set</span> autocommit=0; <span class="hljs-comment"># ç¦æ­¢è‡ªåŠ¨æäº¤</span><br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; insert into student values(0,<span class="hljs-string">&quot;éŸ©ç¾ç¾&quot;</span>,20);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; select * from student;<br>+----+-----------+------+<br>| ID | name      | age  |<br>+----+-----------+------+<br>|  1 | æå      |   25 |<br>|  2 | æ•æŸ”      | NULL |<br>|  3 | èµµå¼º      | NULL |<br>|  4 | ç½—æ™´      |   23 |<br>|  5 | æç£Š      |   26 |<br>|  6 | å¯’æ¢…      |   28 |<br>|  7 | å¼ é›·      |   20 |<br>|  8 | è‰è‰      |   20 |<br>|  9 | éŸ©ç¾ç¾    |   20 |<br>+----+-----------+------+<br>9 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; rollback; <span class="hljs-comment"># å›æ»š</span><br>Query OK, 0 rows affected (0.16 sec)<br><br>mysql&gt; select * from student;<br>+----+--------+------+<br>| ID | name   | age  |<br>+----+--------+------+<br>|  1 | æå   |   25 |<br>|  2 | æ•æŸ”   | NULL |<br>|  3 | èµµå¼º   | NULL |<br>|  4 | ç½—æ™´   |   23 |<br>|  5 | æç£Š   |   26 |<br>|  6 | å¯’æ¢…   |   28 |<br>|  7 | å¼ é›·   |   20 |<br>|  8 | è‰è‰   |   20 |<br>+----+--------+------+<br>8 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; update student <span class="hljs-built_in">set</span> age=23 <span class="hljs-built_in">where</span> name=<span class="hljs-string">&quot;æ•æŸ”&quot;</span>; <span class="hljs-comment"># ä¿®æ”¹æ•°æ®</span><br>Query OK, 1 row affected (0.00 sec)<br>Rows matched: 1  Changed: 1  Warnings: 0<br><br>mysql&gt; select * from student;<br>+----+--------+------+<br>| ID | name   | age  |<br>+----+--------+------+<br>|  1 | æå   |   25 |<br>|  2 | æ•æŸ”   |   23 |<br>|  3 | èµµå¼º   | NULL |<br>|  4 | ç½—æ™´   |   23 |<br>|  5 | æç£Š   |   26 |<br>|  6 | å¯’æ¢…   |   28 |<br>|  7 | å¼ é›·   |   20 |<br>|  8 | è‰è‰   |   20 |<br>+----+--------+------+<br>8 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; savepoint point1; <span class="hljs-comment"># åˆ›å»ºä¿å­˜ç‚¹</span><br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; update student <span class="hljs-built_in">set</span> age=22 <span class="hljs-built_in">where</span> name=<span class="hljs-string">&quot;èµµå¼º&quot;</span>;<br>Query OK, 1 row affected (0.00 sec)<br>Rows matched: 1  Changed: 1  Warnings: 0<br><br>mysql&gt; select * from student;<br>+----+--------+------+<br>| ID | name   | age  |<br>+----+--------+------+<br>|  1 | æå   |   25 |<br>|  2 | æ•æŸ”   |   23 |<br>|  3 | èµµå¼º   |   22 |<br>|  4 | ç½—æ™´   |   23 |<br>|  5 | æç£Š   |   26 |<br>|  6 | å¯’æ¢…   |   28 |<br>|  7 | å¼ é›·   |   20 |<br>|  8 | è‰è‰   |   20 |<br>+----+--------+------+<br>8 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; rollback to point1; <span class="hljs-comment"># å›æ»šåˆ°ä¿å­˜ç‚¹</span><br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; select * from student;<br>+----+--------+------+<br>| ID | name   | age  |<br>+----+--------+------+<br>|  1 | æå   |   25 |<br>|  2 | æ•æŸ”   |   23 |<br>|  3 | èµµå¼º   | NULL |<br>|  4 | ç½—æ™´   |   23 |<br>|  5 | æç£Š   |   26 |<br>|  6 | å¯’æ¢…   |   28 |<br>|  7 | å¼ é›·   |   20 |<br>|  8 | è‰è‰   |   20 |<br>+----+--------+------+<br>8 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; commit; <span class="hljs-comment"># äº‹åŠ¡æäº¤</span><br>Query OK, 0 rows affected (0.04 sec)<br><br></code></pre></div></td></tr></table></figure><h3 id="19-ALTERå‘½ä»¤"><a href="#19-ALTERå‘½ä»¤" class="headerlink" title="19. ALTERå‘½ä»¤"></a>19. ALTERå‘½ä»¤</h3><p>å½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹æ•°æ®è¡¨åæˆ–è€…ä¿®æ”¹æ•°æ®è¡¨å­—æ®µæ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ°MySQL alterå‘½ä»¤ã€‚</p><h4 id="åˆ é™¤è¡¨å­—æ®µ"><a href="#åˆ é™¤è¡¨å­—æ®µ" class="headerlink" title="åˆ é™¤è¡¨å­—æ®µ"></a>åˆ é™¤è¡¨å­—æ®µ</h4><p>å¦‚ä¸‹å‘½ä»¤ä½¿ç”¨äº† alter å‘½ä»¤åŠ drop å­å¥æ¥åˆ é™¤ä»¥ä¸Šåˆ›å»ºè¡¨çš„ age å­—æ®µï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; desc student;<br>+-------+------------------+------+-----+---------+----------------+<br>| Field | Type             | Null | Key | Default | Extra          |<br>+-------+------------------+------+-----+---------+----------------+<br>| ID    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| name  | varchar(10)      | NO   |     | NULL    |                |<br>| age   | int(10) unsigned | YES  |     | NULL    |                |<br>+-------+------------------+------+-----+---------+----------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; alter table table_name  drop field_name;<br>Query OK, 0 rows affected (0.92 sec)<br>Records: 0  Duplicates: 0  Warnings: 0<br><br>mysql&gt; desc student;<br>+-------+------------------+------+-----+---------+----------------+<br>| Field | Type             | Null | Key | Default | Extra          |<br>+-------+------------------+------+-----+---------+----------------+<br>| ID    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| name  | varchar(10)      | NO   |     | NULL    |                |<br>+-------+------------------+------+-----+---------+----------------+<br>2 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>å¦‚æœæ•°æ®è¡¨ä¸­åªå‰©ä½™ä¸€ä¸ªå­—æ®µåˆ™æ— æ³•ä½¿ç”¨dropæ¥åˆ é™¤å­—æ®µã€‚</p><h4 id="å¢åŠ è¡¨å­—æ®µ"><a href="#å¢åŠ è¡¨å­—æ®µ" class="headerlink" title="å¢åŠ è¡¨å­—æ®µ"></a>å¢åŠ è¡¨å­—æ®µ</h4><p>mysql ä¸­ä½¿ç”¨ add å­å¥æ¥å‘æ•°æ®è¡¨ä¸­æ·»åŠ åˆ—ï¼Œå¦‚ä¸‹å®ä¾‹åœ¨è¡¨ student ä¸­æ·»åŠ  age å­—æ®µï¼Œå¹¶å®šä¹‰æ•°æ®ç±»å‹:</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; alter table student add age int unsigned not null;<br>Query OK, 0 rows affected (0.53 sec)<br>Records: 0  Duplicates: 0  Warnings: 0<br><br>mysql&gt; desc student;<br>+-------+------------------+------+-----+---------+----------------+<br>| Field | Type             | Null | Key | Default | Extra          |<br>+-------+------------------+------+-----+---------+----------------+<br>| ID    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| name  | varchar(10)      | NO   |     | NULL    |                |<br>| age   | int(10) unsigned | NO   |     | NULL    |                |<br>+-------+------------------+------+-----+---------+----------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åï¼Œfield_name å­—æ®µä¼šè‡ªåŠ¨æ·»åŠ åˆ°æ•°æ®è¡¨å­—æ®µçš„æœ«å°¾ã€‚</p><p>å¦‚æœä½ éœ€è¦æŒ‡å®šæ–°å¢å­—æ®µçš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨mysqlæä¾›çš„å…³é”®å­— first (è®¾å®šä½ç¬¬ä¸€åˆ—)ï¼Œ after å­—æ®µåï¼ˆè®¾å®šä½äºæŸä¸ªå­—æ®µä¹‹åï¼‰ã€‚</p><p>å°è¯•ä»¥ä¸‹ alter table è¯­å¥, åœ¨æ‰§è¡ŒæˆåŠŸåï¼Œä½¿ç”¨ show columns æŸ¥çœ‹è¡¨ç»“æ„çš„å˜åŒ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; desc student;<br>+-------+------------------+------+-----+---------+-------+<br>| Field | Type             | Null | Key | Default | Extra |<br>+-------+------------------+------+-----+---------+-------+<br>| name  | varchar(10)      | NO   |     | NULL    |       |<br>| age   | int(10) unsigned | NO   |     | NULL    |       |<br>+-------+------------------+------+-----+---------+-------+<br>2 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; alter table student add id int unsigned auto_increment primary key first;<br>Query OK, 0 rows affected (0.56 sec)<br>Records: 0  Duplicates: 0  Warnings: 0<br><br>mysql&gt; desc student;<br>+-------+------------------+------+-----+---------+----------------+<br>| Field | Type             | Null | Key | Default | Extra          |<br>+-------+------------------+------+-----+---------+----------------+<br>| id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| name  | varchar(10)      | NO   |     | NULL    |                |<br>| age   | int(10) unsigned | NO   |     | NULL    |                |<br>+-------+------------------+------+-----+---------+----------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; alter table student add class int unsigned after id;<br>Query OK, 0 rows affected (0.54 sec)<br>Records: 0  Duplicates: 0  Warnings: 0<br><br>mysql&gt; desc student;<br>+-------+------------------+------+-----+---------+----------------+<br>| Field | Type             | Null | Key | Default | Extra          |<br>+-------+------------------+------+-----+---------+----------------+<br>| id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| class | int(10) unsigned | YES  |     | NULL    |                |<br>| name  | varchar(10)      | NO   |     | NULL    |                |<br>| age   | int(10) unsigned | NO   |     | NULL    |                |<br>+-------+------------------+------+-----+---------+----------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>first å’Œ after å…³é”®å­—å¯ç”¨äº add ä¸ modify å­å¥ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³é‡ç½®æ•°æ®è¡¨å­—æ®µçš„ä½ç½®å°±éœ€è¦å…ˆä½¿ç”¨ drop åˆ é™¤å­—æ®µç„¶åä½¿ç”¨ add æ¥æ·»åŠ å­—æ®µå¹¶è®¾ç½®ä½ç½®ã€‚</p><h4 id="ä¿®æ”¹è¡¨å­—æ®µ"><a href="#ä¿®æ”¹è¡¨å­—æ®µ" class="headerlink" title="ä¿®æ”¹è¡¨å­—æ®µ"></a>ä¿®æ”¹è¡¨å­—æ®µ</h4><p>å¦‚æœéœ€è¦ä¿®æ”¹å­—æ®µç±»å‹åŠåç§°, ä½ å¯ä»¥åœ¨alterå‘½ä»¤ä¸­ä½¿ç”¨ modify æˆ– change å­å¥ ã€‚</p><p>ä¾‹å¦‚ï¼ŒæŠŠå­—æ®µ class çš„ç±»å‹ä» int unsigned æ”¹ä¸º varchar(10)ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; desc student;<br>+-------+------------------+------+-----+---------+----------------+<br>| Field | Type             | Null | Key | Default | Extra          |<br>+-------+------------------+------+-----+---------+----------------+<br>| id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| class | int(10) unsigned | YES  |     | NULL    |                |<br>| name  | varchar(10)      | NO   |     | NULL    |                |<br>| age   | int(10) unsigned | NO   |     | NULL    |                |<br>+-------+------------------+------+-----+---------+----------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; alter table student modify class varchar(10);<br>Query OK, 8 rows affected (0.69 sec)<br>Records: 8  Duplicates: 0  Warnings: 0<br><br>mysql&gt; desc student;<br>+-------+------------------+------+-----+---------+----------------+<br>| Field | Type             | Null | Key | Default | Extra          |<br>+-------+------------------+------+-----+---------+----------------+<br>| id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| class | varchar(10)      | YES  |     | NULL    |                |<br>| name  | varchar(10)      | NO   |     | NULL    |                |<br>| age   | int(10) unsigned | NO   |     | NULL    |                |<br>+-------+------------------+------+-----+---------+----------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>ä½¿ç”¨ change å­å¥, è¯­æ³•æœ‰å¾ˆå¤§çš„ä¸åŒã€‚ åœ¨ change å…³é”®å­—ä¹‹åï¼Œç´§è·Ÿç€çš„æ˜¯ä½ è¦ä¿®æ”¹çš„å­—æ®µåï¼Œç„¶åæŒ‡å®šæ–°å­—æ®µååŠç±»å‹ã€‚</p><p>å½“ä½ ä¿®æ”¹å­—æ®µæ—¶ï¼Œä½ å¯ä»¥æŒ‡å®šæ˜¯å¦åŒ…å«å€¼æˆ–è€…æ˜¯å¦è®¾ç½®é»˜è®¤å€¼ã€‚</p><p>å¦‚æœä½ ä¸è®¾ç½®é»˜è®¤å€¼ï¼Œmysqlä¼šè‡ªåŠ¨è®¾ç½®è¯¥å­—æ®µé»˜è®¤ä¸º nullã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; alter table student change class class_room varchar(20) default <span class="hljs-string">&quot;203&quot;</span>;<br>Query OK, 0 rows affected (0.10 sec)<br>Records: 0  Duplicates: 0  Warnings: 0<br><br>mysql&gt; desc student;<br>+------------+------------------+------+-----+---------+----------------+<br>| Field      | Type             | Null | Key | Default | Extra          |<br>+------------+------------------+------+-----+---------+----------------+<br>| id         | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| class_room | varchar(20)      | YES  |     | 203     |                |<br>| name       | varchar(10)      | NO   |     | NULL    |                |<br>| age        | int(10) unsigned | NO   |     | NULL    |                |<br>+------------+------------------+------+-----+---------+----------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨ alter æ¥ä¿®æ”¹å­—æ®µçš„é»˜è®¤å€¼ï¼Œå°è¯•ä»¥ä¸‹å®ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; alter table student alter class_room <span class="hljs-built_in">set</span> default <span class="hljs-string">&quot;205&quot;</span>;<br>Query OK, 0 rows affected (0.04 sec)<br>Records: 0  Duplicates: 0  Warnings: 0<br><br>mysql&gt; desc student;<br>+------------+------------------+------+-----+---------+----------------+<br>| Field      | Type             | Null | Key | Default | Extra          |<br>+------------+------------------+------+-----+---------+----------------+<br>| id         | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| class_room | varchar(20)      | YES  |     | 205     |                |<br>| name       | varchar(10)      | NO   |     | NULL    |                |<br>| age        | int(10) unsigned | NO   |     | NULL    |                |<br>+------------+------------------+------+-----+---------+----------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ alter å‘½ä»¤åŠ dropå­å¥æ¥åˆ é™¤å­—æ®µçš„é»˜è®¤å€¼ï¼Œå¦‚ä¸‹å®ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; alter table student alter class_room drop default;<br>Query OK, 0 rows affected (0.04 sec)<br>Records: 0  Duplicates: 0  Warnings: 0<br><br>mysql&gt; desc student;<br>+------------+------------------+------+-----+---------+----------------+<br>| Field      | Type             | Null | Key | Default | Extra          |<br>+------------+------------------+------+-----+---------+----------------+<br>| id         | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| class_room | varchar(20)      | YES  |     | NULL    |                |<br>| name       | varchar(10)      | NO   |     | NULL    |                |<br>| age        | int(10) unsigned | NO   |     | NULL    |                |<br>+------------+------------------+------+-----+---------+----------------+<br>4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><h4 id="ä¿®æ”¹æ•°æ®è¡¨"><a href="#ä¿®æ”¹æ•°æ®è¡¨" class="headerlink" title="ä¿®æ”¹æ•°æ®è¡¨"></a>ä¿®æ”¹æ•°æ®è¡¨</h4><p>ä¿®æ”¹æ•°æ®è¡¨ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ alter table å‘½ä»¤æ¥å®Œæˆã€‚</p><p>å°è¯•ä»¥ä¸‹å®ä¾‹ï¼Œæˆ‘ä»¬å°†è¡¨ student çš„ç±»å‹ä¿®æ”¹ä¸º MyISAM ï¼Œç„¶åå†ä¿®æ”¹ä¸º InnoDBï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; alter table student engine=myisam;<br>Query OK, 8 rows affected (0.28 sec)<br>Records: 8  Duplicates: 0  Warnings: 0<br><br>mysql&gt; show table status like <span class="hljs-string">&quot;student&quot;</span>\G<br>*************************** 1. row ***************************<br>           Name: student<br>         Engine: MyISAM<br>        Version: 10<br>     Row_format: Dynamic<br>           Rows: 8<br> Avg_row_length: 20<br>    Data_length: 160<br>Max_data_length: 281474976710655<br>   Index_length: 2048<br>      Data_free: 0<br> Auto_increment: 9<br>    Create_time: 2019-06-09 17:47:23<br>    Update_time: 2019-06-09 17:47:23<br>     Check_time: NULL<br>      Collation: utf8_general_ci<br>       Checksum: NULL<br> Create_options:<br>        Comment:<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; alter table students engine=innodb;<br>Query OK, 8 rows affected (0.76 sec)<br>Records: 8  Duplicates: 0  Warnings: 0<br><br>mysql&gt; show table status <span class="hljs-built_in">where</span> name=<span class="hljs-string">&quot;students&quot;</span>\G<br>*************************** 1. row ***************************<br>           Name: students<br>         Engine: InnoDB<br>        Version: 10<br>     Row_format: Dynamic<br>           Rows: 8<br> Avg_row_length: 2048<br>    Data_length: 16384<br>Max_data_length: 0<br>   Index_length: 0<br>      Data_free: 0<br> Auto_increment: 9<br>    Create_time: 2019-06-09 17:54:53<br>    Update_time: 2019-06-09 17:54:53<br>     Check_time: NULL<br>      Collation: utf8_general_ci<br>       Checksum: NULL<br> Create_options:<br>        Comment:<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>å¦‚æœéœ€è¦ä¿®æ”¹æ•°æ®è¡¨çš„åç§°ï¼Œå¯ä»¥åœ¨ alter table è¯­å¥ä¸­ä½¿ç”¨ rename å­å¥æ¥å®ç°ã€‚</p><p>å°è¯•ä»¥ä¸‹å®ä¾‹å°†æ•°æ®è¡¨ student é‡å‘½åä¸º studentsï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; alter table student rename to students;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; show tables;<br>+-------------------+<br>| Tables_in_my_data |<br>+-------------------+<br>| students          |<br>+-------------------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><h3 id="20-ä¸´æ—¶è¡¨"><a href="#20-ä¸´æ—¶è¡¨" class="headerlink" title="20. ä¸´æ—¶è¡¨"></a>20. ä¸´æ—¶è¡¨</h3><p>MySQL ä¸´æ—¶è¡¨åœ¨æˆ‘ä»¬éœ€è¦ä¿å­˜ä¸€äº›ä¸´æ—¶æ•°æ®æ—¶æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä¸´æ—¶è¡¨åªåœ¨å½“å‰è¿æ¥å¯è§ï¼Œå½“å…³é—­è¿æ¥æ—¶ï¼ŒMysqlä¼šè‡ªåŠ¨åˆ é™¤è¡¨å¹¶é‡Šæ”¾æ‰€æœ‰ç©ºé—´ã€‚</p><p>å¦‚æœä½ ä½¿ç”¨äº†å…¶ä»–MySQLå®¢æˆ·ç«¯ç¨‹åºè¿æ¥MySQLæ•°æ®åº“æœåŠ¡å™¨æ¥åˆ›å»ºä¸´æ—¶è¡¨ï¼Œé‚£ä¹ˆåªæœ‰åœ¨å…³é—­å®¢æˆ·ç«¯ç¨‹åºæ—¶æ‰ä¼šé”€æ¯ä¸´æ—¶è¡¨ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨é”€æ¯ã€‚</p><h4 id="åˆ›å»ºä¸´æ—¶è¡¨"><a href="#åˆ›å»ºä¸´æ—¶è¡¨" class="headerlink" title="åˆ›å»ºä¸´æ—¶è¡¨"></a>åˆ›å»ºä¸´æ—¶è¡¨</h4><p>ä½¿ç”¨temporaryå…³é”®å­—åˆ›å»ºä¸´æ—¶è¡¨</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create temporary table class_room(room_id int unsigned primary key, class varchar(20) ) default charset=utf8;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; insert into class_room values(205,<span class="hljs-string">&quot;ä¹å¹´çº§ä¸€ç­&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; select * from class_room;<br>+---------+-----------------+<br>| room_id | class           |<br>+---------+-----------------+<br>|     205 | ä¹å¹´çº§ä¸€ç­      |<br>+---------+-----------------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; desc class_room;<br>+---------+------------------+------+-----+---------+-------+<br>| Field   | Type             | Null | Key | Default | Extra |<br>+---------+------------------+------+-----+---------+-------+<br>| room_id | int(10) unsigned | NO   | PRI | NULL    |       |<br>| class   | varchar(20)      | YES  |     | NULL    |       |<br>+---------+------------------+------+-----+---------+-------+<br>2 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>mysql&gt; show tables;<br>+-------------------+<br>| Tables_in_my_data |<br>+-------------------+<br>| students          |<br>+-------------------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>å½“ä½ ä½¿ç”¨ show tableså‘½ä»¤æ˜¾ç¤ºæ•°æ®è¡¨åˆ—è¡¨æ—¶ï¼Œä½ å°†æ— æ³•çœ‹åˆ° class_roomè¡¨ã€‚</p><p>å¦‚æœä½ é€€å‡ºå½“å‰mysqlä¼šè¯ï¼Œå†ä½¿ç”¨ selectå‘½ä»¤æ¥è¯»å–åŸå…ˆåˆ›å»ºçš„ä¸´æ—¶è¡¨æ•°æ®ï¼Œé‚£ä½ ä¼šå‘ç°æ•°æ®åº“ä¸­æ²¡æœ‰è¯¥è¡¨çš„å­˜åœ¨ï¼Œå› ä¸ºåœ¨ä½ é€€å‡ºæ—¶è¯¥ä¸´æ—¶è¡¨å·²ç»è¢«é”€æ¯äº†ã€‚</p><h4 id="åˆ é™¤ä¸´æ—¶è¡¨"><a href="#åˆ é™¤ä¸´æ—¶è¡¨" class="headerlink" title="åˆ é™¤ä¸´æ—¶è¡¨"></a>åˆ é™¤ä¸´æ—¶è¡¨</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ æ–­å¼€ä¸æ•°æ®åº“çš„è¿æ¥åï¼Œä¸´æ—¶è¡¨å°±ä¼šè‡ªåŠ¨è¢«é”€æ¯ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨å½“å‰MySQLä¼šè¯ä½¿ç”¨ DROP TABLE å‘½ä»¤æ¥æ‰‹åŠ¨åˆ é™¤ä¸´æ—¶è¡¨ã€‚</p><p>ä»¥ä¸‹æ˜¯æ‰‹åŠ¨åˆ é™¤ä¸´æ—¶è¡¨çš„å®ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; drop table class_room;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; select * from class_room;<br>ERROR 1146 (42S02): Table <span class="hljs-string">&#x27;my_data.class_room&#x27;</span> doesn<span class="hljs-string">&#x27;t exist</span><br><span class="hljs-string"></span><br></code></pre></div></td></tr></table></figure><h3 id="21-å¤åˆ¶è¡¨"><a href="#21-å¤åˆ¶è¡¨" class="headerlink" title="21. å¤åˆ¶è¡¨"></a>21. å¤åˆ¶è¡¨</h3><p>å¦‚æœæˆ‘ä»¬éœ€è¦å®Œå…¨çš„å¤åˆ¶MySQLçš„æ•°æ®è¡¨ï¼ŒåŒ…æ‹¬è¡¨çš„ç»“æ„ï¼Œç´¢å¼•ï¼Œé»˜è®¤å€¼ç­‰ã€‚ å¦‚æœä»…ä»…ä½¿ç”¨create table â€¦ select å‘½ä»¤ï¼Œæ˜¯æ— æ³•å®ç°çš„ã€‚</p><p><strong>å®ä¾‹</strong><br>å°è¯•ä»¥ä¸‹å®ä¾‹æ¥å¤åˆ¶è¡¨ runoob_tbl ã€‚</p><p>æ­¥éª¤ä¸€ï¼š</p><p>è·å–æ•°æ®è¡¨çš„å®Œæ•´ç»“æ„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; show create table students\G;<br>*************************** 1. row ***************************<br>       Table: students<br>Create Table: CREATE TABLE `students` (<br>  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,<br>  `name` varchar(10) NOT NULL,<br>  `class_room` varchar(20) DEFAULT <span class="hljs-string">&#x27;205&#x27;</span>,<br>  PRIMARY KEY (`id`)<br>) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br>ERROR:<br>No query specified<br><br></code></pre></div></td></tr></table></figure><p>æ­¥éª¤äºŒï¼š</p><p>ä¿®æ”¹SQLè¯­å¥çš„æ•°æ®è¡¨åï¼Œå¹¶æ‰§è¡ŒSQLè¯­å¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create table `student` (`id` int(10) unsigned not null auto_increment,`name` varchar(10) not null,`class_room` varchar(20) default <span class="hljs-string">&#x27;205&#x27;</span>, primary key (`id`)) engine=innodb auto_increment=9 default charset=utf8;<br>Query OK, 0 rows affected (0.59 sec)<br><br></code></pre></div></td></tr></table></figure><p>æ­¥éª¤ä¸‰ï¼š</p><p>æ‰§è¡Œå®Œç¬¬äºŒæ­¥éª¤åï¼Œä½ å°†åœ¨æ•°æ®åº“ä¸­åˆ›å»ºæ–°çš„å…‹éš†è¡¨ studentã€‚ å¦‚æœä½ æƒ³æ‹·è´æ•°æ®è¡¨çš„æ•°æ®ä½ å¯ä»¥ä½¿ç”¨ insert intoâ€¦ select è¯­å¥æ¥å®ç°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; insert into student(id,name,class_room) select * from students;<br>Query OK, 8 rows affected (0.00 sec)<br>Records: 8  Duplicates: 0  Warnings: 0<br><br>mysql&gt; select * from student;<br>+----+--------+------------+<br>| id | name   | class_room |<br>+----+--------+------------+<br>|  1 | æå   | 205        |<br>|  2 | æ•æŸ”   | 205        |<br>|  3 | èµµå¼º   | 205        |<br>|  4 | ç½—æ™´   | 205        |<br>|  5 | æç£Š   | 205        |<br>|  6 | å¯’æ¢…   | 205        |<br>|  7 | å¼ é›·   | 205        |<br>|  8 | è‰è‰   | 205        |<br>+----+--------+------------+<br>8 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><h3 id="22-å¤„ç†é‡å¤æ•°æ®"><a href="#22-å¤„ç†é‡å¤æ•°æ®" class="headerlink" title="22. å¤„ç†é‡å¤æ•°æ®"></a>22. å¤„ç†é‡å¤æ•°æ®</h3><p>æœ‰äº› MySQL æ•°æ®è¡¨ä¸­å¯èƒ½å­˜åœ¨é‡å¤çš„è®°å½•ï¼Œæœ‰äº›æƒ…å†µæˆ‘ä»¬å…è®¸é‡å¤æ•°æ®çš„å­˜åœ¨ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦åˆ é™¤è¿™äº›é‡å¤çš„æ•°æ®ã€‚</p><h4 id="é˜²æ­¢è¡¨ä¸­å‡ºç°é‡å¤æ•°æ®"><a href="#é˜²æ­¢è¡¨ä¸­å‡ºç°é‡å¤æ•°æ®" class="headerlink" title="é˜²æ­¢è¡¨ä¸­å‡ºç°é‡å¤æ•°æ®"></a>é˜²æ­¢è¡¨ä¸­å‡ºç°é‡å¤æ•°æ®</h4><p>ä½ å¯ä»¥åœ¨ MySQL æ•°æ®è¡¨ä¸­è®¾ç½®æŒ‡å®šçš„å­—æ®µä¸º PRIMARY KEYï¼ˆä¸»é”®ï¼‰ æˆ–è€… UNIQUEï¼ˆå”¯ä¸€ï¼‰ ç´¢å¼•æ¥ä¿è¯æ•°æ®çš„å”¯ä¸€æ€§ã€‚</p><p>å¦‚æœä½ æƒ³è®¾ç½®è¡¨ä¸­å­—æ®µ idï¼Œname æ•°æ®ä¸èƒ½é‡å¤ï¼Œä½ å¯ä»¥è®¾ç½®åŒä¸»é”®æ¨¡å¼æ¥è®¾ç½®æ•°æ®çš„å”¯ä¸€æ€§ï¼Œ å¦‚æœä½ è®¾ç½®äº†åŒä¸»é”®ï¼Œé‚£ä¹ˆé‚£ä¸ªé”®çš„é»˜è®¤å€¼ä¸èƒ½ä¸º NULLï¼Œå¯è®¾ç½®ä¸º NOT NULLã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create table teachers(id int unsigned auto_increment, name varchar(10), gender varchar(5), primary key(id,name));<br>Query OK, 0 rows affected (0.26 sec)<br><br>mysql&gt; desc teachers;<br>+--------+------------------+------+-----+---------+----------------+<br>| Field  | Type             | Null | Key | Default | Extra          |<br>+--------+------------------+------+-----+---------+----------------+<br>| id     | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| name   | varchar(10)      | NO   | PRI | NULL    |                |<br>| gender | varchar(5)       | YES  |     | NULL    |                |<br>+--------+------------------+------+-----+---------+----------------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬è®¾ç½®äº†å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆåœ¨æ’å…¥é‡å¤æ•°æ®æ—¶ï¼ŒSQL è¯­å¥å°†æ— æ³•æ‰§è¡ŒæˆåŠŸ,å¹¶æŠ›å‡ºé”™ã€‚</p><p>insert ignore into ä¸ insert into çš„åŒºåˆ«å°±æ˜¯ insert ignore ä¼šå¿½ç•¥æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨çš„æ•°æ®ï¼Œå¦‚æœæ•°æ®åº“æ²¡æœ‰æ•°æ®ï¼Œå°±æ’å…¥æ–°çš„æ•°æ®ï¼Œå¦‚æœæœ‰æ•°æ®çš„è¯å°±è·³è¿‡è¿™æ¡æ•°æ®ã€‚è¿™æ ·å°±å¯ä»¥ä¿ç•™æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨æ•°æ®ï¼Œè¾¾åˆ°åœ¨é—´éš™ä¸­æ’å…¥æ•°æ®çš„ç›®çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; insert into teachers values(1, <span class="hljs-string">&quot;æç£Š&quot;</span>, <span class="hljs-string">&quot;ç”·&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; insert into teachers values(1, <span class="hljs-string">&quot;æç£Š&quot;</span>, <span class="hljs-string">&quot;ç”·&quot;</span>);<br>ERROR 1062 (23000): Duplicate entry <span class="hljs-string">&#x27;1-æç£Š&#x27;</span> <span class="hljs-keyword">for</span> key <span class="hljs-string">&#x27;PRIMARY&#x27;</span><br><br>mysql&gt; insert ignore into teachers values(1, <span class="hljs-string">&quot;æç£Š&quot;</span>, <span class="hljs-string">&quot;ç”·&quot;</span>);<br>Query OK, 0 rows affected, 1 warning (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>INSERT IGNORE INTO å½“æ’å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è®°å½•çš„å”¯ä¸€æ€§åï¼Œå¦‚æœæ’å…¥é‡å¤æ•°æ®ï¼Œå°†ä¸è¿”å›é”™è¯¯ï¼Œåªä»¥è­¦å‘Šå½¢å¼è¿”å›ã€‚ è€Œ REPLACE INTO å¦‚æœå­˜åœ¨ primary æˆ– unique ç›¸åŒçš„è®°å½•ï¼Œåˆ™å…ˆåˆ é™¤æ‰ã€‚å†æ’å…¥æ–°è®°å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; replace into teachers values(1, <span class="hljs-string">&quot;æç£Š&quot;</span>, <span class="hljs-string">&quot;å¥³&quot;</span>);<br>Query OK, 2 rows affected (0.00 sec)<br><br>mysql&gt; select * from teachers;<br>+----+--------+--------+<br>| id | name   | gender |<br>+----+--------+--------+<br>|  1 | æç£Š   | å¥³     |<br>+----+--------+--------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>å¦ä¸€ç§è®¾ç½®æ•°æ®çš„å”¯ä¸€æ€§æ–¹æ³•æ˜¯æ·»åŠ ä¸€ä¸ª UNIQUE ç´¢å¼•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create table person(first_name char(20) not null, last_name char(20) not null, gender char(10),unique (last_name, first_name)) charset=utf8;<br>Query OK, 0 rows affected (0.25 sec)<br><br>mysql&gt; insert ignore into person values(<span class="hljs-string">&quot;æ&quot;</span>, <span class="hljs-string">&quot;é›·&quot;</span>, <span class="hljs-string">&quot;ç”·&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; insert ignore into person values(<span class="hljs-string">&quot;æ&quot;</span>, <span class="hljs-string">&quot;é›·&quot;</span>, <span class="hljs-string">&quot;ç”·&quot;</span>);<br>Query OK, 0 rows affected, 1 warning (0.00 sec)<br><br>mysql&gt; insert ignore into person values(<span class="hljs-string">&quot;æ&quot;</span>, <span class="hljs-string">&quot;ä¸½&quot;</span>, <span class="hljs-string">&quot;å¥³&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; select * from person;<br>+------------+-----------+--------+<br>| first_name | last_name | gender |<br>+------------+-----------+--------+<br>| æ         | ä¸½        | å¥³     |<br>| æ         | é›·        | ç”·     |<br>+------------+-----------+--------+<br>2 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><h4 id="ç»Ÿè®¡é‡å¤æ•°æ®"><a href="#ç»Ÿè®¡é‡å¤æ•°æ®" class="headerlink" title="ç»Ÿè®¡é‡å¤æ•°æ®"></a>ç»Ÿè®¡é‡å¤æ•°æ®</h4><p>ä»¥ä¸‹æˆ‘ä»¬å°†ç»Ÿè®¡è¡¨ä¸­ first_name å’Œ last_nameçš„é‡å¤è®°å½•æ•°ï¼š</p><ul><li>åˆ›å»ºperson_infoè¡¨ï¼Œå¹¶æ’å…¥3æ¡é‡å¤æ•°æ®</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create table person_info(id int unsigned primary key auto_increment,first_name char(20) not null, last_name char(20) not null, gender char(10)) charset=utf8;<br>Query OK, 0 rows affected (0.29 sec)<br><br>mysql&gt; insert ignore into person_info values(0,<span class="hljs-string">&quot;æ&quot;</span>, <span class="hljs-string">&quot;ä¸½&quot;</span>, <span class="hljs-string">&quot;å¥³&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; insert ignore into person_info values(0,<span class="hljs-string">&quot;æ&quot;</span>, <span class="hljs-string">&quot;ä¸½&quot;</span>, <span class="hljs-string">&quot;å¥³&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; insert ignore into person_info values(0,<span class="hljs-string">&quot;æ&quot;</span>, <span class="hljs-string">&quot;ä¸½&quot;</span>, <span class="hljs-string">&quot;å¥³&quot;</span>);<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; select * from person_info;<br>+----+------------+-----------+--------+<br>| id | first_name | last_name | gender |<br>+----+------------+-----------+--------+<br>|  1 | æ         | ä¸½        | å¥³     |<br>|  2 | æ         | ä¸½        | å¥³     |<br>|  3 | æ         | ä¸½        | å¥³     |<br>+----+------------+-----------+--------+<br>3 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br></code></pre></div></td></tr></table></figure><ul><li>æŸ¥è¯¢é‡å¤æ•°æ®</li></ul><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select count(*) as repetitions,last_name,first_name from person_info group by last_name, first_name having repetitions &gt; 1;<br>+-------------+-----------+------------+<br>| repetitions | last_name | first_name |<br>+-------------+-----------+------------+<br>|           3 | ä¸½        | æ         |<br>+-------------+-----------+------------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>ä»¥ä¸ŠæŸ¥è¯¢å°†è¿”å› person_info è¡¨ä¸­é‡å¤çš„è®°å½•æ•°ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢é‡å¤çš„å€¼ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li>ç¡®å®šå“ªä¸€åˆ—åŒ…å«çš„å€¼å¯èƒ½ä¼šé‡å¤ã€‚</li><li>åœ¨åˆ—é€‰æ‹©åˆ—è¡¨ä½¿ç”¨count(*)åˆ—å‡ºçš„é‚£äº›åˆ—ã€‚</li><li>åœ¨group byå­å¥ä¸­åˆ—å‡ºçš„åˆ—ã€‚</li><li>havingå­å¥è®¾ç½®é‡å¤æ•°å¤§äº1ã€‚</li></ul><h4 id="è¿‡æ»¤é‡å¤æ•°æ®"><a href="#è¿‡æ»¤é‡å¤æ•°æ®" class="headerlink" title="è¿‡æ»¤é‡å¤æ•°æ®"></a>è¿‡æ»¤é‡å¤æ•°æ®</h4><p>å¦‚æœä½ éœ€è¦è¯»å–ä¸é‡å¤çš„æ•°æ®å¯ä»¥åœ¨ select è¯­å¥ä¸­ä½¿ç”¨ distinct å…³é”®å­—æ¥è¿‡æ»¤é‡å¤æ•°æ®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select distinct first_name,last_name from person_info;<br>+------------+-----------+<br>| first_name | last_name |<br>+------------+-----------+<br>| æ         | ä¸½        |<br>+------------+-----------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)<br><br></code></pre></div></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ group by æ¥è¯»å–æ•°æ®è¡¨ä¸­ä¸é‡å¤çš„æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; select first_name, last_name  from person_info group by last_name, first_name;<br>+------------+-----------+<br>| first_name | last_name |<br>+------------+-----------+<br>| æ         | ä¸½        |<br>+------------+-----------+<br>1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.01 sec)<br><br></code></pre></div></td></tr></table></figure><h4 id="åˆ é™¤é‡å¤æ•°æ®"><a href="#åˆ é™¤é‡å¤æ•°æ®" class="headerlink" title="åˆ é™¤é‡å¤æ•°æ®"></a>åˆ é™¤é‡å¤æ•°æ®</h4><p>å¦‚æœä½ æƒ³åˆ é™¤æ•°æ®è¡¨ä¸­çš„é‡å¤æ•°æ®ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„SQLè¯­å¥ï¼š</p><h5 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h5><p>å…ˆåˆ›å»ºä¸´æ—¶è¡¨tab,æ–°è¡¨tabä¸­çš„æ•°æ®æ—¶ä»person_infoè¡¨ä¸­åˆ†ç»„æŸ¥è¯¢å‡ºæ¥çš„</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; create table tmp select last_name, first_name, gender from person_info  group by last_name, first_name, gender;<br>Query OK, 1 row affected (0.01 sec)<br>Records: 1  Duplicates: 0  Warnings: 0<br></code></pre></div></td></tr></table></figure><p>åœ¨è¡¨çš„ç¬¬ä¸€ä½æ·»åŠ ä¸»é”®</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">alter table tmp add column `id` bigint(20) primary key not null auto_increment comment <span class="hljs-string">&#x27;id&#x27;</span> first;<br></code></pre></div></td></tr></table></figure><p>åˆ é™¤åŸè¡¨</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; drop table person_info;<br>Query OK, 0 rows affected (0.01 sec)<br></code></pre></div></td></tr></table></figure><p>é‡å‘½åä¸ºperson_info</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mysql&gt; alter table tmp rename to person_info;<br>Query OK, 0 rows affected (0.01 sec)<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> æ•°æ®åº“ </category>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQLè¯­å¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DjangoåŸºç¡€(å››)-è·¯ç”±</title>
      <link href="2019/05/25/django-4-lu-you/"/>
      <url>2019/05/25/django-4-lu-you/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Django2.0 æ–°å¢äº†åœ¨ urls.py ä¸­ <code>app_name</code> æ¥æŒ‡å®š namespaceã€‚æˆ‘ä»¬ä¹‹å‰é€šè¿‡ <code>reverse</code> å‡½æ•°æ¥åå‘è·å– url</p></blockquote><h2 id="reverse-è¯­æ³•"><a href="#reverse-è¯­æ³•" class="headerlink" title="reverse è¯­æ³•"></a>reverse è¯­æ³•</h2><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">reverse(<span class="hljs-string">&quot;&lt;namespace&gt;:&lt;url-name&gt;&quot;</span>, kwargs=&#123;<span class="hljs-string">&quot;&lt;kwarg&gt;&quot;</span>: <span class="hljs-string">&quot;&lt;val&gt;&quot;</span>&#125;)<br></code></pre></div></td></tr></table></figure><h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><h3 id="è·¯ç”±å®šä¹‰"><a href="#è·¯ç”±å®šä¹‰" class="headerlink" title="è·¯ç”±å®šä¹‰"></a>è·¯ç”±å®šä¹‰</h3><p>åœ¨é¡¹ç›®çš„æ€»è·¯ç”±ä¸­ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šnamespaceæ¥ç¡®å®šåº”ç”¨</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">urlpatterns = [<br>    path(<span class="hljs-string">r&#x27;users/&#x27;</span>, include((<span class="hljs-string">&#x27;users.urls&#x27;</span>, <span class="hljs-string">&#x27;userss&#x27;</span>)))<br>]<br></code></pre></div></td></tr></table></figure><p>æ›´è¿›ä¸€æ­¥,æŠŠ namespace å®šä¹‰åˆ°è¢« include çš„  å­è·¯ç”±<code>users/urls.py</code> ä¸­å»ä½¿ç”¨ app_name å®šä¹‰åç§°ç©ºé—´</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> re_path, path<br><span class="hljs-keyword">from</span> users.views <span class="hljs-keyword">import</span> RegisterView, LoginView, DetailView, IndexView<br><br>app_name = <span class="hljs-string">&#x27;users&#x27;</span><br><br>urlpatterns = [<br>  path(<span class="hljs-string">&#x27;detail/&lt;int:uid&gt;/&#x27;</span>, DetailView.as_view(), name=<span class="hljs-string">&quot;detail&quot;</span>),<br>  path(<span class="hljs-string">&quot;&quot;</span>, IndexView, name=<span class="hljs-string">&quot;index&quot;</span>)<br>]<br></code></pre></div></td></tr></table></figure><h3 id="åå‘è§£æ"><a href="#åå‘è§£æ" class="headerlink" title="åå‘è§£æ"></a>åå‘è§£æ</h3><p>ç°åœ¨æˆ‘ä»¬ä»ç„¶å¯ä»¥ç”¨ reverse å‡½æ•°å’Œæ¨¡æ¿ä¸­çš„ url è·å– URL</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">reverse(<span class="hljs-string">&quot;users:index&quot;</span>)<br>reverse(<span class="hljs-string">&quot;users:detail&quot;</span>, kwargs=&#123;<span class="hljs-string">&quot;uid&quot;</span>: <span class="hljs-number">2020</span>&#125;)<br>&#123;% url <span class="hljs-string">&quot;users:index&quot;</span> %&#125;<br>&#123;% url <span class="hljs-string">&quot;users:detail&quot;</span> uid=<span class="hljs-number">2020</span> %&#125;<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> namespace </tag>
            
            <tag> app_name </tag>
            
            <tag> reverse </tag>
            
            <tag> è·¯ç”± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸è§å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦</title>
      <link href="2019/05/25/suan-fa-shi-jian-fu-za-du-02-chang-jian-han-shu-de-shi-jian-fu-za-du/"/>
      <url>2019/05/25/suan-fa-shi-jian-fu-za-du-02-chang-jian-han-shu-de-shi-jian-fu-za-du/</url>
      
        <content type="html"><![CDATA[<p>å¾ˆå¤šå‡½æ•°éƒ½æœ‰è‡ªå·±çš„å¾ˆå¤šæ–¹æ³•ï¼Œå…¶ä¸­æœ‰äº›æ–¹æ³•çš„åŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ˜¯å…¶å¤æ‚åº¦æœ‰æ—¶å´å¤§ä¸ç›¸åŒ</p><p>æœ¬èŠ‚æˆ‘ä»¬å°†å¼•å…¥ä¸€ä¸ªæ–°æ¨¡å— <code>timeit</code> ï¼Œå…¶åŠŸèƒ½æ˜¯æ¥æµ‹è¯•ä¸€å°æ®µ <code>Python</code> ä»£ç çš„æ‰§è¡Œé€Ÿåº¦ã€‚</p><h3 id="1ã€timeit"><a href="#1ã€timeit" class="headerlink" title="1ã€timeit"></a>1ã€timeit</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">timeit</span>.<span class="hljs-title">Timer</span>(<span class="hljs-params">stmt=<span class="hljs-string">&#x27;pass&#x27;</span>, setup=<span class="hljs-string">&#x27;pass&#x27;</span>,timer=&lt;timer function&gt;</span>)</span><br></code></pre></div></td></tr></table></figure><ul><li><p><code>Timer</code> æ˜¯æµ‹é‡å°æ®µä»£ç æ‰§è¡Œé€Ÿåº¦çš„ç±»</p></li><li><p><code>stmt</code> æ˜¯è¦æµ‹è¯•çš„ä»£ç è¯­å¥ (<code>statment</code>), å­—ç¬¦ä¸²ç±»å‹,</p></li><li><p><code>setup</code> æ˜¯è¿è¡Œä»£ç æ—¶éœ€è¦çš„è®¾ç½® , å­—ç¬¦ä¸²ç±»å‹, å°±æ˜¯ä» <code>__main__</code> å¼•å…¥éœ€è¦çš„æ˜¯çš„æ–¹æ³•å</p></li><li><p><code>timer</code> å‚æ•°æ˜¯ä¸€ä¸ªå®šæ—¶å™¨å‡½æ•°, ä¸å¹³å°æœ‰å…³, ä¸ç”¨å»ç®¡</p></li><li><p><code>timeit.Timer.timeit(numer=1000000)</code>ï¼Œ<code>numer</code>-&gt; æµ‹ç®—æ¬¡æ•°, è¿”å›å¹³å‡è€—æ—¶, ä¸€ä¸ª <code>float</code> ç±»å‹çš„ç§’æ•°</p></li></ul><h4 id="éƒ¨åˆ†æµ‹è¯•ç¤ºä¾‹"><a href="#éƒ¨åˆ†æµ‹è¯•ç¤ºä¾‹" class="headerlink" title="éƒ¨åˆ†æµ‹è¯•ç¤ºä¾‹"></a>éƒ¨åˆ†æµ‹è¯•ç¤ºä¾‹</h4><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526105816-timeit%E6%B5%8B%E8%AF%95%E7%A4%BA%E4%BE%8B%20.png" alt="20190526105816-timeitæµ‹è¯•ç¤ºä¾‹"></p><h4 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h4><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526105825-timeit%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C%20.png" alt="20190526105825-timeitæµ‹è¯•ç»“æœ"></p><h3 id="2ã€list-çš„å†…ç½®å‡½æ•°æ—¶é—´å¤æ‚åº¦"><a href="#2ã€list-çš„å†…ç½®å‡½æ•°æ—¶é—´å¤æ‚åº¦" class="headerlink" title="2ã€list çš„å†…ç½®å‡½æ•°æ—¶é—´å¤æ‚åº¦"></a>2ã€list çš„å†…ç½®å‡½æ•°æ—¶é—´å¤æ‚åº¦</h3><table><thead><tr><th>æ–¹æ³•</th><th>å¤æ‚åº¦</th><th>ç®€ä»‹</th></tr></thead><tbody><tr><td>index[x]</td><td>O(1)</td><td>ç´¢å¼•</td></tr><tr><td>index assignment</td><td>O(1)</td><td>ç´¢å¼•èµ‹å€¼</td></tr><tr><td>append</td><td>O(1)</td><td>å°¾éƒ¨è¿½åŠ </td></tr><tr><td>pop()</td><td>O(1)</td><td>å°¾éƒ¨å¼¹å‡º</td></tr><tr><td>pop(i)</td><td>O(n)</td><td>æŒ‡å®šä½ç½®å¼¹å‡º n åˆ—è¡¨é•¿åº¦, æœ€åæ—¶é—´å¤æ‚åº¦</td></tr><tr><td>insert(i, item)</td><td>O(n)</td><td>æŒ‡å®šä½ç½®æ·»åŠ </td></tr><tr><td>del operator</td><td>O(n)</td><td>åˆ é™¤, ä»£è¡¨ä¸€ä¸ªä¸€ä¸ªå…ƒç´ å»æ¸…ç©º</td></tr><tr><td>iteration</td><td>O(n)</td><td>è¿­ä»£</td></tr><tr><td>contains(in)</td><td>O(n)</td><td>çœ‹è°æ˜¯å¦åœ¨åˆ—è¡¨ä¸­, éœ€è¦éå†</td></tr><tr><td>get slice[x:y]</td><td>O(k)</td><td>å–åˆ‡ç‰‡, ä» x å–åˆ° y, ä¸€æ¬¡å®šä½åˆ° x, ç„¶åå–åˆ° y ,x å’Œ y ä¹‹é—´æœ‰å¤šå°‘å°±æ˜¯ k</td></tr><tr><td>del slice</td><td>O(n)</td><td>åˆ é™¤åˆ‡ç‰‡ åˆ é™¤ä½ç½®ä¹‹å, åé¢çš„å…ƒç´ éƒ½éœ€è¦å¾€å‰ç§»åŠ¨</td></tr><tr><td>set slice</td><td>O(k)</td><td>è®¾ç½®åˆ‡ç‰‡, li[0:3] = [1, 2, 3, 4]k æ˜¯è¡¥å……çš„ä¸œè¥¿æ•°é‡</td></tr><tr><td>reverse</td><td>O(n)</td><td>ç½®è¿”</td></tr><tr><td>concatenate</td><td>O(k)</td><td>ä»£è¡¨ä½¿ç”¨çš„ +, æŠŠä¸¤ä¸ªåˆ—è¡¨åŠ åˆ°ä¸€èµ·, k æ˜¯ç¬¬äºŒä¸ªåˆ—è¡¨ä¸­çš„å…ƒç´ </td></tr><tr><td>sort</td><td>O(nlogn)</td><td>æ’åº</td></tr><tr><td>multiply</td><td>O(nk)</td><td>ç›¸ä¹˜ li=[1, 2] -&gt; n li * 10 -&gt; k</td></tr></tbody></table><h3 id="3ã€dict-çš„å†…ç½®å‡½æ•°æ—¶é—´å¤æ‚åº¦"><a href="#3ã€dict-çš„å†…ç½®å‡½æ•°æ—¶é—´å¤æ‚åº¦" class="headerlink" title="3ã€dict çš„å†…ç½®å‡½æ•°æ—¶é—´å¤æ‚åº¦"></a>3ã€dict çš„å†…ç½®å‡½æ•°æ—¶é—´å¤æ‚åº¦</h3><table><thead><tr><th>æ–¹æ³•</th><th>å¤æ‚åº¦</th><th>ç®€ä»‹</th></tr></thead><tbody><tr><td>copy</td><td>O(n)</td><td>å¤åˆ¶</td></tr><tr><td>get item</td><td>O(1)</td><td>å–</td></tr><tr><td>set item</td><td>O(1)</td><td>è®¾ç½®</td></tr><tr><td>delete item</td><td>O(1)</td><td>åˆ é™¤é”®</td></tr><tr><td>contains(in)</td><td>O(1)</td><td>åŒ…å«</td></tr><tr><td>iteration</td><td>O(n)</td><td>è¿­ä»£</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> ç®—æ³• </category>
          
          <category> æ—¶é—´å¤æ‚åº¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¶é—´å¤æ‚åº¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oæ ‡è®°æ³•ä¸å¸¸è§æ—¶é—´å¤æ‚åº¦</title>
      <link href="2019/05/25/suan-fa-shi-jian-fu-za-du-01-o-biao-ji-fa-yu-chang-jian-shi-jian-fu-za-du/"/>
      <url>2019/05/25/suan-fa-shi-jian-fu-za-du-01-o-biao-ji-fa-yu-chang-jian-shi-jian-fu-za-du/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç®—æ³• : å†…åŠŸå¿ƒæ³•, æ˜¯è§£å†³é—®é¢˜çš„ä¸€ç§æ€æƒ³</p></blockquote><h3 id="1ã€æ—¶é—´å¤æ‚åº¦-T-n"><a href="#1ã€æ—¶é—´å¤æ‚åº¦-T-n" class="headerlink" title="1ã€æ—¶é—´å¤æ‚åº¦ $T(n)$"></a>1ã€æ—¶é—´å¤æ‚åº¦ $T(n)$</h3><p>ç”±äºæ¯å°æœºå™¨çš„æ€§èƒ½æœ‰æ‰€å·®åˆ«ï¼Œæ‰€æœ‰å…¶æ‰§è¡Œç›¸åŒä»£ç çš„æ—¶é—´ä¹Ÿé•¿çŸ­ä¸ä¸€ï¼Œæ•…è€Œæ¨å‡ºä¸€ç§è®¡é‡æ–¹å¼ï¼Œç»Ÿè®¡ä»£ç æ‰§è¡ŒåŸºæœ¬è¿ç®—ï¼ˆ<code>å‡½æ•°è°ƒç”¨éœ€è¦çœ‹å…¶æºç çš„åŸºæœ¬è¿ç®—</code>ï¼‰çš„æ•°é‡ï¼ˆ<code>n</code>) æ¥ç¡®å®šä¸€ä¸ªç®—æ³•çš„ä¼˜åŠ£ï¼Œå…¶ä¸­åŸºæœ¬è¿ç®—çš„<strong>å¾ªç¯æŒ‰ä¹˜æ³•è®¡ç®—ï¼Œé¡ºåºç»“æ„æŒ‰åŠ æ³•è®¡ç®—ï¼Œåˆ†æ”¯ç»“æ„å–æœ€å¤§å€¼</strong>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>): <br>    <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>):<br>        <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>):<br>            <span class="hljs-keyword">if</span> a+b+c == <span class="hljs-number">1000</span> <span class="hljs-keyword">and</span> a**<span class="hljs-number">2</span> + b**<span class="hljs-number">2</span> + c**<span class="hljs-number">2</span>:<br>                print(<span class="hljs-string">&#x27;a,b,c,: &#123;&#125;, &#123;&#125;, &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(a,b,c))<br></code></pre></div></td></tr></table></figure><p>ä¸Šè¿°ä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¸º<br>$T = 1000 * 1000 * 1000 * 2$<br>é‚£ä¹ˆå¦‚æœå°†ä¸Šè¿°ä»£ç ä¸­çš„ 1000 æ”¹ä¸º 2000ï¼Œ åˆ™<br>$T = 2000 * 2000 * 2000 * 2$<br>ç”±äºä¸Šè¿°åŒæ ·çš„ä»£ç ç”±äºä¸åŒçš„å‚æ•°çš„ T éƒ½ä¸åŒï¼Œæˆ‘ä»¬ä¾¿å°†å…¶ç»Ÿä¸€æˆ <strong>N</strong>ï¼Œè¿™æ ·ä¸Šè¿°ä»£ç çš„æ—¶é—´å¤æ‚åº¦å¯ä»¥è¡¨ç¤ºæˆï¼š<br>$T = N * N * N * 2$<br>åŒæ ·çš„æˆ‘ä»¬æŠ“ä½å…¶ä¸»è¦ â€œ<strong>çŸ›ç›¾</strong>â€ ï¼Œè§‚å…¶å¤§ï¼Œå†å°†å…¶ç®€åŒ–æˆ<br>$T= N^3$<br>è¿™æ ·åŒä¸€æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¾¿ä¸ä¼šæ ¹æ®å…¶å‚æ•°è€Œå‘ç”Ÿæ”¹å˜äº†ã€‚</p><h3 id="2ã€å¤§-O-æ ‡è®°æ³•-O"><a href="#2ã€å¤§-O-æ ‡è®°æ³•-O" class="headerlink" title="2ã€å¤§ $O$ æ ‡è®°æ³• $O()$"></a>2ã€å¤§ $O$ æ ‡è®°æ³• $O()$</h3><p>å…¶å®å’Œæ±‚æé™çš„åŸç†ç›¸ä¼¼ï¼ŒæŠ“ä½é—®é¢˜çš„ä¸»è¦çŸ›ç›¾ï¼Œå¿½ç•¥é‚£äº›ç»†ææœ«èŠ‚ï¼Œä¹Ÿå°±åƒå‰é¢çš„ $T$çš„æœ€åçš„æ ·å­ã€‚</p><h3 id="3ã€æ—¶é—´å¤æ‚åº¦çš„å‡ æ¡åŸºæœ¬è§„åˆ™"><a href="#3ã€æ—¶é—´å¤æ‚åº¦çš„å‡ æ¡åŸºæœ¬è§„åˆ™" class="headerlink" title="3ã€æ—¶é—´å¤æ‚åº¦çš„å‡ æ¡åŸºæœ¬è§„åˆ™"></a>3ã€æ—¶é—´å¤æ‚åº¦çš„å‡ æ¡åŸºæœ¬è§„åˆ™</h3><ol><li><p>åŸºæœ¬æ­¥éª¤: å³åªæœ‰å¸¸æ•°é¡¹, ç®—ä½œ $O(1)$</p></li><li><p>åŸºæœ¬ç»“æ„é¡ºåº, æ¡ä»¶, å¾ªç¯</p><ul><li><p>é¡ºåºç»“æ„: æŒ‰åŠ æ³•è¿ç®—</p></li><li><p>å¾ªç¯ç»“æ„: ä¹˜æ³•</p></li><li><p>åˆ†æ”¯ç»“æ„: å–æœ€å¤§å€¼</p></li></ul></li><li><p>åˆ¤æ–­ä¸€ä¸ªç®—æ³•æ•ˆç‡, å¾€å¾€åªéœ€è¦å…³æ³¨æ“ä½œæ•°é‡çš„æœ€é«˜æ¬¡é¡¹, å…¶ä»–æ¬¡è¦çš„å¿½ç•¥</p></li><li><p>æ²¡ç‰¹æ®Šè¯´æ˜, åˆ†æçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯<strong>æœ€åæ—¶é—´å¤æ‚åº¦</strong></p></li></ol><h3 id="4ã€å¸¸è§çš„æ—¶é—´å¤æ‚åº¦"><a href="#4ã€å¸¸è§çš„æ—¶é—´å¤æ‚åº¦" class="headerlink" title="4ã€å¸¸è§çš„æ—¶é—´å¤æ‚åº¦"></a>4ã€å¸¸è§çš„æ—¶é—´å¤æ‚åº¦</h3><table><thead><tr><th>$T$</th><th>$O$</th><th>åç§°</th></tr></thead><tbody><tr><td>$12$</td><td>$O(1)$</td><td>å¸¸æ•°é˜¶</td></tr><tr><td>$2n+3$</td><td>$O(n)$</td><td>çº¿æ€§é˜¶</td></tr><tr><td>$3n^2+2n+1$</td><td>$O(n^2)$</td><td>å¹³æ–¹é˜¶</td></tr><tr><td>$5log2n+20$</td><td>$O(log(n))$</td><td>å¯¹æ•°é˜¶</td></tr><tr><td>$2n+3nlog2n+19$</td><td>$O(nlog(n))$</td><td>$nlog(n)$ é˜¶</td></tr><tr><td>$6n^3+2n^2+3n+4$</td><td>$O(n^3)$</td><td>ç«‹æ–¹é˜¶</td></tr><tr><td>$2^n$</td><td>$O(2^n)$</td><td>æŒ‡æ•°é˜¶</td></tr></tbody></table><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526105531-%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E6%9B%B2%E7%BA%BF%E5%9B%BE%20.png" alt="20190526105531-æ—¶é—´å¤æ‚åº¦æ›²çº¿å›¾"></p><p>$$<br>O(1) &lt; O(log(n)) &lt; O(n) &lt; O(nlog(n)) &lt; O(n^2)&lt; O(n ^ 2log(n)) &lt; O(n^3) &lt; O(2^n) &lt; O(n!) &lt; O(n^n)<br>$$</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> ç®—æ³• </category>
          
          <category> æ—¶é—´å¤æ‚åº¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¶é—´å¤æ‚åº¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win10 python2å’Œpython3å…±å­˜é—®é¢˜</title>
      <link href="2019/05/25/gong-ju-win10-pyhton2-he-3-gong-cun/"/>
      <url>2019/05/25/gong-ju-win10-pyhton2-he-3-gong-cun/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>ç‰¹åˆ«è¯´æ˜</strong>ï¼Œæœ¬æ–‡æ˜¯åœ¨ <strong>Windows64 ä½ç³»ç»Ÿ</strong>ä¸‹è¿›è¡Œçš„ï¼Œ32 ä½ç³»ç»Ÿè¯·ä¸‹è½½ç›¸åº”ç‰ˆæœ¬çš„å®‰è£…åŒ…ï¼Œå®‰è£…æ–¹æ³•ç±»ä¼¼ã€‚</p></blockquote><h2 id="ä¸‹è½½pythonå®‰è£…åŒ…"><a href="#ä¸‹è½½pythonå®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½pythonå®‰è£…åŒ…"></a>ä¸‹è½½pythonå®‰è£…åŒ…</h2><p>è¿›å…¥ python å®˜ç½‘ï¼Œé“¾æ¥ <a href="https://www.python.org/">https://www.python.org/</a></p><p>é€‰æ‹© Downloadsâ€”&gt;Windowsï¼Œç‚¹å‡»è¿›å…¥å°±å¯ä»¥çœ‹åˆ°å¯»æ‰¾æƒ³è¦çš„ python ç‰ˆæœ¬</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526103726-win10_download_py%20.png" alt="win10_download_py"></p><p>æœ¬æ–‡é€‰æ‹©çš„æ˜¯ï¼š</p><p>Python3.5.2, ç‚¹å‡»åé¢é“¾æ¥å¯ç›´æ¥ä¸‹è½½ï¼Œ<a href="https://www.python.org/ftp/python/3.5.2/python-3.5.2rc1-amd64.exe">https://www.python.org/ftp/python/3.5.2/python-3.5.2rc1-amd64.exe</a></p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526103746-win10_download_py3%20.png" alt="20190526103746-win10_download_py3"></p><p>Python2.7.9, ç‚¹å‡»åé¢é“¾æ¥å¯ç›´æ¥ä¸‹è½½ï¼Œ<a href="https://www.python.org/ftp/python/2.7.9/python-2.7.9.amd64.msi">https://www.python.org/ftp/python/2.7.9/python-2.7.9.amd64.msi</a></p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526103737-win10_download_py2%20.png" alt="20190526103737-win10_download_py2"></p><h2 id="python3-å®‰è£…"><a href="#python3-å®‰è£…" class="headerlink" title="python3 å®‰è£…"></a>python3 å®‰è£…</h2><blockquote><p><strong>è¯´æ˜:</strong> æœ¬æ–‡å…ˆå®‰è£… python3ï¼Œç„¶åå®‰è£… python2</p></blockquote><p>é¦–å…ˆé€‰æ‹©å®‰è£…ç›®å½•ï¼Œæœ¬æ–‡å®‰è£…è·¯å¾„ä¸º D:\Python\python35ï¼Œç„¶åç‚¹å‡»ä¸‹è½½å¥½çš„ python3 è½¯ä»¶åŒ…è¿›è¡Œå®‰è£…ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li><p>åœ¨ä¸‹å›¾çº¢è‰²æ ‡è®°çš„åœ°æ–¹ Add Python3.5 to PATH å‰å‹¾é€‰ï¼Œå¯ä»¥ç›´æ¥å°† python3 æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œç„¶ååœ¨ Customize installation ä¸­è‡ªå®šä¹‰å®‰è£…è·¯å¾„ã€‚<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526104125-py3_%E5%AE%89%E8%A3%85_01%20.png" alt="20190526104125-py3_å®‰è£…_01"></p></li><li><p>ç›´æ¥ next å³å¯<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526104133-py3_%E5%AE%89%E8%A3%85_02%20.png" alt="20190526104133-py3_å®‰è£…_02"></p></li><li><p>ä¸‹å›¾ä¸­ Advanced Options ä¸­æ²¡æœ‰é»˜è®¤å‹¾é€‰çš„æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œå‹¾é€‰ï¼Œé»„è‰²æ ‡è®°ä¸º VS 2015 åŠå…¶ä»¥åç‰ˆæœ¬éœ€è¦çš„ï¼Œå¦‚æœä½ ä»¥åæ‰“ç®—åœ¨ VS 2015 ä¸­é…ç½® python ç¯å¢ƒè¯·å‹¾é€‰æ­¤é¡¹ï¼Œç‚¹å‡» Browse é€‰æ‹©å®‰è£…ç›®å½•ï¼Œç„¶åç‚¹å‡» Install è¿›è¡Œå®‰è£…ã€‚<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526104141-py3_%E5%AE%89%E8%A3%85_03%20.png" alt="20190526104141-py3_å®‰è£…_03"></p></li><li><p>ç­‰å¾…å¦‚ä¸‹å®‰è£…è¿‡ç¨‹<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526104253-py3_%E5%AE%89%E8%A3%85_04%20.png" alt="20190526104253-py3_å®‰è£…_04"></p></li><li><p>å®‰è£…æˆåŠŸ<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526104257-py3_%E5%AE%89%E8%A3%85_05%20.png" alt="20190526104257-py3_å®‰è£…_05"></p></li><li><p>ç‚¹å‡»å…³é—­ï¼ŒæŸ¥çœ‹ python3 å®‰è£…æƒ…å†µï¼ŒæŒ‰ â€œWin + Râ€ å¿«æ·é”®ï¼Œåœ¨æ‰“å¼€çš„ â€œè¿è¡Œâ€ å¯¹è¯æ¡†ä¸­ï¼Œè¾“å…¥ â€œcmdâ€ æŒ‰å›è½¦ï¼Œè¿›å…¥å¦‚ä¸‹ç•Œé¢ï¼Œè¾“å…¥ python æŸ¥çœ‹ python3 å®‰è£…æƒ…å†µï¼Œæ˜¾ç¤º python 3.5.2 çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œåˆ™å®‰è£…æˆåŠŸï¼Œå¯ä»¥è¾“å…¥è¯­å¥ print(1 + 1)è¿›è¡Œæµ‹è¯•ã€‚<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526104443-py3_%E5%AE%89%E8%A3%85_06%20.png" alt="20190526104443-py3_å®‰è£…_06"></p></li></ol><h2 id="python2-å®‰è£…"><a href="#python2-å®‰è£…" class="headerlink" title="python2 å®‰è£…"></a>python2 å®‰è£…</h2><ol><li><p>ç‚¹å‡» python2 å®‰è£…åŒ…ï¼Œç‚¹å‡»è¿è¡Œï¼Œnextï¼Œé€‰æ‹©å®‰è£…ç›®å½•ï¼Œæœ¬æ–‡å®‰è£…è·¯å¾„ä¸º D:\Python\python27ï¼Œç„¶å next<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526104627-py2_%E5%AE%89%E8%A3%85_01%20.png" alt="20190526104627-py2_å®‰è£…_01"></p></li><li><p>ä¸‹å›¾é»„è‰²åœˆå‡ºçš„éƒ¨åˆ†ï¼Œæ˜¾ç¤ºä¸èƒ½å¤Ÿæ·»åŠ è·¯å¾„åˆ°ç³»ç»Ÿå˜é‡ï¼Œä¸èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ python å‘½ä»¤æ²¡æœ‰å…³ç³»ï¼Œå…ˆç‚¹å‡» next è¿›è¡Œå®‰è£…ï¼Œåé¢ä¸“é—¨è§£å†³ã€‚<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526104634-py2_%E5%AE%89%E8%A3%85_02%20.png" alt="20190526104634-py2_å®‰è£…_02"><br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526104643-py2_%E5%AE%89%E8%A3%85_03%20.png" alt="20190526104643-py2_å®‰è£…_03"></p></li><li><p>ç‚¹å‡» finish å®Œæˆå®‰è£…ã€‚<br>è‡³æ­¤ï¼Œpython2 å’Œ python3 å®‰è£…å®Œæ¯•ã€‚</p></li></ol><blockquote><p>ç‰¹åˆ«è¯´æ˜ï¼šæ­¤æ—¶è¿è¡Œ â€œcmdâ€ å‘½ä»¤è¿›å…¥ DOS å‘½ä»¤æç¤ºæ¡†ï¼Œè¾“å…¥ python ä»ç„¶æ˜¾ç¤º python3 ç‰ˆæœ¬ã€‚</p></blockquote><h2 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h2><p>æ‰“å¼€ï¼Œæ§åˆ¶é¢æ¿ \ ç³»ç»Ÿå’Œå®‰å…¨ \ ç³»ç»Ÿï¼Œé€‰æ‹©é«˜çº§ç³»ç»Ÿè®¾ç½®ï¼Œç¯å¢ƒå˜é‡ï¼Œé€‰æ‹© Pathï¼Œç‚¹å‡»ç¼–è¾‘ï¼Œæ–°å»ºï¼Œåˆ†åˆ«æ·»åŠ  D:\Python\python27 å’Œ D:\Python\python27\Scripts åˆ°ç¯å¢ƒå˜é‡ã€‚</p><blockquote><p><strong>æ³¨æ„ï¼š</strong> python3 å®‰è£…æ—¶å¯ä»¥é€‰æ‹©è‡ªåŠ¨æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œå¦‚æœªé€‰æ‹©ï¼Œæ–¹æ³•å’Œ python2 æ·»åŠ è¿‡ç¨‹ç›¸åŒã€‚</p></blockquote><h2 id="é‡å‘½å-python-exe"><a href="#é‡å‘½å-python-exe" class="headerlink" title="é‡å‘½å python.exe"></a>é‡å‘½å python.exe</h2><ol><li><p>æ‰¾åˆ° python2 å’Œ python3 çš„å®‰è£…ç›®å½•ï¼Œä¿®æ”¹ python2.7.9 å’Œ python3.5.2 ä¸­ python.exe å’Œ pythonw.exe çš„åç§°ä¸º python2.exeã€pythonw2.exe å’Œ python3.exeã€pythonw3.exeã€‚</p></li><li><p>ç„¶ååœ¨è¿è¡Œ cmd å‘½ä»¤ï¼Œè¾“å…¥ python2 å³å¯è¿è¡Œ python2.7.9 ç‰ˆæœ¬<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526104936-py2_test%20.png" alt="20190526104936-py2_test"></p></li><li><p>è¾“å…¥ python3 å³å¯è¿è¡Œ python3.5.2 ç‰ˆæœ¬<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526104944-py3_test%20.png" alt="20190526104944-py3_test"></p></li><li><p>è‡³æ­¤ï¼Œpython2 å’Œ python3 å®‰è£…å®Œæ¯•ã€‚</p></li></ol><h2 id="pip2-å’Œ-pip3-è®¾ç½®"><a href="#pip2-å’Œ-pip3-è®¾ç½®" class="headerlink" title="pip2 å’Œ pip3 è®¾ç½®"></a>pip2 å’Œ pip3 è®¾ç½®</h2><ol><li><p>Python å®‰è£…åŒ…éœ€è¦ç”¨åˆ°åŒ…ç®¡ç†å·¥å…· pipï¼Œä½†æ˜¯å½“åŒæ—¶å®‰è£… python2 å’Œ python3 çš„æ—¶å€™ï¼Œpip åªæ˜¯å…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬ï¼Œä»¥ä¸‹å°†æä¾›ä¸€ä¸ªä¿®æ”¹æ–¹å¼ï¼Œå³é‡æ–°å®‰è£…ä¸¤ä¸ªç‰ˆæœ¬çš„ pipï¼Œä½¿å¾—ä¸¤ä¸ª python ç‰ˆæœ¬çš„ pip èƒ½å¤Ÿå…±å­˜ã€‚<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526105211-pip3%E5%AE%89%E8%A3%85%20.png" alt="20190526105211-pip3å®‰è£…"></p></li><li><p>åœ¨ DOS å‘½ä»¤æ¡†è¾“å…¥å‘½ä»¤ï¼Œpython2-m pip install â€“upgrade pip â€“force-reinstallï¼Œæ˜¾ç¤ºé‡æ–°å®‰è£…æˆåŠŸã€‚<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526105206-pip2%E5%AE%89%E8%A3%85%20.png" alt="20190526105206-pip2å®‰è£…"></p></li><li><p>ç°åœ¨å¯ä»¥é€šè¿‡ pip2 -V å’Œ pip3-V æŸ¥çœ‹ä¸¤ä¸ªç‰ˆæœ¬çš„ pip ä¿¡æ¯ï¼Œä»¥ååªéœ€è¿è¡Œ pip2install XXX å’Œ pip3 install XXX å³å¯å®‰è£…å„è‡ªçš„ python åŒ…ã€‚<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526105218-pip%E5%AE%89%E8%A3%85%E5%8C%85%20.png" alt="20190526105218-pipå®‰è£…åŒ…"></p></li><li><p>è‡³æ­¤ï¼Œpip2 å’Œ pip3 ä¿®æ”¹æˆåŠŸã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå†…ç½®å‡½æ•°</title>
      <link href="2019/05/25/python-han-shu-nei-zhi-han-shu/"/>
      <url>2019/05/25/python-han-shu-nei-zhi-han-shu/</url>
      
        <content type="html"><![CDATA[<h3 id="pythonå†…ç½®å‡½æ•°"><a href="#pythonå†…ç½®å‡½æ•°" class="headerlink" title="pythonå†…ç½®å‡½æ•°"></a>pythonå†…ç½®å‡½æ•°</h3><blockquote><p>Python å†…ç½®å‡½æ•°å°±æ˜¯ python æ ‡å‡†åº“é‡Œï¼ˆè¯­è¨€è‡ªèº«æºå¸¦çš„ï¼‰å‡½æ•°ï¼ˆå…¬å…±å‡½æ•°ï¼‰ã€‚</p></blockquote><p>é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥å°±æ¥è°ˆä¸€è°ˆ python é‡Œçš„å†…ç½®å‡½æ•°</p><h4 id="1ã€abs"><a href="#1ã€abs" class="headerlink" title="1ã€abs()"></a>1ã€<code>abs()</code></h4><blockquote><p>æ­¤å‡½æ•°è¿”å›æ•°å­—çš„ç»å¯¹å€¼ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">a = <span class="hljs-number">5</span><br>b = -<span class="hljs-number">10</span><br>print(<span class="hljs-built_in">abs</span>(a))  <span class="hljs-comment">#è¾“å‡º3</span><br>print(<span class="hljs-built_in">abs</span>(b))  <span class="hljs-comment">#è¾“å‡º5</span><br></code></pre></div></td></tr></table></figure><h4 id="2ã€all"><a href="#2ã€all" class="headerlink" title="2ã€all()"></a>2ã€<code>all()</code></h4><blockquote><p>æ­¤å‡½æ•°ç”¨äºåˆ¤æ–­ç»™å®šçš„å¯è¿­ä»£å‚æ•° <code>iterable</code> ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ä¸ä¸º <code>0</code>ã€éƒ½ä¸ä¸º <code>False</code> æˆ–è€… <code>iterable</code> éƒ½ ä¸ºç©º,å¦‚æœæ˜¯è¿”å› <code>True</code>, å¦åˆ™è¿”å› <code>False</code>ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">print(<span class="hljs-built_in">all</span>([<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>]))  <span class="hljs-comment"># True</span><br>print(<span class="hljs-built_in">all</span>([<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>]))   <span class="hljs-comment"># False</span><br>print(<span class="hljs-built_in">all</span>([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>,<span class="hljs-number">2</span>, <span class="hljs-number">3</span>]))          <span class="hljs-comment"># False</span><br>print(<span class="hljs-built_in">all</span>((<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>)))   <span class="hljs-comment"># False</span><br>print(<span class="hljs-built_in">all</span>((<span class="hljs-number">0</span>, <span class="hljs-number">1</span>,<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)))          <span class="hljs-comment"># False</span><br>print(<span class="hljs-built_in">all</span>([]))  <span class="hljs-comment"># True</span><br>print(<span class="hljs-built_in">all</span>(()))  <span class="hljs-comment"># True</span><br></code></pre></div></td></tr></table></figure><h4 id="3ã€any"><a href="#3ã€any" class="headerlink" title="3ã€any()"></a>3ã€<code>any()</code></h4><blockquote><p>å‡½æ•°ç”¨äºåˆ¤æ–­ç»™å®šçš„å¯è¿­ä»£å‚æ•° <code>iterable</code> æ˜¯å¦å…¨éƒ¨ä¸ºç©ºå¯¹è±¡,å¦‚æœéƒ½ä¸ºç©ºã€éƒ½ä¸º 0ã€æˆ–è€…éƒ½ä¸º <code>false</code>ï¼Œåˆ™è¿”å› <code>False</code>,å¦‚æœä¸éƒ½ä¸ºç©ºã€ä¸éƒ½ä¸º <code>0</code>ã€ä¸éƒ½ä¸º <code>false</code>ï¼Œåˆ™è¿”å› <code>True</code>ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">print(<span class="hljs-built_in">any</span>([<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>]))  <span class="hljs-comment"># True</span><br>print(<span class="hljs-built_in">any</span>([<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>]))   <span class="hljs-comment"># True</span><br>print(<span class="hljs-built_in">any</span>([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>,<span class="hljs-number">2</span>, <span class="hljs-number">3</span>]))          <span class="hljs-comment"># True</span><br>print(<span class="hljs-built_in">any</span>((<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>)))   <span class="hljs-comment"># True</span><br>print(<span class="hljs-built_in">any</span>((<span class="hljs-number">0</span>, <span class="hljs-number">1</span>,<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)))          <span class="hljs-comment"># True</span><br>print(<span class="hljs-built_in">any</span>([]))  <span class="hljs-comment"># False</span><br>print(<span class="hljs-built_in">any</span>(()))  <span class="hljs-comment"># False</span><br></code></pre></div></td></tr></table></figure><h4 id="4ã€bin"><a href="#4ã€bin" class="headerlink" title="4ã€bin()"></a>4ã€<code>bin()</code></h4><blockquote><p>è¿”å›ä¸€ä¸ªæ•´æ•° <code>int</code> æˆ–è€…é•¿æ•´æ•° <code>long int</code> çš„äºŒè¿›åˆ¶è¡¨ç¤ºã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">print(<span class="hljs-built_in">bin</span>(<span class="hljs-number">10</span>))  <span class="hljs-comment">#0b1010</span><br>print(<span class="hljs-built_in">bin</span>(<span class="hljs-number">20</span>))  <span class="hljs-comment">#0b10100</span><br></code></pre></div></td></tr></table></figure><h4 id="5ã€bool"><a href="#5ã€bool" class="headerlink" title="5ã€bool()"></a>5ã€<code>bool()</code></h4><blockquote><p>å‡½æ•°ç”¨äºå°†ç»™å®šå‚æ•°è½¬æ¢ä¸ºå¸ƒå°”ç±»å‹ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°ï¼Œè¿”å› <code>False</code>ã€‚</p></blockquote><ul><li><p>ä¼ å…¥å¸ƒå°”ç±»å‹æ—¶ï¼ŒæŒ‰åŸå€¼è¿”å›</p></li><li><p>å‚æ•°å¦‚æœç¼ºçœï¼Œåˆ™è¿”å› <code>False</code></p></li><li><p>ä¼ å…¥å­—ç¬¦ä¸²æ—¶ï¼Œç©ºå­—ç¬¦ä¸²è¿”å› <code>False</code>ï¼Œå¦åˆ™è¿”å› <code>True</code></p></li><li><p>ä¼ å…¥æ•°å€¼æ—¶ï¼Œ0 å€¼è¿”å› <code>False</code>ï¼Œå¦åˆ™è¿”å› <code>True</code></p></li><li><p>ä¼ å…¥å…ƒç»„ã€åˆ—è¡¨ã€å­—å…¸ç­‰å¯¹è±¡æ—¶ï¼Œå…ƒç´ ä¸ªæ•°ä¸ºç©ºè¿”å› <code>False</code>ï¼Œå¦åˆ™è¿”å› <code>True</code>.</p></li></ul><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">print(<span class="hljs-built_in">bool</span>())  <span class="hljs-comment">#False</span><br>print(<span class="hljs-built_in">bool</span>(<span class="hljs-literal">True</span>))  <span class="hljs-comment">#True</span><br>print(<span class="hljs-built_in">bool</span>(<span class="hljs-string">&quot;&quot;</span>))  <span class="hljs-comment">#False</span><br>print(<span class="hljs-built_in">bool</span>(<span class="hljs-string">&quot;123&quot;</span>))  <span class="hljs-comment">#True</span><br>print(<span class="hljs-built_in">bool</span>(<span class="hljs-number">0</span>))  <span class="hljs-comment">#False</span><br>print(<span class="hljs-built_in">bool</span>(<span class="hljs-number">1</span>))  <span class="hljs-comment">#True</span><br>print(<span class="hljs-built_in">bool</span>([])) <span class="hljs-comment">#False  è‹¥å…ƒç¥–å’Œå­—å…¸ä¸ºç©ºæ—¶ ä¹Ÿä¸ºFalse ï¼Œä¸ä¸ºç©º åˆ™ä¸ºTrue</span><br></code></pre></div></td></tr></table></figure><h4 id="6ã€chr"><a href="#6ã€chr" class="headerlink" title="6ã€chr()"></a>6ã€<code>chr()</code></h4><blockquote><p>ç”¨ä¸€ä¸ªèŒƒå›´åœ¨ <code>range(256)</code>å†…çš„ï¼ˆå°±æ˜¯ <code>0ï½255</code>ï¼‰æ•´æ•°ä½œå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹åº”çš„å­—ç¬¦ã€‚(<strong>åªèƒ½è¾“å…¥æ•°å­—</strong>)</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">print(<span class="hljs-built_in">chr</span>(<span class="hljs-number">65</span>))   <span class="hljs-comment">#A</span><br>print(<span class="hljs-built_in">chr</span>(<span class="hljs-number">97</span>))   <span class="hljs-comment">#a</span><br>print(<span class="hljs-built_in">chr</span>(<span class="hljs-number">100</span>))  <span class="hljs-comment">#d</span><br></code></pre></div></td></tr></table></figure><h4 id="7ã€cmp-x-y"><a href="#7ã€cmp-x-y" class="headerlink" title="7ã€cmp(x,y)"></a>7ã€<code>cmp(x,y)</code></h4><blockquote><p>å‡½æ•°ç”¨äºæ¯”è¾ƒ 2 ä¸ªå¯¹è±¡ï¼Œå¦‚æœ<code>x &lt;y</code>è¿”å›<code>-1</code>, å¦‚æœ <code>x == y</code> è¿”å› <code>0</code>, å¦‚æœ <code>x&gt; y</code>è¿”å› 1ã€‚ï¼ˆ<code>python3</code> å·²ç»åˆ é™¤äº†ï¼‰</p></blockquote><h4 id="8ã€compile"><a href="#8ã€compile" class="headerlink" title="8ã€compile()"></a>8ã€<code>compile()</code></h4><blockquote><p> å‡½æ•°å°†ä¸€ä¸ªå­—ç¬¦ä¸²ç¼–è¯‘ä¸ºå­—èŠ‚ä»£ç ã€‚è¯­æ³•ï¼š<code>compile(source, filename, mode[, flags[, dont_inherit]])</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br>pattern=re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">&#x27;[a-zA-Z]&#x27;</span>)<br>result=pattern.findall(<span class="hljs-string">&#x27;as3SiOPdj#@23awe&#x27;</span>)<br>print(result)<br></code></pre></div></td></tr></table></figure><h4 id="9ã€complex-real-imag"><a href="#9ã€complex-real-imag" class="headerlink" title="9ã€complex(real,imag)"></a>9ã€<code>complex(real,imag)</code></h4><blockquote><p>å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªå€¼ä¸º <code>real + imag * j</code> çš„å¤æ•°æˆ–è€…è½¬åŒ–ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•°ä¸ºå¤æ•°ã€‚å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™ä¸éœ€è¦æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">print(<span class="hljs-built_in">complex</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))  <span class="hljs-comment">#(1 + 2j)</span><br>print(<span class="hljs-built_in">complex</span>(<span class="hljs-number">1</span>))  <span class="hljs-comment">#(1 + 0j)</span><br>print(<span class="hljs-built_in">complex</span>(<span class="hljs-string">&quot;3&quot;</span>)) <span class="hljs-comment">#(3+0j)</span><br></code></pre></div></td></tr></table></figure><h4 id="10ã€dict-kwarg"><a href="#10ã€dict-kwarg" class="headerlink" title="10ã€dict(**kwarg)"></a>10ã€<code>dict(**kwarg)</code></h4><blockquote><p>è¿”å›ä¸€ä¸ªå­—å…¸</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">&gt;&gt;&gt;<span class="hljs-built_in">dict</span>()                        <span class="hljs-comment"># åˆ›å»ºç©ºå­—å…¸</span><br>&#123;&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">dict</span>(a=<span class="hljs-string">&#x27;a&#x27;</span>, b=<span class="hljs-string">&#x27;b&#x27;</span>, t=<span class="hljs-string">&#x27;t&#x27;</span>)     <span class="hljs-comment"># ä¼ å…¥å…³é”®å­—</span><br>&#123;<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;t&#x27;</span>: <span class="hljs-string">&#x27;t&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">dict</span>(<span class="hljs-built_in">zip</span>([<span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-string">&#x27;three&#x27;</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]))   <span class="hljs-comment"># æ˜ å°„å‡½æ•°æ–¹å¼æ¥æ„é€ å­—å…¸</span><br>&#123;<span class="hljs-string">&#x27;three&#x27;</span>: <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;two&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;one&#x27;</span>: <span class="hljs-number">1</span>&#125; <br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">dict</span>([(<span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-number">1</span>), (<span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-number">2</span>), (<span class="hljs-string">&#x27;three&#x27;</span>, <span class="hljs-number">3</span>)])    <span class="hljs-comment"># å¯è¿­ä»£å¯¹è±¡æ–¹å¼æ¥æ„é€ å­—å…¸</span><br>&#123;<span class="hljs-string">&#x27;three&#x27;</span>: <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;two&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;one&#x27;</span>: <span class="hljs-number">1</span>&#125;<br>&gt;&gt;&gt;<br></code></pre></div></td></tr></table></figure><h4 id="11ã€dir-object"><a href="#11ã€dir-object" class="headerlink" title="11ã€dir([object])"></a>11ã€<code>dir([object])</code></h4><blockquote><p>å‡½æ•°ä¸å¸¦å‚æ•°æ—¶ï¼Œè¿”å›å½“å‰èŒƒå›´å†…çš„å˜é‡ã€æ–¹æ³•å’Œå®šä¹‰çš„ç±»å‹åˆ—è¡¨ï¼›</p><p>å¸¦å‚æ•°æ—¶ï¼Œè¿”å›å‚æ•°çš„å±æ€§ã€æ–¹æ³•åˆ—è¡¨ã€‚</p><p>å¦‚æœå‚æ•°åŒ…å«æ–¹æ³•<code>__dir__()</code>ï¼Œè¯¥æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚</p><p>å¦‚æœå‚æ•°ä¸åŒ…å«<code>__dir__()</code>ï¼Œè¯¥æ–¹æ³•å°†æœ€å¤§é™åº¦åœ°æ”¶é›†å‚æ•°ä¿¡æ¯ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">&gt;&gt;&gt;<span class="hljs-built_in">dir</span>()   <span class="hljs-comment">#  è·å¾—å½“å‰æ¨¡å—çš„å±æ€§åˆ—è¡¨</span><br>[<span class="hljs-string">&#x27;__builtins__&#x27;</span>, <span class="hljs-string">&#x27;__doc__&#x27;</span>, <span class="hljs-string">&#x27;__name__&#x27;</span>, <span class="hljs-string">&#x27;__package__&#x27;</span>, <span class="hljs-string">&#x27;arr&#x27;</span>, <span class="hljs-string">&#x27;myslice&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">dir</span>([ ])    <span class="hljs-comment"># æŸ¥çœ‹åˆ—è¡¨çš„æ–¹æ³•</span><br>[<span class="hljs-string">&#x27;__add__&#x27;</span>, <span class="hljs-string">&#x27;__class__&#x27;</span>, <span class="hljs-string">&#x27;__contains__&#x27;</span>, <span class="hljs-string">&#x27;__delattr__&#x27;</span>, <span class="hljs-string">&#x27;__delitem__&#x27;</span>, <span class="hljs-string">&#x27;__delslice__&#x27;</span>, <span class="hljs-string">&#x27;__doc__&#x27;</span>, <span class="hljs-string">&#x27;__eq__&#x27;</span>, <span class="hljs-string">&#x27;__format__&#x27;</span>, <span class="hljs-string">&#x27;__ge__&#x27;</span>, <span class="hljs-string">&#x27;__getattribute__&#x27;</span>, <span class="hljs-string">&#x27;__getitem__&#x27;</span>, <span class="hljs-string">&#x27;__getslice__&#x27;</span>, <span class="hljs-string">&#x27;__gt__&#x27;</span>, <span class="hljs-string">&#x27;__hash__&#x27;</span>, <span class="hljs-string">&#x27;__iadd__&#x27;</span>, <span class="hljs-string">&#x27;__imul__&#x27;</span>, <span class="hljs-string">&#x27;__init__&#x27;</span>, <span class="hljs-string">&#x27;__iter__&#x27;</span>, <span class="hljs-string">&#x27;__le__&#x27;</span>, <span class="hljs-string">&#x27;__len__&#x27;</span>, <span class="hljs-string">&#x27;__lt__&#x27;</span>, <span class="hljs-string">&#x27;__mul__&#x27;</span>, <span class="hljs-string">&#x27;__ne__&#x27;</span>, <span class="hljs-string">&#x27;__new__&#x27;</span>, <span class="hljs-string">&#x27;__reduce__&#x27;</span>, <span class="hljs-string">&#x27;__reduce_ex__&#x27;</span>, <span class="hljs-string">&#x27;__repr__&#x27;</span>, <span class="hljs-string">&#x27;__reversed__&#x27;</span>, <span class="hljs-string">&#x27;__rmul__&#x27;</span>, <span class="hljs-string">&#x27;__setattr__&#x27;</span>, <span class="hljs-string">&#x27;__setitem__&#x27;</span>, <span class="hljs-string">&#x27;__setslice__&#x27;</span>, <span class="hljs-string">&#x27;__sizeof__&#x27;</span>, <span class="hljs-string">&#x27;__str__&#x27;</span>, <span class="hljs-string">&#x27;__subclasshook__&#x27;</span>, <span class="hljs-string">&#x27;append&#x27;</span>, <span class="hljs-string">&#x27;count&#x27;</span>, <span class="hljs-string">&#x27;extend&#x27;</span>, <span class="hljs-string">&#x27;index&#x27;</span>, <span class="hljs-string">&#x27;insert&#x27;</span>, <span class="hljs-string">&#x27;pop&#x27;</span>, <span class="hljs-string">&#x27;remove&#x27;</span>, <span class="hljs-string">&#x27;reverse&#x27;</span>, <span class="hljs-string">&#x27;sort&#x27;</span>]<br>&gt;&gt;&gt;<br></code></pre></div></td></tr></table></figure><h4 id="12ã€divmod-a-b"><a href="#12ã€divmod-a-b" class="headerlink" title="12ã€divmod(a, b)"></a>12ã€<code>divmod(a, b)</code></h4><blockquote><p>å‡½æ•°æŠŠé™¤æ•°å’Œä½™æ•°è¿ç®—ç»“æœç»“åˆèµ·æ¥ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å•†å’Œä½™æ•°çš„å…ƒç»„<code>(a // b, a % b)</code>ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">&gt;&gt;&gt;<span class="hljs-built_in">divmod</span>(<span class="hljs-number">7</span>, <span class="hljs-number">2</span>)<br>(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">divmod</span>(<span class="hljs-number">8</span>, <span class="hljs-number">2</span>)<br>(<span class="hljs-number">4</span>, <span class="hljs-number">0</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">divmod</span>(<span class="hljs-number">1</span>+<span class="hljs-number">2j</span>,<span class="hljs-number">1</span>+<span class="hljs-number">0.5j</span>)<br>((<span class="hljs-number">1</span>+<span class="hljs-number">0j</span>), <span class="hljs-number">1.5j</span>)<br></code></pre></div></td></tr></table></figure><h4 id="13ã€enumerate-sequence-start-0"><a href="#13ã€enumerate-sequence-start-0" class="headerlink" title="13ã€enumerate(sequence, [start=0])"></a>13ã€<code>enumerate(sequence, [start=0])</code></h4><blockquote><p>å‡½æ•°ç”¨äºå°†ä¸€ä¸ªå¯éå†çš„æ•°æ®å¯¹è±¡ (å¦‚åˆ—è¡¨ã€å…ƒç»„æˆ–å­—ç¬¦ä¸²) ç»„åˆä¸ºä¸€ä¸ªç´¢å¼•åºåˆ—ï¼ŒåŒæ—¶åˆ—å‡ºæ•°æ®å’Œæ•°æ®ä¸‹æ ‡ï¼Œä¸€èˆ¬ç”¨åœ¨<code>for</code> å¾ªç¯å½“ä¸­ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">&gt;&gt;&gt;seasons = [<span class="hljs-string">&#x27;Spring&#x27;</span>, <span class="hljs-string">&#x27;Summer&#x27;</span>, <span class="hljs-string">&#x27;Fall&#x27;</span>, <span class="hljs-string">&#x27;Winter&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(<span class="hljs-built_in">enumerate</span>(seasons))<br>[(<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;Spring&#x27;</span>), (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;Summer&#x27;</span>), (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;Fall&#x27;</span>), (<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;Winter&#x27;</span>)]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(<span class="hljs-built_in">enumerate</span>(seasons, start=<span class="hljs-number">1</span>))       <span class="hljs-comment"># ä¸‹æ ‡ä» 1 å¼€å§‹</span><br>[(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;Spring&#x27;</span>), (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;Summer&#x27;</span>), (<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;Fall&#x27;</span>), (<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;Winter&#x27;</span>)]<br></code></pre></div></td></tr></table></figure><h4 id="14ã€eval-å‡½æ•°ç”¨æ¥æ‰§è¡Œä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œå¹¶è¿”å›è¡¨è¾¾å¼çš„å€¼ã€‚"><a href="#14ã€eval-å‡½æ•°ç”¨æ¥æ‰§è¡Œä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œå¹¶è¿”å›è¡¨è¾¾å¼çš„å€¼ã€‚" class="headerlink" title="14ã€eval()    å‡½æ•°ç”¨æ¥æ‰§è¡Œä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œå¹¶è¿”å›è¡¨è¾¾å¼çš„å€¼ã€‚"></a>14ã€eval()    å‡½æ•°ç”¨æ¥æ‰§è¡Œä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œå¹¶è¿”å›è¡¨è¾¾å¼çš„å€¼ã€‚</h4><h4 id="15ã€execfile-å‡½æ•°å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸€ä¸ªæ–‡ä»¶ã€‚"><a href="#15ã€execfile-å‡½æ•°å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸€ä¸ªæ–‡ä»¶ã€‚" class="headerlink" title="15ã€execfile()    å‡½æ•°å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸€ä¸ªæ–‡ä»¶ã€‚"></a>15ã€execfile()    å‡½æ•°å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸€ä¸ªæ–‡ä»¶ã€‚</h4><h4 id="16ã€float-å‡½æ•°ç”¨äºå°†æ•´æ•°å’Œå­—ç¬¦ä¸²è½¬æ¢æˆæµ®ç‚¹æ•°ã€‚"><a href="#16ã€float-å‡½æ•°ç”¨äºå°†æ•´æ•°å’Œå­—ç¬¦ä¸²è½¬æ¢æˆæµ®ç‚¹æ•°ã€‚" class="headerlink" title="16ã€float()    å‡½æ•°ç”¨äºå°†æ•´æ•°å’Œå­—ç¬¦ä¸²è½¬æ¢æˆæµ®ç‚¹æ•°ã€‚"></a>16ã€float()    å‡½æ•°ç”¨äºå°†æ•´æ•°å’Œå­—ç¬¦ä¸²è½¬æ¢æˆæµ®ç‚¹æ•°ã€‚</h4><h4 id="17ã€frozenset-è¿”å›ä¸€ä¸ªå†»ç»“çš„é›†åˆï¼Œå†»ç»“åé›†åˆä¸èƒ½å†æ·»åŠ æˆ–åˆ é™¤ä»»ä½•å…ƒç´ ã€‚"><a href="#17ã€frozenset-è¿”å›ä¸€ä¸ªå†»ç»“çš„é›†åˆï¼Œå†»ç»“åé›†åˆä¸èƒ½å†æ·»åŠ æˆ–åˆ é™¤ä»»ä½•å…ƒç´ ã€‚" class="headerlink" title="17ã€frozenset()    è¿”å›ä¸€ä¸ªå†»ç»“çš„é›†åˆï¼Œå†»ç»“åé›†åˆä¸èƒ½å†æ·»åŠ æˆ–åˆ é™¤ä»»ä½•å…ƒç´ ã€‚"></a>17ã€frozenset()    è¿”å›ä¸€ä¸ªå†»ç»“çš„é›†åˆï¼Œå†»ç»“åé›†åˆä¸èƒ½å†æ·»åŠ æˆ–åˆ é™¤ä»»ä½•å…ƒç´ ã€‚</h4><h4 id="18ã€getattr-å‡½æ•°ç”¨äºè¿”å›ä¸€ä¸ªå¯¹è±¡å±æ€§å€¼ã€‚"><a href="#18ã€getattr-å‡½æ•°ç”¨äºè¿”å›ä¸€ä¸ªå¯¹è±¡å±æ€§å€¼ã€‚" class="headerlink" title="18ã€getattr()    å‡½æ•°ç”¨äºè¿”å›ä¸€ä¸ªå¯¹è±¡å±æ€§å€¼ã€‚"></a>18ã€getattr()    å‡½æ•°ç”¨äºè¿”å›ä¸€ä¸ªå¯¹è±¡å±æ€§å€¼ã€‚</h4><h4 id="19ã€hash-ç”¨äºè·å–å–ä¸€ä¸ªå¯¹è±¡ï¼ˆå­—ç¬¦ä¸²æˆ–è€…æ•°å€¼ç­‰ï¼‰çš„å“ˆå¸Œå€¼ã€‚"><a href="#19ã€hash-ç”¨äºè·å–å–ä¸€ä¸ªå¯¹è±¡ï¼ˆå­—ç¬¦ä¸²æˆ–è€…æ•°å€¼ç­‰ï¼‰çš„å“ˆå¸Œå€¼ã€‚" class="headerlink" title="19ã€hash()    ç”¨äºè·å–å–ä¸€ä¸ªå¯¹è±¡ï¼ˆå­—ç¬¦ä¸²æˆ–è€…æ•°å€¼ç­‰ï¼‰çš„å“ˆå¸Œå€¼ã€‚"></a>19ã€hash()    ç”¨äºè·å–å–ä¸€ä¸ªå¯¹è±¡ï¼ˆå­—ç¬¦ä¸²æˆ–è€…æ•°å€¼ç­‰ï¼‰çš„å“ˆå¸Œå€¼ã€‚</h4><h4 id="20ã€help-å‡½æ•°ç”¨äºæŸ¥çœ‹å‡½æ•°æˆ–æ¨¡å—ç”¨é€”çš„è¯¦ç»†è¯´æ˜ã€‚"><a href="#20ã€help-å‡½æ•°ç”¨äºæŸ¥çœ‹å‡½æ•°æˆ–æ¨¡å—ç”¨é€”çš„è¯¦ç»†è¯´æ˜ã€‚" class="headerlink" title="20ã€help()    å‡½æ•°ç”¨äºæŸ¥çœ‹å‡½æ•°æˆ–æ¨¡å—ç”¨é€”çš„è¯¦ç»†è¯´æ˜ã€‚"></a>20ã€help()    å‡½æ•°ç”¨äºæŸ¥çœ‹å‡½æ•°æˆ–æ¨¡å—ç”¨é€”çš„è¯¦ç»†è¯´æ˜ã€‚</h4><h4 id="21ã€hex-å‡½æ•°ç”¨äºå°†-10-è¿›åˆ¶æ•´æ•°è½¬æ¢æˆ-16-è¿›åˆ¶æ•´æ•°ã€‚"><a href="#21ã€hex-å‡½æ•°ç”¨äºå°†-10-è¿›åˆ¶æ•´æ•°è½¬æ¢æˆ-16-è¿›åˆ¶æ•´æ•°ã€‚" class="headerlink" title="21ã€hex()    å‡½æ•°ç”¨äºå°† 10 è¿›åˆ¶æ•´æ•°è½¬æ¢æˆ 16 è¿›åˆ¶æ•´æ•°ã€‚"></a>21ã€hex()    å‡½æ•°ç”¨äºå°† 10 è¿›åˆ¶æ•´æ•°è½¬æ¢æˆ 16 è¿›åˆ¶æ•´æ•°ã€‚</h4><h4 id="22ã€id-å‡½æ•°ç”¨äºè·å–å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚"><a href="#22ã€id-å‡½æ•°ç”¨äºè·å–å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚" class="headerlink" title="22ã€id()    å‡½æ•°ç”¨äºè·å–å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚"></a>22ã€id()    å‡½æ•°ç”¨äºè·å–å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚</h4><h4 id="23ã€input-è¾“å…¥å‡½æ•°"><a href="#23ã€input-è¾“å…¥å‡½æ•°" class="headerlink" title="23ã€input()    è¾“å…¥å‡½æ•°"></a>23ã€input()    è¾“å…¥å‡½æ•°</h4><h4 id="24ã€int-å‡½æ•°ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¼šæ•°å­—è½¬æ¢ä¸ºæ•´å‹ã€‚"><a href="#24ã€int-å‡½æ•°ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¼šæ•°å­—è½¬æ¢ä¸ºæ•´å‹ã€‚" class="headerlink" title="24ã€int()    å‡½æ•°ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¼šæ•°å­—è½¬æ¢ä¸ºæ•´å‹ã€‚"></a>24ã€int()    å‡½æ•°ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¼šæ•°å­—è½¬æ¢ä¸ºæ•´å‹ã€‚</h4><h4 id="25ã€isinstance-å‡½æ•°æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå·²çŸ¥çš„ç±»å‹ï¼Œç±»ä¼¼-type-ã€‚"><a href="#25ã€isinstance-å‡½æ•°æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå·²çŸ¥çš„ç±»å‹ï¼Œç±»ä¼¼-type-ã€‚" class="headerlink" title="25ã€isinstance()    å‡½æ•°æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå·²çŸ¥çš„ç±»å‹ï¼Œç±»ä¼¼ type()ã€‚"></a>25ã€isinstance()    å‡½æ•°æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå·²çŸ¥çš„ç±»å‹ï¼Œç±»ä¼¼ type()ã€‚</h4><p>ã€€ã€€ <strong>isinstance() ä¸ type() åŒºåˆ«ï¼š</strong></p><ul><li><p>type() ä¸ä¼šè®¤ä¸ºå­ç±»æ˜¯ä¸€ç§çˆ¶ç±»ç±»å‹ï¼Œä¸è€ƒè™‘ç»§æ‰¿å…³ç³»ã€‚</p></li><li><p>isinstance() ä¼šè®¤ä¸ºå­ç±»æ˜¯ä¸€ç§çˆ¶ç±»ç±»å‹ï¼Œè€ƒè™‘ç»§æ‰¿å…³ç³»ã€‚</p></li><li><p>å¦‚æœè¦åˆ¤æ–­ä¸¤ä¸ªç±»å‹æ˜¯å¦ç›¸åŒæ¨èä½¿ç”¨ isinstance()ã€‚</p></li></ul><h4 id="26ã€len-æ–¹æ³•è¿”å›å¯¹è±¡ï¼ˆå­—ç¬¦ã€åˆ—è¡¨ã€å…ƒç»„ç­‰ï¼‰é•¿åº¦æˆ–é¡¹ç›®ä¸ªæ•°ã€‚"><a href="#26ã€len-æ–¹æ³•è¿”å›å¯¹è±¡ï¼ˆå­—ç¬¦ã€åˆ—è¡¨ã€å…ƒç»„ç­‰ï¼‰é•¿åº¦æˆ–é¡¹ç›®ä¸ªæ•°ã€‚" class="headerlink" title="26ã€len()    æ–¹æ³•è¿”å›å¯¹è±¡ï¼ˆå­—ç¬¦ã€åˆ—è¡¨ã€å…ƒç»„ç­‰ï¼‰é•¿åº¦æˆ–é¡¹ç›®ä¸ªæ•°ã€‚"></a>26ã€len()    æ–¹æ³•è¿”å›å¯¹è±¡ï¼ˆå­—ç¬¦ã€åˆ—è¡¨ã€å…ƒç»„ç­‰ï¼‰é•¿åº¦æˆ–é¡¹ç›®ä¸ªæ•°ã€‚</h4><h4 id="27ã€list-æ–¹æ³•ç”¨äºå°†å…ƒç»„è½¬æ¢ä¸ºåˆ—è¡¨ã€‚"><a href="#27ã€list-æ–¹æ³•ç”¨äºå°†å…ƒç»„è½¬æ¢ä¸ºåˆ—è¡¨ã€‚" class="headerlink" title="27ã€list()    æ–¹æ³•ç”¨äºå°†å…ƒç»„è½¬æ¢ä¸ºåˆ—è¡¨ã€‚"></a>27ã€list()    æ–¹æ³•ç”¨äºå°†å…ƒç»„è½¬æ¢ä¸ºåˆ—è¡¨ã€‚</h4><h4 id="28ã€locals-å‡½æ•°ä¼šä»¥å­—å…¸ç±»å‹è¿”å›å½“å‰ä½ç½®çš„å…¨éƒ¨å±€éƒ¨å˜é‡ã€‚"><a href="#28ã€locals-å‡½æ•°ä¼šä»¥å­—å…¸ç±»å‹è¿”å›å½“å‰ä½ç½®çš„å…¨éƒ¨å±€éƒ¨å˜é‡ã€‚" class="headerlink" title="28ã€locals()    å‡½æ•°ä¼šä»¥å­—å…¸ç±»å‹è¿”å›å½“å‰ä½ç½®çš„å…¨éƒ¨å±€éƒ¨å˜é‡ã€‚"></a>28ã€locals()    å‡½æ•°ä¼šä»¥å­—å…¸ç±»å‹è¿”å›å½“å‰ä½ç½®çš„å…¨éƒ¨å±€éƒ¨å˜é‡ã€‚</h4><h4 id="29ã€long-å‡½æ•°å°†æ•°å­—æˆ–å­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªé•¿æ•´å‹ã€‚"><a href="#29ã€long-å‡½æ•°å°†æ•°å­—æˆ–å­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªé•¿æ•´å‹ã€‚" class="headerlink" title="29ã€long()    å‡½æ•°å°†æ•°å­—æˆ–å­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªé•¿æ•´å‹ã€‚"></a>29ã€long()    å‡½æ•°å°†æ•°å­—æˆ–å­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªé•¿æ•´å‹ã€‚</h4><h4 id="30ã€max-æ–¹æ³•è¿”å›ç»™å®šå‚æ•°çš„æœ€å¤§å€¼ï¼Œå‚æ•°å¯ä»¥ä¸ºåºåˆ—ã€‚"><a href="#30ã€max-æ–¹æ³•è¿”å›ç»™å®šå‚æ•°çš„æœ€å¤§å€¼ï¼Œå‚æ•°å¯ä»¥ä¸ºåºåˆ—ã€‚" class="headerlink" title="30ã€max()    æ–¹æ³•è¿”å›ç»™å®šå‚æ•°çš„æœ€å¤§å€¼ï¼Œå‚æ•°å¯ä»¥ä¸ºåºåˆ—ã€‚"></a>30ã€max()    æ–¹æ³•è¿”å›ç»™å®šå‚æ•°çš„æœ€å¤§å€¼ï¼Œå‚æ•°å¯ä»¥ä¸ºåºåˆ—ã€‚</h4><h4 id="31ã€memoryview-å‡½æ•°è¿”å›ç»™å®šå‚æ•°çš„å†…å­˜æŸ¥çœ‹å¯¹è±¡-Momory-view-ã€‚"><a href="#31ã€memoryview-å‡½æ•°è¿”å›ç»™å®šå‚æ•°çš„å†…å­˜æŸ¥çœ‹å¯¹è±¡-Momory-view-ã€‚" class="headerlink" title="31ã€memoryview()    å‡½æ•°è¿”å›ç»™å®šå‚æ•°çš„å†…å­˜æŸ¥çœ‹å¯¹è±¡ (Momory view)ã€‚"></a>31ã€memoryview()    å‡½æ•°è¿”å›ç»™å®šå‚æ•°çš„å†…å­˜æŸ¥çœ‹å¯¹è±¡ (Momory view)ã€‚</h4><h4 id="32ã€min-æ–¹æ³•è¿”å›ç»™å®šå‚æ•°çš„æœ€å°å€¼ï¼Œå‚æ•°å¯ä»¥ä¸ºåºåˆ—ã€‚"><a href="#32ã€min-æ–¹æ³•è¿”å›ç»™å®šå‚æ•°çš„æœ€å°å€¼ï¼Œå‚æ•°å¯ä»¥ä¸ºåºåˆ—ã€‚" class="headerlink" title="32ã€min()    æ–¹æ³•è¿”å›ç»™å®šå‚æ•°çš„æœ€å°å€¼ï¼Œå‚æ•°å¯ä»¥ä¸ºåºåˆ—ã€‚"></a>32ã€min()    æ–¹æ³•è¿”å›ç»™å®šå‚æ•°çš„æœ€å°å€¼ï¼Œå‚æ•°å¯ä»¥ä¸ºåºåˆ—ã€‚</h4><h4 id="33ã€oct-å‡½æ•°å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢æˆ-8-è¿›åˆ¶å­—ç¬¦ä¸²ã€‚"><a href="#33ã€oct-å‡½æ•°å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢æˆ-8-è¿›åˆ¶å­—ç¬¦ä¸²ã€‚" class="headerlink" title="33ã€oct()    å‡½æ•°å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢æˆ 8 è¿›åˆ¶å­—ç¬¦ä¸²ã€‚"></a>33ã€oct()    å‡½æ•°å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢æˆ 8 è¿›åˆ¶å­—ç¬¦ä¸²ã€‚</h4><h4 id="34ã€open-å‡½æ•°ç”¨äºæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ª-file-å¯¹è±¡ï¼Œç›¸å…³çš„æ–¹æ³•æ‰å¯ä»¥è°ƒç”¨å®ƒè¿›è¡Œè¯»å†™ã€‚"><a href="#34ã€open-å‡½æ•°ç”¨äºæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ª-file-å¯¹è±¡ï¼Œç›¸å…³çš„æ–¹æ³•æ‰å¯ä»¥è°ƒç”¨å®ƒè¿›è¡Œè¯»å†™ã€‚" class="headerlink" title="34ã€open()    å‡½æ•°ç”¨äºæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ª file å¯¹è±¡ï¼Œç›¸å…³çš„æ–¹æ³•æ‰å¯ä»¥è°ƒç”¨å®ƒè¿›è¡Œè¯»å†™ã€‚"></a>34ã€open()    å‡½æ•°ç”¨äºæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ª file å¯¹è±¡ï¼Œç›¸å…³çš„æ–¹æ³•æ‰å¯ä»¥è°ƒç”¨å®ƒè¿›è¡Œè¯»å†™ã€‚</h4><h4 id="35ã€ord-å‡½æ•°ä¸-chr-å‡½æ•°ç›¸åï¼Œè¾“å…¥å­—ç¬¦è¿”å›æ•°å­—"><a href="#35ã€ord-å‡½æ•°ä¸-chr-å‡½æ•°ç›¸åï¼Œè¾“å…¥å­—ç¬¦è¿”å›æ•°å­—" class="headerlink" title="35ã€ord()    å‡½æ•°ä¸ chr() å‡½æ•°ç›¸åï¼Œè¾“å…¥å­—ç¬¦è¿”å›æ•°å­—"></a>35ã€ord()    å‡½æ•°ä¸ chr() å‡½æ•°ç›¸åï¼Œè¾“å…¥å­—ç¬¦è¿”å›æ•°å­—</h4><h4 id="36ã€pow-æ–¹æ³•è¿”å›-xyï¼ˆx-çš„-y-æ¬¡æ–¹ï¼‰-çš„å€¼ã€‚å‡½æ•°æ˜¯è®¡ç®—-x-çš„-y-æ¬¡æ–¹ï¼Œå¦‚æœ-z-åœ¨å­˜åœ¨ï¼Œåˆ™å†å¯¹ç»“æœè¿›è¡Œå–æ¨¡ï¼Œå…¶ç»“æœç­‰æ•ˆäº-pow-x-y-z"><a href="#36ã€pow-æ–¹æ³•è¿”å›-xyï¼ˆx-çš„-y-æ¬¡æ–¹ï¼‰-çš„å€¼ã€‚å‡½æ•°æ˜¯è®¡ç®—-x-çš„-y-æ¬¡æ–¹ï¼Œå¦‚æœ-z-åœ¨å­˜åœ¨ï¼Œåˆ™å†å¯¹ç»“æœè¿›è¡Œå–æ¨¡ï¼Œå…¶ç»“æœç­‰æ•ˆäº-pow-x-y-z" class="headerlink" title="36ã€pow()    æ–¹æ³•è¿”å› xyï¼ˆx çš„ y æ¬¡æ–¹ï¼‰ çš„å€¼ã€‚å‡½æ•°æ˜¯è®¡ç®— x çš„ y æ¬¡æ–¹ï¼Œå¦‚æœ z åœ¨å­˜åœ¨ï¼Œåˆ™å†å¯¹ç»“æœè¿›è¡Œå–æ¨¡ï¼Œå…¶ç»“æœç­‰æ•ˆäº pow(x,y) %z"></a>36ã€pow()    æ–¹æ³•è¿”å› xyï¼ˆx çš„ y æ¬¡æ–¹ï¼‰ çš„å€¼ã€‚å‡½æ•°æ˜¯è®¡ç®— x çš„ y æ¬¡æ–¹ï¼Œå¦‚æœ z åœ¨å­˜åœ¨ï¼Œåˆ™å†å¯¹ç»“æœè¿›è¡Œå–æ¨¡ï¼Œå…¶ç»“æœç­‰æ•ˆäº pow(x,y) %z</h4><h4 id="37ã€print-è¾“å‡ºå‡½æ•°"><a href="#37ã€print-è¾“å‡ºå‡½æ•°" class="headerlink" title="37ã€print()    è¾“å‡ºå‡½æ•°"></a>37ã€print()    è¾“å‡ºå‡½æ•°</h4><h4 id="38ã€range-å‡½æ•°å¯åˆ›å»ºä¸€ä¸ªæ•´æ•°åˆ—è¡¨ï¼Œä¸€èˆ¬ç”¨åœ¨-for-å¾ªç¯ä¸­ã€‚"><a href="#38ã€range-å‡½æ•°å¯åˆ›å»ºä¸€ä¸ªæ•´æ•°åˆ—è¡¨ï¼Œä¸€èˆ¬ç”¨åœ¨-for-å¾ªç¯ä¸­ã€‚" class="headerlink" title="38ã€range()    å‡½æ•°å¯åˆ›å»ºä¸€ä¸ªæ•´æ•°åˆ—è¡¨ï¼Œä¸€èˆ¬ç”¨åœ¨ for å¾ªç¯ä¸­ã€‚"></a>38ã€range()    å‡½æ•°å¯åˆ›å»ºä¸€ä¸ªæ•´æ•°åˆ—è¡¨ï¼Œä¸€èˆ¬ç”¨åœ¨ for å¾ªç¯ä¸­ã€‚</h4><h4 id="39ã€reload-ç”¨äºé‡æ–°è½½å…¥ä¹‹å‰è½½å…¥çš„æ¨¡å—ã€‚"><a href="#39ã€reload-ç”¨äºé‡æ–°è½½å…¥ä¹‹å‰è½½å…¥çš„æ¨¡å—ã€‚" class="headerlink" title="39ã€reload()    ç”¨äºé‡æ–°è½½å…¥ä¹‹å‰è½½å…¥çš„æ¨¡å—ã€‚"></a>39ã€reload()    ç”¨äºé‡æ–°è½½å…¥ä¹‹å‰è½½å…¥çš„æ¨¡å—ã€‚</h4><h4 id="40ã€everse-å‡½æ•°ç”¨äºåå‘åˆ—è¡¨ä¸­å…ƒç´ ã€‚"><a href="#40ã€everse-å‡½æ•°ç”¨äºåå‘åˆ—è¡¨ä¸­å…ƒç´ ã€‚" class="headerlink" title="40ã€everse()    å‡½æ•°ç”¨äºåå‘åˆ—è¡¨ä¸­å…ƒç´ ã€‚"></a>40ã€everse()    å‡½æ•°ç”¨äºåå‘åˆ—è¡¨ä¸­å…ƒç´ ã€‚</h4><h4 id="41ã€round-æ–¹æ³•è¿”å›æµ®ç‚¹æ•°-x-çš„å››èˆäº”å…¥å€¼ã€‚"><a href="#41ã€round-æ–¹æ³•è¿”å›æµ®ç‚¹æ•°-x-çš„å››èˆäº”å…¥å€¼ã€‚" class="headerlink" title="41ã€round()    æ–¹æ³•è¿”å›æµ®ç‚¹æ•° x çš„å››èˆäº”å…¥å€¼ã€‚"></a>41ã€round()    æ–¹æ³•è¿”å›æµ®ç‚¹æ•° x çš„å››èˆäº”å…¥å€¼ã€‚</h4><h4 id="42ã€set-å‡½æ•°åˆ›å»ºä¸€ä¸ªæ— åºä¸é‡å¤å…ƒç´ é›†ï¼Œå¯è¿›è¡Œå…³ç³»æµ‹è¯•ï¼Œåˆ é™¤é‡å¤æ•°æ®ï¼Œè¿˜å¯ä»¥è®¡ç®—äº¤é›†ã€å·®é›†ã€å¹¶é›†ç­‰ã€‚"><a href="#42ã€set-å‡½æ•°åˆ›å»ºä¸€ä¸ªæ— åºä¸é‡å¤å…ƒç´ é›†ï¼Œå¯è¿›è¡Œå…³ç³»æµ‹è¯•ï¼Œåˆ é™¤é‡å¤æ•°æ®ï¼Œè¿˜å¯ä»¥è®¡ç®—äº¤é›†ã€å·®é›†ã€å¹¶é›†ç­‰ã€‚" class="headerlink" title="42ã€set()    å‡½æ•°åˆ›å»ºä¸€ä¸ªæ— åºä¸é‡å¤å…ƒç´ é›†ï¼Œå¯è¿›è¡Œå…³ç³»æµ‹è¯•ï¼Œåˆ é™¤é‡å¤æ•°æ®ï¼Œè¿˜å¯ä»¥è®¡ç®—äº¤é›†ã€å·®é›†ã€å¹¶é›†ç­‰ã€‚"></a>42ã€set()    å‡½æ•°åˆ›å»ºä¸€ä¸ªæ— åºä¸é‡å¤å…ƒç´ é›†ï¼Œå¯è¿›è¡Œå…³ç³»æµ‹è¯•ï¼Œåˆ é™¤é‡å¤æ•°æ®ï¼Œè¿˜å¯ä»¥è®¡ç®—äº¤é›†ã€å·®é›†ã€å¹¶é›†ç­‰ã€‚</h4><h4 id="43ã€str-å‡½æ•°å°†å¯¹è±¡è½¬åŒ–å­—ç¬¦ä¸²"><a href="#43ã€str-å‡½æ•°å°†å¯¹è±¡è½¬åŒ–å­—ç¬¦ä¸²" class="headerlink" title="43ã€str()    å‡½æ•°å°†å¯¹è±¡è½¬åŒ–å­—ç¬¦ä¸²"></a>43ã€str()    å‡½æ•°å°†å¯¹è±¡è½¬åŒ–å­—ç¬¦ä¸²</h4><h4 id="44ã€sum-æ–¹æ³•å¯¹ç³»åˆ—è¿›è¡Œæ±‚å’Œè®¡ç®—ã€‚"><a href="#44ã€sum-æ–¹æ³•å¯¹ç³»åˆ—è¿›è¡Œæ±‚å’Œè®¡ç®—ã€‚" class="headerlink" title="44ã€sum()    æ–¹æ³•å¯¹ç³»åˆ—è¿›è¡Œæ±‚å’Œè®¡ç®—ã€‚"></a>44ã€sum()    æ–¹æ³•å¯¹ç³»åˆ—è¿›è¡Œæ±‚å’Œè®¡ç®—ã€‚</h4><h4 id="45ã€tuple-å…ƒç»„-tuple-å‡½æ•°å°†åˆ—è¡¨è½¬æ¢ä¸ºå…ƒç»„ã€‚"><a href="#45ã€tuple-å…ƒç»„-tuple-å‡½æ•°å°†åˆ—è¡¨è½¬æ¢ä¸ºå…ƒç»„ã€‚" class="headerlink" title="45ã€tuple()   å…ƒç»„ tuple() å‡½æ•°å°†åˆ—è¡¨è½¬æ¢ä¸ºå…ƒç»„ã€‚"></a>45ã€tuple()   å…ƒç»„ tuple() å‡½æ•°å°†åˆ—è¡¨è½¬æ¢ä¸ºå…ƒç»„ã€‚</h4><h4 id="46ã€type-è¿”å›å¯¹è±¡ç±»å‹ã€‚"><a href="#46ã€type-è¿”å›å¯¹è±¡ç±»å‹ã€‚" class="headerlink" title="46ã€type()   è¿”å›å¯¹è±¡ç±»å‹ã€‚"></a>46ã€type()   è¿”å›å¯¹è±¡ç±»å‹ã€‚</h4><h4 id="47ã€unichr-è¯¥å‡½æ•°å’Œ-chr-å‡½æ•°åŠŸèƒ½åŸºæœ¬ä¸€æ ·ï¼Œ-åªä¸è¿‡æ˜¯è¿”å›-unicode-çš„å­—ç¬¦ã€‚"><a href="#47ã€unichr-è¯¥å‡½æ•°å’Œ-chr-å‡½æ•°åŠŸèƒ½åŸºæœ¬ä¸€æ ·ï¼Œ-åªä¸è¿‡æ˜¯è¿”å›-unicode-çš„å­—ç¬¦ã€‚" class="headerlink" title="47ã€unichr()    è¯¥å‡½æ•°å’Œ chr() å‡½æ•°åŠŸèƒ½åŸºæœ¬ä¸€æ ·ï¼Œ åªä¸è¿‡æ˜¯è¿”å› unicode çš„å­—ç¬¦ã€‚"></a>47ã€unichr()    è¯¥å‡½æ•°å’Œ chr() å‡½æ•°åŠŸèƒ½åŸºæœ¬ä¸€æ ·ï¼Œ åªä¸è¿‡æ˜¯è¿”å› unicode çš„å­—ç¬¦ã€‚</h4><h4 id="48ã€vars-å‡½æ•°è¿”å›å¯¹è±¡-object-çš„å±æ€§å’Œå±æ€§å€¼çš„å­—å…¸å¯¹è±¡ã€‚"><a href="#48ã€vars-å‡½æ•°è¿”å›å¯¹è±¡-object-çš„å±æ€§å’Œå±æ€§å€¼çš„å­—å…¸å¯¹è±¡ã€‚" class="headerlink" title="48ã€vars()    å‡½æ•°è¿”å›å¯¹è±¡ object çš„å±æ€§å’Œå±æ€§å€¼çš„å­—å…¸å¯¹è±¡ã€‚"></a>48ã€vars()    å‡½æ•°è¿”å›å¯¹è±¡ object çš„å±æ€§å’Œå±æ€§å€¼çš„å­—å…¸å¯¹è±¡ã€‚</h4><h4 id="49ã€xrange-å‡½æ•°ç”¨æ³•ä¸-range-å®Œå…¨ç›¸åŒï¼Œæ‰€ä¸åŒçš„æ˜¯ç”Ÿæˆçš„ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ã€‚"><a href="#49ã€xrange-å‡½æ•°ç”¨æ³•ä¸-range-å®Œå…¨ç›¸åŒï¼Œæ‰€ä¸åŒçš„æ˜¯ç”Ÿæˆçš„ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ã€‚" class="headerlink" title="49ã€xrange()    å‡½æ•°ç”¨æ³•ä¸ range å®Œå…¨ç›¸åŒï¼Œæ‰€ä¸åŒçš„æ˜¯ç”Ÿæˆçš„ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ã€‚"></a>49ã€xrange()    å‡½æ•°ç”¨æ³•ä¸ range å®Œå…¨ç›¸åŒï¼Œæ‰€ä¸åŒçš„æ˜¯ç”Ÿæˆçš„ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ã€‚</h4><h4 id="50ã€import-å‡½æ•°ç”¨äºåŠ¨æ€åŠ è½½ç±»å’Œå‡½æ•°-ã€‚å¦‚æœä¸€ä¸ªæ¨¡å—ç»å¸¸å˜åŒ–å°±å¯ä»¥ä½¿ç”¨-import-æ¥åŠ¨æ€è½½å…¥ã€‚"><a href="#50ã€import-å‡½æ•°ç”¨äºåŠ¨æ€åŠ è½½ç±»å’Œå‡½æ•°-ã€‚å¦‚æœä¸€ä¸ªæ¨¡å—ç»å¸¸å˜åŒ–å°±å¯ä»¥ä½¿ç”¨-import-æ¥åŠ¨æ€è½½å…¥ã€‚" class="headerlink" title="50ã€import()    å‡½æ•°ç”¨äºåŠ¨æ€åŠ è½½ç±»å’Œå‡½æ•° ã€‚å¦‚æœä¸€ä¸ªæ¨¡å—ç»å¸¸å˜åŒ–å°±å¯ä»¥ä½¿ç”¨ import() æ¥åŠ¨æ€è½½å…¥ã€‚"></a>50ã€<strong>import</strong>()    å‡½æ•°ç”¨äºåŠ¨æ€åŠ è½½ç±»å’Œå‡½æ•° ã€‚å¦‚æœä¸€ä¸ªæ¨¡å—ç»å¸¸å˜åŒ–å°±å¯ä»¥ä½¿ç”¨ <strong>import</strong>() æ¥åŠ¨æ€è½½å…¥ã€‚</h4>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†…ç½®å‡½æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win10è®¾ç½®å¼€æœºè‡ªå¯</title>
      <link href="2019/05/25/xi-tong-win10-she-zhi-kai-ji-zi-qi/"/>
      <url>2019/05/25/xi-tong-win10-she-zhi-kai-ji-zi-qi/</url>
      
        <content type="html"><![CDATA[<p>åˆšå¼€å§‹æ¥è§¦ win10 çš„æœ‹å‹è‚¯å®šä¸çŸ¥é“åœ¨å“ªé‡ŒæŠŠè‡ªå·±å¸¸ç”¨çš„è½¯ä»¶è®¾ç½®æˆå¼€æœºå¯åŠ¨ï¼Œå› ä¸ºä½ æ ¹æœ¬æ‰¾ä¸åˆ°å‰é¢çš„ xpã€win7ã€win8ï¼Œç­‰é‡Œé¢çš„å¯åŠ¨æ–‡ä»¶å¤¹ã€‚</p><h2 id="å·¥å…·-åŸæ–™"><a href="#å·¥å…·-åŸæ–™" class="headerlink" title="å·¥å…· / åŸæ–™"></a>å·¥å…· / åŸæ–™</h2><ul><li>win10 ç³»ç»Ÿç”µè„‘ä¸€å°</li></ul><h2 id="æ–¹æ³•-æ­¥éª¤"><a href="#æ–¹æ³•-æ­¥éª¤" class="headerlink" title="æ–¹æ³• / æ­¥éª¤"></a>æ–¹æ³• / æ­¥éª¤</h2><ol><li><p>å¦‚æœæƒ³è¦å®ç°åº”ç”¨ç¨‹åºåœ¨æ‰€æœ‰çš„ç”¨æˆ·ç™»å½•ç³»ç»Ÿåéƒ½èƒ½è‡ªåŠ¨å¯åŠ¨ï¼Œå°±æŠŠè¯¥åº”ç”¨ç¨‹åºçš„å¿«æ·æ–¹å¼æ”¾åˆ° â€œç³»ç»Ÿå¯åŠ¨æ–‡ä»¶å¤¹â€ é‡Œï¼›<br> <img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526103017-win10%E5%BC%80%E5%A7%8B_01%20.png" alt="20190526103017-win10å¼€å§‹_01"></p></li><li><p>ä¸Šé¢çš„æ–¹æ³•æœ‰çš„æœ‹å‹å¯èƒ½æ‰¾ä¸åˆ°è·¯å¾„ï¼Œæ²¡æœ‰å…³ç³»ï¼Œä½ å¯ä»¥æŠŠä¸Šé¢çš„è·¯å¾„ç›´æ¥å¤åˆ¶åˆ°åœ°å€æ é‡Œé¢æ‰“å¼€å³å¯ã€‚å¦‚ä¸‹å›¾<br> <img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526103044-win10%E5%BC%80%E5%A7%8B_02%20.png" alt="20190526103044-win10å¼€å§‹_02"></p></li><li><p>åŒæ ·ä¹Ÿå¯ä»¥ç”¨ç³»ç»Ÿå‘½ä»¤æ¥æ‰“å¼€ â€œå¯åŠ¨æ–‡ä»¶å¤¹â€ã€‚åœ¨è¿è¡Œé‡Œé¢è¾“å…¥ï¼š<code>shell:startup</code><br> <img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526103052-win10%E5%BC%80%E5%A7%8B_03%20.png" alt="20190526103052-win10å¼€å§‹_03"></p></li><li><p>æˆ–è€…è¾“å…¥ï¼š<code>%programdata%\Microsoft\Windows\Start Menu\Programs\Startup</code><br> <img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190526103102-win10%E5%BC%80%E5%A7%8B_04%20.png" alt="20190526103102-win10å¼€å§‹_04"></p></li><li><p>ä¸Šé¢é‚£ç§å‘½ä»¤éƒ½å¯ä»¥æ‰“å¼€ç³»ç»Ÿå¯åŠ¨æ–‡ä»¶å¤¹çš„ï¼›åŒæ ·ï¼Œæ‰“å¼€ä¹‹åæŠŠè¦å¯åŠ¨çš„è½¯ä»¶æ”¾è¿›å»å³å¯ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç³»ç»Ÿ </category>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼€æœºè‡ªå¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonæ­£åˆ™åŒ¹é…</title>
      <link href="2019/05/23/python-gao-ji-zheng-ze-pi-pei/"/>
      <url>2019/05/23/python-gao-ji-zheng-ze-pi-pei/</url>
      
        <content type="html"><![CDATA[<h2 id="æ­£åˆ™åŒ¹é…"><a href="#æ­£åˆ™åŒ¹é…" class="headerlink" title="æ­£åˆ™åŒ¹é…"></a>æ­£åˆ™åŒ¹é…</h2><ol><li>é¢˜ç›®æè¿°ï¼š</li></ol><p>ç°å…¬å¸è¦å¼€å‘ä¸€ä¸ªä¸šåŠ¡ç®¡ç†ç³»ç»Ÿï¼Œè¦æ±‚æ³¨å†Œç¯èŠ‚çš„å¯†ç éœ€è¦æç¤ºç”¨æˆ·å…¶å®‰å…¨ç­‰çº§ï¼Œå¯†ç æŒ‰å¦‚ä¸‹è§„åˆ™è¿›è¡Œè®¡åˆ†ï¼Œå¹¶æ ¹æ®ä¸åŒçš„å¾—åˆ†ä¸ºå¯†ç è¿›è¡Œå®‰å…¨ç­‰çº§åˆ’åˆ†ï¼›æ­¤å¤–ï¼Œå¯†ç çš„ç»„æˆå¯ä»¥ç”±å­—æ¯ï¼Œæ•°å­—ï¼Œä»¥åŠç¬¦å·æ„æˆã€‚</p><p>ä»¥ä¸‹ä¸ºå¯†ç åˆ†æ•°åˆ¤æ–­é€‰é¡¹ï¼Œæ¯é¡¹åˆ¤æ–­åªèƒ½æ‹¿ä¸€ä¸ªåˆ†é¡¹ï¼š</p><ul><li><p>å¯†ç é•¿åº¦:</p><ul><li>5 åˆ†: å°äºç­‰äº4ä¸ªå­—ç¬¦</li><li>10 åˆ†: 5åˆ°7å­—ç¬¦</li><li>25 åˆ†: å¤§äºç­‰äº8ä¸ªå­—ç¬¦</li></ul></li><li><p>å­—æ¯:</p><ul><li>0 åˆ†: æ²¡æœ‰å­—æ¯</li><li>10 åˆ†: å…¨éƒ½æ˜¯å°ï¼ˆå¤§ï¼‰å†™å­—æ¯</li><li>20 åˆ†: å¤§å°å†™æ··åˆå­—æ¯</li></ul></li><li><p>æ•°å­—:</p><ul><li>0 åˆ†: æ²¡æœ‰æ•°å­—</li><li>10 åˆ†: 1ä¸ªæ•°å­—</li><li>20 åˆ†: å¤§äº1ä¸ªæ•°å­—</li></ul></li><li><p>ç¬¦å·:</p><ul><li>0 åˆ†: æ²¡æœ‰ç¬¦å·</li><li>10 åˆ†: 1ä¸ªç¬¦å·</li><li>25 åˆ†: å¤§äº1ä¸ªç¬¦å·</li></ul></li><li><p>å¥–åŠ±:</p><ul><li>2 åˆ†: å­—æ¯å’Œæ•°å­—</li><li>3 åˆ†: å­—æ¯ã€æ•°å­—å’Œç¬¦å·</li><li>5 åˆ†: å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç¬¦å·</li></ul></li></ul><p>æœ€åçš„è¯„åˆ†æ ‡å‡†:</p><p>  å¤§äºç­‰äº90: éå¸¸å®‰å…¨<br>  å¤§äºç­‰äº80: å®‰å…¨<br>  å¤§äºç­‰äº70: éå¸¸å¼º<br>  å¤§äºç­‰äº 60: å¼º<br>  å¤§äºç­‰äº 50: ä¸€èˆ¬<br>  å¤§äºç­‰äº 25: å¼±<br>  å¤§äºç­‰äº0:  éå¸¸å¼±</p><p>å½“ç”¨æˆ·è¾“å…¥ä¸€ä¸ªå¯†ç å­—ç¬¦ä¸²åï¼Œåˆ¤æ–­å¯†ç ç­‰çº§ï¼Œå¹¶è¾“å‡º</p><p>è¾“å…¥æè¿°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta">b12A3%</span><span class="bash"><span class="hljs-variable">$123</span></span><br></code></pre></div></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">éå¸¸å®‰å…¨<br></code></pre></div></td></tr></table></figure><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s1</span>(<span class="hljs-params">password</span>):</span><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;.&#123;,4&#125;$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">5</span><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;.&#123;5,7&#125;$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span><br><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;.&#123;8,&#125;$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">25</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s2</span>(<span class="hljs-params">password</span>):</span><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;[^a-zA-Z]*$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;([a-z]*$)|([A-Z]*$)&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span><br><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;.*(?=.*[a-z])(?=.*[A-Z]).*$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">20</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s3</span>(<span class="hljs-params">password</span>):</span><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;[^\d]*$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;[^\d]*[\d][^\d]*$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;.*[\d]+.*[\d]+.*$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">20</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s4</span>(<span class="hljs-params">password</span>):</span><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;[^!@#$%^&amp;*?]*$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;[^!@#$%^&amp;*?]*[!@#$%^&amp;*?][^!@#$%^&amp;*?]*$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;.*[!@#$%^&amp;*?]+.*[!@#$%^&amp;*?]+.*$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">20</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s5</span>(<span class="hljs-params">password</span>):</span><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;.*(?=.*\d.*$)(?=.*[!@#$%^&amp;*?].*$)(?=.*[a-z].*$)(?=.*[A-Z].*$).*$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">5</span><br><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;(?=.*\d.*$)(?=.*[!@#$%^&amp;*?].*$)(?=.*[a-zA-Z].*$).*$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">3</span><br><br>    <span class="hljs-keyword">if</span> re.match(<span class="hljs-string">r&quot;.*(?=.*[\d].*$)(?=.*[a-zA-Z].*$).*$&quot;</span>, password):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">2</span><br><br><br>password = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;</span>)<br>ret = <span class="hljs-built_in">sum</span>((s1(password), s2(password), s3(password), s4(password), s5(password)))<br><br><span class="hljs-keyword">if</span> ret &gt;= <span class="hljs-number">90</span>:<br>    print(<span class="hljs-string">&quot;éå¸¸å®‰å…¨&quot;</span>)<br><span class="hljs-keyword">elif</span> ret &gt;= <span class="hljs-number">80</span>:<br>    print(<span class="hljs-string">&quot;å®‰å…¨&quot;</span>)<br><span class="hljs-keyword">elif</span> ret &gt;= <span class="hljs-number">70</span>:<br>    print(<span class="hljs-string">&quot;éå¸¸å¼º&quot;</span>)<br><span class="hljs-keyword">elif</span> ret &gt;= <span class="hljs-number">60</span>:<br>    print(<span class="hljs-string">&quot;å¼º&quot;</span>)<br><span class="hljs-keyword">elif</span> ret &gt;= <span class="hljs-number">50</span>:<br>    print(<span class="hljs-string">&quot;ä¸€èˆ¬&quot;</span>)<br><span class="hljs-keyword">elif</span> ret &gt;= <span class="hljs-number">25</span>:<br>    print(<span class="hljs-string">&quot;å¼±&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    print(<span class="hljs-string">&quot;éå¸¸å¼±&quot;</span>)<br><br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå¤šä»»åŠ¡æœºåˆ¶</title>
      <link href="2019/05/17/python-gao-ji-jin-cheng-xian-cheng-xie-cheng/"/>
      <url>2019/05/17/python-gao-ji-jin-cheng-xian-cheng-xie-cheng/</url>
      
        <content type="html"><![CDATA[<h3 id="python-çº¿ç¨‹ä¸è¿›ç¨‹ç®€ä»‹"><a href="#python-çº¿ç¨‹ä¸è¿›ç¨‹ç®€ä»‹" class="headerlink" title="python çº¿ç¨‹ä¸è¿›ç¨‹ç®€ä»‹"></a>python çº¿ç¨‹ä¸è¿›ç¨‹ç®€ä»‹</h3><h4 id="1-è¿›ç¨‹ä¸çº¿ç¨‹çš„å†å²"><a href="#1-è¿›ç¨‹ä¸çº¿ç¨‹çš„å†å²" class="headerlink" title="1. è¿›ç¨‹ä¸çº¿ç¨‹çš„å†å²"></a>1. è¿›ç¨‹ä¸çº¿ç¨‹çš„å†å²</h4><p>æˆ‘ä»¬éƒ½çŸ¥é“è®¡ç®—æœºæ˜¯ç”±<strong>ç¡¬ä»¶</strong>å’Œ<strong>è½¯ä»¶</strong>ç»„æˆçš„ã€‚</p><ul><li>ç¡¬ä»¶ä¸­çš„ CPU æ˜¯è®¡ç®—æœºçš„æ ¸å¿ƒï¼Œå®ƒæ‰¿æ‹…è®¡ç®—æœºçš„æ‰€æœ‰ä»»åŠ¡ã€‚</li><li>æ“ä½œç³»ç»Ÿæ˜¯è¿è¡Œåœ¨ç¡¬ä»¶ä¹‹ä¸Šçš„è½¯ä»¶ï¼Œæ˜¯è®¡ç®—æœºçš„ç®¡ç†è€…ï¼Œå®ƒè´Ÿè´£èµ„æºçš„ç®¡ç†å’Œåˆ†é…ã€ä»»åŠ¡çš„è°ƒåº¦ã€‚</li><li>ç¨‹åºæ˜¯è¿è¡Œåœ¨ç³»ç»Ÿä¸Šçš„å…·æœ‰æŸç§åŠŸèƒ½çš„è½¯ä»¶ï¼Œæ¯”å¦‚è¯´æµè§ˆå™¨ï¼ŒéŸ³ä¹æ’­æ”¾å™¨ç­‰ã€‚</li></ul><p>æ¯æ¬¡æ‰§è¡Œç¨‹åºçš„æ—¶å€™ï¼Œéƒ½ä¼šå®Œæˆä¸€å®šçš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´æµè§ˆå™¨å¸®æˆ‘ä»¬æ‰“å¼€ç½‘é¡µï¼Œä¸ºäº†ä¿è¯å…¶ç‹¬ç«‹æ€§ï¼Œå°±éœ€è¦ä¸€ä¸ªä¸“é—¨çš„ç®¡ç†å’Œæ§åˆ¶æ‰§è¡Œç¨‹åºçš„æ•°æ®ç»“æ„â€”â€”<strong>è¿›ç¨‹æ§åˆ¶å—</strong>ã€‚</p><p>è¿›ç¨‹å°±æ˜¯ä¸€ä¸ªç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†ä¸Šçš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œè¿‡ç¨‹ã€‚</p><ul><li><p>è¿›ç¨‹ä¸€èˆ¬ç”±ç¨‹åºã€æ•°æ®é›†ã€è¿›ç¨‹æ§åˆ¶å—ä¸‰éƒ¨åˆ†ç»„æˆã€‚</p><ul><li>æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºç”¨æ¥æè¿°è¿›ç¨‹è¦å®Œæˆå“ªäº›åŠŸèƒ½ä»¥åŠå¦‚ä½•å®Œæˆï¼›</li><li>æ•°æ®é›†åˆ™æ˜¯ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€è¦ä½¿ç”¨çš„èµ„æºï¼›</li><li>è¿›ç¨‹æ§åˆ¶å—ç”¨æ¥è®°å½•è¿›ç¨‹çš„å¤–éƒ¨ç‰¹å¾ï¼Œæè¿°è¿›ç¨‹çš„æ‰§è¡Œå˜åŒ–è¿‡ç¨‹ï¼Œç³»ç»Ÿå¯ä»¥åˆ©ç”¨å®ƒæ¥æ§åˆ¶å’Œç®¡ç†è¿›ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿæ„ŸçŸ¥è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚</li></ul></li><li><p>åœ¨æ—©æœŸçš„æ“ä½œç³»ç»Ÿé‡Œï¼Œè®¡ç®—æœºåªæœ‰ä¸€ä¸ªæ ¸å¿ƒï¼Œè¿›ç¨‹æ˜¯æ‰§è¡Œç¨‹åºçš„æœ€å°å•ä½ï¼Œä»»åŠ¡è°ƒåº¦é‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬çš„æŠ¢å å¼æ–¹å¼è¿›è¡Œè¿›ç¨‹è°ƒåº¦ã€‚</p></li><li><p>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰å„è‡ªçš„ä¸€å—ç‹¬ç«‹çš„å†…å­˜ï¼Œä¿è¯è¿›ç¨‹å½¼æ­¤é—´çš„å†…å­˜åœ°å€ç©ºé—´çš„éš”ç¦»ã€‚</p></li></ul><p>éšç€è®¡ç®—æœºæŠ€æœ¯çš„å‘å±•ï¼Œè¿›ç¨‹å‡ºç°äº†å¾ˆå¤šå¼Šç«¯ï¼š</p><ul><li>ä¸€æ˜¯è¿›ç¨‹çš„åˆ›å»ºã€æ’¤é”€å’Œåˆ‡æ¢çš„å¼€é”€æ¯”è¾ƒå¤§</li><li>äºŒæ˜¯ç”±äºå¯¹ç§°å¤šå¤„ç†æœºï¼ˆå¯¹ç§°å¤šå¤„ç†æœºï¼ˆSymmetricalMulti-Processingï¼‰åˆå« SMPï¼Œæ˜¯æŒ‡åœ¨ä¸€ä¸ªè®¡ç®—æœºä¸Šæ±‡é›†äº†ä¸€ç»„å¤„ç†å™¨ (å¤š CPU)ï¼Œå„ CPU ä¹‹é—´å…±äº«å†…å­˜å­ç³»ç»Ÿä»¥åŠæ€»çº¿ç»“æ„ï¼‰çš„å‡ºç°ï¼Œå¯ä»¥æ»¡è¶³å¤šä¸ªè¿è¡Œå•ä½ï¼Œè€Œå¤šè¿›ç¨‹å¹¶è¡Œå¼€é”€è¿‡å¤§ã€‚</li></ul><p>è¿™ä¸ªæ—¶å€™å°±å¼•å…¥äº†çº¿ç¨‹çš„æ¦‚å¿µã€‚</p><ul><li>çº¿ç¨‹ä¹Ÿå«è½»é‡çº§è¿›ç¨‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºæœ¬çš„ CPU æ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æœ€å°å•å…ƒï¼Œç”±çº¿ç¨‹ IDã€ç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨é›†åˆ å’Œå †æ ˆå…±åŒç»„æˆã€‚</li><li>çº¿ç¨‹çš„å¼•å…¥å‡å°äº†ç¨‹åºå¹¶å‘æ‰§è¡Œæ—¶çš„å¼€é”€ï¼Œæé«˜äº†æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ã€‚</li><li>çº¿ç¨‹æ²¡æœ‰è‡ªå·±çš„ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰åœ¨è¿è¡Œæ—¶å¿…ä¸å¯å°‘çš„èµ„æºã€‚</li><li>ä½†çº¿ç¨‹å¯ä»¥ä¸åŒå±ä¸åŒä¸€è¿›ç¨‹çš„å…¶ä»–çº¿ç¨‹å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„å…¶ä»–èµ„æºã€‚</li></ul><h4 id="2-è¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„å…³ç³»"><a href="#2-è¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„å…³ç³»" class="headerlink" title="2.  è¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„å…³ç³»"></a>2.  è¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„å…³ç³»</h4><ul><li>çº¿ç¨‹æ˜¯å±äºè¿›ç¨‹çš„ï¼Œçº¿ç¨‹è¿è¡Œåœ¨è¿›ç¨‹ç©ºé—´å†…ï¼ŒåŒä¸€è¿›ç¨‹æ‰€äº§ç”Ÿçš„çº¿ç¨‹å…±äº«åŒä¸€å†…å­˜ç©ºé—´ï¼Œå½“è¿›ç¨‹é€€å‡ºæ—¶è¯¥è¿›ç¨‹æ‰€äº§ç”Ÿçš„çº¿ç¨‹éƒ½ä¼šè¢«å¼ºåˆ¶é€€å‡ºå¹¶æ¸…é™¤ã€‚</li><li>çº¿ç¨‹å¯ä¸å±äºåŒä¸€è¿›ç¨‹çš„å…¶å®ƒçº¿ç¨‹å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„å…¨éƒ¨èµ„æºï¼Œä½†æ˜¯å…¶æœ¬èº«åŸºæœ¬ä¸Šä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰ä¸€ç‚¹åœ¨è¿è¡Œä¸­å¿…ä¸å¯å°‘çš„ä¿¡æ¯ (å¦‚ç¨‹åºè®¡æ•°å™¨ã€ä¸€ç»„å¯„å­˜å™¨å’Œæ ˆ)ã€‚</li></ul><h4 id="3-å®ˆæŠ¤çº¿ç¨‹ä¸å®ˆæŠ¤è¿›ç¨‹çš„åŒºåˆ«"><a href="#3-å®ˆæŠ¤çº¿ç¨‹ä¸å®ˆæŠ¤è¿›ç¨‹çš„åŒºåˆ«" class="headerlink" title="3. å®ˆæŠ¤çº¿ç¨‹ä¸å®ˆæŠ¤è¿›ç¨‹çš„åŒºåˆ«"></a>3. å®ˆæŠ¤çº¿ç¨‹ä¸å®ˆæŠ¤è¿›ç¨‹çš„åŒºåˆ«</h4><blockquote><p>å¼ºè°ƒï¼šè¿è¡Œå®Œæ¯•ï¼Œå¹¶éæ˜¯ç»ˆæ­¢</p></blockquote><ul><li><p>çº¿ç¨‹ä¸è¿›ç¨‹è¿è¡Œå®Œæ¯•çš„åŒºåˆ«ï¼š</p><ul><li><p>ä¸»è¿›ç¨‹è¿è¡Œå®Œæ¯•æŒ‡çš„æ˜¯ä¸»è¿›ç¨‹ä»£ç è¿è¡Œå®Œæ¯•</p></li><li><p>ä¸»çº¿ç¨‹è¿è¡Œå®Œæ¯•æŒ‡çš„æ˜¯æ‰€åœ¨çš„è¿›ç¨‹å†…çš„æ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹è¿è¡Œå®Œæ¯•åï¼Œä¸»çº¿ç¨‹æ‰ç®—è¿è¡Œå®Œæ¯•</p></li></ul></li><li><p>å®ˆæŠ¤è¿›ç¨‹ï¼šä¸»è¿›ç¨‹ä»£ç è¿è¡Œå®Œæ¯•ï¼Œå®ˆæŠ¤è¿›ç¨‹ä¹Ÿå°±ç»“æŸ <strong>(å®ˆæŠ¤çš„æ˜¯ä¸»è¿›ç¨‹)</strong></p><ul><li><p>ä¸»è¿›ç¨‹è¦ç­‰éå®ˆæŠ¤è¿›ç¨‹éƒ½è¿è¡Œå®Œæ¯•åå†å›æ”¶å­è¿›ç¨‹çš„èµ„æºï¼ˆå¦åˆ™ä¼šäº§ç”Ÿåƒµå°¸è¿›ç¨‹ï¼‰æ‰ç»“æŸ</p></li><li><p>ä¸»è¿›ç¨‹ç­‰å­è¿›ç¨‹æ˜¯å› ä¸ºä¸»è¿›ç¨‹è¦ç»™å­è¿›ç¨‹æ”¶å°¸ï¼ˆä»£ç”¨waitæ–¹æ³•å‘æ“ä½œç³»ç»Ÿå‘èµ·å›æ”¶èµ„æºä¿¡å·ï¼ˆpidå·ï¼ŒçŠ¶æ€ä¿¡æ¯ï¼‰ï¼‰</p></li></ul></li><li><p>å®ˆæŠ¤çº¿ç¨‹ï¼šéå®ˆæŠ¤çº¿ç¨‹ä»£ç è¿è¡Œå®Œæ¯•ï¼Œå®ˆæŠ¤çº¿ç¨‹ä¹Ÿå°±ç»“æŸ <strong>(å®ˆæŠ¤çš„æ˜¯éå®ˆæŠ¤çº¿ç¨‹)</strong></p><ul><li><p>ä¸»çº¿ç¨‹åœ¨å…¶ä»–éå®ˆæŠ¤çº¿ç¨‹è¿è¡Œå®Œæ¯•åæ‰ç®—ç»“æŸï¼ˆå®ˆæŠ¤çº¿ç¨‹åœ¨æ­¤æ—¶å°±ä¼šè¢«å›æ”¶ï¼‰</p></li><li><p>å¼ºè°ƒï¼šä¸»çº¿ç¨‹ä¹Ÿæ˜¯éå®ˆæŠ¤çº¿ç¨‹ï¼ˆè¿›ç¨‹åŒ…å«äº†çº¿ç¨‹ï¼‰</p></li></ul></li></ul><blockquote><p>æ€»ç»“:ä¸»çº¿ç¨‹çš„ç»“æŸæ„å‘³ç€è¿›ç¨‹ç»“æŸï¼Œè¿›ç¨‹æ•´ä½“çš„èµ„æºéƒ½ä¼šè¢«å›æ”¶ï¼Œè€Œè¿›ç¨‹å¿…é¡»ä¿è¯éå®ˆæŠ¤çº¿ç¨‹éƒ½è¿è¡Œå®Œæ¯•åæ‰èƒ½ç»“æŸ</p></blockquote><ul><li>å®ˆæŠ¤è¿›ç¨‹ï¼šä¸»è¿›ç¨‹ä»£ç è¿è¡Œå®Œæ¯•ï¼Œå®ˆæŠ¤è¿›ç¨‹ä¹Ÿå°±ç»“æŸ</li><li>å®ˆæŠ¤çº¿ç¨‹ï¼šéå®ˆæŠ¤çº¿ç¨‹è¿è¡Œå®Œæ¯•ï¼Œå®ˆæŠ¤çº¿ç¨‹ç»“æŸ</li></ul><h3 id="python-çº¿ç¨‹"><a href="#python-çº¿ç¨‹" class="headerlink" title="python çº¿ç¨‹"></a>python çº¿ç¨‹</h3><p>Threading ç”¨äºæä¾›çº¿ç¨‹ç›¸å…³çš„æ“ä½œï¼Œçº¿ç¨‹æ˜¯åº”ç”¨ç¨‹åºä¸­å·¥ä½œçš„æœ€å°å•å…ƒã€‚</p><h4 id="1ã€threading-æ¨¡å—"><a href="#1ã€threading-æ¨¡å—" class="headerlink" title="1ã€threading æ¨¡å—"></a>1ã€threading æ¨¡å—</h4><p>threading æ¨¡å—å»ºç«‹åœ¨ _thread æ¨¡å—ä¹‹ä¸Šã€‚thread æ¨¡å—ä»¥ä½çº§ã€åŸå§‹çš„æ–¹å¼æ¥å¤„ç†å’Œæ§åˆ¶çº¿ç¨‹ï¼Œè€Œ threading æ¨¡å—é€šè¿‡å¯¹ thread è¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œæä¾›äº†æ›´æ–¹ä¾¿çš„ api æ¥å¤„ç†çº¿ç¨‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> time<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">worker</span>(<span class="hljs-params">num</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    thread worker function</span><br><span class="hljs-string">    :return:</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    time.sleep(<span class="hljs-number">3</span>)<br>    print(<span class="hljs-string">&quot;The num is  %d&quot;</span> % num)<br>    <span class="hljs-keyword">return</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>        t = threading.Thread(target=worker, args=(i,), name=<span class="hljs-string">&quot;t.%d&quot;</span> % i)<br>        t.start()<br><br></code></pre></div></td></tr></table></figure><p>ä¸Šè¿°ä»£ç åˆ›å»ºäº†5ä¸ªâ€å‰å°â€çº¿ç¨‹ï¼Œç„¶åæ§åˆ¶å™¨å°±äº¤ç»™äº†CPUï¼ŒCPUæ ¹æ®æŒ‡å®šç®—æ³•è¿›è¡Œè°ƒåº¦ï¼Œåˆ†ç‰‡æ‰§è¡ŒæŒ‡ä»¤ã€‚</p><blockquote><p>Threadå‚æ•°ä»‹ç»ï¼š</p></blockquote><ul><li><p>groupï¼šå‚æ•°æœªä½¿ç”¨ï¼Œé»˜è®¤å€¼ä¸ºNoneã€‚</p></li><li><p>targetï¼šè¡¨ç¤ºè°ƒç”¨å¯¹è±¡ï¼Œå³å­çº¿ç¨‹è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚</p></li><li><p>argsï¼šè¡¨ç¤ºè°ƒç”¨çš„ä½ç½®å‚æ•°å…ƒç»„ã€‚</p></li><li><p>kwargsï¼šè¡¨ç¤ºè°ƒç”¨å¯¹è±¡çš„å­—å…¸ã€‚å¦‚kwargs = {â€˜nameâ€™:Jack, â€˜ageâ€™:18}ã€‚</p></li><li><p>nameï¼šå­è¿›ç¨‹åç§°ã€‚</p></li><li><p>daemonï¼šè®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹(True)æˆ–éå®ˆæŠ¤çº¿ç¨‹(é»˜è®¤ï¼šFalse)</p></li></ul><blockquote><p>Threadå±æ€§æ–¹æ³•è¯´æ˜</p></blockquote><table><thead><tr><th align="center">æ–¹æ³•/å±æ€§</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">start()</td><td align="left">æ¿€æ´»çº¿ç¨‹ã€‚ä½¿ç”¨è¯¥æ–¹æ³•å¯åŠ¨ä¸€ä¸ªå­çº¿ç¨‹ï¼Œçº¿ç¨‹åå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„nameï¼Œæƒ³å¯åŠ¨å¤šçº¿ç¨‹ï¼Œå°±å¿…é¡»ä½¿ç”¨æ­¤æ–¹æ³•</td></tr><tr><td align="center">run()</td><td align="left">çº¿ç¨‹è¢«cpuè°ƒåº¦åè‡ªåŠ¨æ‰§è¡Œçº¿ç¨‹å¯¹è±¡çš„runæ–¹æ³•,ç›´æ¥ä½¿ç”¨è¯¥æ–¹æ³•å¹¶ä¸å¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œå°±æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨äº†ä¸€ä¸ªæ™®é€šå‡½æ•°è€Œå·²</td></tr><tr><td align="center">ident</td><td align="left">è·å–çº¿ç¨‹çš„æ ‡è¯†ç¬¦ã€‚çº¿ç¨‹æ ‡è¯†ç¬¦æ˜¯ä¸€ä¸ªéé›¶æ•´æ•°ï¼Œåªæœ‰åœ¨è°ƒç”¨äº†start()æ–¹æ³•ä¹‹åè¯¥å±æ€§æ‰æœ‰æ•ˆï¼Œå¦åˆ™å®ƒåªè¿”å›Noneã€‚</td></tr><tr><td align="center">name</td><td align="left">è·å–æˆ–è®¾ç½®çº¿ç¨‹çš„åç§°</td></tr><tr><td align="center">getName()</td><td align="left">è·å–çº¿ç¨‹çš„åç§°</td></tr><tr><td align="center">setName()</td><td align="left">è®¾ç½®çº¿ç¨‹çš„åç§°</td></tr><tr><td align="center">is_alive()</td><td align="left">åˆ¤æ–­çº¿ç¨‹æ˜¯å¦ä¸ºæ¿€æ´»çŠ¶æ€</td></tr><tr><td align="center">isAlive()</td><td align="left">åˆ¤æ–­çº¿ç¨‹æ˜¯å¦ä¸ºæ¿€æ´»çŠ¶æ€</td></tr><tr><td align="center">setDaemon()</td><td align="left">è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹æˆ–éå®ˆæŠ¤çº¿ç¨‹ï¼›é»˜è®¤å€¼ä¸ºFalseï¼Œå¦‚æœè®¾ç½®ä¸ºTrueï¼Œä»£è¡¨è¯¥è¿›ç¨‹ä¸ºåå°å®ˆæŠ¤çº¿ç¨‹ï¼›å½“éå®ˆæŠ¤çº¿ç¨‹(ä¸åªæ˜¯ä¸»çº¿ç¨‹)ç»ˆæ­¢æ—¶ï¼Œè¯¥çº¿ç¨‹ä¹Ÿéšä¹‹ç»ˆæ­¢ï¼›å¹¶ä¸”è®¾ç½®ä¸ºTrueåï¼Œè¯¥çº¿ç¨‹ä¸èƒ½åˆ›å»ºå­çº¿ç¨‹ï¼Œè®¾ç½®è¯¥å±æ€§è®¾ç½®å¿…é¡»åœ¨start()ä¹‹å‰</td></tr><tr><td align="center">isDaemon()</td><td align="left">åˆ¤æ–­æ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹</td></tr><tr><td align="center">join()</td><td align="left">é˜»å¡ç­‰å¾…è¯¥çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œè¯¥æ–¹æ³•ä¸»è¦è®©ä¸»çº¿ç¨‹é˜»å¡ç­‰å¾…æ‰€æœ‰å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</td></tr></tbody></table><h4 id="2ã€çº¿ç¨‹é”threading-RLockå’Œthreading-Lock"><a href="#2ã€çº¿ç¨‹é”threading-RLockå’Œthreading-Lock" class="headerlink" title="2ã€çº¿ç¨‹é”threading.RLockå’Œthreading.Lock"></a>2ã€çº¿ç¨‹é”threading.RLockå’Œthreading.Lock</h4><p>ç”±äºçº¿ç¨‹ä¹‹é—´æ˜¯è¿›è¡Œéšæœºè°ƒåº¦ï¼Œå¹¶ä¸”æ¯ä¸ªçº¿ç¨‹å¯èƒ½åªæ‰§è¡Œnæ¡æ‰§è¡Œä¹‹åï¼ŒCPUæ¥ç€æ‰§è¡Œå…¶ä»–çº¿ç¨‹ã€‚ä¸ºäº†ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§ï¼Œå¼•å…¥äº†é”çš„æ¦‚å¿µã€‚æ‰€ä»¥ï¼Œå¯èƒ½å‡ºç°å¦‚ä¸‹é—®é¢˜ï¼š</p><p>å‡è®¾ä¸¤ä¸ªçº¿ç¨‹t1å’Œt2éƒ½è¦å¯¹å…¨å±€å˜é‡g_num(é»˜è®¤æ˜¯0)è¿›è¡ŒåŠ 1è¿ç®—ï¼Œt1å’Œt2éƒ½å„å¯¹g_numåŠ 1000000æ¬¡ï¼Œg_numçš„æœ€ç»ˆçš„ç»“æœåº”è¯¥ä¸º2000000ã€‚</p><p>ä½†æ˜¯ç”±äºæ˜¯å¤šçº¿ç¨‹åŒæ—¶æ“ä½œï¼Œæœ‰å¯èƒ½å‡ºç°ä¸‹é¢æƒ…å†µï¼š</p><p>åœ¨g_num=0æ—¶ï¼Œt1å–å¾—g_num=0ã€‚æ­¤æ—¶ç³»ç»ŸæŠŠt1è°ƒåº¦ä¸ºâ€sleepingâ€çŠ¶æ€ï¼ŒæŠŠt2è½¬æ¢ä¸ºâ€runningâ€çŠ¶æ€ï¼Œt2ä¹Ÿè·å¾—g_num=0<br>ç„¶åt2å¯¹å¾—åˆ°çš„å€¼è¿›è¡ŒåŠ 1å¹¶èµ‹ç»™g_numï¼Œä½¿å¾—g_num=1<br>ç„¶åç³»ç»ŸåˆæŠŠt2è°ƒåº¦ä¸ºâ€sleepingâ€ï¼ŒæŠŠt1è½¬ä¸ºâ€runningâ€ã€‚çº¿ç¨‹t1åˆæŠŠå®ƒä¹‹å‰å¾—åˆ°çš„0åŠ 1åèµ‹å€¼ç»™g_numã€‚<br>è¿™æ ·å¯¼è‡´è™½ç„¶t1å’Œt2éƒ½å¯¹g_numåŠ 1ï¼Œä½†ç»“æœä»ç„¶æ˜¯g_num=1<br><strong>å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹åŒä¸€ä¸ªå…¨å±€å˜é‡æ“ä½œï¼Œä¼šå‡ºç°èµ„æºç«äº‰é—®é¢˜ï¼Œä»è€Œæ•°æ®ç»“æœä¼šä¸æ­£ç¡®ï¼Œé”çš„å‡ºç°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</strong></p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><br>g_num = <span class="hljs-number">0</span><br>lock = threading.Lock() <span class="hljs-comment">#åˆ›å»ºé”</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">work1</span>(<span class="hljs-params">num</span>):</span><br>    <span class="hljs-keyword">global</span> g_num<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num):<br>        lock.acquire() <span class="hljs-comment"># åŠ é”</span><br>        g_num += <span class="hljs-number">1</span><br>        lock.release() <span class="hljs-comment"># è§£é”</span><br>    print(<span class="hljs-string">&quot;----in work1, g_num is %d---&quot;</span> % g_num)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">work2</span>(<span class="hljs-params">num</span>):</span><br>    <span class="hljs-keyword">global</span> g_num<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num):<br>        lock.acquire()<br>        g_num += <span class="hljs-number">1</span><br>        lock.release()<br>    print(<span class="hljs-string">&quot;----in work2, g_num is %d---&quot;</span> % g_num)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    print(<span class="hljs-string">&quot;---çº¿ç¨‹åˆ›å»ºä¹‹å‰g_num is %d---&quot;</span> % g_num)<br>    t1 = threading.Thread(target=work1, args=(<span class="hljs-number">1000000</span>,))<br>    t2 = threading.Thread(target=work2, args=(<span class="hljs-number">1000000</span>,))<br><br>    t1.start()<br>    t2.start()<br><br>    t1.join()<br>    t2.join()<br><br>    print(<span class="hljs-string">&quot;2ä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªå…¨å±€å˜é‡æ“ä½œä¹‹åçš„æœ€ç»ˆç»“æœæ˜¯:%s&quot;</span> % g_num)<br></code></pre></div></td></tr></table></figure><h4 id="3ã€threading-RLockå’Œthreading-Lock-çš„åŒºåˆ«"><a href="#3ã€threading-RLockå’Œthreading-Lock-çš„åŒºåˆ«" class="headerlink" title="3ã€threading.RLockå’Œthreading.Lock çš„åŒºåˆ«"></a>3ã€threading.RLockå’Œthreading.Lock çš„åŒºåˆ«</h4><p>  RLockå…è®¸åœ¨åŒä¸€çº¿ç¨‹ä¸­è¢«å¤šæ¬¡acquireã€‚è€ŒLockå´ä¸å…è®¸è¿™ç§æƒ…å†µã€‚ </p><p>  å¦‚æœä½¿ç”¨RLockï¼Œé‚£ä¹ˆacquireå’Œreleaseå¿…é¡»æˆå¯¹å‡ºç°ï¼Œå³è°ƒç”¨äº†næ¬¡acquireï¼Œå¿…é¡»è°ƒç”¨næ¬¡çš„releaseæ‰èƒ½çœŸæ­£é‡Šæ”¾æ‰€å ç”¨çš„é”ã€‚</p><ul><li>Lockå¤šæ¬¡åŠ é”æ¼”ç¤º</li></ul><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br>lock = threading.Lock()    <span class="hljs-comment">#Lockå¯¹è±¡</span><br>lock.acquire()<br>lock.acquire()  <span class="hljs-comment">#äº§ç”Ÿäº†æ­»é”ã€‚</span><br>lock.release()<br>lock.release()<br></code></pre></div></td></tr></table></figure><ul><li>RLockå¤šæ¬¡åŠ é”æ¼”ç¤º</li></ul><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br>rLock = threading.RLock()  <span class="hljs-comment">#RLockå¯¹è±¡</span><br>rLock.acquire()<br>rLock.acquire()    <span class="hljs-comment">#åœ¨åŒä¸€çº¿ç¨‹å†…ï¼Œç¨‹åºä¸ä¼šå µå¡ã€‚</span><br>rLock.release()<br>rLock.release()<br></code></pre></div></td></tr></table></figure><h4 id="4ã€threading-Event"><a href="#4ã€threading-Event" class="headerlink" title="4ã€threading.Event"></a>4ã€threading.Event</h4><p>é€šè¿‡threading.Event()å¯ä»¥åˆ›å»ºä¸€ä¸ªäº‹ä»¶ç®¡ç†æ ‡å¿—ï¼Œè¯¥æ ‡å¿—ï¼ˆeventï¼‰é»˜è®¤ä¸ºFalseï¼Œeventå¯¹è±¡ä¸»è¦æœ‰å››ç§æ–¹æ³•å¯ä»¥è°ƒç”¨ï¼š</p><ul><li>event.wait(timeout=None)ï¼šè°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œå¦‚æœè®¾ç½®äº†timeoutå‚æ•°ï¼Œè¶…æ—¶åï¼Œçº¿ç¨‹ä¼šåœæ­¢é˜»å¡ç»§ç»­æ‰§è¡Œï¼›</li><li>event.set()ï¼šå°†eventçš„æ ‡å¿—è®¾ç½®ä¸ºTrueï¼Œè°ƒç”¨waitæ–¹æ³•çš„æ‰€æœ‰çº¿ç¨‹å°†è¢«å”¤é†’ï¼›</li><li>event.clear()ï¼šå°†eventçš„æ ‡å¿—è®¾ç½®ä¸ºFalseï¼Œè°ƒç”¨waitæ–¹æ³•çš„æ‰€æœ‰çº¿ç¨‹å°†è¢«é˜»å¡ï¼›</li><li>event.isSet()ï¼šåˆ¤æ–­eventçš„æ ‡å¿—æ˜¯å¦ä¸ºTrueã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">do</span>(<span class="hljs-params">event</span>):</span><br>    print(<span class="hljs-string">&#x27;start&#x27;</span>)<br>    event.wait()<br>    print(<span class="hljs-string">&#x27;execute&#x27;</span>)<br><br>event_obj = threading.Event()<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>    t = threading.Thread(target=do, args=(event_obj,))<br>    t.start()<br><br>event_obj.clear()<br>inp = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;input:&#x27;</span>)<br><span class="hljs-keyword">if</span> inp == <span class="hljs-string">&#x27;true&#x27;</span>:<br>    event_obj.<span class="hljs-built_in">set</span>()<br></code></pre></div></td></tr></table></figure><h4 id="5ã€threading-Condition"><a href="#5ã€threading-Condition" class="headerlink" title="5ã€threading.Condition"></a>5ã€threading.Condition</h4><p>Pythonæä¾›çš„Conditionå¯¹è±¡æä¾›äº†å¯¹å¤æ‚çº¿ç¨‹åŒæ­¥é—®é¢˜çš„æ”¯æŒã€‚</p><ul><li>Conditionè¢«ç§°ä¸ºæ¡ä»¶å˜é‡ï¼Œé™¤äº†æä¾›ä¸Lockç±»ä¼¼çš„acquireå’Œreleaseæ–¹æ³•å¤–ï¼Œè¿˜æä¾›äº†waitå’Œnotifyæ–¹æ³•ã€‚</li></ul><h5 id="Conditionçš„å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š"><a href="#Conditionçš„å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š" class="headerlink" title="Conditionçš„å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š"></a>Conditionçš„å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š</h5><ul><li>é¦–å…ˆacquireä¸€ä¸ªæ¡ä»¶å˜é‡ï¼Œç„¶ååˆ¤æ–­ä¸€äº›æ¡ä»¶ã€‚</li><li>å¦‚æœæ¡ä»¶ä¸æ»¡è¶³åˆ™waitï¼›</li><li>å¦‚æœæ¡ä»¶æ»¡è¶³ï¼Œè¿›è¡Œä¸€äº›å¤„ç†æ”¹å˜æ¡ä»¶åï¼Œé€šè¿‡notifyæ–¹æ³•é€šçŸ¥å…¶ä»–çº¿ç¨‹ï¼Œå…¶ä»–å¤„äºwaitçŠ¶æ€çš„çº¿ç¨‹æ¥åˆ°é€šçŸ¥åä¼šé‡æ–°åˆ¤æ–­æ¡ä»¶ã€‚</li><li>ä¸æ–­çš„é‡å¤è¿™ä¸€è¿‡ç¨‹ï¼Œä»è€Œè§£å†³å¤æ‚çš„åŒæ­¥é—®é¢˜ã€‚</li></ul><h5 id="Conditionçš„åŸºæœ¬åŸç†å¦‚ä¸‹ï¼š"><a href="#Conditionçš„åŸºæœ¬åŸç†å¦‚ä¸‹ï¼š" class="headerlink" title="Conditionçš„åŸºæœ¬åŸç†å¦‚ä¸‹ï¼š"></a>Conditionçš„åŸºæœ¬åŸç†å¦‚ä¸‹ï¼š</h5><p>å¯ä»¥è®¤ä¸º<strong>Conditionå¯¹è±¡</strong>ç»´æŠ¤äº†ä¸€ä¸ª<strong>é”ï¼ˆLock/RLock)</strong>å’Œä¸€ä¸ª<strong>waitingæ± </strong>ã€‚çº¿ç¨‹é€šè¿‡acquireè·å¾—Conditionå¯¹è±¡ï¼Œå½“è°ƒç”¨waitæ–¹æ³•æ—¶ï¼Œçº¿ç¨‹ä¼šé‡Šæ”¾Conditionå†…éƒ¨çš„é”å¹¶è¿›å…¥blockedçŠ¶æ€ï¼ŒåŒæ—¶åœ¨waitingæ± ä¸­è®°å½•è¿™ä¸ªçº¿ç¨‹ã€‚å½“è°ƒç”¨notifyæ–¹æ³•æ—¶ï¼ŒConditionå¯¹è±¡ä¼šä»waitingæ± ä¸­æŒ‘é€‰ä¸€ä¸ªçº¿ç¨‹ï¼Œé€šçŸ¥å…¶è°ƒç”¨acquireæ–¹æ³•å°è¯•å–åˆ°é”ã€‚</p><p>Conditionå¯¹è±¡çš„æ„é€ å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªLock/RLockå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™Conditionå¯¹è±¡ä¼šåœ¨å†…éƒ¨è‡ªè¡Œåˆ›å»ºä¸€ä¸ªRLockã€‚</p><p>é™¤äº†notifyæ–¹æ³•å¤–ï¼ŒConditionå¯¹è±¡è¿˜æä¾›äº†notifyAllæ–¹æ³•ï¼Œå¯ä»¥é€šçŸ¥waitingæ± ä¸­çš„æ‰€æœ‰çº¿ç¨‹å°è¯•acquireå†…éƒ¨é”ã€‚ç”±äºä¸Šè¿°æœºåˆ¶ï¼Œ<strong>å¤„äºwaitingçŠ¶æ€çš„çº¿ç¨‹åªèƒ½é€šè¿‡notifyæ–¹æ³•å”¤é†’ï¼Œæ‰€ä»¥notifyAllçš„ä½œç”¨åœ¨äºé˜²æ­¢æœ‰çš„çº¿ç¨‹æ°¸è¿œå¤„äºæ²‰é»˜çŠ¶æ€ã€‚</strong></p><h5 id="Conditionçš„æ¡ˆä¾‹æ¼”ç¤ºå¦‚ä¸‹ï¼š"><a href="#Conditionçš„æ¡ˆä¾‹æ¼”ç¤ºå¦‚ä¸‹ï¼š" class="headerlink" title="Conditionçš„æ¡ˆä¾‹æ¼”ç¤ºå¦‚ä¸‹ï¼š"></a>Conditionçš„æ¡ˆä¾‹æ¼”ç¤ºå¦‚ä¸‹ï¼š</h5><p>æ¼”ç¤ºæ¡ä»¶å˜é‡åŒæ­¥çš„ç»å…¸é—®é¢˜æ˜¯ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜ï¼šå‡è®¾æœ‰ä¸€ç¾¤ç”Ÿäº§è€…(Producer)å’Œä¸€ç¾¤æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰é€šè¿‡ä¸€ä¸ªå¸‚åœºæ¥äº¤äº’äº§å“ã€‚ç”Ÿäº§è€…çš„â€ç­–ç•¥â€œæ˜¯å¦‚æœå¸‚åœºä¸Šå‰©ä½™çš„äº§å“å°‘äº1000ä¸ªï¼Œé‚£ä¹ˆå°±ç”Ÿäº§100ä¸ªäº§å“æ”¾åˆ°å¸‚åœºä¸Šï¼›è€Œæ¶ˆè´¹è€…çš„â€ç­–ç•¥â€œæ˜¯å¦‚æœå¸‚åœºä¸Šå‰©ä½™äº§å“çš„æ•°é‡å¤šä½™100ä¸ªï¼Œé‚£ä¹ˆå°±æ¶ˆè´¹3ä¸ªäº§å“ã€‚</p><p>ç”¨Conditionè§£å†³ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">Created on Wed Nov 28 17:15:29 2018</span><br><span class="hljs-string"></span><br><span class="hljs-string">@author: 18665</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Producer</span>(<span class="hljs-params">threading.Thread</span>):</span><br>    <span class="hljs-comment"># ç”Ÿäº§è€…å‡½æ•°</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">global</span> count<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-keyword">if</span> con.acquire():<br>                <span class="hljs-comment"># å½“count å°äºç­‰äº1000 çš„æ—¶å€™è¿›è¡Œç”Ÿäº§</span><br>                <span class="hljs-keyword">if</span> count &gt; <span class="hljs-number">1000</span>:<br>                    con.wait()<br>                <span class="hljs-keyword">else</span>:<br>                    count = count+<span class="hljs-number">100</span><br>                    msg = self.name+<span class="hljs-string">&#x27; produce 100, count=&#x27;</span> + <span class="hljs-built_in">str</span>(count)<br>                    print(msg)<br>                    <span class="hljs-comment"># å®Œæˆç”Ÿæˆåå”¤é†’waitingçŠ¶æ€çš„çº¿ç¨‹ï¼Œ</span><br>                    <span class="hljs-comment"># ä»waitingæ± ä¸­æŒ‘é€‰ä¸€ä¸ªçº¿ç¨‹ï¼Œé€šçŸ¥å…¶è°ƒç”¨acquireæ–¹æ³•å°è¯•å–åˆ°é”</span><br>                    con.notify()<br>                con.release()<br>                time.sleep(<span class="hljs-number">1</span>)<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Consumer</span>(<span class="hljs-params">threading.Thread</span>):</span><br>    <span class="hljs-comment"># æ¶ˆè´¹è€…å‡½æ•°</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">global</span> count<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-comment"># å½“count å¤§äºç­‰äº100çš„æ—¶å€™è¿›è¡Œæ¶ˆè´¹</span><br>            <span class="hljs-keyword">if</span> con.acquire():<br>                <span class="hljs-keyword">if</span> count &lt; <span class="hljs-number">100</span>:<br>                    con.wait()<br><br>                <span class="hljs-keyword">else</span>:<br>                    count = count-<span class="hljs-number">5</span><br>                    msg = self.name+<span class="hljs-string">&#x27; consume 5, count=&#x27;</span>+<span class="hljs-built_in">str</span>(count)<br>                    print(msg)<br>                    con.notify()<br>                    <span class="hljs-comment"># å®Œæˆç”Ÿæˆåå”¤é†’waitingçŠ¶æ€çš„çº¿ç¨‹ï¼Œ</span><br>                    <span class="hljs-comment"># ä»waitingæ± ä¸­æŒ‘é€‰ä¸€ä¸ªçº¿ç¨‹ï¼Œé€šçŸ¥å…¶è°ƒç”¨acquireæ–¹æ³•å°è¯•å–åˆ°é”</span><br>                con.release()<br>                time.sleep(<span class="hljs-number">1</span>)<br><br>count = <span class="hljs-number">500</span><br>con = threading.Condition()<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test</span>():</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>):<br>        p = Producer()<br>        p.start()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>        c = Consumer()<br>        c.start()<br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    test()<br></code></pre></div></td></tr></table></figure><h4 id="6ã€queueæ¨¡å—"><a href="#6ã€queueæ¨¡å—" class="headerlink" title="6ã€queueæ¨¡å—"></a>6ã€queueæ¨¡å—</h4><p>queue.Queue å°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¯ä»¥åˆ©ç”¨å®ƒå®ç°çº¿ç¨‹é—´çš„å®‰å…¨é€šä¿¡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> queue<br><br>q = queue.Queue(maxsize=<span class="hljs-number">0</span>)  <span class="hljs-comment"># æ„é€ ä¸€ä¸ªå…ˆè¿›æ˜¾å‡ºé˜Ÿåˆ—ï¼ŒmaxsizeæŒ‡å®šé˜Ÿåˆ—é•¿åº¦ï¼Œä¸º0 æ—¶ï¼Œè¡¨ç¤ºé˜Ÿåˆ—é•¿åº¦æ— é™åˆ¶ã€‚</span><br><br>q.join()    <span class="hljs-comment"># ç­‰åˆ°é˜Ÿåˆ—ä¸ºkongçš„æ—¶å€™ï¼Œåœ¨æ‰§è¡Œåˆ«çš„æ“ä½œ</span><br>q.qsize()   <span class="hljs-comment"># è¿”å›é˜Ÿåˆ—çš„å¤§å° ï¼ˆä¸å¯é ï¼‰</span><br>q.empty()   <span class="hljs-comment"># å½“é˜Ÿåˆ—ä¸ºç©ºçš„æ—¶å€™ï¼Œè¿”å›True å¦åˆ™è¿”å›False ï¼ˆä¸å¯é ï¼‰</span><br>q.full()    <span class="hljs-comment"># å½“é˜Ÿåˆ—æ»¡çš„æ—¶å€™ï¼Œè¿”å›Trueï¼Œå¦åˆ™è¿”å›False ï¼ˆä¸å¯é ï¼‰</span><br>q.put(item, block=<span class="hljs-literal">True</span>, timeout=<span class="hljs-literal">None</span>) <span class="hljs-comment">#  å°†itemæ”¾å…¥Queueå°¾éƒ¨ï¼Œitemå¿…é¡»å­˜åœ¨ï¼Œå¯ä»¥å‚æ•°blocké»˜è®¤ä¸ºTrue,è¡¨ç¤ºå½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œä¼šç­‰å¾…é˜Ÿåˆ—ç»™å‡ºå¯ç”¨ä½ç½®ï¼Œä¸ºFalseæ—¶ä¸ºéé˜»å¡ï¼Œæ­¤æ—¶å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œä¼šå¼•å‘queue.Full å¼‚å¸¸ã€‚ å¯é€‰å‚æ•°timeoutï¼Œè¡¨ç¤º ä¼šé˜»å¡è®¾ç½®çš„æ—¶é—´ï¼Œè¿‡åï¼Œå¦‚æœé˜Ÿåˆ—æ— æ³•ç»™å‡ºæ”¾å…¥itemçš„ä½ç½®ï¼Œåˆ™å¼•å‘ queue.Full å¼‚å¸¸</span><br>q.get(block=<span class="hljs-literal">True</span>, timeout=<span class="hljs-literal">None</span>) <span class="hljs-comment">#   ç§»é™¤å¹¶è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„ä¸€ä¸ªå€¼ï¼Œå¯é€‰å‚æ•°blocké»˜è®¤ä¸ºTrueï¼Œè¡¨ç¤ºè·å–å€¼çš„æ—¶å€™ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™é˜»å¡ï¼Œä¸ºFalseæ—¶ï¼Œä¸é˜»å¡ï¼Œè‹¥æ­¤æ—¶é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™å¼•å‘ queue.Emptyå¼‚å¸¸ã€‚ å¯é€‰å‚æ•°timeoutï¼Œè¡¨ç¤ºä¼šé˜»å¡è®¾ç½®çš„æ—¶å€™ï¼Œè¿‡åï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™å¼•å‘Emptyå¼‚å¸¸ã€‚</span><br>q.put_nowait(item) <span class="hljs-comment">#   ç­‰æ•ˆäº put(item,block=False)</span><br>q.get_nowait() <span class="hljs-comment">#    ç­‰æ•ˆäº get(item,block=False)</span><br></code></pre></div></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> queue<br><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> time<br><br>message = queue.Queue(<span class="hljs-number">3</span>)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">producer</span>():</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>        message.put(i)<br>        print(<span class="hljs-string">&quot;PUT&gt;&gt;&gt;%d&quot;</span> % i)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">consumer</span>():</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>        msg = message.get()<br>        print(<span class="hljs-string">&quot;GET&gt;&gt;&gt;%d&quot;</span> % msg)<br>        time.sleep(<span class="hljs-number">1</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    t1 = threading.Thread(target=producer)<br>    t2 = threading.Thread(target=consumer)<br><br>    t1.start()<br>    t2.start()<br></code></pre></div></td></tr></table></figure><h3 id="Python-è¿›ç¨‹"><a href="#Python-è¿›ç¨‹" class="headerlink" title="Python è¿›ç¨‹"></a>Python è¿›ç¨‹</h3><h4 id="1ã€multiprocessæ¨¡å—"><a href="#1ã€multiprocessæ¨¡å—" class="headerlink" title="1ã€multiprocessæ¨¡å—"></a>1ã€multiprocessæ¨¡å—</h4><p>processæ¨¡å—æ˜¯ä¸€ä¸ªåˆ›å»ºè¿›ç¨‹çš„æ¨¡å—ï¼Œå€ŸåŠ©è¿™ä¸ªæ¨¡å—ï¼Œå°±å¯ä»¥å®Œæˆè¿›ç¨‹çš„åˆ›å»ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">è¯­æ³•ï¼šProcess([group [, target [, name [, args [, kwargs]]]]])<br></code></pre></div></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> multiprocessing<br><span class="hljs-keyword">import</span> time<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">worker</span>(<span class="hljs-params">num</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    process worker function</span><br><span class="hljs-string">    :return:</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    time.sleep(<span class="hljs-number">3</span>)<br>    print(<span class="hljs-string">&quot;The num is  %d&quot;</span> % num)<br>    <span class="hljs-keyword">return</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>        t = multiprocessing.Process(target=worker, args=(i,), name=<span class="hljs-string">&quot;t.%d&quot;</span> % i)<br>        t.start()<br></code></pre></div></td></tr></table></figure><blockquote><p>Processå‚æ•°ä»‹ç»ï¼š</p></blockquote><ul><li><p>groupï¼šå‚æ•°æœªä½¿ç”¨ï¼Œé»˜è®¤å€¼ä¸ºNoneã€‚</p></li><li><p>targetï¼šè¡¨ç¤ºè°ƒç”¨å¯¹è±¡ï¼Œå³å­è¿›ç¨‹è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚</p></li><li><p>argsï¼šè¡¨ç¤ºè°ƒç”¨çš„ä½ç½®å‚æ•°å…ƒç»„ã€‚</p></li><li><p>kwargsï¼šè¡¨ç¤ºè°ƒç”¨å¯¹è±¡çš„å­—å…¸ã€‚å¦‚kwargs = {â€˜nameâ€™:Jack, â€˜ageâ€™:18}ã€‚</p></li><li><p>nameï¼šå­è¿›ç¨‹åç§°ã€‚</p></li><li><p>daemonï¼šè®¾ç½®ä¸ºå®ˆæŠ¤è¿›ç¨‹(True)æˆ–éå®ˆæŠ¤è¿›ç¨‹(é»˜è®¤ï¼šFalse)</p></li></ul><blockquote><p>Processå±æ€§æ–¹æ³•ä»‹ç»</p></blockquote><table><thead><tr><th align="center">æ–¹æ³•/å±æ€§</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">start()</td><td align="left">å¯åŠ¨è¿›ç¨‹ï¼Œè°ƒç”¨è¿›ç¨‹ä¸­çš„run()æ–¹æ³•ã€‚</td></tr><tr><td align="center">run()</td><td align="left">è¿›ç¨‹å¯åŠ¨æ—¶è¿è¡Œçš„æ–¹æ³•ï¼Œæ­£æ˜¯å®ƒå»è°ƒç”¨targetæŒ‡å®šçš„å‡½æ•°ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰ç±»çš„ç±»ä¸­ä¸€å®šè¦å®ç°è¯¥æ–¹æ³• ã€‚</td></tr><tr><td align="center">terminate()</td><td align="left">å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹ï¼Œä¸ä¼šè¿›è¡Œä»»ä½•æ¸…ç†æ“ä½œã€‚å¦‚æœè¯¥è¿›ç¨‹ç»ˆæ­¢å‰ï¼Œåˆ›å»ºäº†å­è¿›ç¨‹ï¼Œé‚£ä¹ˆè¯¥å­è¿›ç¨‹åœ¨å…¶å¼ºåˆ¶ç»“æŸåå˜ä¸ºåƒµå°¸è¿›ç¨‹ï¼›å¦‚æœè¯¥è¿›ç¨‹è¿˜ä¿å­˜äº†ä¸€ä¸ªé”é‚£ä¹ˆä¹Ÿå°†ä¸ä¼šè¢«é‡Šæ”¾ï¼Œè¿›è€Œå¯¼è‡´æ­»é”ã€‚ä½¿ç”¨æ—¶ï¼Œè¦æ³¨æ„ã€‚</td></tr><tr><td align="center">is_alive()</td><td align="left">åˆ¤æ–­æŸè¿›ç¨‹æ˜¯å¦å­˜æ´»ï¼Œå­˜æ´»è¿”å›Trueï¼Œå¦åˆ™Falseã€‚</td></tr><tr><td align="center">join([timeout])</td><td align="left">ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹ç»ˆæ­¢ã€‚timeoutä¸ºå¯é€‰æ‹©è¶…æ—¶æ—¶é—´ï¼›éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œp.joinåªèƒ½joinä½startå¼€å¯çš„è¿›ç¨‹ï¼Œè€Œä¸èƒ½joinä½runå¼€å¯çš„è¿›ç¨‹ ã€‚</td></tr><tr><td align="center">daemon</td><td align="left">é»˜è®¤å€¼ä¸ºFalseï¼Œå¦‚æœè®¾ç½®ä¸ºTrueï¼Œä»£è¡¨è¯¥è¿›ç¨‹ä¸ºåå°å®ˆæŠ¤è¿›ç¨‹ï¼›å½“è¯¥è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œè¯¥è¿›ç¨‹ä¹Ÿéšä¹‹ç»ˆæ­¢ï¼›å¹¶ä¸”è®¾ç½®ä¸ºTrueåï¼Œè¯¥è¿›ç¨‹ä¸èƒ½åˆ›å»ºå­è¿›ç¨‹ï¼Œè®¾ç½®è¯¥å±æ€§å¿…é¡»åœ¨start()ä¹‹å‰</td></tr><tr><td align="center">name</td><td align="left">è¿›ç¨‹åç§°ã€‚</td></tr><tr><td align="center">pid</td><td align="left">è¿›ç¨‹pid</td></tr><tr><td align="center">exitcode</td><td align="left">è¿›ç¨‹è¿è¡Œæ—¶ä¸ºNoneï¼Œå¦‚æœä¸º-Nï¼Œè¡¨ç¤ºè¢«ä¿¡å·Nç»“æŸäº†ã€‚</td></tr><tr><td align="center">authkey</td><td align="left">è¿›ç¨‹èº«ä»½éªŒè¯ï¼Œé»˜è®¤æ˜¯ç”±os.urandom()éšæœºç”Ÿæˆ32å­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸ªé”®çš„ç”¨é€”æ˜¯è®¾è®¡æ¶‰åŠç½‘ç»œè¿æ¥çš„åº•å±‚è¿›ç¨‹é—´çš„é€šä¿¡æä¾›å®‰å…¨æ€§ï¼Œè¿™ç±»è¿æ¥åªæœ‰åœ¨å…·æœ‰ç›¸åŒèº«ä»½éªŒè¯æ‰èƒ½æˆåŠŸã€‚</td></tr></tbody></table><blockquote><p>æ³¨æ„:</p></blockquote><ul><li><strong>åœ¨è¿›ç¨‹pythonçš„è®¾è®¡é‡Œé¢åªæœ‰ä¸»è¿›ç¨‹å¯ä»¥æ¥æ”¶input()çš„è¾“å…¥ï¼Œå­è¿›ç¨‹æ²¡æœ‰è¾“å…¥æ¨¡å¼ï¼Œè¿è¡Œç›´æ¥æŠ¥é”™</strong></li><li><strong>æ›´å‘çš„æ˜¯è¿›ç¨‹æ± ï¼Œè¡¨é¢ä¸Šä¸ä¼šå‡ºé”™ï¼Œä½†æ˜¯input()å‡½æ•°ä¸€æ—¦è¿›å…¥æ— æ³•é€€å‡ºï¼Œä¸€ç›´åœ¨æ¥æ”¶è¾“å…¥çš„æ•°æ®</strong></li></ul><h4 id="2ã€æ¶ˆæ¯é˜Ÿåˆ—multiprocess-Queue"><a href="#2ã€æ¶ˆæ¯é˜Ÿåˆ—multiprocess-Queue" class="headerlink" title="2ã€æ¶ˆæ¯é˜Ÿåˆ—multiprocess.Queue"></a>2ã€æ¶ˆæ¯é˜Ÿåˆ—multiprocess.Queue</h4><p>å¯ä»¥ä½¿ç”¨multiprocessingæ¨¡å—çš„Queueå®ç°å¤šè¿›ç¨‹ä¹‹é—´çš„æ•°æ®ä¼ é€’ï¼ŒQueueæœ¬èº«æ˜¯ä¸€ä¸ªæ¶ˆæ¯åˆ—é˜Ÿç¨‹åº</p><blockquote><p>Queueå±æ€§æ–¹æ³•è¯´æ˜</p></blockquote><table><thead><tr><th align="center">æ–¹æ³•/å±æ€§</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">get( [ block [ ,timeout ] ] )</td><td align="left">è¿”å›qä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœqä¸ºç©ºï¼Œæ­¤æ–¹æ³•å°†é˜»å¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æœ‰é¡¹ç›®å¯ç”¨ä¸ºæ­¢ã€‚blockç”¨äºæ§åˆ¶é˜»å¡è¡Œä¸ºï¼Œé»˜è®¤ä¸ºTrue. å¦‚æœè®¾ç½®ä¸ºFalseï¼Œå°†å¼•å‘Queue.Emptyå¼‚å¸¸ï¼ˆå®šä¹‰åœ¨Queueæ¨¡å—ä¸­ï¼‰ã€‚timeoutæ˜¯å¯é€‰è¶…æ—¶æ—¶é—´ï¼Œç”¨åœ¨é˜»å¡æ¨¡å¼ä¸­ã€‚å¦‚æœåœ¨åˆ¶å®šçš„æ—¶é—´é—´éš”å†…æ²¡æœ‰é¡¹ç›®å˜ä¸ºå¯ç”¨ï¼Œå°†å¼•å‘Queue.Emptyå¼‚å¸¸ã€‚</td></tr><tr><td align="center">get_nowait( )</td><td align="left">åŒq.get(False)æ–¹æ³•ã€‚</td></tr><tr><td align="center">put(item [, block [,timeout ] ] )</td><td align="left">å°†itemæ”¾å…¥é˜Ÿåˆ—ã€‚å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œæ­¤æ–¹æ³•å°†é˜»å¡è‡³æœ‰ç©ºé—´å¯ç”¨ä¸ºæ­¢ã€‚blockæ§åˆ¶é˜»å¡è¡Œä¸ºï¼Œé»˜è®¤ä¸ºTrueã€‚å¦‚æœè®¾ç½®ä¸ºFalseï¼Œå°†å¼•å‘Queue.Emptyå¼‚å¸¸ï¼ˆå®šä¹‰åœ¨Queueåº“æ¨¡å—ä¸­ï¼‰ã€‚timeoutæŒ‡å®šåœ¨é˜»å¡æ¨¡å¼ä¸­ç­‰å¾…å¯ç”¨ç©ºé—´çš„æ—¶é—´é•¿çŸ­ã€‚è¶…æ—¶åå°†å¼•å‘Queue.Fullå¼‚å¸¸ã€‚</td></tr><tr><td align="center">q.qsize()</td><td align="left">è¿”å›é˜Ÿåˆ—ä¸­ç›®å‰é¡¹ç›®çš„æ­£ç¡®æ•°é‡ã€‚æ­¤å‡½æ•°çš„ç»“æœå¹¶ä¸å¯é ï¼Œå› ä¸ºåœ¨è¿”å›ç»“æœå’Œåœ¨ç¨åç¨‹åºä¸­ä½¿ç”¨ç»“æœä¹‹é—´ï¼Œé˜Ÿåˆ—ä¸­å¯èƒ½æ·»åŠ æˆ–åˆ é™¤äº†é¡¹ç›®ã€‚åœ¨æŸäº›ç³»ç»Ÿä¸Šï¼Œæ­¤æ–¹æ³•å¯èƒ½å¼•å‘NotImplementedErrorå¼‚å¸¸ã€‚</td></tr><tr><td align="center">q.empty()</td><td align="left">å¦‚æœè°ƒç”¨æ­¤æ–¹æ³•æ—¶ qä¸ºç©ºï¼Œè¿”å›Trueã€‚å¦‚æœå…¶ä»–è¿›ç¨‹æˆ–çº¿ç¨‹æ­£åœ¨å¾€é˜Ÿåˆ—ä¸­æ·»åŠ é¡¹ç›®ï¼Œç»“æœæ˜¯ä¸å¯é çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿”å›å’Œä½¿ç”¨ç»“æœä¹‹é—´ï¼Œé˜Ÿåˆ—ä¸­å¯èƒ½å·²ç»åŠ å…¥æ–°çš„é¡¹ç›®ã€‚</td></tr><tr><td align="center">q.full()</td><td align="left">å¦‚æœqå·²æ»¡ï¼Œè¿”å›ä¸ºTrue. ç”±äºçº¿ç¨‹çš„å­˜åœ¨ï¼Œç»“æœä¹Ÿå¯èƒ½æ˜¯ä¸å¯é çš„ï¼ˆå‚è€ƒq.emptyï¼ˆï¼‰æ–¹æ³•ï¼‰ã€‚ã€‚</td></tr><tr><td align="center">å…¶ä»–æ–¹æ³•(äº†è§£)</td><td align="left"></td></tr><tr><td align="center">q.close()</td><td align="left">å…³é—­é˜Ÿåˆ—ï¼Œé˜²æ­¢é˜Ÿåˆ—ä¸­åŠ å…¥æ›´å¤šæ•°æ®ã€‚è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œåå°çº¿ç¨‹å°†ç»§ç»­å†™å…¥é‚£äº›å·²å…¥é˜Ÿåˆ—ä½†å°šæœªå†™å…¥çš„æ•°æ®ï¼Œä½†å°†åœ¨æ­¤æ–¹æ³•å®Œæˆæ—¶é©¬ä¸Šå…³é—­ã€‚å¦‚æœqè¢«åƒåœ¾æ”¶é›†ï¼Œå°†è‡ªåŠ¨è°ƒç”¨æ­¤æ–¹æ³•ã€‚å…³é—­é˜Ÿåˆ—ä¸ä¼šåœ¨é˜Ÿåˆ—ä½¿ç”¨è€…ä¸­ç”Ÿæˆä»»ä½•ç±»å‹çš„æ•°æ®ç»“æŸä¿¡å·æˆ–å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªä½¿ç”¨è€…æ­£è¢«é˜»å¡åœ¨getï¼ˆï¼‰æ“ä½œä¸Šï¼Œå…³é—­ç”Ÿäº§è€…ä¸­çš„é˜Ÿåˆ—ä¸ä¼šå¯¼è‡´getï¼ˆï¼‰æ–¹æ³•è¿”å›é”™è¯¯ã€‚</td></tr><tr><td align="center">q.cancel_join_thread()</td><td align="left">ä¸ä¼šå†è¿›ç¨‹é€€å‡ºæ—¶è‡ªåŠ¨è¿æ¥åå°çº¿ç¨‹ã€‚è¿™å¯ä»¥é˜²æ­¢join_thread()æ–¹æ³•é˜»å¡ã€‚</td></tr><tr><td align="center">q.join_thread()</td><td align="left">è¿æ¥é˜Ÿåˆ—çš„åå°çº¿ç¨‹ã€‚æ­¤æ–¹æ³•ç”¨äºåœ¨è°ƒç”¨q.close()æ–¹æ³•åï¼Œç­‰å¾…æ‰€æœ‰é˜Ÿåˆ—é¡¹è¢«æ¶ˆè€—ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤æ–¹æ³•ç”±ä¸æ˜¯qçš„åŸå§‹åˆ›å»ºè€…çš„æ‰€æœ‰è¿›ç¨‹è°ƒç”¨ã€‚è°ƒç”¨q.cancel_join_thread()æ–¹æ³•å¯ä»¥ç¦æ­¢è¿™ç§è¡Œä¸ºã€‚</td></tr></tbody></table><h4 id="3ã€è¿›ç¨‹æ± "><a href="#3ã€è¿›ç¨‹æ± " class="headerlink" title="3ã€è¿›ç¨‹æ± "></a>3ã€è¿›ç¨‹æ± </h4><p>ä¸ºä»€ä¹ˆè¦æœ‰è¿›ç¨‹æ± ?è¿›ç¨‹æ± çš„æ¦‚å¿µã€‚</p><p>åœ¨ç¨‹åºå®é™…å¤„ç†é—®é¢˜è¿‡ç¨‹ä¸­ï¼Œå¿™æ—¶ä¼šæœ‰æˆåƒä¸Šä¸‡çš„ä»»åŠ¡éœ€è¦è¢«æ‰§è¡Œï¼Œé—²æ—¶å¯èƒ½åªæœ‰é›¶æ˜Ÿä»»åŠ¡ã€‚é‚£ä¹ˆåœ¨æˆåƒä¸Šä¸‡ä¸ªä»»åŠ¡éœ€è¦è¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦å»åˆ›å»ºæˆåƒä¸Šä¸‡ä¸ªè¿›ç¨‹ä¹ˆï¼Ÿé¦–å…ˆï¼Œåˆ›å»ºè¿›ç¨‹éœ€è¦æ¶ˆè€—æ—¶é—´ï¼Œé”€æ¯è¿›ç¨‹ä¹Ÿéœ€è¦æ¶ˆè€—æ—¶é—´ã€‚ç¬¬äºŒå³ä¾¿å¼€å¯äº†æˆåƒä¸Šä¸‡çš„è¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿä¸èƒ½è®©ä»–ä»¬åŒæ—¶æ‰§è¡Œï¼Œè¿™æ ·åè€Œä¼šå½±å“ç¨‹åºçš„æ•ˆç‡ã€‚å› æ­¤æˆ‘ä»¬ä¸èƒ½æ— é™åˆ¶çš„æ ¹æ®ä»»åŠ¡å¼€å¯æˆ–è€…ç»“æŸè¿›ç¨‹ã€‚é‚£ä¹ˆæˆ‘ä»¬è¦æ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>åœ¨è¿™é‡Œï¼Œè¦ç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªè¿›ç¨‹æ± çš„æ¦‚å¿µï¼Œå®šä¹‰ä¸€ä¸ªæ± å­ï¼Œåœ¨é‡Œé¢æ”¾ä¸Šå›ºå®šæ•°é‡çš„è¿›ç¨‹ï¼Œæœ‰éœ€æ±‚æ¥äº†ï¼Œå°±æ‹¿ä¸€ä¸ªæ± ä¸­çš„è¿›ç¨‹æ¥å¤„ç†ä»»åŠ¡ï¼Œç­‰åˆ°å¤„ç†å®Œæ¯•ï¼Œè¿›ç¨‹å¹¶ä¸å…³é—­ï¼Œè€Œæ˜¯å°†è¿›ç¨‹å†æ”¾å›è¿›ç¨‹æ± ä¸­ç»§ç»­ç­‰å¾…ä»»åŠ¡ã€‚å¦‚æœæœ‰å¾ˆå¤šä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œæ± ä¸­çš„è¿›ç¨‹æ•°é‡ä¸å¤Ÿï¼Œä»»åŠ¡å°±è¦ç­‰å¾…ä¹‹å‰çš„è¿›ç¨‹æ‰§è¡Œä»»åŠ¡å®Œæ¯•å½’æ¥ï¼Œæ‹¿åˆ°ç©ºé—²è¿›ç¨‹æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ± ä¸­è¿›ç¨‹çš„æ•°é‡æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆåŒä¸€æ—¶é—´æœ€å¤šæœ‰å›ºå®šæ•°é‡çš„è¿›ç¨‹åœ¨è¿è¡Œã€‚è¿™æ ·ä¸ä¼šå¢åŠ æ“ä½œç³»ç»Ÿçš„è°ƒåº¦éš¾åº¦ï¼Œè¿˜èŠ‚çœäº†å¼€é—­è¿›ç¨‹çš„æ—¶é—´ï¼Œä¹Ÿä¸€å®šç¨‹åº¦ä¸Šèƒ½å¤Ÿå®ç°å¹¶å‘æ•ˆæœã€‚</p><h5 id="multiprocess-Poolæ¨¡å—"><a href="#multiprocess-Poolæ¨¡å—" class="headerlink" title="multiprocess.Poolæ¨¡å—"></a>multiprocess.Poolæ¨¡å—</h5><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">è¯­æ³•ï¼šPool([numprocess  [,initializer [, initargs]]])<br></code></pre></div></td></tr></table></figure><blockquote><p>Poolå‚æ•°ä»‹ç»</p></blockquote><ul><li><p>numprocess:è¦åˆ›å»ºçš„è¿›ç¨‹æ•°ï¼Œå¦‚æœçœç•¥ï¼Œå°†é»˜è®¤ä½¿ç”¨cpu_count()çš„å€¼</p></li><li><p>initializerï¼šæ˜¯æ¯ä¸ªå·¥ä½œè¿›ç¨‹å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å¯è°ƒç”¨å¯¹è±¡ï¼Œé»˜è®¤ä¸ºNone</p></li><li><p>initargsï¼šæ˜¯è¦ä¼ ç»™initializerï¼ˆå¯è¿­ä»£ï¼‰çš„å‚æ•°ç»„</p></li></ul><blockquote><p>Poolä¸»è¦æ–¹æ³•ä»‹ç»</p></blockquote><table><thead><tr><th align="center">æ–¹æ³•/å±æ€§</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">apply(func [, args [, kwargs]])</td><td align="left">åœ¨ä¸€ä¸ªæ± å·¥ä½œè¿›ç¨‹ä¸­æ‰§è¡Œfunc(<em>args,*</em>kwargs),ç„¶åè¿”å›ç»“æœã€‚â€™éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼šæ­¤æ“ä½œå¹¶ä¸ä¼šåœ¨æ‰€æœ‰æ± å·¥ä½œè¿›ç¨‹ä¸­å¹¶æ‰§è¡Œfuncå‡½æ•°ã€‚å¦‚æœè¦é€šè¿‡ä¸åŒå‚æ•°å¹¶å‘åœ°æ‰§è¡Œfuncå‡½æ•°ï¼Œå¿…é¡»ä»ä¸åŒçº¿ç¨‹è°ƒç”¨apply()å‡½æ•°æˆ–è€…ä½¿ç”¨p.apply_async()</td></tr><tr><td align="center">apply_async(func [, args [, kwargs]])</td><td align="left">åœ¨ä¸€ä¸ªæ± å·¥ä½œè¿›ç¨‹ä¸­æ‰§è¡Œfunc(<em>args,*</em>kwargs),ç„¶åè¿”å›ç»“æœã€‚æ­¤æ–¹æ³•çš„ç»“æœæ˜¯AsyncResultç±»çš„å®ä¾‹ï¼Œcallbackæ˜¯å¯è°ƒç”¨å¯¹è±¡ï¼Œæ¥æ”¶è¾“å…¥å‚æ•°ã€‚å½“funcçš„ç»“æœå˜ä¸ºå¯ç”¨æ—¶ï¼Œå°†ç†è§£ä¼ é€’ç»™callbackã€‚callbackç¦æ­¢æ‰§è¡Œä»»ä½•é˜»å¡æ“ä½œï¼Œå¦åˆ™å°†æ¥æ”¶å…¶ä»–å¼‚æ­¥æ“ä½œä¸­çš„ç»“æœã€‚</td></tr><tr><td align="center">close()</td><td align="left">å…³é—­è¿›ç¨‹æ± ï¼Œé˜²æ­¢è¿›ä¸€æ­¥æ“ä½œã€‚å¦‚æœæ‰€æœ‰æ“ä½œæŒç»­æŒ‚èµ·ï¼Œå®ƒä»¬å°†åœ¨å·¥ä½œè¿›ç¨‹ç»ˆæ­¢å‰å®Œæˆ</td></tr><tr><td align="center">terminate()</td><td align="left">ä¸ç®¡ä»»åŠ¡æ˜¯å¦å®Œæˆï¼Œç«‹å³åœæ­¢å·¥ä½œè¿›ç¨‹ã€‚åœ¨å¯¹poolå¯¹è±¡è¿›ç¨‹åƒåœ¾å›æ”¶çš„æ—¶å€™ï¼Œä¼šç«‹å³è°ƒç”¨terminate()</td></tr><tr><td align="center">jion()</td><td align="left">ç­‰å¾…æ‰€æœ‰å·¥ä½œè¿›ç¨‹é€€å‡ºã€‚æ­¤æ–¹æ³•åªèƒ½åœ¨closeï¼ˆï¼‰æˆ–teminate()ä¹‹åè°ƒç”¨</td></tr><tr><td align="center">å…¶ä»–æ–¹æ³•(äº†è§£ï¼‰</td><td align="left">æ–¹æ³•apply_async()å’Œmap_asyncï¼ˆï¼‰çš„è¿”å›å€¼æ˜¯AsyncResulçš„å®ä¾‹objã€‚å®ä¾‹å…·æœ‰ä»¥ä¸‹æ–¹æ³•</td></tr><tr><td align="center">obj.get()</td><td align="left">è¿”å›ç»“æœï¼Œå¦‚æœæœ‰å¿…è¦åˆ™ç­‰å¾…ç»“æœåˆ°è¾¾ã€‚timeoutæ˜¯å¯é€‰çš„ã€‚å¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…è¿˜æ²¡æœ‰åˆ°è¾¾ï¼Œå°†å¼•å‘ä¸€åœºã€‚å¦‚æœè¿œç¨‹æ“ä½œä¸­å¼•å‘äº†å¼‚å¸¸ï¼Œå®ƒå°†åœ¨è°ƒç”¨æ­¤æ–¹æ³•æ—¶å†æ¬¡è¢«å¼•å‘ã€‚</td></tr><tr><td align="center">obj.ready()</td><td align="left">å¦‚æœè°ƒç”¨å®Œæˆï¼Œè¿”å›True</td></tr><tr><td align="center">obj.successful()</td><td align="left">å¦‚æœè°ƒç”¨å®Œæˆä¸”æ²¡æœ‰å¼•å‘å¼‚å¸¸ï¼Œè¿”å›Trueï¼Œå¦‚æœåœ¨ç»“æœå°±ç»ªä¹‹å‰è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¼•å‘å¼‚å¸¸</td></tr><tr><td align="center">obj.wait([timeout])</td><td align="left">ç­‰å¾…ç»“æœå˜ä¸ºå¯ç”¨ã€‚</td></tr><tr><td align="center">obj.terminate()</td><td align="left">ç«‹å³ç»ˆæ­¢æ‰€æœ‰å·¥ä½œè¿›ç¨‹ï¼ŒåŒæ—¶ä¸æ‰§è¡Œä»»ä½•æ¸…ç†æˆ–ç»“æŸä»»ä½•æŒ‚èµ·å·¥ä½œã€‚å¦‚æœpè¢«åƒåœ¾å›æ”¶ï¼Œå°†è‡ªåŠ¨è°ƒç”¨æ­¤å‡½æ•°</td></tr></tbody></table><h5 id="è¿›ç¨‹æ± ä¸­çš„Queue"><a href="#è¿›ç¨‹æ± ä¸­çš„Queue" class="headerlink" title="è¿›ç¨‹æ± ä¸­çš„Queue"></a>è¿›ç¨‹æ± ä¸­çš„Queue</h5><p>å¦‚æœè¦ä½¿ç”¨Poolåˆ›å»ºè¿›ç¨‹ï¼Œå°±éœ€è¦ä½¿ç”¨<code>multiprocessing.Manager()</code>ä¸­çš„<code>Queue()</code>ï¼Œè€Œä¸æ˜¯<code>multiprocessing.Queue()</code></p><h3 id="Python-åç¨‹"><a href="#Python-åç¨‹" class="headerlink" title="Python åç¨‹"></a>Python åç¨‹</h3><p>åç¨‹ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œçº¤ç¨‹ã€‚è‹±æ–‡åCoroutineã€‚åç¨‹æ˜¯pythonä¸ªä¸­å¦å¤–ä¸€ç§å®ç°å¤šä»»åŠ¡çš„æ–¹å¼ï¼Œåªä¸è¿‡æ¯”çº¿ç¨‹æ›´å°å ç”¨æ›´å°æ‰§è¡Œå•å…ƒï¼ˆç†è§£ä¸ºéœ€è¦çš„èµ„æºï¼‰ã€‚ ä¸ºå•¥è¯´å®ƒæ˜¯ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œå› ä¸ºå®ƒè‡ªå¸¦CPUä¸Šä¸‹æ–‡ã€‚è¿™æ ·åªè¦åœ¨åˆé€‚çš„æ—¶æœºï¼Œ æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªåç¨‹ åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåç¨‹ã€‚ åªè¦è¿™ä¸ªè¿‡ç¨‹ä¸­ä¿å­˜æˆ–æ¢å¤ CPUä¸Šä¸‹æ–‡é‚£ä¹ˆç¨‹åºè¿˜æ˜¯å¯ä»¥è¿è¡Œçš„ã€‚</p><p>é€šä¿—çš„ç†è§£ï¼š<strong>åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­çš„æŸä¸ªå‡½æ•°ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä¿å­˜å½“å‰å‡½æ•°çš„ä¸€äº›ä¸´æ—¶å˜é‡ç­‰ä¿¡æ¯ï¼Œç„¶ååˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªå‡½æ•°ä¸­æ‰§è¡Œï¼Œæ³¨æ„ä¸æ˜¯é€šè¿‡è°ƒç”¨å‡½æ•°çš„æ–¹å¼åšåˆ°çš„ï¼Œå¹¶ä¸”åˆ‡æ¢çš„æ¬¡æ•°ä»¥åŠä»€ä¹ˆæ—¶å€™å†åˆ‡æ¢åˆ°åŸæ¥çš„å‡½æ•°éƒ½ç”±å¼€å‘è€…è‡ªå·±ç¡®å®š</strong></p><h4 id="1-åç¨‹å’Œçº¿ç¨‹å·®å¼‚"><a href="#1-åç¨‹å’Œçº¿ç¨‹å·®å¼‚" class="headerlink" title="1. åç¨‹å’Œçº¿ç¨‹å·®å¼‚"></a>1. åç¨‹å’Œçº¿ç¨‹å·®å¼‚</h4><p>åœ¨å®ç°å¤šä»»åŠ¡æ—¶, çº¿ç¨‹åˆ‡æ¢ä»ç³»ç»Ÿå±‚é¢è¿œä¸æ­¢ä¿å­˜å’Œæ¢å¤ CPUä¸Šä¸‹æ–‡è¿™ä¹ˆç®€å•ã€‚ æ“ä½œç³»ç»Ÿä¸ºäº†ç¨‹åºè¿è¡Œçš„é«˜æ•ˆæ€§æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç¼“å­˜Cacheç­‰ç­‰æ•°æ®ï¼Œæ“ä½œç³»ç»Ÿè¿˜ä¼šå¸®ä½ åšè¿™äº›æ•°æ®çš„æ¢å¤æ“ä½œã€‚ æ‰€ä»¥çº¿ç¨‹çš„åˆ‡æ¢éå¸¸è€—æ€§èƒ½ã€‚ä½†æ˜¯åç¨‹çš„åˆ‡æ¢åªæ˜¯å•çº¯çš„æ“ä½œCPUçš„ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥ä¸€ç§’é’Ÿåˆ‡æ¢ä¸ªä¸Šç™¾ä¸‡æ¬¡ç³»ç»Ÿéƒ½æŠ—çš„ä½ã€‚</p><h4 id="2-å®ç°æ–¹å¼"><a href="#2-å®ç°æ–¹å¼" class="headerlink" title="2. å®ç°æ–¹å¼"></a>2. å®ç°æ–¹å¼</h4><ul><li><p>yield</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">work1</span>():</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        print(<span class="hljs-string">&quot;----work1---&quot;</span>)<br>        <span class="hljs-keyword">yield</span><br>        time.sleep(<span class="hljs-number">0.5</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">work2</span>():</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        print(<span class="hljs-string">&quot;----work2---&quot;</span>)<br>        <span class="hljs-keyword">yield</span><br>        time.sleep(<span class="hljs-number">0.5</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    w1 = work1()<br>    w2 = work2()<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-built_in">next</span>(w1)<br>        <span class="hljs-built_in">next</span>(w2)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></div></td></tr></table></figure></li><li><p>greenlet</p></li></ul><p>ä¸ºäº†æ›´å¥½ä½¿ç”¨åç¨‹æ¥å®Œæˆå¤šä»»åŠ¡ï¼Œpythonä¸­çš„greenletæ¨¡å—å¯¹å…¶å°è£…ï¼Œä»è€Œä½¿å¾—åˆ‡æ¢ä»»åŠ¡å˜çš„æ›´åŠ ç®€å•</p><p><strong>å®‰è£…æ–¹å¼</strong><br>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…greenletæ¨¡å—:</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">sudo pip3 install greenlet<br></code></pre></div></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment">#coding=utf-8</span><br><br><span class="hljs-keyword">from</span> greenlet <span class="hljs-keyword">import</span> greenlet<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test1</span>():</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-built_in">print</span> <span class="hljs-string">&quot;---A--&quot;</span><br>        gr2.switch()<br>        time.sleep(<span class="hljs-number">0.5</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test2</span>():</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-built_in">print</span> <span class="hljs-string">&quot;---B--&quot;</span><br>        gr1.switch()<br>        time.sleep(<span class="hljs-number">0.5</span>)<br><br>gr1 = greenlet(test1)<br>gr2 = greenlet(test2)<br><br><span class="hljs-comment">#åˆ‡æ¢åˆ°gr1ä¸­è¿è¡Œ</span><br>gr1.switch()<br></code></pre></div></td></tr></table></figure><ul><li>gevent</li></ul><p>greenletå·²ç»å®ç°äº†åç¨‹ï¼Œä½†æ˜¯è¿™ä¸ªè¿˜çš„äººå·¥åˆ‡æ¢ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—å¤ªéº»çƒ¦äº†ï¼Œä¸è¦æ‰æ€¥ï¼Œpythonè¿˜æœ‰ä¸€ä¸ªæ¯”greenletæ›´å¼ºå¤§çš„å¹¶ä¸”èƒ½å¤Ÿè‡ªåŠ¨åˆ‡æ¢ä»»åŠ¡çš„æ¨¡å—gevent</p><p>å…¶åŸç†æ˜¯å½“ä¸€ä¸ªgreenleté‡åˆ°IO(æŒ‡çš„æ˜¯input output è¾“å…¥è¾“å‡ºï¼Œæ¯”å¦‚ç½‘ç»œã€æ–‡ä»¶æ“ä½œç­‰)æ“ä½œæ—¶ï¼Œæ¯”å¦‚è®¿é—®ç½‘ç»œï¼Œå°±è‡ªåŠ¨åˆ‡æ¢åˆ°å…¶ä»–çš„greenletï¼Œç­‰åˆ°IOæ“ä½œå®Œæˆï¼Œå†åœ¨é€‚å½“çš„æ—¶å€™åˆ‡æ¢å›æ¥ç»§ç»­æ‰§è¡Œã€‚</p><p>ç”±äºIOæ“ä½œéå¸¸è€—æ—¶ï¼Œç»å¸¸ä½¿ç¨‹åºå¤„äºç­‰å¾…çŠ¶æ€ï¼Œæœ‰äº†geventä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ‡æ¢åç¨‹ï¼Œå°±ä¿è¯æ€»æœ‰greenletåœ¨è¿è¡Œï¼Œè€Œä¸æ˜¯ç­‰å¾…IOã€‚</p><p><strong>å®‰è£…æ–¹å¼</strong><br>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…geventæ¨¡å—:</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">pip3 install gevent<br></code></pre></div></td></tr></table></figure><p>åœ¨geventä¸­ä¸èƒ½ç›´æ¥ä½¿ç”¨time.sleepç±»ä¼¼çš„æ–¹æ³•ï¼Œè¦ä¹ˆä½¿ç”¨gevent.sleepï¼Œè¦ä¹ˆåˆ©ç”¨gevent.monkeyæ‰“è¡¥ä¸</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> gevent <span class="hljs-keyword">import</span> monkey<br><span class="hljs-keyword">import</span> gevent<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">coroutine_work</span>(<span class="hljs-params">coroutine_name</span>):</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>        print(coroutine_name, i)<br>        time.sleep(random.random())<br><br>gevent.joinall([<br>        gevent.spawn(coroutine_work, <span class="hljs-string">&quot;work1&quot;</span>),<br>        gevent.spawn(coroutine_work, <span class="hljs-string">&quot;work2&quot;</span>)<br>])<br><br></code></pre></div></td></tr></table></figure><h3 id="è·å¾—è¿›ç¨‹å’Œçº¿ç¨‹ä¿¡æ¯"><a href="#è·å¾—è¿›ç¨‹å’Œçº¿ç¨‹ä¿¡æ¯" class="headerlink" title="è·å¾—è¿›ç¨‹å’Œçº¿ç¨‹ä¿¡æ¯"></a>è·å¾—è¿›ç¨‹å’Œçº¿ç¨‹ä¿¡æ¯</h3><p>æƒ³è¦è·å–çº¿ç¨‹å’Œè¿›ç¨‹ç›¸å…³ä¿¡æ¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">è·å¾—çº¿ç¨‹, è¿›ç¨‹ ID,NAME</span><br><span class="hljs-string">æ€»ç»“:</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> psutil<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> datetime<br><br><span class="hljs-comment"># 1 è·å–çº¿ç¨‹ID,NAME</span><br>t = threading.currentThread()<br><span class="hljs-comment"># çº¿ç¨‹ID</span><br>print(<span class="hljs-string">&#x27;Thread id : %d&#x27;</span> % t.ident)<br><span class="hljs-comment"># çº¿ç¨‹NAME</span><br>print(<span class="hljs-string">&#x27;Thread name : %s&#x27;</span> % t.getName())<br><br><span class="hljs-comment"># 2 è·å–çº¿ç¨‹ID,NAME</span><br>pid = os.getpid()<br>p = psutil.Process(pid)<br>print(<span class="hljs-string">&#x27;----------------&#x27;</span>)<br><span class="hljs-comment"># è¿›ç¨‹ID</span><br>print(<span class="hljs-string">&#x27;Process id : %d&#x27;</span> % pid)<br><span class="hljs-comment"># è¿›ç¨‹NAME</span><br>print(<span class="hljs-string">&#x27;Process name : %s&#x27;</span> % p.name())<br><span class="hljs-comment"># è·å–è¿›ç¨‹binè·¯å¾„</span><br>print(<span class="hljs-string">&#x27;Process bin  path : %s&#x27;</span> % p.exe())<br><span class="hljs-comment"># è·å–pidå¯¹åº”çš„è·¯å¾„</span><br>print(<span class="hljs-string">&#x27;Process path : %s&#x27;</span> % p.cwd())<br><span class="hljs-comment"># è¿›ç¨‹çŠ¶æ€</span><br>print(<span class="hljs-string">&#x27;Process status : %s&#x27;</span> % p.status())<br><span class="hljs-comment"># è¿›ç¨‹è¿è¡Œæ—¶é—´</span><br>print(<span class="hljs-string">&#x27;Process creation time : %s&#x27;</span> % datetime.datetime.fromtimestamp(p.create_time()).strftime(<span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>))<br><span class="hljs-comment"># CPUä½¿ç”¨æƒ…å†µ</span><br>print(p.cpu_times())<br><span class="hljs-comment"># å†…å­˜ä½¿ç”¨æƒ…å†µ</span><br>print(<span class="hljs-string">&#x27;Memory usage : %s%%&#x27;</span> % p.memory_percent())<br><span class="hljs-comment"># ç¡¬ç›˜è¯»å–ä¿¡æ¯</span><br>print(p.io_counters())<br><span class="hljs-comment"># æ‰“å¼€è¿›ç¨‹socketçš„namedutplesåˆ—è¡¨</span><br>print(p.connections())<br><span class="hljs-comment"># æ­¤è¿›ç¨‹çš„çº¿ç¨‹æ•°</span><br>print(<span class="hljs-string">&#x27;Process number of threads : %s&#x27;</span> % p.num_threads())<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> ç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿ç¨‹ </tag>
            
            <tag> è¿›ç¨‹ </tag>
            
            <tag> åç¨‹ </tag>
            
            <tag> å¤šä»»åŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>books</title>
      <link href="2019/05/12/books/"/>
      <url>2019/05/12/books/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><h3 id="åŸºç¡€æ•™ç¨‹"><a href="#åŸºç¡€æ•™ç¨‹" class="headerlink" title="åŸºç¡€æ•™ç¨‹"></a>åŸºç¡€æ•™ç¨‹</h3><ul><li><p><a href="http://liushaofeng2018.gitee.io/python_fundamentals/">pythonåŸºç¡€</a></p></li><li><p><a href="http://liushaofeng2018.gitee.io/python_advanced/">pythoné«˜çº§</a></p></li></ul><h3 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h3><ul><li><p><a href="http://liushaofeng2018.gitee.io/python-redis/">redis</a></p></li><li><p><a href="http://liushaofeng2018.gitee.io/python-git/">git</a></p></li></ul><h3 id="web"><a href="#web" class="headerlink" title="web"></a>web</h3><h4 id="django"><a href="#django" class="headerlink" title="django"></a>django</h4><ul><li><p><a href="http://liushaofeng2018.gitee.io/python-django/">django</a></p></li><li><p><a href="http://liushaofeng2018.gitee.io/python-django-rest-framework/">django-rest-framework</a></p></li><li><p><a href="http://liushaofeng2018.gitee.io/pyhton-mido-front-end/">Djangoé¡¹ç›®:ç¾å¤šå•†åŸ-å‰ç«¯</a></p></li><li><p><a href="http://liushaofeng2018.gitee.io/pyhton-mido-backstage/">Djangoé¡¹ç›®:ç¾å¤šå•†åŸ-åå°</a></p></li></ul><h3 id="flask"><a href="#flask" class="headerlink" title="flask"></a>flask</h3><ul><li><p><a href="http://liushaofeng2018.gitee.io/pyhton-flask/">flask</a></p></li><li><p><a href="http://liushaofeng2018.gitee.io/python-headline/">flaské¡¹ç›®ï¼šå¤´æ¡</a></p></li></ul><h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><ul><li><p><a href="http://liushaofeng2018.gitee.io/python-vue/">vue</a></p></li><li><p><a href="http://liushaofeng2018.gitee.io/python-vue-component/">vueç»„ä»¶</a></p></li></ul><h3 id="æ•°æ®ç»“æ„ä¸ç®—æ³•"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•</h3><ul><li><a href="http://liushaofeng2018.gitee.io/python-data-structure-cn/">ç”¨pythonè§£å†³æ•°æ®ç»“æ„ä¸ç®—æ³•é—®é¢˜</a></li></ul><h3 id="äººå·¥æ™ºèƒ½"><a href="#äººå·¥æ™ºèƒ½" class="headerlink" title="äººå·¥æ™ºèƒ½"></a>äººå·¥æ™ºèƒ½</h3><ul><li><p><a href="http://liushaofeng2018.gitee.io/python-recommendation-system/">æ¨èç³»ç»Ÿ</a></p></li><li><p><a href="http://liushaofeng2018.gitee.io/python-headline-recommendation-system/">å¤´æ¡æ¨èç³»ç»Ÿ</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Ebook </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ebook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>03-HTTP æŠ¥æ–‡å†…çš„ HTTP ä¿¡æ¯</title>
      <link href="2019/05/09/wang-luo-tong-xin-03-http-bao-wen-nei-de-http-xin-xi/"/>
      <url>2019/05/09/wang-luo-tong-xin-03-http-bao-wen-nei-de-http-xin-xi/</url>
      
        <content type="html"><![CDATA[<p>HTTP é€šä¿¡è¿‡ç¨‹åŒ…æ‹¬ä»å®¢æˆ·ç«¯å‘å¾€æœåŠ¡å™¨ç«¯çš„è¯·æ±‚ä»¥åŠä»æœåŠ¡ç«¯è¿”å›å®¢æˆ·ç«¯çš„å“åº”ã€‚</p><h2 id="1ã€HTTP-æŠ¥æ–‡"><a href="#1ã€HTTP-æŠ¥æ–‡" class="headerlink" title="1ã€HTTP æŠ¥æ–‡"></a>1ã€HTTP æŠ¥æ–‡</h2><p>å°±æ˜¯ä¸€å¤§ä¸²é€šä¿¡è¿‡ç¨‹é‡Œç»è¿‡ <code>HTTP</code> å¤„ç†åæ·»åŠ çš„æŠ¥æ–‡ã€‚<br>å…¶å¤§è‡´åˆ†ä¸ºæŠ¥æ–‡é¦–éƒ¨å’ŒæŠ¥æ–‡ä¸»ä½“ä¸¤å—ã€‚ä¸¤è€…ç”±æœ€åˆå‡ºç°çš„ç©ºè¡Œï¼ˆ<code>CR+LF</code>ï¼‰æ¥åˆ’åˆ†ï¼Œé€šå¸¸å¹¶ä¸ä¸€å®šè¦æœ‰æŠ¥æ–‡ä¸»ä½“ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526112612-HTTP%E6%8A%A5%E6%96%87%E7%BB%93%E6%9E%84%20.png" alt="20190526112612-HTTPæŠ¥æ–‡ç»“æ„"></p><h2 id="2ã€ç¼–ç æå‡ä¼ è¾“é€Ÿç‡"><a href="#2ã€ç¼–ç æå‡ä¼ è¾“é€Ÿç‡" class="headerlink" title="2ã€ç¼–ç æå‡ä¼ è¾“é€Ÿç‡"></a>2ã€ç¼–ç æå‡ä¼ è¾“é€Ÿç‡</h2><h3 id="æŠ¥æ–‡ä¸»ä½“å’Œå®ä½“ä¸»ä½“çš„å·®å¼‚"><a href="#æŠ¥æ–‡ä¸»ä½“å’Œå®ä½“ä¸»ä½“çš„å·®å¼‚" class="headerlink" title="æŠ¥æ–‡ä¸»ä½“å’Œå®ä½“ä¸»ä½“çš„å·®å¼‚"></a>æŠ¥æ–‡ä¸»ä½“å’Œå®ä½“ä¸»ä½“çš„å·®å¼‚</h3><ul><li><strong>æŠ¥æ–‡ï¼š</strong>HTTP é€šä¿¡çš„åŸºæœ¬å•ä½ï¼Œ8 ä½ç»„å­—èŠ‚æµç»„æˆï¼Œé€šè¿‡ HTTP é€šä¿¡ä¼ è¾“ã€‚</li><li><strong>å®ä½“ï¼š</strong>è¯·æ±‚æˆ–å“åº”çš„æœ‰æ•ˆè½½è·æ•°æ®è¢«ä¼ è¾“ï¼Œå†…å®¹ç”±å®ä½“é¦–éƒ¨å’Œå®ä½“ä¸»ä½“ç»„æˆã€‚</li></ul><p>HTTP æŠ¥æ–‡ä¸»ä½“ç”¨äºä¼ è¾“è¯·æ±‚æˆ–å“åº”çš„å®ä½“ä¸»ä½“ã€‚<br>ä¸€èˆ¬æƒ…å†µï¼ŒæŠ¥æ–‡ä¸»ä½“ç­‰äºå®ä½“ä¸»ä½“ï¼Œä½†æ˜¯ä¼ è¾“ä¸­è¿›è¡Œç¼–ç æ“ä½œçš„æ—¶å€™ï¼Œå®ä½“ä¸»ä½“å†…å®¹å‘ç”Ÿå˜åŒ–ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526112620-HTTP%E6%8A%A5%E6%96%87%E7%BB%93%E6%9E%8402%20.png" alt="20190526112620-HTTPæŠ¥æ–‡ç»“æ„02"><br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526112630-HTTP%E6%8A%A5%E6%96%87%E5%AE%9E%E4%BE%8B%20.png" alt="20190526112630-HTTPæŠ¥æ–‡å®ä¾‹"></p><h3 id="å‹ç¼©ä¼ è¾“çš„å†…å®¹ç¼–ç "><a href="#å‹ç¼©ä¼ è¾“çš„å†…å®¹ç¼–ç " class="headerlink" title="å‹ç¼©ä¼ è¾“çš„å†…å®¹ç¼–ç "></a>å‹ç¼©ä¼ è¾“çš„å†…å®¹ç¼–ç </h3><p><code>HTTP</code> åè®®ä¸­çš„å†…å®¹ç¼–ç åŠŸèƒ½å°±åƒç”¨å‹ç¼©è½¯ä»¶å‹ç¼©ä¸œè¥¿ä¸€æ ·ï¼Œå¯¹å®ä½“å†…å®¹è¿›è¡Œç¼–ç å‹ç¼©ï¼Œå†…å®¹ç¼–ç åçš„å®ä½“ç”±å®¢æˆ·ç«¯æ¥å—å¹¶è§£ç ã€‚è¿™å¯ä»¥å‹ç¼©ä¼ è¾“å†…å®¹ï¼ŒåŠ å¿«ä¼ è¾“é€Ÿåº¦ã€‚<br>å¸¸è§çš„å†…å®¹ç¼–ç æœ‰ <code>gzip</code>ã€<code>compress</code>ã€<code>deflate</code>ã€<code>identity</code>ï¼ˆä¸ç¼–ç ï¼‰ã€‚</p><h3 id="åˆ†å‰²å‘é€çš„åˆ†å—ä¼ è¾“ç¼–ç "><a href="#åˆ†å‰²å‘é€çš„åˆ†å—ä¼ è¾“ç¼–ç " class="headerlink" title="åˆ†å‰²å‘é€çš„åˆ†å—ä¼ è¾“ç¼–ç "></a>åˆ†å‰²å‘é€çš„åˆ†å—ä¼ è¾“ç¼–ç </h3><p><code>HTTP</code> é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œè¯·æ±‚çš„ç¼–ç å®ä½“èµ„æºå°šæœªä¼ è¾“å®Œæˆä¹‹å‰ï¼Œæµè§ˆå™¨æ— æ³•æ˜¾ç¤ºè¯·æ±‚é¡µé¢ï¼Œä¼ è¾“å¤§å®¹é‡æ•°æ®æ—¶å€™ï¼Œé€šè¿‡æ•°æ®åˆ†å‰²æˆå¤šå—ï¼Œèƒ½è®©æµè§ˆå™¨é€æ­¥æ˜¾ç¤ºé¡µé¢ã€‚è¿™å°±æ˜¯åˆ†å—ä¼ è¾“ç¼–ç ï¼ˆ<code>Chunked</code> <code>Transfer</code> <code>Coding</code>ï¼‰ã€‚å®ƒå°†å®ä½“ä¸»ä½“åˆ†æˆå¤šä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸€å—ç”¨åå…­è¿›åˆ¶æ¥æ ‡è®°ï¼Œæœ€åä¸€å—ä½¿ç”¨<code>0ï¼ˆCR+LF)</code>æ¥æ ‡è®°ã€‚ä¼ è¾“ç»™å®¢æˆ·ç«¯ï¼Œç”±å®¢æˆ·ç«¯è¿›è¡Œè§£ç æ¢å¤ã€‚</p><h2 id="3ã€å‘é€å¤šç§æ•°æ®çš„å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆ"><a href="#3ã€å‘é€å¤šç§æ•°æ®çš„å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆ" class="headerlink" title="3ã€å‘é€å¤šç§æ•°æ®çš„å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆ"></a>3ã€å‘é€å¤šç§æ•°æ®çš„å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆ</h2><p><code>MIME</code>ï¼ˆ<code>Multipurpose</code> <code>Internet</code> <code>Mail</code> <code>Extensions</code>, å¤šç”¨é€”å› ç‰¹ç½‘é‚®ä»¶æ‰©å±•ï¼‰ï¼Œå®ƒå…è®¸é‚®ä»¶å¤„ç†æ–‡æœ¬ï¼Œå›¾ç‰‡ï¼Œè§†é¢‘ç­‰å¤šä¸ªä¸åŒç±»å‹çš„æ•°æ®ï¼Œè¿™ä½¿æˆ‘ä»¬å¯ä»¥åœ¨é‚®ä»¶é‡Œå†™å…¥æ–‡å­—å¹¶æ·»åŠ å¤šåˆ†é™„ä»¶æˆä¸ºäº†ç°å®ã€‚ä¾‹å¦‚ï¼šå›¾ç‰‡ç­‰äºŒè¿›åˆ¶æ•°æ®ä»¥ <code>ASCII</code> ç å­—ç¬¦ä¸²ç¼–ç æ–¹å¼è¡¨åï¼Œå°±æ˜¯åˆ©ç”¨ <code>MIME</code> æ¥æ ‡è®°æ•°æ®ç±»å‹ï¼Œåœ¨ <code>MIME</code> æ‰©å±•ä¸­ä¼šä½¿ç”¨ä¸€ç§ç§°ä¸ºå¤šéƒ¨åˆ†å¯¹è±¡é›†åˆï¼ˆ<code>Multipart</code>ï¼‰çš„æ–¹æ³•ï¼Œæ¥å®¹çº³å¤šä»½ä¸åŒç±»å‹çš„æ•°æ®ã€‚<br>ç›¸åº”çš„ï¼Œ<code>HTTP</code> åè®®ä¸­ä¹Ÿé‡‡çº³äº†å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆï¼Œå‘é€çš„ä¸€ä»½æŠ¥æ–‡ä¸»ä½“å†…å¯å«æœ‰å¤šç±»å‹å®ä½“ï¼Œé€šå¸¸åœ¨å›¾ç‰‡æˆ–æ–‡æœ¬æ–‡ä»¶ç­‰ä¸Šä¼ æ—¶ä½¿ç”¨ã€‚<br>å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆåŒ…æ‹¬ï¼š</p><ul><li><p><code>multipart</code>/<code>form-data</code> åœ¨ <code>Web</code> è¡¨å•æ–‡ä»¶ä¸Šä¼ ä½¿ç”¨</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526112655-%E5%A4%9A%E9%83%A8%E5%88%86%E5%AF%B9%E8%B1%A1%E9%9B%86%E5%90%88%20.png" alt="20190526112655-å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆ"></p></li><li><p><code>multipart</code>/<code>byteranges</code> çŠ¶æ€ç  206ï¼ˆ<code>Partial</code> <code>Content</code>ï¼Œéƒ¨åˆ†å†…å®¹ï¼‰å“åº”æŠ¥æ–‡åŒ…å«äº†å¤šä¸ªèŒƒå›´çš„å†…å®¹æ—¶ä½¿ç”¨ã€‚</p></li></ul><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526112701-%E5%A4%9A%E9%83%A8%E5%88%86%E5%AF%B9%E8%B1%A1%E9%9B%86%E5%90%8802%20.png" alt="20190526112701-å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆ02"></p><p><code>HTTP</code> æŠ¥æ–‡ä½¿ç”¨è¿™ä¸ªå¤šéƒ¨åˆ†å¯¹è±¡é›†åˆçš„æ—¶å€™ï¼Œéœ€è¦åœ¨é¦–éƒ¨æ·»åŠ  <code>Content-type</code> å­—æ®µã€‚<br>ä½¿ç”¨ <code>boundary</code> å­—ç¬¦ä¸²æ¥åˆ’åˆ†å¤šéƒ¨åˆ†<br>åœ¨ <code>boundary</code> å­—ç¬¦ä¸²æŒ‡å®šçš„å„ä¸ªå®ä½“çš„èµ·å§‹è¡Œä¹‹å‰æ’å…¥<code>--</code>æ ‡è®°ï¼ˆ<code>--AaB03x</code>ã€<code>--THis_STRING_SEPARATES</code>)<br>åœ¨å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆå¯¹åº”çš„å­—ç¬¦ä¸²çš„æœ€åæ’å…¥<code>--</code>æ ‡è®°ï¼ˆ<code>--AaB03x--</code>ï¼‰</p><p>å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆçš„æ¯ä¸ªéƒ¨åˆ†ç±»å‹ä¸­ï¼Œéƒ½å¯ä»¥å«æœ‰é¦–éƒ¨å­—æ®µã€‚å¦å¤–ï¼Œå¯ä»¥åœ¨éƒ¨åˆ†ä¸­æ½œé€ƒä½¿ç”¨å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆã€‚</p><h2 id="4ã€è·å–éƒ¨åˆ†å†…å®¹çš„èŒƒå›´è¯·æ±‚"><a href="#4ã€è·å–éƒ¨åˆ†å†…å®¹çš„èŒƒå›´è¯·æ±‚" class="headerlink" title="4ã€è·å–éƒ¨åˆ†å†…å®¹çš„èŒƒå›´è¯·æ±‚"></a>4ã€è·å–éƒ¨åˆ†å†…å®¹çš„èŒƒå›´è¯·æ±‚</h2><p>è¿‡å»ï¼Œç”¨æˆ·ä¸‹è½½ä¸œè¥¿ä¸­æ–­äº†å¿…é¡»è¦ä»å¤´ä¸‹è½½ï¼Œä¸ºäº†è§£å†³è¿™é—®é¢˜ï¼Œè¦å®ç°è¯¥åŠŸèƒ½éœ€è¦æŒ‡å®šä¸‹è½½çš„å®ä½“èŒƒå›´ï¼ŒæŒ‡å®šèŒƒå›´å‘é€çš„è¯·æ±‚å«åšèŒƒå›´è¯·æ±‚ï¼ˆ<code>Range</code> <code>Request</code>)<br>å¯¹ä¸€ä»½ 10000 å­—èŠ‚å¤§å°çš„èµ„æºï¼Œå¦‚æœä½¿ç”¨èŒƒå›´è¯·æ±‚ï¼Œå¯ä»¥åªè¯·æ±‚ 5001~10000 å­—èŠ‚å†…çš„èµ„æºã€‚è¿™æ ·å°±ç®—ä¸­æ–­äº†ï¼Œä¹Ÿå¯ä»¥å‘æœåŠ¡ç«¯æŒ‡æ˜è‡ªå·±éœ€è¦çš„èµ„æºå­—èŠ‚èŒƒå›´ï¼Œè¿™äº›éœ€è¦åœ¨é¦–éƒ¨å­—æ®µä¸­è¡¨åã€‚<br>å½¢å¼å¦‚ä¸‹ï¼š</p><p><code>Range</code> : <code>bytes</code> = 5001 - 10000<br>5001 åˆ° 10000 çš„<br><code>Range</code> : <code>bytes</code> = 5001 -<br>5001 åˆ°ä¹‹åå…¨éƒ¨çš„<br><code>Range</code> : <code>bytes</code> = -3000, 5000 - 7000<br>ä»å¤´åˆ° 3000ï¼Œ 5000 åˆ° 7000 çš„</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526112648-HTTP%E8%8C%83%E5%9B%B4%E8%AF%B7%E6%B1%82%20.png" alt="20190526112648-HTTPèŒƒå›´è¯·æ±‚"></p><p>é’ˆå¯¹èŒƒå›´è¯·æ±‚ï¼Œå“åº”ä¼šè¿”å›çŠ¶æ€ç ä¸º <code>206 Partial Content</code> çš„å“åº”æŠ¥æ–‡ï¼Œå¦å¤–ï¼Œå¯¹äºå¤šé‡èŒƒå›´çš„èŒƒå›´è¯·æ±‚ï¼Œå“åº”ä¼šåœ¨é¦–éƒ¨å­—æ®µ <code>Content-Type</code> æ ‡æ˜ <code>multipart</code>/<code>byteranges</code> åè¿”å›å“åº”æŠ¥æ–‡ï¼Œå¦‚æœæœåŠ¡å™¨æ— æ³•å“åº”è¯·æ±‚ï¼Œè¿”å›çŠ¶æ€ç  <code>200 OK</code>å’Œå®Œæ•´çš„å®ä½“å†…å®¹ã€‚</p><h5 id="5ã€å†…å®¹åå•†è¿”å›æœ€åˆé€‚çš„å†…å®¹"><a href="#5ã€å†…å®¹åå•†è¿”å›æœ€åˆé€‚çš„å†…å®¹" class="headerlink" title="5ã€å†…å®¹åå•†è¿”å›æœ€åˆé€‚çš„å†…å®¹"></a>5ã€å†…å®¹åå•†è¿”å›æœ€åˆé€‚çš„å†…å®¹</h5><p>åŒä¸€ä¸ª Web ç½‘ç«™å¯èƒ½æœ‰å­˜ç€å¤šåˆ†ç›¸åŒå†…å®¹çš„é¡µé¢ï¼Œå¦‚ä¸­æ–‡ç‰ˆå’Œè‹±æ–‡ç‰ˆï¼Œå†…å®¹è™½ç„¶ç›¸åŒï¼Œå•è¯­è¨€ä¸åŒã€‚å½“æµè§ˆå™¨é»˜è®¤è¯­è¨€ä¸ºå“ªç§ï¼Œè®¿é—®ç›¸åŒçš„ <code>URI</code> çš„ <code>Web</code> é¡µé¢æ—¶ï¼Œä¼šå¯¹åº”è¿”å›å“ªç§è¯­è¨€çš„ Web é¡µé¢ï¼Œè¿™æ ·çš„æœºåˆ¶å°±å«åšå†…å®¹åå•†ï¼ˆ<code>Content</code> <code>Negotiation</code>ï¼‰ã€‚<br>è¿™åå•†çš„è¯·æ±‚ä¼šåŒ…å«åœ¨é¦–éƒ¨å­—æ®µ</p><ul><li><code>Accept</code></li><li><code>Accept-Charset</code></li><li><code>Accept-Encoding</code></li><li><code>Accept-Language</code></li><li><code>Content-Language</code></li></ul><p>ç±»å‹ï¼š<br>æœåŠ¡å™¨é©±åŠ¨åå•†ï¼ˆ<code>Server-driven</code> <code>Negotiation</code>)<br>æœåŠ¡å™¨é€šè¿‡è¯·æ±‚çš„é¦–éƒ¨å­—æ®µä¸ºå‚è€ƒè‡ªåŠ¨å¤„ç†ï¼Œä½†ä»¥æµè§ˆå™¨ç›´æ¥å‘é€çš„ä¿¡æ¯ä¸ä¸€å®šèƒ½ç­›é€‰å‡ºæœ€ä¼˜çš„å†…å®¹ã€‚<br>å®¢æˆ·ç«¯é©±åŠ¨åå•†ï¼ˆ<code>Agent-driven</code> <code>Negotiation</code>)<br>ç”¨æˆ·ä»æµè§ˆå™¨æ˜¾ç¤ºçš„å¯é€‰é¡¹åˆ—è¡¨ä¸­é€‰æ‹©ï¼Œ è¿˜å¯ä»¥åˆ©ç”¨ JS è„šæœ¬åœ¨ Web é¡µé¢è‡ªåŠ¨è¿›è¡Œä¸Šè¿°é€‰æ‹©ã€‚<br>é€æ˜åå•†ï¼ˆ<code>Transparent</code> <code>Negotiation</code>)<br>ä¸Šä¸¤ç§æ–¹æ³•çš„ç»“åˆä½“ã€‚</p><h2 id="è‡ªæˆ‘å›é¡¾"><a href="#è‡ªæˆ‘å›é¡¾" class="headerlink" title="è‡ªæˆ‘å›é¡¾"></a>è‡ªæˆ‘å›é¡¾</h2><p>1ã€<code>HTTP</code> æŠ¥æ–‡æ˜¯ä»€ä¹ˆï¼Ÿå¤§è‡´åˆ†ä¸ºå“ªä¸¤éƒ¨åˆ†ï¼Ÿ<br>2ã€æå‡ç¼–ç ä¼ è¾“é€Ÿç‡çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ<br>3ã€å¦‚ä½•å‘é€å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆï¼Ÿ<br>4ã€å¦‚ä½•è¿›è¡Œæ–­ç‚¹ä¼ è¾“ï¼Ÿ<br>5ã€å†…å®¹åå•†æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> ç½‘ç»œé€šä¿¡ </category>
          
          <category> TCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
            <tag> TCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02-ç®€å•ä»‹ç» HTTP åè®®ç»“æ„</title>
      <link href="2019/05/09/wang-luo-tong-xin-02-jian-dan-jie-shao-http-xie-yi-jie-gou/"/>
      <url>2019/05/09/wang-luo-tong-xin-02-jian-dan-jie-shao-http-xie-yi-jie-gou/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆï¼Œåº”ç”¨ <code>HTTP</code> åè®®æ—¶ï¼Œå¿…å®šæœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ã€‚<br>å…¶ä¸­ï¼Œå‘èµ·è¯·æ±‚çš„æ˜¯å®¢æˆ·ç«¯ï¼Œå“åº”è¯·æ±‚å¹¶è¿”å›çš„æ˜¯æœåŠ¡ç«¯ã€‚</p><h2 id="1ã€è¯·æ±‚æŠ¥æ–‡"><a href="#1ã€è¯·æ±‚æŠ¥æ–‡" class="headerlink" title="1ã€è¯·æ±‚æŠ¥æ–‡"></a>1ã€è¯·æ±‚æŠ¥æ–‡</h2><p>è¯·æ±‚æŠ¥æ–‡æ˜¯ç”±è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚ <code>URI</code>ã€åè®®ç‰ˆæœ¬ã€å¯é€‰çš„è¯·æ±‚é¦–éƒ¨å­—æ®µå’Œå†…å®¹å®ä½“æ„æˆçš„ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526111207-%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%20.png" alt="20190526111207-è¯·æ±‚æŠ¥æ–‡"></p><h2 id="2ã€å“åº”æŠ¥æ–‡"><a href="#2ã€å“åº”æŠ¥æ–‡" class="headerlink" title="2ã€å“åº”æŠ¥æ–‡"></a>2ã€å“åº”æŠ¥æ–‡</h2><p>æœåŠ¡å™¨ä»¥å“åº”çš„å½¢å¼è¿”å›å¤„ç†ç»“æœã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526111215-%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87%20.png" alt="20190526111215-å“åº”æŠ¥æ–‡"></p><p><code>200 OK</code> æ˜¯çŠ¶æ€ç ï¼ˆ<code>status</code> <code>code</code>ï¼‰å’Œ åŸå› çŸ­è¯­ã€‚<br>ä¸‹ä¸€è¡Œæ˜¯åˆ›å»ºç›¸åº”çš„æ—¥æœŸï¼Œæ˜¯é¦–éƒ¨å­—æ®µ (<code>header</code> <code>field</code>) çš„ä¸€ä¸ªå±æ€§ã€‚<br>ä¸‹ä¸€è¡Œæ˜¯è¿”å›å†…å®¹çš„æ€»é•¿åº¦ã€‚<br>ä¸‹ä¸€è¡Œæ˜¯è¿”å›å†…å®¹çš„ç±»å‹ã€‚<br>ç©ºè¡Œåçš„æ˜¯èµ„æºå®ä½“çš„ä¸»ä½“å†…å®¹ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526111221-%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%8702%20.png" alt="20190526111221-å“åº”æŠ¥æ–‡02"></p><h2 id="3ã€HTTP-æ˜¯æ— çŠ¶æ€ï¼ˆstatelessï¼‰åè®®ã€‚"><a href="#3ã€HTTP-æ˜¯æ— çŠ¶æ€ï¼ˆstatelessï¼‰åè®®ã€‚" class="headerlink" title="3ã€HTTP æ˜¯æ— çŠ¶æ€ï¼ˆstatelessï¼‰åè®®ã€‚"></a>3ã€HTTP æ˜¯æ— çŠ¶æ€ï¼ˆstatelessï¼‰åè®®ã€‚</h2><p>â€ƒ HTTP è‡ªèº«ä¸å¯¹è¯·æ±‚å’Œç›¸åº”ä¹‹é—´çš„é€šä¿¡çŠ¶æ€è¿›è¡Œä¿å­˜ï¼Œå³ä¸å¯¹å‘é€è¿‡çš„è¯·æ±‚æˆ–å“åº”è¿›è¡ŒæŒä¹…åŒ–å¤„ç†ã€‚<br>â€ƒ è¿™æ˜¯ä¸ºäº†æ›´å¿«åœ°å¤„ç†å¤§é‡äº‹åŠ¡ï¼Œç¡®ä¿åè®®çš„å¯ä¼¸ç¼©æ€§ã€‚<br>â€ƒ è¿™ä¸€æŠ€æœ¯çš„<strong>é—®é¢˜</strong>å°±æ˜¯å½“è®¿é—®ä¸€å®¶ç½‘ç«™çš„å¤šä¸ªé¡µé¢æ—¶ï¼Œæ— æ³•ä¿å­˜å…¶ç™»é™†çŠ¶æ€ï¼Œæ‰€ä»¥æ ¹æ®è¿™ä¸€é—®é¢˜ï¼Œå¼•å…¥äº† <code>Cookie</code> æŠ€æœ¯æ¥ç®¡ç†çŠ¶æ€ã€‚</p><h2 id="4ã€HTTP-æ–¹æ³•"><a href="#4ã€HTTP-æ–¹æ³•" class="headerlink" title="4ã€HTTP æ–¹æ³•"></a>4ã€HTTP æ–¹æ³•</h2><p>â€ƒ ä¸‹é¢å°±ç®€å•ä»‹ç»ä¸€ä¸‹å¸¸ç”¨çš„å‡ ç§æ–¹æ³•ï¼Œ<code>GET</code>ã€<code>POST</code> å’Œ <code>HEAD</code> é™¤æ­¤ä¹‹å¤–çš„è¿˜æœ‰ <code>PUT</code>ã€<code>DELETE</code>ã€<code>OPTIONS</code>ã€<code>TRACE</code> å’Œ <code>CONNECT</code>ï¼Œè¿™äº›ä¸å¤ªå¸¸ç”¨ï¼Œæ‰€ä»¥ä¸åœ¨è¿™é‡Œèµ˜è¿°äº†ã€‚</p><h3 id="GET"><a href="#GET" class="headerlink" title="GET"></a><code>GET</code></h3><p>â€ƒ è·å–èµ„æºã€‚è¯·æ±‚å·²è¢« <code>URI</code> è¯†åˆ«çš„èµ„æºï¼Œå°±æ˜¯ç»è¿‡æœåŠ¡å™¨è§£æåè¿”å›çš„å“åº”å†…å®¹ï¼Œæ–‡æœ¬å°±ä¿æŒåŸæ ·è¿”å›ï¼Œå¦‚æœæ˜¯å¯æ‰§è¡Œç¨‹åºï¼Œå°±è¿”å›ç»“æœã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526111129-GET%E6%96%B9%E5%BC%8F%20.png" alt="20190526111129-GETæ–¹å¼"></p><h3 id="POST"><a href="#POST" class="headerlink" title="POST"></a><code>POST</code></h3><p>â€ƒ ä¼ è¾“å®ä½“ä¸»ä½“ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526111137-POST%E6%96%B9%E5%BC%8F%20.png" alt="20190526111137-POSTæ–¹å¼"></p><h3 id="HEAD"><a href="#HEAD" class="headerlink" title="HEAD"></a><code>HEAD</code></h3><p>â€ƒ è·å¾—æŠ¥æ–‡é¦–éƒ¨ã€‚å’Œ <code>GET</code> ä¸€æ ·ï¼Œä½†æ˜¯ä¸è¿”å›ä¸»ä½“éƒ¨åˆ†ï¼Œåªç”¨äºç¡®è®¤ <code>URI</code> çš„æœ‰æ•ˆæ€§å’Œèµ„æºæ›´æ–°çš„æ—¥æœŸç­‰ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526111155-%E6%8A%A5%E6%96%87%E5%A4%B4%20.png" alt="20190526111155-æŠ¥æ–‡å¤´"></p><blockquote><p><strong>æ³¨æ„ï¼š</strong>æ–¹æ³•ååŒºåˆ†å¤§å°å†™ï¼Œæ³¨æ„è¦ç”¨<strong>å¤§å†™å­—æ¯</strong>ã€‚</p></blockquote><h2 id="5ã€æŒä¹…åŒ–è¿æ¥"><a href="#5ã€æŒä¹…åŒ–è¿æ¥" class="headerlink" title="5ã€æŒä¹…åŒ–è¿æ¥"></a>5ã€æŒä¹…åŒ–è¿æ¥</h2><p>â€ƒ å½“è¯·æ±‚çš„èµ„æºæœ‰å¾ˆå¤šæ—¶ï¼Œä¼šå‘ç”Ÿå¤šæ¬¡çš„ <code>TCP</code> è¿æ¥å’Œæ–­å¼€è¿‡ç¨‹ï¼Œå¢åŠ äº†é€šä¿¡é‡çš„å¼€é”€ã€‚äºæ˜¯äº§ç”Ÿäº†æŒä¹…é“¾æ¥ï¼ˆ<code>HTTP</code> <code>Persistent</code> <code>connections</code>ï¼‰ã€‚<br>â€ƒ <strong>ç‰¹ç‚¹ï¼š</strong> åªè¦ä»»æ„ä¸€ç«¯æ²¡æœ‰æ˜ç¡®æå‡ºæ–­å¼€è¿æ¥ï¼Œåˆ™ä¿æŒ <code>TCP</code> è¿æ¥çŠ¶æ€ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526111143-TCP%E9%93%BE%E6%8E%A5%20.png" alt="20190526111143-TCPé“¾æ¥"></p><h2 id="6ã€ç®¡çº¿åŒ–"><a href="#6ã€ç®¡çº¿åŒ–" class="headerlink" title="6ã€ç®¡çº¿åŒ–"></a>6ã€ç®¡çº¿åŒ–</h2><p>â€ƒ æŒä¹…åŒ–è¿æ¥éœ€è¦ç­‰å¾…ä¸Šä¸€ä¸ªå‘é€è¯·æ±‚å¾—åˆ°å“åº”ä¹‹åæ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯ç®¡çº¿åŒ–æŠ€æœ¯å¯ä»¥ç›´æ¥å‘é€ï¼Œè¿™æ ·å°±èƒ½åŒæ—¶å¹¶å‘å‘é€å¤šä¸ªè¯·æ±‚ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526111200-%E7%AE%A1%E7%BA%BF%E5%8C%96%20.png" alt="20190526111200-ç®¡çº¿åŒ–"></p><h2 id="7ã€Cookie"><a href="#7ã€Cookie" class="headerlink" title="7ã€Cookie"></a>7ã€Cookie</h2><p>â€ƒ çŠ¶æ€ç®¡ç†ã€‚ä¸ºäº†è§£å†³ <code>HTTP</code> çš„æ— çŠ¶æ€ï¼Œ<code>Cookie</code> æŠ€æœ¯é€šè¿‡åœ¨è¯·æ±‚å’Œå“åº”æŠ¥æ–‡ä¸­å†™å…¥ <code>Cookie</code> ä¿¡æ¯æ¥æ§åˆ¶å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚å…·ä½“å®ç°æ˜¯ <code>Cookie</code> æ ¹æ®å“åº”æŠ¥æ–‡å†… <code>Set-Cookie</code> çš„é¦–éƒ¨å­—æ®µä¿¡æ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ <code>Cookie</code>ï¼Œå½“ä¸‹ä¸€æ¬¡å†åƒ<strong>è¯¥</strong>æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­æ·»åŠ  <code>Cookie</code> å€¼åå‘é€ã€‚æœåŠ¡ç«¯å‘ç°å®¢æˆ·ç«¯å‘é€çš„ <code>Cookie</code> åï¼Œå›å»æ£€æŸ¥å¯¹æ¯”è®°å½•ï¼Œå¾—åˆ°çŠ¶æ€ä¿¡æ¯ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526111108-Cookie%20.png" alt="20190526111108-Cookie"></p><h2 id="è‡ªæˆ‘å›é¡¾"><a href="#è‡ªæˆ‘å›é¡¾" class="headerlink" title="è‡ªæˆ‘å›é¡¾"></a>è‡ªæˆ‘å›é¡¾</h2><p>1ã€è¯·æ±‚æŠ¥æ–‡ã€å“åº”æŠ¥æ–‡çš„åŸºæœ¬ç»„æˆï¼Ÿ<br>2ã€ä»€ä¹ˆæ˜¯æ— çŠ¶æ€åè®®ï¼Œæ€ä¹ˆè§£å†³çš„ï¼Ÿ<br>3ã€<code>HTTP</code> çš„åŸºæœ¬æ–¹æ³•ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆåŠŸèƒ½ï¼Ÿ<br>4ã€ä¸ºäº†åŠ å¿«èµ„æºè®¿é—®é€Ÿåº¦å‡ºç°äº†ä»€ä¹ˆæ–¹æ³•ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> ç½‘ç»œé€šä¿¡ </category>
          
          <category> TCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
            <tag> TCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»å…¸æ’åºç®—æ³•æ€»ç»“ä¸å®ç°</title>
      <link href="2019/05/09/suan-fa-pai-xu/"/>
      <url>2019/05/09/suan-fa-pai-xu/</url>
      
        <content type="html"><![CDATA[<p>ç»å…¸æ’åºç®—æ³•åœ¨é¢è¯•ä¸­å æœ‰å¾ˆå¤§çš„æ¯”é‡ï¼Œä¹Ÿæ˜¯åŸºç¡€ï¼Œä¸ºäº†æœªé›¨ç»¸ç¼ªï¼Œæ•´ç†å¹¶ç”¨Pythonå®ç°äº†ä¸ƒå¤§ç»å…¸æ’åºç®—æ³•ï¼ŒåŒ…æ‹¬å†’æ³¡æ’åºï¼Œæ’å…¥æ’åºï¼Œé€‰æ‹©æ’åºï¼Œå¸Œå°”æ’åºï¼Œå½’å¹¶æ’åºï¼Œå¿«é€Ÿæ’åºï¼Œå †æ’åºã€‚ä¹‹æ‰€ä»¥ç”¨Pythonå®ç°ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒæ›´æ¥è¿‘ä¼ªä»£ç ï¼Œèƒ½ç”¨æ›´å°‘çš„ä»£ç å®ç°ç®—æ³•ï¼Œæ›´åˆ©äºç†è§£ã€‚</p><p>æœ¬ç¯‡åšå®¢æ‰€æœ‰æ’åºå®ç°å‡é»˜è®¤ä»å°åˆ°å¤§ã€‚</p><h2 id="ä¸€ã€å†’æ³¡æ’åº-BubbleSort"><a href="#ä¸€ã€å†’æ³¡æ’åº-BubbleSort" class="headerlink" title="ä¸€ã€å†’æ³¡æ’åº BubbleSort"></a>ä¸€ã€å†’æ³¡æ’åº <code>BubbleSort</code></h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å†’æ³¡æ’åºçš„åŸç†éå¸¸ç®€å•ï¼Œå®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé€†åºå°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚</p><h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol><li>æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚</li><li>å¯¹ç¬¬0ä¸ªåˆ°ç¬¬n-1ä¸ªæ•°æ®åšåŒæ ·çš„å·¥ä½œã€‚è¿™æ—¶ï¼Œæœ€å¤§çš„æ•°å°±â€œæµ®â€åˆ°äº†æ•°ç»„æœ€åçš„ä½ç½®ä¸Šã€‚</li><li>é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚</li><li>æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚</li></ol><p>ä¸è¿‡é’ˆå¯¹ä¸Šè¿°å®ç°è¿‡ç¨‹è¿˜æœ‰ä¸¤ç§ä¼˜åŒ–æ–¹æ¡ˆã€‚</p><ul><li>ä¼˜åŒ–1ï¼šæŸä¸€è¶Ÿéå†å¦‚æœæ²¡æœ‰æ•°æ®äº¤æ¢ï¼Œåˆ™è¯´æ˜å·²ç»æ’å¥½åºäº†ï¼Œå› æ­¤ä¸ç”¨å†è¿›è¡Œè¿­ä»£äº†ã€‚ç”¨ä¸€ä¸ªæ ‡è®°è®°å½•è¿™ä¸ªçŠ¶æ€å³å¯ã€‚</li><li>ä¼˜åŒ–2ï¼šè®°å½•æŸæ¬¡éå†æ—¶æœ€åå‘ç”Ÿæ•°æ®äº¤æ¢çš„ä½ç½®ï¼Œè¿™ä¸ªä½ç½®ä¹‹åçš„æ•°æ®æ˜¾ç„¶å·²ç»æœ‰åºï¼Œä¸ç”¨å†æ’åºäº†ã€‚å› æ­¤é€šè¿‡è®°å½•æœ€åå‘ç”Ÿæ•°æ®äº¤æ¢çš„ä½ç½®å°±å¯ä»¥ç¡®å®šä¸‹æ¬¡å¾ªç¯çš„èŒƒå›´äº†ã€‚</li></ul><h3 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bubble_sort</span>(<span class="hljs-params">ary</span>):</span><br>    n = <span class="hljs-built_in">len</span>(ary)                   <span class="hljs-comment">#è·å¾—æ•°ç»„çš„é•¿åº¦</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n-i):<br>            <span class="hljs-keyword">if</span>  ary[j-<span class="hljs-number">1</span>] &gt; ary[j] :       <span class="hljs-comment">#å¦‚æœå‰è€…æ¯”åè€…å¤§</span><br>                ary[j-<span class="hljs-number">1</span>],ary[j] = ary[j],ary[j-<span class="hljs-number">1</span>]       <span class="hljs-comment">#åˆ™äº¤æ¢ä¸¤è€…</span><br>    <span class="hljs-keyword">return</span> ary<br><br><br><span class="hljs-comment">#ä¼˜åŒ–1ï¼šæŸä¸€è¶Ÿéå†å¦‚æœæ²¡æœ‰æ•°æ®äº¤æ¢ï¼Œåˆ™è¯´æ˜å·²ç»æ’å¥½åºäº†ï¼Œå› æ­¤ä¸ç”¨å†è¿›è¡Œè¿­ä»£äº†ã€‚</span><br><span class="hljs-comment">#ç”¨ä¸€ä¸ªæ ‡è®°è®°å½•è¿™ä¸ªçŠ¶æ€å³å¯ã€‚</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bubble_sort2</span>(<span class="hljs-params">ary</span>):</span><br>    n = <span class="hljs-built_in">len</span>(ary)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        flag = <span class="hljs-number">1</span>                    <span class="hljs-comment">#æ ‡è®°</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n-i):<br>            <span class="hljs-keyword">if</span>  ary[j-<span class="hljs-number">1</span>] &gt; ary[j] :<br>                ary[j-<span class="hljs-number">1</span>],ary[j] = ary[j],ary[j-<span class="hljs-number">1</span>]<br>                flag = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">if</span> flag :                   <span class="hljs-comment">#å…¨æ’å¥½åºäº†ï¼Œç›´æ¥è·³å‡º</span><br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">return</span> ary<br><br><span class="hljs-comment">#ä¼˜åŒ–2ï¼šè®°å½•æŸæ¬¡éå†æ—¶æœ€åå‘ç”Ÿæ•°æ®äº¤æ¢çš„ä½ç½®ï¼Œè¿™ä¸ªä½ç½®ä¹‹åçš„æ•°æ®æ˜¾ç„¶å·²ç»æœ‰åºäº†ã€‚</span><br><span class="hljs-comment"># å› æ­¤é€šè¿‡è®°å½•æœ€åå‘ç”Ÿæ•°æ®äº¤æ¢çš„ä½ç½®å°±å¯ä»¥ç¡®å®šä¸‹æ¬¡å¾ªç¯çš„èŒƒå›´äº†ã€‚</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bubble_sort3</span>(<span class="hljs-params">ary</span>):</span><br>    n = <span class="hljs-built_in">len</span>(ary)<br>    k = n                           <span class="hljs-comment">#kä¸ºå¾ªç¯çš„èŒƒå›´ï¼Œåˆå§‹å€¼n</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        flag = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,k):        <span class="hljs-comment">#åªéå†åˆ°æœ€åäº¤æ¢çš„ä½ç½®å³å¯</span><br>            <span class="hljs-keyword">if</span>  ary[j-<span class="hljs-number">1</span>] &gt; ary[j] :<br>                ary[j-<span class="hljs-number">1</span>],ary[j] = ary[j],ary[j-<span class="hljs-number">1</span>]<br>                k = j               <span class="hljs-comment">#è®°å½•æœ€åäº¤æ¢çš„ä½ç½®</span><br>                flag = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">if</span> flag :<br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">return</span> ary<br></code></pre></div></td></tr></table></figure><h2 id="äºŒã€é€‰æ‹©æ’åº-SelectionSort"><a href="#äºŒã€é€‰æ‹©æ’åº-SelectionSort" class="headerlink" title="äºŒã€é€‰æ‹©æ’åº SelectionSort"></a>äºŒã€é€‰æ‹©æ’åº <code>SelectionSort</code></h2><h3 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>é€‰æ‹©æ’åºæ— ç–‘æ˜¯æœ€ç®€å•ç›´è§‚çš„æ’åºã€‚å®ƒçš„å·¥ä½œåŸç†å¦‚ä¸‹ã€‚</p><h3 id="æ­¥éª¤-1"><a href="#æ­¥éª¤-1" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol><li>åœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ã€‚</li><li>å†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚</li><li>ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚</li></ol><h3 id="æºä»£ç -1"><a href="#æºä»£ç -1" class="headerlink" title="æºä»£ç "></a>æºä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">select_sort</span>(<span class="hljs-params">ary</span>):</span><br>    n = <span class="hljs-built_in">len</span>(ary)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,n):<br>        <span class="hljs-built_in">min</span> = i                             <span class="hljs-comment">#æœ€å°å…ƒç´ ä¸‹æ ‡æ ‡è®°</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>,n):<br>            <span class="hljs-keyword">if</span> ary[j] &lt; ary[<span class="hljs-built_in">min</span>] :<br>                <span class="hljs-built_in">min</span> = j                     <span class="hljs-comment">#æ‰¾åˆ°æœ€å°å€¼çš„ä¸‹æ ‡</span><br>        ary[<span class="hljs-built_in">min</span>],ary[i] = ary[i],ary[<span class="hljs-built_in">min</span>]   <span class="hljs-comment">#äº¤æ¢ä¸¤è€…</span><br>    <span class="hljs-keyword">return</span> ary<br></code></pre></div></td></tr></table></figure><h2 id="ä¸‰ã€æ’å…¥æ’åº-InsertionSort"><a href="#ä¸‰ã€æ’å…¥æ’åº-InsertionSort" class="headerlink" title="ä¸‰ã€æ’å…¥æ’åº InsertionSort"></a>ä¸‰ã€æ’å…¥æ’åº <code>InsertionSort</code></h2><h3 id="ä»‹ç»-2"><a href="#ä»‹ç»-2" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>æ’å…¥æ’åºçš„å·¥ä½œåŸç†æ˜¯ï¼Œå¯¹äºæ¯ä¸ªæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚</p><h3 id="æ­¥éª¤-2"><a href="#æ­¥éª¤-2" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol><li>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº</li><li>å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ</li><li>å¦‚æœè¢«æ‰«æçš„å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ åç§»ä¸€ä½</li><li>é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®</li><li>å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å</li><li>é‡å¤æ­¥éª¤2~5</li></ol><h3 id="æ’åºæ¼”ç¤º"><a href="#æ’åºæ¼”ç¤º" class="headerlink" title="æ’åºæ¼”ç¤º"></a>æ’åºæ¼”ç¤º</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190509200851-Insertion-sort-example-300px%20.gif" alt="20190509200851-Insertion-sort-example-300px"></p><h3 id="æºä»£ç -2"><a href="#æºä»£ç -2" class="headerlink" title="æºä»£ç "></a>æºä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">insert_sort</span>(<span class="hljs-params">ary</span>):</span><br>    n = <span class="hljs-built_in">len</span>(ary)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>        <span class="hljs-keyword">if</span> ary[i] &lt; ary[i-<span class="hljs-number">1</span>]:<br>            temp = ary[i]<br>            index = i           <span class="hljs-comment">#å¾…æ’å…¥çš„ä¸‹æ ‡</span><br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):  <span class="hljs-comment">#ä»i-1 å¾ªç¯åˆ° 0 (åŒ…æ‹¬0)</span><br>                <span class="hljs-keyword">if</span> ary[j] &gt; temp :<br>                    ary[j+<span class="hljs-number">1</span>] = ary[j]<br>                    index = j   <span class="hljs-comment">#è®°å½•å¾…æ’å…¥ä¸‹æ ‡</span><br>                <span class="hljs-keyword">else</span> :<br>                    <span class="hljs-keyword">break</span><br>            ary[index] = temp<br>    <span class="hljs-keyword">return</span> ary<br></code></pre></div></td></tr></table></figure><h2 id="å››ã€å¸Œå°”æ’åº-ShellSort"><a href="#å››ã€å¸Œå°”æ’åº-ShellSort" class="headerlink" title="å››ã€å¸Œå°”æ’åº ShellSort"></a>å››ã€å¸Œå°”æ’åº <code>ShellSort</code></h2><h3 id="ä»‹ç»ï¼š"><a href="#ä»‹ç»ï¼š" class="headerlink" title="ä»‹ç»ï¼š"></a>ä»‹ç»ï¼š</h3><p>å¸Œå°”æ’åºï¼Œä¹Ÿç§°é€’å‡å¢é‡æ’åºç®—æ³•ï¼Œå®è´¨æ˜¯åˆ†ç»„æ’å…¥æ’åºã€‚ç”± Donald Shell äº1959å¹´æå‡ºã€‚å¸Œå°”æ’åºæ˜¯éç¨³å®šæ’åºç®—æ³•ã€‚</p><h3 id="æ­¥éª¤ï¼š"><a href="#æ­¥éª¤ï¼š" class="headerlink" title="æ­¥éª¤ï¼š"></a>æ­¥éª¤ï¼š</h3><p>å¸Œå°”æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†æ•°ç»„åˆ—åœ¨ä¸€ä¸ªè¡¨ä¸­å¹¶å¯¹åˆ—åˆ†åˆ«è¿›è¡Œæ’å…¥æ’åºï¼Œé‡å¤è¿™è¿‡ç¨‹ï¼Œä¸è¿‡æ¯æ¬¡ç”¨æ›´é•¿çš„åˆ—ï¼ˆæ­¥é•¿æ›´é•¿äº†ï¼Œåˆ—æ•°æ›´å°‘äº†ï¼‰æ¥è¿›è¡Œã€‚æœ€åæ•´ä¸ªè¡¨å°±åªæœ‰ä¸€åˆ—äº†ã€‚å°†æ•°ç»„è½¬æ¢è‡³è¡¨æ˜¯ä¸ºäº†æ›´å¥½åœ°ç†è§£è¿™ç®—æ³•ï¼Œç®—æ³•æœ¬èº«è¿˜æ˜¯ä½¿ç”¨æ•°ç»„è¿›è¡Œæ’åºã€‚</p><ol><li>ä¾‹å¦‚ï¼Œå‡è®¾æœ‰è¿™æ ·ä¸€ç»„æ•°<code>[ 13 14 94 33 82 25 59 94 65 23 45 27 73 25 39 10 ]</code>ï¼Œå¦‚æœæˆ‘ä»¬ä»¥æ­¥é•¿ä¸º5å¼€å§‹è¿›è¡Œæ’åºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†è¿™åˆ—è¡¨æ”¾åœ¨æœ‰5åˆ—çš„è¡¨ä¸­æ¥æ›´å¥½åœ°æè¿°ç®—æ³•ï¼Œè¿™æ ·ä»–ä»¬å°±åº”è¯¥çœ‹èµ·æ¥æ˜¯è¿™æ ·ï¼š <figure class="highlight basic"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs basic"><span class="hljs-symbol">13 </span><span class="hljs-number">14</span> <span class="hljs-number">94</span> <span class="hljs-number">33</span> <span class="hljs-number">82</span><br><span class="hljs-symbol">25 </span><span class="hljs-number">59</span> <span class="hljs-number">94</span> <span class="hljs-number">65</span> <span class="hljs-number">23</span><br><span class="hljs-symbol">45 </span><span class="hljs-number">27</span> <span class="hljs-number">73</span> <span class="hljs-number">25</span> <span class="hljs-number">39</span><br><span class="hljs-number">10</span><br></code></pre></div></td></tr></table></figure></li><li>ç„¶åæˆ‘ä»¬å¯¹æ¯åˆ—è¿›è¡Œæ’åºï¼š <figure class="highlight basic"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs basic"><span class="hljs-symbol">10 </span><span class="hljs-number">14</span> <span class="hljs-number">73</span> <span class="hljs-number">25</span> <span class="hljs-number">23</span><br><span class="hljs-symbol">13 </span><span class="hljs-number">27</span> <span class="hljs-number">94</span> <span class="hljs-number">33</span> <span class="hljs-number">39</span><br><span class="hljs-symbol">25 </span><span class="hljs-number">59</span> <span class="hljs-number">94</span> <span class="hljs-number">65</span> <span class="hljs-number">82</span><br><span class="hljs-number">45</span><br></code></pre></div></td></tr></table></figure></li><li>å°†ä¸Šè¿°å››è¡Œæ•°å­—ï¼Œä¾åºæ¥åœ¨ä¸€èµ·æ—¶æˆ‘ä»¬å¾—åˆ°ï¼š<code>[ 10 14 73 25 23 13 27 94 33 39 25 59 94 65 82 45 ]</code>ã€‚è¿™æ—¶10å·²ç»ç§»è‡³æ­£ç¡®ä½ç½®äº†ï¼Œç„¶åå†ä»¥3ä¸ºæ­¥é•¿è¿›è¡Œæ’åºï¼š <figure class="highlight basic"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs basic"><span class="hljs-symbol">10 </span><span class="hljs-number">14</span> <span class="hljs-number">73</span><br><span class="hljs-symbol">25 </span><span class="hljs-number">23</span> <span class="hljs-number">13</span><br><span class="hljs-symbol">27 </span><span class="hljs-number">94</span> <span class="hljs-number">33</span><br><span class="hljs-symbol">39 </span><span class="hljs-number">25</span> <span class="hljs-number">59</span><br><span class="hljs-symbol">94 </span><span class="hljs-number">65</span> <span class="hljs-number">82</span><br><span class="hljs-number">45</span><br></code></pre></div></td></tr></table></figure> æ’åºä¹‹åå˜ä¸ºï¼š <figure class="highlight basic"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs basic"><span class="hljs-symbol">10 </span><span class="hljs-number">14</span> <span class="hljs-number">13</span><br><span class="hljs-symbol">25 </span><span class="hljs-number">23</span> <span class="hljs-number">33</span><br><span class="hljs-symbol">27 </span><span class="hljs-number">25</span> <span class="hljs-number">59</span><br><span class="hljs-symbol">39 </span><span class="hljs-number">65</span> <span class="hljs-number">73</span><br><span class="hljs-symbol">45 </span><span class="hljs-number">94</span> <span class="hljs-number">82</span><br><span class="hljs-number">94</span><br></code></pre></div></td></tr></table></figure></li><li>æœ€åä»¥1æ­¥é•¿è¿›è¡Œæ’åºï¼ˆæ­¤æ—¶å°±æ˜¯ç®€å•çš„æ’å…¥æ’åºäº†ï¼‰ã€‚</li></ol><h3 id="æºä»£ç -3"><a href="#æºä»£ç -3" class="headerlink" title="æºä»£ç "></a>æºä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">shell_sort</span>(<span class="hljs-params">ary</span>):</span><br>    n = <span class="hljs-built_in">len</span>(ary)<br>    gap = <span class="hljs-built_in">round</span>(n/<span class="hljs-number">2</span>)       <span class="hljs-comment">#åˆå§‹æ­¥é•¿ , ç”¨roundå››èˆäº”å…¥å–æ•´</span><br>    <span class="hljs-keyword">while</span> gap &gt; <span class="hljs-number">0</span> :<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(gap,n):        <span class="hljs-comment">#æ¯ä¸€åˆ—è¿›è¡Œæ’å…¥æ’åº , ä»gap åˆ° n-1</span><br>            temp = ary[i]<br>            j = i<br>            <span class="hljs-keyword">while</span> ( j &gt;= gap <span class="hljs-keyword">and</span> ary[j-gap] &gt; temp ):    <span class="hljs-comment">#æ’å…¥æ’åº</span><br>                ary[j] = ary[j-gap]<br>                j = j - gap<br>            ary[j] = temp<br>        gap = <span class="hljs-built_in">round</span>(gap/<span class="hljs-number">2</span>)                     <span class="hljs-comment">#é‡æ–°è®¾ç½®æ­¥é•¿</span><br>    <span class="hljs-keyword">return</span> ary<br></code></pre></div></td></tr></table></figure><h2 id="äº”ã€å½’å¹¶æ’åº-MergeSort"><a href="#äº”ã€å½’å¹¶æ’åº-MergeSort" class="headerlink" title="äº”ã€å½’å¹¶æ’åº MergeSort"></a>äº”ã€å½’å¹¶æ’åº <code>MergeSort</code></h2><h3 id="ä»‹ç»-3"><a href="#ä»‹ç»-3" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å½’å¹¶æ’åºæ˜¯é‡‡ç”¨åˆ†æ²»æ³•çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ã€‚å½’å¹¶æ’åºçš„æ€æƒ³å°±æ˜¯å…ˆé€’å½’åˆ†è§£æ•°ç»„ï¼Œå†åˆå¹¶æ•°ç»„ã€‚</p><p>å…ˆè€ƒè™‘åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼ŒåŸºæœ¬æ€è·¯æ˜¯æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„çš„æœ€å‰é¢çš„æ•°ï¼Œè°å°å°±å…ˆå–è°ï¼Œå–äº†åç›¸åº”çš„æŒ‡é’ˆå°±å¾€åç§»ä¸€ä½ã€‚ç„¶åå†æ¯”è¾ƒï¼Œç›´è‡³ä¸€ä¸ªæ•°ç»„ä¸ºç©ºï¼Œæœ€åæŠŠå¦ä¸€ä¸ªæ•°ç»„çš„å‰©ä½™éƒ¨åˆ†å¤åˆ¶è¿‡æ¥å³å¯ã€‚</p><p>å†è€ƒè™‘é€’å½’åˆ†è§£ï¼ŒåŸºæœ¬æ€è·¯æ˜¯å°†æ•°ç»„åˆ†è§£æˆleftå’Œrightï¼Œå¦‚æœè¿™ä¸¤ä¸ªæ•°ç»„å†…éƒ¨æ•°æ®æ˜¯æœ‰åºçš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨ä¸Šé¢åˆå¹¶æ•°ç»„çš„æ–¹æ³•å°†è¿™ä¸¤ä¸ªæ•°ç»„åˆå¹¶æ’åºã€‚å¦‚ä½•è®©è¿™ä¸¤ä¸ªæ•°ç»„å†…éƒ¨æ˜¯æœ‰åºçš„ï¼Ÿå¯ä»¥å†äºŒåˆ†ï¼Œç›´è‡³åˆ†è§£å‡ºçš„å°ç»„åªå«æœ‰ä¸€ä¸ªå…ƒç´ æ—¶ä¸ºæ­¢ï¼Œæ­¤æ—¶è®¤ä¸ºè¯¥å°ç»„å†…éƒ¨å·²æœ‰åºã€‚ç„¶ååˆå¹¶æ’åºç›¸é‚»äºŒä¸ªå°ç»„å³å¯ã€‚</p><h3 id="æ’åºæ¼”ç¤º-1"><a href="#æ’åºæ¼”ç¤º-1" class="headerlink" title="æ’åºæ¼”ç¤º"></a>æ’åºæ¼”ç¤º</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190509201729-Merge-sort-example-300px%20.gif" alt="20190509201729-Merge-sort-example-300px"></p><h3 id="æºä»£ç -4"><a href="#æºä»£ç -4" class="headerlink" title="æºä»£ç "></a>æºä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">merge_sort</span>(<span class="hljs-params">ary</span>):</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(ary) &lt;= <span class="hljs-number">1</span> : <span class="hljs-keyword">return</span> ary<br>    num = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(ary)/<span class="hljs-number">2</span>)       <span class="hljs-comment">#äºŒåˆ†åˆ†è§£</span><br>    left = merge_sort(ary[:num])<br>    right = merge_sort(ary[num:])<br>    <span class="hljs-keyword">return</span> merge(left,right)    <span class="hljs-comment">#åˆå¹¶æ•°ç»„</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">merge</span>(<span class="hljs-params">left,right</span>):</span><br>    <span class="hljs-string">&#x27;&#x27;&#x27;åˆå¹¶æ“ä½œï¼Œ</span><br><span class="hljs-string">    å°†ä¸¤ä¸ªæœ‰åºæ•°ç»„left[]å’Œright[]åˆå¹¶æˆä¸€ä¸ªå¤§çš„æœ‰åºæ•°ç»„&#x27;&#x27;&#x27;</span><br>    l,r = <span class="hljs-number">0</span>,<span class="hljs-number">0</span>           <span class="hljs-comment">#leftä¸rightæ•°ç»„çš„ä¸‹æ ‡æŒ‡é’ˆ</span><br>    result = []<br>    <span class="hljs-keyword">while</span> l&lt;<span class="hljs-built_in">len</span>(left) <span class="hljs-keyword">and</span> r&lt;<span class="hljs-built_in">len</span>(right) :<br>        <span class="hljs-keyword">if</span> left[l] &lt; right[r]:<br>            result.append(left[l])<br>            l += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            result.append(right[r])<br>            r += <span class="hljs-number">1</span><br>    result += left[l:]<br>    result += right[r:]<br>    <span class="hljs-keyword">return</span> result<br></code></pre></div></td></tr></table></figure><h2 id="å…­ã€å¿«é€Ÿæ’åº-QuickSort"><a href="#å…­ã€å¿«é€Ÿæ’åº-QuickSort" class="headerlink" title="å…­ã€å¿«é€Ÿæ’åº QuickSort"></a>å…­ã€å¿«é€Ÿæ’åº <code>QuickSort</code></h2><h3 id="ä»‹ç»-4"><a href="#ä»‹ç»-4" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å¿«é€Ÿæ’åºé€šå¸¸æ˜æ˜¾æ¯”åŒä¸º<code>ÎŸ(n log n)</code>çš„å…¶ä»–ç®—æ³•æ›´å¿«ï¼Œå› æ­¤å¸¸è¢«é‡‡ç”¨ï¼Œè€Œä¸”å¿«æ’é‡‡ç”¨äº†åˆ†æ²»æ³•çš„æ€æƒ³ï¼Œæ‰€ä»¥åœ¨å¾ˆå¤šç¬”è¯•é¢è¯•ä¸­èƒ½ç»å¸¸çœ‹åˆ°å¿«æ’çš„å½±å­ã€‚å¯è§æŒæ¡å¿«æ’çš„é‡è¦æ€§ã€‚</p><h3 id="æ­¥éª¤-3"><a href="#æ­¥éª¤-3" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol><li>ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†æ•°ã€‚</li><li>åˆ†åŒºè¿‡ç¨‹ï¼Œå°†æ¯”åŸºå‡†æ•°å¤§çš„æ”¾åˆ°å³è¾¹ï¼Œå°äºæˆ–ç­‰äºå®ƒçš„æ•°éƒ½æ”¾åˆ°å·¦è¾¹ã€‚</li><li>å†å¯¹å·¦å³åŒºé—´é€’å½’æ‰§è¡Œç¬¬äºŒæ­¥ï¼Œç›´è‡³å„åŒºé—´åªæœ‰ä¸€ä¸ªæ•°ã€‚</li></ol><h3 id="æ’åºæ¼”ç¤º-2"><a href="#æ’åºæ¼”ç¤º-2" class="headerlink" title="æ’åºæ¼”ç¤º"></a>æ’åºæ¼”ç¤º</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190509202100-Quicksort-example%20.gif" alt="20190509202100-Quicksort-example"></p><h3 id="æºä»£ç -5"><a href="#æºä»£ç -5" class="headerlink" title="æºä»£ç "></a>æºä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quick_sort</span>(<span class="hljs-params">ary</span>):</span><br>    <span class="hljs-keyword">return</span> qsort(ary,<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(ary)-<span class="hljs-number">1</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">qsort</span>(<span class="hljs-params">ary,left,right</span>):</span><br>    <span class="hljs-comment">#å¿«æ’å‡½æ•°ï¼Œaryä¸ºå¾…æ’åºæ•°ç»„ï¼Œleftä¸ºå¾…æ’åºçš„å·¦è¾¹ç•Œï¼Œrightä¸ºå³è¾¹ç•Œ</span><br>    <span class="hljs-keyword">if</span> left &gt;= right : <span class="hljs-keyword">return</span> ary<br>    key = ary[left]     <span class="hljs-comment">#å–æœ€å·¦è¾¹çš„ä¸ºåŸºå‡†æ•°</span><br>    lp = left           <span class="hljs-comment">#å·¦æŒ‡é’ˆ</span><br>    rp = right          <span class="hljs-comment">#å³æŒ‡é’ˆ</span><br>    <span class="hljs-keyword">while</span> lp &lt; rp :<br>        <span class="hljs-keyword">while</span> ary[rp] &gt;= key <span class="hljs-keyword">and</span> lp &lt; rp :<br>            rp -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> ary[lp] &lt;= key <span class="hljs-keyword">and</span> lp &lt; rp :<br>            lp += <span class="hljs-number">1</span><br>        ary[lp],ary[rp] = ary[rp],ary[lp]<br>    ary[left],ary[lp] = ary[lp],ary[left]<br>    qsort(ary,left,lp-<span class="hljs-number">1</span>)<br>    qsort(ary,rp+<span class="hljs-number">1</span>,right)<br>    <span class="hljs-keyword">return</span> ary<br><br></code></pre></div></td></tr></table></figure><h2 id="ä¸ƒã€å †æ’åº-HeapSort"><a href="#ä¸ƒã€å †æ’åº-HeapSort" class="headerlink" title="ä¸ƒã€å †æ’åº HeapSort"></a>ä¸ƒã€å †æ’åº <code>HeapSort</code></h2><h3 id="ä»‹ç»ï¼š-1"><a href="#ä»‹ç»ï¼š-1" class="headerlink" title="ä»‹ç»ï¼š"></a>ä»‹ç»ï¼š</h3><p>å †æ’åºåœ¨ <code>top K</code> é—®é¢˜ä¸­ä½¿ç”¨æ¯”è¾ƒé¢‘ç¹ã€‚å †æ’åºæ˜¯é‡‡ç”¨äºŒå‰å †çš„æ•°æ®ç»“æ„æ¥å®ç°çš„ï¼Œè™½ç„¶å®è´¨ä¸Šè¿˜æ˜¯ä¸€ç»´æ•°ç»„ã€‚äºŒå‰å †æ˜¯ä¸€ä¸ªè¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘ ã€‚</p><blockquote><p>äºŒå‰å †å…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼š</p></blockquote><p>çˆ¶èŠ‚ç‚¹çš„é”®å€¼æ€»æ˜¯å¤§äºæˆ–ç­‰äºï¼ˆå°äºæˆ–ç­‰äºï¼‰ä»»ä½•ä¸€ä¸ªå­èŠ‚ç‚¹çš„é”®å€¼ã€‚<br>æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘éƒ½æ˜¯ä¸€ä¸ªäºŒå‰å †ï¼ˆéƒ½æ˜¯æœ€å¤§å †æˆ–æœ€å°å †ï¼‰ã€‚</p><h3 id="æ­¥éª¤-4"><a href="#æ­¥éª¤-4" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol><li><p>æ„é€ æœ€å¤§å †ï¼ˆ<code>Build_Max_Heap</code>ï¼‰ï¼šè‹¥æ•°ç»„ä¸‹æ ‡èŒƒå›´ä¸º<code>0~n</code>ï¼Œè€ƒè™‘åˆ°å•ç‹¬ä¸€ä¸ªå…ƒç´ æ˜¯å¤§æ ¹å †ï¼Œåˆ™ä»ä¸‹æ ‡n/2å¼€å§‹çš„å…ƒç´ å‡ä¸ºå¤§æ ¹å †ã€‚äºæ˜¯åªè¦ä»<code>n/2-1</code>å¼€å§‹ï¼Œå‘å‰ä¾æ¬¡æ„é€ å¤§æ ¹å †ï¼Œè¿™æ ·å°±èƒ½ä¿è¯ï¼Œæ„é€ åˆ°æŸä¸ªèŠ‚ç‚¹æ—¶ï¼Œå®ƒçš„å·¦å³å­æ ‘éƒ½å·²ç»æ˜¯å¤§æ ¹å †ã€‚</p></li><li><p>å †æ’åºï¼ˆ<code>HeapSort</code>ï¼‰ï¼šç”±äºå †æ˜¯ç”¨æ•°ç»„æ¨¡æ‹Ÿçš„ã€‚å¾—åˆ°ä¸€ä¸ªå¤§æ ¹å †åï¼Œæ•°ç»„å†…éƒ¨å¹¶ä¸æ˜¯æœ‰åºçš„ã€‚å› æ­¤éœ€è¦å°†å †åŒ–æ•°ç»„æœ‰åºåŒ–ã€‚æ€æƒ³æ˜¯ç§»é™¤æ ¹èŠ‚ç‚¹ï¼Œå¹¶åšæœ€å¤§å †è°ƒæ•´çš„é€’å½’è¿ç®—ã€‚ç¬¬ä¸€æ¬¡å°†<code>heap[0]</code>ä¸<code>heap[n-1]</code>äº¤æ¢ï¼Œå†å¯¹<code>heap[0...n-2]</code>åšæœ€å¤§å †è°ƒæ•´ã€‚ç¬¬äºŒæ¬¡å°†<code>heap[0]</code>ä¸<code>heap[n-2]</code>äº¤æ¢ï¼Œå†å¯¹<code>heap[0...n-3]</code>åšæœ€å¤§å †è°ƒæ•´ã€‚é‡å¤è¯¥æ“ä½œç›´è‡³<code>heap[0]</code>å’Œ<code>heap[1]</code>äº¤æ¢ã€‚ç”±äºæ¯æ¬¡éƒ½æ˜¯å°†æœ€å¤§çš„æ•°å¹¶å…¥åˆ°åé¢çš„æœ‰åºåŒºé—´ï¼Œæ•…æ“ä½œå®Œåæ•´ä¸ªæ•°ç»„å°±æ˜¯æœ‰åºçš„äº†ã€‚</p></li><li><p>æœ€å¤§å †è°ƒæ•´ï¼ˆ<code>Max_Heapify</code>ï¼‰ï¼šè¯¥æ–¹æ³•æ˜¯æä¾›ç»™ä¸Šè¿°ä¸¤ä¸ªè¿‡ç¨‹è°ƒç”¨çš„ã€‚ç›®çš„æ˜¯å°†å †çš„æœ«ç«¯å­èŠ‚ç‚¹ä½œè°ƒæ•´ï¼Œä½¿å¾—å­èŠ‚ç‚¹æ°¸è¿œå°äºçˆ¶èŠ‚ç‚¹ ã€‚</p></li></ol><h3 id="æ’åºæ¼”ç¤º-3"><a href="#æ’åºæ¼”ç¤º-3" class="headerlink" title="æ’åºæ¼”ç¤º"></a>æ’åºæ¼”ç¤º</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190509203202-Heapsort-example%20.gif" alt="20190509203202-Heapsort-example"></p><h3 id="æºä»£ç -6"><a href="#æºä»£ç -6" class="headerlink" title="æºä»£ç "></a>æºä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">heap_sort</span>(<span class="hljs-params">ary</span>) :</span><br>    n = <span class="hljs-built_in">len</span>(ary)<br>    first = <span class="hljs-built_in">int</span>(n/<span class="hljs-number">2</span>-<span class="hljs-number">1</span>)       <span class="hljs-comment">#æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">for</span> start <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(first,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>) :     <span class="hljs-comment">#æ„é€ å¤§æ ¹å †</span><br>        max_heapify(ary,start,n-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> end <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>):           <span class="hljs-comment">#å †æ’ï¼Œå°†å¤§æ ¹å †è½¬æ¢æˆæœ‰åºæ•°ç»„</span><br>        ary[end],ary[<span class="hljs-number">0</span>] = ary[<span class="hljs-number">0</span>],ary[end]<br>        max_heapify(ary,<span class="hljs-number">0</span>,end-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> ary<br><br><br><span class="hljs-comment">#æœ€å¤§å †è°ƒæ•´ï¼šå°†å †çš„æœ«ç«¯å­èŠ‚ç‚¹ä½œè°ƒæ•´ï¼Œä½¿å¾—å­èŠ‚ç‚¹æ°¸è¿œå°äºçˆ¶èŠ‚ç‚¹</span><br><span class="hljs-comment">#startä¸ºå½“å‰éœ€è¦è°ƒæ•´æœ€å¤§å †çš„ä½ç½®ï¼Œendä¸ºè°ƒæ•´è¾¹ç•Œ</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">max_heapify</span>(<span class="hljs-params">ary,start,end</span>):</span><br>    root = start<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span> :<br>        child = root*<span class="hljs-number">2</span> +<span class="hljs-number">1</span>               <span class="hljs-comment">#è°ƒæ•´èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</span><br>        <span class="hljs-keyword">if</span> child &gt; end : <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">if</span> child+<span class="hljs-number">1</span> &lt;= end <span class="hljs-keyword">and</span> ary[child] &lt; ary[child+<span class="hljs-number">1</span>] :<br>            child = child+<span class="hljs-number">1</span>             <span class="hljs-comment">#å–è¾ƒå¤§çš„å­èŠ‚ç‚¹</span><br>        <span class="hljs-keyword">if</span> ary[root] &lt; ary[child] :     <span class="hljs-comment">#è¾ƒå¤§çš„å­èŠ‚ç‚¹æˆä¸ºçˆ¶èŠ‚ç‚¹</span><br>            ary[root],ary[child] = ary[child],ary[root]     <span class="hljs-comment">#äº¤æ¢</span><br>            root = child<br>        <span class="hljs-keyword">else</span> :<br>            <span class="hljs-keyword">break</span><br><br></code></pre></div></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸‹é¢ä¸ºä¸ƒç§ç»å…¸æ’åºç®—æ³•æŒ‡æ ‡å¯¹æ¯”æƒ…å†µï¼š<br><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190509203208-81b78497jw1emncvtdf1qj20u10afn0r%20.jpg" alt="20190509203208-81b78497jw1emncvtdf1qj20u10afn0r"></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> ç®—æ³• </category>
          
          <category> æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01â€”äº†è§£webåŠç½‘ç»œåŸºç¡€</title>
      <link href="2019/05/09/wang-luo-tong-xin-01-liao-jie-web-ji-wang-luo-ji-chu/"/>
      <url>2019/05/09/wang-luo-tong-xin-01-liao-jie-web-ji-wang-luo-ji-chu/</url>
      
        <content type="html"><![CDATA[<p>HTTP çš„å‡ºç°ä¸»è¦æ˜¯ä¸ºäº†è§£å†³æ–‡æœ¬ä¼ è¾“çš„éš¾é¢˜</p><h2 id="TCP-IP-åè®®æ—ï¼š"><a href="#TCP-IP-åè®®æ—ï¼š" class="headerlink" title="TCP/IP åè®®æ—ï¼š"></a>TCP/IP åè®®æ—ï¼š</h2><p>æ˜¯äº’è”ç½‘ç›¸å…³çš„å„ç±»åè®®æ—çš„æ€»ç§°</p><p>é‡è¦çš„ä¸€ç‚¹æ˜¯<strong>åˆ†å±‚</strong>: åº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚</p><p>å±‚æ¬¡åŒ–çš„ä¼˜ç‚¹ï¼š<br>1ã€ä¿®æ”¹æŸä¸ªåœ°æ–¹åªç”¨æ”¹ç›¸åº”çš„å±‚<br>2ã€è®¾è®¡å˜ç®€å•ï¼Œå„å±‚ç®¡ç†è‡ªå·±çš„èŒè´£</p><h3 id="åˆ†å±‚ç®¡ç†"><a href="#åˆ†å±‚ç®¡ç†" class="headerlink" title="åˆ†å±‚ç®¡ç†"></a>åˆ†å±‚ç®¡ç†</h3><p><strong>åº”ç”¨å±‚</strong>ï¼šå†³å®šå‘ç”¨æˆ·æä¾›åº”ç”¨æœåŠ¡æ—¶é€šä¿¡çš„æ´»åŠ¨ï¼Œ<br><code>FTP(File Transfer Protocol)</code> æ–‡ä»¶ä¼ è¾“åè®®ã€<code>DNS</code>(<code>Domain Name System</code>) åŸŸåç³»ç»Ÿã€<code>HTTP</code>(<code>HyperText Transfer Protocol</code>)<br><strong>ä¼ è¾“å±‚</strong>ï¼šæä¾›å¤„äºç½‘ç»œè¿æ¥ä¸­ä¸¤å°è®¡ç®—æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚<br><code>TCP</code>(<code>Transmission Control Protocol</code>) ä¼ è¾“æ§åˆ¶åè®®ã€<code>UDP</code>(<code>User Data Protocol</code>) ç”¨æˆ·æ•°æ®æŠ¥åè®®<br><strong>ç½‘ç»œå±‚ï¼ˆç½‘ç»œäº’è”å±‚ï¼‰</strong>ï¼šå¤„ç†åœ¨ç½‘ç»œä¸ŠæµåŠ¨çš„æ•°æ®åŒ…ï¼ˆæ•°æ®åŒ…æ˜¯ç½‘ç»œä¼ è¾“çš„æœ€å°æ•°æ®å•ä½ï¼‰ã€‚è¯¥å±‚è§„å®šäº†é€šè¿‡æ€æ ·çš„è·¯å¾„ï¼ˆä¼ è¾“è·¯çº¿ï¼‰åˆ°è¾¾å¯¹æ–¹è®¡ç®—æœºï¼Œå¹¶ä¼ é€’æ•°æ®ã€‚ä½œç”¨å°±æ˜¯åœ¨ä¸å¯¹æ–¹è®¡ç®—æœºä¹‹é—´é€šè¿‡å¤šå°è®¡ç®—æœºæˆ–ç½‘ç»œè®¾å¤‡è¿›è¡Œä¼ è¾“æ—¶ï¼Œé€‰æ‹©ä¸€æ¡ä¼ è¾“è·¯çº¿ã€‚<br><strong>é“¾è·¯å±‚ï¼ˆæ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œæ¥å£å±‚ï¼‰</strong>ï¼šç”¨æ¥å¤„ç†ç½‘ç»œçš„ç¡¬ä»¶éƒ¨åˆ†ã€‚åŒ…æ‹¬æ§åˆ¶æ“ä½œç³»ç»Ÿã€ç¡¬ä»¶è®¾å¤‡é©±åŠ¨ã€<code>NIC</code>ï¼ˆ<code>Network Interface Card</code>ï¼Œç½‘ç»œé€‚é…å™¨ï¼‰ã€å…‰çº¤ç­‰ç‰©ç†è¯¾ä»¶éƒ¨åˆ†ï¼ˆè¿æ¥å™¨ç­‰ä¸€åˆ‡ä¼ è¾“åª’ä»‹ï¼‰ã€‚</p><h3 id="é€šä¿¡ä¼ è¾“æµ"><a href="#é€šä¿¡ä¼ è¾“æµ" class="headerlink" title="é€šä¿¡ä¼ è¾“æµ"></a>é€šä¿¡ä¼ è¾“æµ</h3><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526110342-HTTP-%E4%BC%A0%E8%BE%93%E8%BF%87%E7%A8%8B%20.png" alt="20190526110342-HTTP-ä¼ è¾“è¿‡ç¨‹"></p><p>â€ƒ åº”ç”¨å‘è¯·æ±‚é€šè¿‡ <code>TCP</code> å¤„ç†æŠ¥æ–‡è¿›è¡Œåˆ†éš”å‘é€ç»™ç½‘ç»œå±‚ç½‘ç»œå±‚å¢åŠ  <code>MAC</code> åœ°å€ç»™é“¾è·¯, ä¹‹ååå‘æ“ä½œ, è¯·æ±‚æ•°æ®çš„æ—¶å€™æ¯ä¸€å±‚å¤„ç†å®Œæˆåä¼šç»™è¿™ä¸ªæ•°æ®åŠ ä¸Šè¿™ä¸ªå±‚çš„é¦–éƒ¨ä¿¡æ¯, ç›¸å, å¤„ç†è¯·æ±‚çš„æ—¶å€™, æ¯å¤„ç†ä¸€å±‚å°±åˆ é™¤ä¸€ä¸ªé¦–éƒ¨, è¿™å«åšæ•°æ®ä¿¡æ¯çš„å°è£… (<code>encapsulate</code>)ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526110348-HTTP-%E4%BC%A0%E8%BE%93%E8%BF%87%E7%A8%8B02%20.png" alt="20190526110348-HTTP-ä¼ è¾“è¿‡ç¨‹02"></p><h2 id="IPã€TCP-å’Œ-DNS"><a href="#IPã€TCP-å’Œ-DNS" class="headerlink" title="IPã€TCP å’Œ DNS"></a>IPã€TCP å’Œ DNS</h2><h3 id="IP-åè®®ï¼š"><a href="#IP-åè®®ï¼š" class="headerlink" title="IP åè®®ï¼š"></a>IP åè®®ï¼š</h3><p><code>IP</code>ï¼ˆ<code>Internet Protocol</code>ï¼‰ç½‘ç»œåè®®å¤„äºç½‘ç»œå±‚ã€‚å‡ ä¹æ‰€æœ‰ä½¿ç”¨ç½‘ç»œçš„ç³»ç»Ÿéƒ½ä¼šç”¨åˆ° <code>IP</code> åè®®ã€‚<code>IP</code> ä¸æ˜¯ <code>IP</code> åœ°å€ï¼Œ<code>IP</code> åªæ˜¯ä¸€ç§åè®®åç§°ã€‚</p><ul><li><p>ä½œç”¨ï¼šæŠŠå„ç§æ•°æ®åŒ…ä¼ ç»™å¯¹æ–¹ï¼Œä¿è¯èƒ½ä¼ é€åˆ°è¾¾éœ€è¦å¤šç§æ¡ä»¶ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯ <code>IP</code> åœ°å€å’Œ <code>MAC</code>ï¼ˆ<code>Media Access Control Address</code>) åœ°å€ã€‚</p></li><li><p><code>IP</code> åœ°å€ï¼šæŒ‡æ˜èŠ‚ç‚¹è¢«åˆ†é…åˆ°çš„åœ°å€</p></li><li><p><code>MAC</code> åœ°å€ï¼š ç½‘å¡æ‰€å±çš„å›ºå®šåœ°å€</p></li><li><p><code>IP</code> åœ°å€å¯ä»¥å’Œ <code>MAC</code> åœ°å€è¿›è¡Œé…å¯¹ï¼Œ<code>IP</code> å¯å˜ï¼Œä½† <code>MAC</code> åŸºæœ¬ä¸ä¼šæ›´æ”¹ã€‚</p><p>â€ƒ ä¸åŒå±€åŸŸç½‘ä¹‹é—´çš„é€šä¿¡éœ€è¦ç»è¿‡å¤šæ¬¡ä¸­è½¬ï¼Œåœ¨ä¸­è½¬æ—¶ä¼šåˆ©ç”¨ä¸‹ä¸€ç«™ä¸­è½¬è®¾å¤‡çš„ <code>MAC</code> åœ°å€æ¥æœç´¢ä¸‹ä¸€ä¸ªä¸­è½¬ç›®æ ‡ï¼Œè¿™æ—¶ä¼šé‡‡ç”¨ <code>ARP</code> åè®®ï¼ˆ<code>Addres s Resolution Protocol</code>)ï¼Œè¿™æ˜¯ç”¨äºè§£æåœ°å€çš„åè®®ï¼Œå¯ä»¥æ ¹æ®å¯¹æ–¹ <code>IP</code> åœ°å€å°±èƒ½åæŸ¥å¤„å¯¹åº”çš„ <code>MAC</code> åœ°å€ã€‚<br> â€ƒ ä¿¡æ¯ä¼ è¾“çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯ä»ä¸€å¼€å§‹å°±è®¾è®¡å¥½ç²¾ç¡®çš„è·¯çº¿ï¼Œè€Œæ˜¯è¾¹èµ°è¾¹ç§ï¼Œåˆ°ä¸‹ä¸€ä¸ªä¸­è½¬ç‚¹ä¼šè‡ªåŠ¨åˆ¤æ–­ä¸‹ä¸€ä¸ªä¸­è½¬ç‚¹ï¼Œè¿™å«åšè·¯ç”±é€‰æ‹©ï¼ˆ<code>routing</code>ï¼‰</p></li></ul><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526110449-IP%E5%A4%84%E7%90%86%20.png" alt="20190526110449-IPå¤„ç†"></p><h3 id="TCP-åè®®"><a href="#TCP-åè®®" class="headerlink" title="TCP åè®®"></a>TCP åè®®</h3><p>æŒ‰å±‚æ¬¡ä½äºä¼ è¾“å±‚, æä¾›å¯é çš„å­—èŠ‚æµæœåŠ¡ (<code>Byte Stream Service</code>), æ„æ€æ˜¯ä¸ºäº†æ–¹ä¾¿ä¼ è¾“, å°†å¤§å—æ•°æ®åˆ†å‰²æˆä»¥æŠ¥æ–‡æ®µ(<code>segment</code>) ä¸ºå•ä½çš„æ•°æ®åŒ…è¿›è¡Œç®¡ç†å¯é çš„ä¼ è¾“æœåŠ¡æ˜¯æŒ‡ï¼Œèƒ½å¤ŸæŠŠæ•°æ®å‡†ç¡®å¯é çš„ä¼ ç»™å¯¹æ–¹ã€‚</p><blockquote><p>å¦‚ä½•ç¡®ä¿æ•°æ®åˆ°è¾¾ç›®æ ‡</p></blockquote><h4 id="ä¸‰æ¬¡æ¡æ‰‹ï¼ˆthreeâ€”way-handshakingï¼‰ç­–ç•¥"><a href="#ä¸‰æ¬¡æ¡æ‰‹ï¼ˆthreeâ€”way-handshakingï¼‰ç­–ç•¥" class="headerlink" title="â€ƒ ä¸‰æ¬¡æ¡æ‰‹ï¼ˆthreeâ€”way handshakingï¼‰ç­–ç•¥"></a>â€ƒ ä¸‰æ¬¡æ¡æ‰‹ï¼ˆ<code>threeâ€”way handshaking</code>ï¼‰ç­–ç•¥</h4><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526110500-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%20.png" alt="20190526110500-ä¸‰æ¬¡æ¡æ‰‹"></p><ul><li>å‘é€ç«¯å…ˆå‘é€ä¸€ä¸ªå¸¦æœ‰ <code>SYN</code>ï¼ˆ<code>synchronize</code> åŒæ­¥ï¼‰æ ‡è¯†çš„æ•°æ®åŒ…ç»™å¯¹æ–¹</li><li>å¯¹æ–¹æ¥æ”¶åˆ°åå›ä¼ ä¸€ä¸ªå¸¦æœ‰â€ƒ <code>SYN</code>/<code>ACK</code>ï¼ˆ<code>acknowledgement</code>)æ ‡è¯†çš„æ•°æ®åŒ…å·²ä¼ è¾¾ç¡®è®¤ä¿¡æ¯</li><li>æœ€åå‘é€ç«¯å†ä¼ å›ä¸€ä¸ªå¸¦æœ‰ <code>ACK</code> æ ‡è¯†çš„æ•°æ®åŒ…ä»£è¡¨ â€œæ¡æ‰‹â€ ç»“æŸã€‚</li><li>è‹¥æœŸé—´åœ¨æŸä¸ªè¿‡ç¨‹è«åä¸­æ–­, <code>TCP</code> åè®®ä¼šåœ¨æ­¤ä»¥ç›¸åŒé¡ºåºå‘é€ç›¸åŒæ•°æ®åŒ…ã€‚</li></ul><h3 id="DNS-æœåŠ¡"><a href="#DNS-æœåŠ¡" class="headerlink" title="DNS æœåŠ¡"></a>DNS æœåŠ¡</h3><p>â€ƒ <code>DNS</code> æœåŠ¡æ˜¯å’Œ <code>HTTP</code> ä¸€æ ·ä½äºåº”ç”¨å±‚, æä¾›<code>åŸŸå</code>åˆ° <code>IP</code> åœ°å€ä¹‹é—´çš„è§£ææœåŠ¡ã€‚<br>â€ƒè®¡ç®—æœºå¯ä»¥æœ‰ <code>IP</code> åœ°å€, åˆå¯ä»¥æœ‰ä¸»æœºåå’ŒåŸŸåã€‚æ¯”å¦‚å¯ä»¥ä½¿ç”¨ <a href="http://www.baidu.com">www.baidu.com</a> è®¿é—®ç™¾åº¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>119.75.217.109</code> è®¿é—®ç™¾åº¦ã€‚<code>DNS</code> åè®®å°±æ˜¯å¯ä»¥æŸ¥è¯¢å…¶å¯¹åº”å…³ç³»çš„åè®®ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526110337-DNS%E8%A7%A3%E6%9E%90%20.png" alt="20190526110337-DNSè§£æ"></p><h3 id="å„ç§åè®®ä¸-HTTP-åè®®çš„å…³ç³»"><a href="#å„ç§åè®®ä¸-HTTP-åè®®çš„å…³ç³»" class="headerlink" title="å„ç§åè®®ä¸ HTTP åè®®çš„å…³ç³»"></a>å„ç§åè®®ä¸ HTTP åè®®çš„å…³ç³»</h3><p>â€ƒ å®¢æˆ·ç«¯å‘å‡ºå¯¹æŸ <code>www.</code> ç½‘ç«™çš„è¯·æ±‚, é€šè¿‡ <code>DNS</code> åè®®è·å–å¯¹åº”çš„ <code>IP</code> åœ°å€, åœ¨é€šè¿‡ <code>HTTP</code> åè®®ç”Ÿæˆè¯·æ±‚æŠ¥æ–‡, é€šè¿‡ <code>TCP</code> è¿›è¡Œåˆ†éš”åˆ’åˆ†æˆæ•°æ®åŒ…, é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹æŠŠæ¯ä¸ªæŠ¥æ–‡æ®µå¯é çš„ä¼ ç»™å¯¹æ–¹, å†é€šè¿‡ <code>IP</code> åè®®åˆ†é… <code>IP</code> åœ°å€å’Œ <code>MAC</code> åœ°å€, ä¸€éä¸­è½¬ä¸€éä¼ é€, å¯¹æ–¹é€šè¿‡ <code>IP</code> åè®®æ¥æ”¶ä¸€æ®µæ®µæŠ¥æ–‡, é€šè¿‡ <code>TCP</code> åè®®å†ä¸€æ®µæ®µé‡ç»„, åœ¨é€šè¿‡ <code>HTTP</code> åè®®å¯¹è¿™äº›å†…å®¹è¿›è¡Œå¤„ç†è¯·æ±‚ä¿¡æ¯, æŠŠè¯·æ±‚ç»“æœå†åƒä¸Šè¾¹çš„è¿‡ç¨‹èµ°å›å®¢æˆ·ç«¯ã€‚ä¸€æ¬¡å®Œæ•´çš„ä¼ è¾“å°±ç»“æŸäº†ã€‚</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526110506-%E5%8D%8F%E8%AE%AE%E5%85%B3%E7%B3%BB%20.png" alt="20190526110506-åè®®å…³ç³»"></p><h2 id="URI-å’Œ-URL"><a href="#URI-å’Œ-URL" class="headerlink" title="URI å’Œ URL"></a>URI å’Œ URL</h2><ul><li><code>URL</code>ï¼ˆ<code>Uniform</code> <code>Resource</code> <code>Locator</code>) ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œå°±æ˜¯ <code>Web</code> æµè§ˆå™¨è®¿é—® <code>web</code> é¡µé¢æ—¶å€™çš„ç½‘é¡µåœ°å€ï¼Œ<a href="http://www.baidu.com">http://www.baidu.com</a></li><li><code>URI</code>ï¼ˆ<code>Uniform</code> <code>Resource</code> <code>Identifier</code>) ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦</li><li><em><code>Uniform</code></em> è§„å®šç»Ÿä¸€æ ¼å¼å¯æ–¹ä¾¿å¤„ç†å¤šç§ä¸åŒç±»å‹èµ„æºã€‚</li><li><em><code>Resouce</code></em> èµ„æºå®šä¹‰æ˜¯ â€œå¯æ ‡è¯†çš„ä»»ä½•ä¸œè¥¿â€ã€‚</li><li><em><code>Identifier</code></em> å¯æ ‡è¯†çš„å¯¹è±¡ã€‚ä¹Ÿç§°ä½œæ ‡è¯†ç¬¦ã€‚</li></ul><p>â€ƒ ç»¼ä¸Šï¼Œ<code>URI</code> å°±æ˜¯ç”±æŸåè®®æ–¹æ¡ˆè¡¨ç¤ºçš„èµ„æºçš„å®šä½æ ‡è¯†ç¬¦ï¼Œå…¶ä¸­ï¼Œè®¿é—®èµ„æºæ‰€ä½¿ç”¨çš„åè®®ç±»å‹ï¼Œ <code>HTTP</code> åè®®æ—¶ï¼Œåè®®æ–¹æ¡ˆå°±æ˜¯ <code>http</code>ï¼Œé™¤æ­¤è¿˜æœ‰ <code>ftp</code>ã€<code>mailto</code>ã€<code>telent</code>ã€<code>file</code> ç­‰ã€‚<br>â€ƒ <code>URI</code> ç”¨å­—ç¬¦ä¸²æ ‡è¯†æŸä¸€äº’è”ç½‘èµ„æºï¼Œ<code>URL</code> è¡¨ç¤ºèµ„æºçš„åœ°ç‚¹ï¼Œå¯è§ <code>URL</code> æ˜¯ <code>URI</code> çš„å­é›†ã€‚</p><h3 id="URI-æ ¼å¼"><a href="#URI-æ ¼å¼" class="headerlink" title="URI æ ¼å¼"></a>URI æ ¼å¼</h3><p>ç»å¯¹ <code>URI</code> æ ¼å¼ï¼š</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190526110455-URI%E6%A0%BC%E5%BC%8F%20.png" alt="20190526110455-URIæ ¼å¼"></p><p>å¯é€‰é¡¹ï¼šç™»å½•ä¿¡æ¯ã€æœåŠ¡å™¨ç«¯å£å·ã€æŸ¥è¯¢å­—ç¬¦ä¸²ã€ç‰‡æ®µæ ‡è¯†ç¬¦</p><h2 id="è‡ªæˆ‘å›é¡¾"><a href="#è‡ªæˆ‘å›é¡¾" class="headerlink" title="è‡ªæˆ‘å›é¡¾"></a>è‡ªæˆ‘å›é¡¾</h2><p>1ã€<code>HTTP</code>ã€<code>TCP</code>/<code>IP</code>ã€<code>DNS</code>ã€<code>URL</code>ã€<code>URI</code> åˆ†åˆ«æ˜¯ä»€ä¹ˆ?<br>2ã€<code>TCP</code>/<code>IP</code> åè®®ä¸ºä»€ä¹ˆè¿›è¡Œåˆ†å±‚ç®¡ç†ï¼Œåˆåˆ†ä¸ºå“ªäº›å±‚?<br>3ã€å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„è¯·æ±‚è¿‡ç¨‹æ˜¯ä»€ä¹ˆ?<br>4ã€ä¸‰æ¬¡æ¡æ‰‹æ€ä¹ˆè¿›è¡Œçš„?<br>5ã€å„ä¸ªåè®®çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><strong><em>æ³¨ï¼š æœ¬æ–‡å›¾ç‰‡å‡æ¥è‡ªã€Šå›¾è§£ HTTPã€‹ä¸€ä¹¦</em></strong></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> ç½‘ç»œé€šä¿¡ </category>
          
          <category> TCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
            <tag> TCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>timeä¸timeit æ¨¡å—</title>
      <link href="2019/05/03/python-mo-kuai-time-timeit-mo-kuai/"/>
      <url>2019/05/03/python-mo-kuai-time-timeit-mo-kuai/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€time-æ¨¡å—"><a href="#ä¸€ã€time-æ¨¡å—" class="headerlink" title="ä¸€ã€time æ¨¡å—"></a>ä¸€ã€time æ¨¡å—</h1><h3 id="1-æ—¶é—´è¡¨ç°å½¢å¼"><a href="#1-æ—¶é—´è¡¨ç°å½¢å¼" class="headerlink" title="1. æ—¶é—´è¡¨ç°å½¢å¼"></a>1. æ—¶é—´è¡¨ç°å½¢å¼</h3><ul><li>timestampï¼šæ—¶é—´æˆ³ï¼Œæ—¶é—´æˆ³è¡¨ç¤ºçš„æ˜¯ä»1970å¹´1æœˆ1æ—¥00:00:00å¼€å§‹æŒ‰ç§’è®¡ç®—çš„åç§»é‡</li><li>struct_timeï¼š æ—¶é—´å…ƒç»„ï¼Œå…±æœ‰ä¹ä¸ªå…ƒç´ ç»„</li><li>format timeï¼š æ ¼å¼åŒ–æ—¶é—´ï¼Œå·²æ ¼å¼åŒ–çš„ç»“æ„ä½¿æ—¶é—´æ›´å…·å¯è¯»æ€§ã€‚åŒ…æ‹¬è‡ªå®šä¹‰æ ¼å¼å’Œå›ºå®šæ ¼å¼<h3 id="2-æ—¶é—´æ ¼å¼è½¬æ¢å›¾"><a href="#2-æ—¶é—´æ ¼å¼è½¬æ¢å›¾" class="headerlink" title="2. æ—¶é—´æ ¼å¼è½¬æ¢å›¾"></a>2. æ—¶é—´æ ¼å¼è½¬æ¢å›¾</h3><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190503200750-%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E5%9B%BE%20.jpg" alt="20190503200750-æ—¶é—´æ ¼å¼è½¬æ¢å›¾"></li></ul><h3 id="3-å¸¸ç”¨æ–¹æ³•"><a href="#3-å¸¸ç”¨æ–¹æ³•" class="headerlink" title="3. å¸¸ç”¨æ–¹æ³•"></a>3. å¸¸ç”¨æ–¹æ³•</h3><ol><li><p>è·å–å½“å‰æ—¶é—´æˆ³</p> <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">26</span>]: time.time()<br>Out[<span class="hljs-number">26</span>]: <span class="hljs-number">1556888776.3707364</span><br><br>In [<span class="hljs-number">25</span>]: time.mktime(time.localtime()) <span class="hljs-comment"># å…ƒç»„-&gt;æ—¶é—´æˆ³</span><br>Out[<span class="hljs-number">25</span>]: <span class="hljs-number">1556888742.0</span><br></code></pre></div></td></tr></table></figure></li><li><p>å½“å‰æ—¶é—´çš„ struct_time å½¢å¼</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">import</span> time                                                                                      <br><br>In [<span class="hljs-number">2</span>]: time.localtime()                 <br>Out[<span class="hljs-number">2</span>]: time.struct_time(tm_year=<span class="hljs-number">2019</span>, tm_mon=<span class="hljs-number">5</span>, tm_mday=<span class="hljs-number">3</span>, tm_hour=<span class="hljs-number">20</span>, tm_min=<span class="hljs-number">48</span>, tm_sec=<span class="hljs-number">32</span>, tm_wday=<span class="hljs-number">4</span>, tm_yday=<span class="hljs-number">123</span>, tm_isdst=<span class="hljs-number">0</span>) <br><br>In [<span class="hljs-number">29</span>]: time.localtime(time.time()) <span class="hljs-comment"># æ—¶é—´æˆ³-&gt;å…ƒç»„     </span><br>Out[<span class="hljs-number">29</span>]: time.struct_time(tm_year=<span class="hljs-number">2019</span>, tm_mon=<span class="hljs-number">5</span>, tm_mday=<span class="hljs-number">3</span>, tm_hour=<span class="hljs-number">21</span>, tm_min=<span class="hljs-number">12</span>, tm_sec=<span class="hljs-number">6</span>, tm_wday=<span class="hljs-number">4</span>, tm_yday=<span class="hljs-number">123</span>, tm_isdst=<span class="hljs-number">0</span>)  <br><br>In [<span class="hljs-number">22</span>]: time.gmtime()     <br>Out[<span class="hljs-number">22</span>]: time.struct_time(tm_year=<span class="hljs-number">2019</span>, tm_mon=<span class="hljs-number">5</span>, tm_mday=<span class="hljs-number">3</span>, tm_hour=<span class="hljs-number">13</span>, tm_min=<span class="hljs-number">3</span>, tm_sec=<span class="hljs-number">21</span>, tm_wday=<span class="hljs-number">4</span>, tm_yday=<span class="hljs-number">123</span>, tm_isdst=<span class="hljs-number">0</span>)   <br><br>In [<span class="hljs-number">30</span>]: time.gmtime(time.time()) <span class="hljs-comment"># æ—¶é—´æˆ³-&gt;å…ƒç»„     </span><br>Out[<span class="hljs-number">30</span>]: time.struct_time(tm_year=<span class="hljs-number">2019</span>, tm_mon=<span class="hljs-number">5</span>, tm_mday=<span class="hljs-number">3</span>, tm_hour=<span class="hljs-number">13</span>, tm_min=<span class="hljs-number">12</span>, tm_sec=<span class="hljs-number">21</span>, tm_wday=<span class="hljs-number">4</span>, tm_yday=<span class="hljs-number">123</span>, tm_isdst=<span class="hljs-number">0</span>)<br><br>In [<span class="hljs-number">34</span>]: time.strptime(a, <span class="hljs-string">&quot;%a %b %d %H:%M:%S %Y&quot;</span>) <span class="hljs-comment"># å­—ç¬¦ä¸²-&gt;å…ƒç»„</span><br>Out[<span class="hljs-number">34</span>]: time.struct_time(tm_year=<span class="hljs-number">2019</span>, tm_mon=<span class="hljs-number">5</span>, tm_mday=<span class="hljs-number">3</span>, tm_hour=<span class="hljs-number">21</span>, tm_min=<span class="hljs-number">9</span>, tm_sec=<span class="hljs-number">25</span>, tm_wday=<span class="hljs-number">4</span>, tm_yday=<span class="hljs-number">123</span>, tm_isdst=-<span class="hljs-number">1</span>)<br></code></pre></div></td></tr></table></figure></li><li><p>å½“å‰æ—¶é—´çš„å­—ç¬¦ä¸²å½¢å¼</p> <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">In [<span class="hljs-number">3</span>]: time.ctime()<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-string">&#x27;Fri May  3 20:49:30 2019&#x27;</span><br><br>In [<span class="hljs-number">27</span>]: time.ctime(time.time()) <span class="hljs-comment"># æ—¶é—´æˆ³-&gt;å­—ç¬¦ä¸²</span><br>Out[<span class="hljs-number">27</span>]: <span class="hljs-string">&#x27;Fri May  3 21:08:20 2019&#x27;</span><br><br>In [<span class="hljs-number">4</span>]: time.asctime()<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-string">&#x27;Fri May  3 20:49:45 2019&#x27;</span><br><br>In [<span class="hljs-number">28</span>]: time.asctime(time.localtime()) <span class="hljs-comment"># å…ƒç»„-&gt;é»˜è®¤å­—ç¬¦ä¸²</span><br>Out[<span class="hljs-number">28</span>]: <span class="hljs-string">&#x27;Fri May  3 21:09:25 2019&#x27;</span><br><br>In [<span class="hljs-number">7</span>]: time.strftime(<span class="hljs-string">&#x27;%Y-%m-%d %H:%M&quot;%S&#x27;</span>, time.localtime()) <span class="hljs-comment"># å…ƒç»„-&gt;æ ¼å¼åŒ–å­—ç¬¦ä¸²</span><br>Out[<span class="hljs-number">7</span>]: <span class="hljs-string">&#x27;2019-05-03 20:52&quot;47&#x27;</span><br><br>In [<span class="hljs-number">31</span>]: time.strftime(<span class="hljs-string">&quot;%a %b %d %H:%M:%S %Y&quot;</span>, time.localtime())<br>Out[<span class="hljs-number">31</span>]: <span class="hljs-string">&#x27;Fri May 03 21:15:50 2019&#x27;</span><br></code></pre></div></td></tr></table></figure><h3 id="4-è€—æ—¶ç»Ÿè®¡"><a href="#4-è€—æ—¶ç»Ÿè®¡" class="headerlink" title="4. è€—æ—¶ç»Ÿè®¡"></a>4. è€—æ—¶ç»Ÿè®¡</h3></li></ol><ul><li>time.perf_counter() <ul><li>è°ƒç”¨ä¸€æ¬¡ perf_counter()ï¼Œä»è®¡ç®—æœºç³»ç»Ÿé‡Œéšæœºé€‰ä¸€ä¸ªæ—¶é—´ç‚¹Aï¼Œè®¡ç®—å…¶è·ç¦»å½“å‰æ—¶é—´ç‚¹B1æœ‰å¤šå°‘ç§’</li><li>å½“ç¬¬äºŒæ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œé»˜è®¤ä»ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶é—´ç‚¹Aç®—èµ·ï¼Œè·ç¦»å½“å‰æ—¶é—´ç‚¹B2æœ‰å¤šå°‘ç§’</li><li>ä¸¤ä¸ªå‡½æ•°å–å·®ï¼Œå³å®ç°ä»æ—¶é—´ç‚¹B1åˆ°B2çš„è®¡æ—¶åŠŸèƒ½</li></ul></li><li>time.process_time()<ul><li>è¿”å›å½“å‰è¿›ç¨‹æ‰§è¡Œ CPU çš„æ—¶é—´æ€»å’Œï¼Œä¸åŒ…å«ç¡çœ æ—¶é—´</li><li>ç”±äºè¿”å›å€¼çš„åŸºå‡†ç‚¹æ˜¯æœªå®šä¹‰çš„</li><li>åªæœ‰è¿ç»­è°ƒç”¨çš„ç»“æœä¹‹é—´çš„å·®æ‰æ˜¯æœ‰æ•ˆçš„</li></ul></li><li>time.time()<ul><li>è¿ç»­ä¸¤æ¬¡ç”Ÿæˆçš„æ—¶é—´æˆ³ä¹‹å·®å³ä¸ºè€—æ—¶<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test</span>():</span><br>    time.sleep(<span class="hljs-number">2</span>)<br><br>start1 = time.perf_counter()<br>start2 = time.time()<br>start3 = time.process_time()<br>test()<br>finish1 = time.perf_counter()<br>finish2 = time.time()<br>finish3 = time.process_time()<br>t1 = finish1 - start1<br>t2 = finish2 - start2<br>t3 = finish3 - start3<br><br>print(t1)<br>print(t2)<br>print(t3)<br></code></pre></div></td></tr></table></figure>ç»“æœä¸ºï¼š<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">1.9998265000000002 # perf_counter<br>2.000767946243286  # time<br>0.0                # process_time<br></code></pre></div></td></tr></table></figure></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> æ¨¡å— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¶é—´æ¨¡å— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è£…é¥°å™¨</title>
      <link href="2019/05/02/python-han-shu-zhuang-shi-qi/"/>
      <url>2019/05/02/python-han-shu-zhuang-shi-qi/</url>
      
        <content type="html"><![CDATA[<h2 id="è¿”å›å‡½æ•°"><a href="#è¿”å›å‡½æ•°" class="headerlink" title="è¿”å›å‡½æ•°"></a>è¿”å›å‡½æ•°</h2><blockquote><p><code>python</code>çš„å¸¸è¯†ï¼Œå‡½æ•°å’Œå…¶ä»–ä»»ä½•ä¸œè¥¿ä¸€æ ·ï¼Œéƒ½æ˜¯å¯¹è±¡ã€‚è¿™æ„å‘³ç€å¯ä»¥å°†<code>å‡½æ•°</code>å½“åš<code>å®å‚</code>ä¼ é€’ç»™å‡½æ•°ï¼Œæˆ–è€…åœ¨å‡½æ•°ä¸­å°†<code>å‡½æ•°</code>ä½œä¸º<code>è¿”å›å€¼</code>è¿”å›ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lazy_sum</span>(<span class="hljs-params">*args</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum</span>():</span><br>        ax = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> args:<br>            ax = ax + n<br>        <span class="hljs-keyword">return</span> ax<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span><br>f = lazy_sum(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>)<br>f()<br></code></pre></div></td></tr></table></figure><h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><p>é—­åŒ…æ˜¯â€œè¿”å›å‡½æ•°â€çš„ä¸€ä¸ªå…¸å‹åº”ç”¨</p><p>é—­åŒ…çš„å®šä¹‰ï¼š</p><blockquote><ul><li><p>åœ¨ä¸€ä¸ªå¤–å‡½æ•°(<code>outer</code>)ä¸­å®šä¹‰äº†ä¸€ä¸ªå†…å‡½æ•°(<code>inner</code>)</p></li><li><p>å†…å‡½æ•°é‡Œè¿ç”¨äº†å¤–å‡½æ•°çš„ä¸´æ—¶å˜é‡</p></li><li><p>å¹¶ä¸”å¤–å‡½æ•°çš„è¿”å›å€¼æ˜¯å†…å‡½æ•°çš„å¼•ç”¨</p></li></ul></blockquote><p>é—­åŒ…çš„ä½¿ç”¨ï¼Œå¯ä»¥éšè—å†…éƒ¨å‡½æ•°çš„å·¥ä½œç»†èŠ‚ï¼Œåªç»™å¤–éƒ¨ä½¿ç”¨è€…æä¾›ä¸€ä¸ªå¯ä»¥æ‰§è¡Œçš„å†…éƒ¨å‡½æ•°çš„å¼•ç”¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment">#é—­åŒ…å‡½æ•°çš„å®ä¾‹</span><br>  <span class="hljs-comment"># outeræ˜¯å¤–éƒ¨å‡½æ•° aå’Œbéƒ½æ˜¯å¤–å‡½æ•°çš„ä¸´æ—¶å˜é‡</span><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">outer</span>(<span class="hljs-params"> a </span>):</span><br>    b = <span class="hljs-number">10</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inner</span>():</span>  <span class="hljs-comment"># inneræ˜¯å†…å‡½æ•°</span><br>        print(a+b)  <span class="hljs-comment">#åœ¨å†…å‡½æ•°ä¸­ ç”¨åˆ°äº†å¤–å‡½æ•°çš„ä¸´æ—¶å˜é‡</span><br>    <span class="hljs-keyword">return</span> inner  <span class="hljs-comment"># å¤–å‡½æ•°çš„è¿”å›å€¼æ˜¯å†…å‡½æ•°çš„å¼•ç”¨</span><br><br>  <span class="hljs-comment"># åœ¨è¿™é‡Œæˆ‘ä»¬è°ƒç”¨å¤–å‡½æ•°ä¼ å…¥å‚æ•°5</span><br>  <span class="hljs-comment">#æ­¤æ—¶å¤–å‡½æ•°ä¸¤ä¸ªä¸´æ—¶å˜é‡ aæ˜¯5 bæ˜¯10 ï¼Œå¹¶åˆ›å»ºäº†å†…å‡½æ•°ï¼Œç„¶åæŠŠå†…å‡½æ•°çš„å¼•ç”¨è¿”å›å­˜ç»™äº†demo</span><br>  <span class="hljs-comment"># å¤–å‡½æ•°ç»“æŸçš„æ—¶å€™å‘ç°å†…éƒ¨å‡½æ•°å°†ä¼šç”¨åˆ°è‡ªå·±çš„ä¸´æ—¶å˜é‡ï¼Œè¿™ä¸¤ä¸ªä¸´æ—¶å˜é‡å°±ä¸ä¼šé‡Šæ”¾ï¼Œä¼šç»‘å®šç»™è¿™ä¸ªå†…éƒ¨å‡½æ•°</span><br>  demo = outer(<span class="hljs-number">5</span>)<br><br>  <span class="hljs-comment"># æˆ‘ä»¬è°ƒç”¨å†…éƒ¨å‡½æ•°ï¼Œçœ‹ä¸€çœ‹å†…éƒ¨å‡½æ•°æ˜¯ä¸æ˜¯èƒ½ä½¿ç”¨å¤–éƒ¨å‡½æ•°çš„ä¸´æ—¶å˜é‡</span><br>  <span class="hljs-comment"># demoå­˜äº†å¤–å‡½æ•°çš„è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯innerå‡½æ•°çš„å¼•ç”¨ï¼Œè¿™é‡Œç›¸å½“äºæ‰§è¡Œinnerå‡½æ•°</span><br>  demo() <span class="hljs-comment"># 15</span><br></code></pre></div></td></tr></table></figure><blockquote><p><code>inner</code>å‡½æ•°ä¿®æ”¹<code>outer</code>å‡½æ•°å˜é‡</p></blockquote>  <figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createCounter</span>():</span><br>  i = <span class="hljs-number">0</span><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">counter</span>():</span><br>     <span class="hljs-keyword">nonlocal</span> i <span class="hljs-comment"># æŒ‡å®šå¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡</span><br>     i = i + <span class="hljs-number">1</span><br>     <span class="hljs-keyword">return</span> i<br>  <span class="hljs-keyword">return</span> counter<br><br>counterA = createCounter()<br>print(counterA(), counterA(), counterA(), counterA(), counterA()) <span class="hljs-comment"># 1 2 3 4 5</span><br>counterB = createCounter()<br><span class="hljs-keyword">if</span> [counterB(), counterB(), counterB(), counterB()] == [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]:<br>   print(<span class="hljs-string">&#x27;æµ‹è¯•é€šè¿‡!&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>   print(<span class="hljs-string">&#x27;æµ‹è¯•å¤±è´¥!&#x27;</span>)<br></code></pre></div></td></tr></table></figure><h2 id="è£…é¥°å™¨"><a href="#è£…é¥°å™¨" class="headerlink" title="è£…é¥°å™¨"></a>è£…é¥°å™¨</h2><h3 id="è£…é¥°å™¨ä»‹ç»"><a href="#è£…é¥°å™¨ä»‹ç»" class="headerlink" title="è£…é¥°å™¨ä»‹ç»"></a>è£…é¥°å™¨ä»‹ç»</h3><p>è¦äº†è§£pythonä¸­<code>@</code>è£…é¥°å™¨çš„ä½œç”¨ï¼Œé¦–å…ˆè¦è®°ä½è¿™ä¹ˆå‡ ç‚¹ï¼š</p><blockquote><p>  è£…é¥°å™¨ç¬¦å·<code>@</code>å±äºè¯­æ³•ç³–</p></blockquote><p>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><ul><li>å°±æ˜¯è¯´ï¼Œæˆ‘ä¸æŒ‰ç…§<code>@</code>è£…é¥°å™¨çš„è¯­æ³•è¦æ±‚æ¥å†™ï¼Œè€Œæ˜¯æŒ‰ç…§ä¸€èˆ¬<code>python</code>çš„è¯­æ³•è¦æ±‚æ¥å†™å®Œå…¨å¯ä»¥ã€‚</li><li>é‚£ä¹ˆç”¨<code>@</code>è£…é¥°å™¨çš„æ ¼å¼æ¥å†™çš„ç›®çš„å°±æ˜¯ä¸ºäº†ä¹¦å†™ç®€å•æ–¹ä¾¿</li></ul><p><strong>æ³¨æ„ï¼šè£…é¥°å™¨æ˜¯ç”¨äºæ‹“å±•å·²æœ‰å‡½æ•°åŠŸèƒ½çš„ä¸€ç§å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ç‰¹æ®Šä¹‹å¤„åœ¨äºå®ƒçš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®é™…ä¸Šå°±æ˜¯åˆ©ç”¨é—­åŒ…è¯­æ³•å®ç°çš„ã€‚</strong></p><h3 id="è£…é¥°å™¨è¯­æ³•"><a href="#è£…é¥°å™¨è¯­æ³•" class="headerlink" title="è£…é¥°å™¨è¯­æ³•"></a>è£…é¥°å™¨è¯­æ³•</h3><p>è£…é¥°å™¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ ç®€å•çš„ç†è§£å°±æ˜¯ï¼šè£…é¥°åŸæœ‰çš„å‡½æ•°ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><p>æ¯”å¦‚æœ‰ä¸€ä¸ªå‡½æ•°<code>func(a, b)</code>ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯æ±‚<code>a</code>,<code>b</code>çš„å·®å€¼</p><p>ç°åœ¨æœ‰ä¸€ä¸ªæ–°éœ€æ±‚ï¼Œå°±æ˜¯æƒ³å¯¹å‡½æ•°åŠŸèƒ½å†è£…é¥°ä¸‹ï¼Œæ±‚å®Œå·®å€¼åå†å–ç»å¯¹å€¼ï¼Œä½†æ˜¯ä¸èƒ½èƒ½ä¿®æ”¹åŸæœ‰å‡½æ•°ï¼Œè¿™æ—¶å€™å°±éœ€è¦è£…é¥°å™¨è£…é¥°å‡½æ•°     </p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">å‡½æ•°é—­åŒ…å®ç°æ±‚å·®å€¼ä¹‹åï¼Œå†æ±‚ç»å¯¹å€¼</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">a, b</span>):</span><br>    <span class="hljs-keyword">return</span> a- b<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">abs_num</span>(<span class="hljs-params">func</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inner</span>(<span class="hljs-params">a, b</span>):</span><br>        ret = func(a, b)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">abs</span>(ret)<br>    <span class="hljs-keyword">return</span> inner<br><br><span class="hljs-meta">@abs_num</span><br>func(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br></code></pre></div></td></tr></table></figure><ul><li><p>å½“<code>abs_num</code>è£…é¥°å‡½æ•°<code>func</code>æ—¶ï¼Œç±»ä¼¼äºå°†å‡½æ•°<code>func</code>ä½œä¸ºå‚æ•°ä¼ ç»™<code>abs_num</code>,å¹¶å°†è¿”å›å€¼å³å†…å±‚å‡½æ•°(<code>inner</code>)åé‡æ–°èµ‹å€¼ç»™å˜é‡<code>func</code></p></li><li><p>å½“è°ƒç”¨å‡½æ•°<code>func</code>æ—¶ï¼Œå®è´¨æ˜¯è°ƒç”¨å†…å±‚å‡½æ•°<code>inner</code>ï¼Œåœ¨å†…å±‚å‡½æ•°ä¸­æ‰§è¡Œ<code>func</code>å‡½æ•°ï¼Œå³æœ€åŸå§‹çš„å‡½æ•°<code>func</code></p></li></ul><h3 id="è£…é¥°å™¨åˆ†ç±»"><a href="#è£…é¥°å™¨åˆ†ç±»" class="headerlink" title="è£…é¥°å™¨åˆ†ç±»"></a>è£…é¥°å™¨åˆ†ç±»</h3><h4 id="è¢«è£…é¥°å‡½æ•°æœ‰å‚æ•°"><a href="#è¢«è£…é¥°å‡½æ•°æœ‰å‚æ•°" class="headerlink" title="è¢«è£…é¥°å‡½æ•°æœ‰å‚æ•°"></a>è¢«è£…é¥°å‡½æ•°æœ‰å‚æ•°</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">outer</span>(<span class="hljs-params">func</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inner</span>(<span class="hljs-params">x, y</span>):</span><br>        func(x, y)  <span class="hljs-comment"># æ–°ç‰ˆçš„ func  æ‰æ˜¯ åŸæ¥çš„ add</span><br><br>    <span class="hljs-keyword">return</span> inner<br><br><br><span class="hljs-meta">@outer</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span>(<span class="hljs-params">x, y</span>):</span><br>    print(x + y)<br><br><br>add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># æ–°ç‰ˆçš„ add  æ˜¯ å†…å±‚ inner</span><br><br><span class="hljs-comment"># add(1, 2)   ====&gt;  inner(1, 2)  ====&gt;  func(1, 2)  ===&gt; 3</span><br></code></pre></div></td></tr></table></figure><blockquote><p>è¢«è£…é¥°å‡½æ•° æœ‰å‚æ•°ï¼Œ<code>inner</code>å’Œ <code>func</code>éœ€è¦åŒæ ·çš„å‚æ•°</p></blockquote><h4 id="è¢«è£…é¥°å‡½æ•°æœ‰è¿”å›å€¼"><a href="#è¢«è£…é¥°å‡½æ•°æœ‰è¿”å›å€¼" class="headerlink" title="è¢«è£…é¥°å‡½æ•°æœ‰è¿”å›å€¼"></a>è¢«è£…é¥°å‡½æ•°æœ‰è¿”å›å€¼</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">outer</span>(<span class="hljs-params">func</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inner</span>(<span class="hljs-params">x, y</span>):</span><br><br>        r = func(x, y)  <span class="hljs-comment"># è£…é¥°å™¨è£…é¥°ä¹‹åï¼Œ funcæ‰æ˜¯çœŸæ­£çš„addæ±‚å’Œå‡½æ•°</span><br>        <br>        r += <span class="hljs-number">10</span>  <span class="hljs-comment"># å°†ä¸¤æ•°ä¹‹å’Œå†åŠ  10</span><br>        <br>        <span class="hljs-keyword">return</span> r<br><br>    <span class="hljs-keyword">return</span> inner<br><br><br><span class="hljs-meta">@outer</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span>(<span class="hljs-params">x, y</span>):</span><br>    <span class="hljs-keyword">return</span> x + y<br><br><br><span class="hljs-comment"># åœ¨è£…é¥°å™¨ä¸­ å¯¹å‡½æ•°çš„æ‰§è¡Œç»“æœ åŠ 10 å¤„ç†</span><br>r = add(<span class="hljs-number">10</span>, <span class="hljs-number">200</span>)  <span class="hljs-comment"># addå®é™…æ˜¯inner</span><br>print(r)<br></code></pre></div></td></tr></table></figure><blockquote><p>è¢«è£…é¥°å‡½æ•°æœ‰è¿”å›å€¼ï¼Œ <code>inner</code>éœ€è¦å°† <code>func</code> çš„ç»“æœ è¿”å›</p></blockquote><h4 id="è¢«è£…é¥°çš„å‡½æ•°æœ‰ä¸å®šé•¿å‚æ•°"><a href="#è¢«è£…é¥°çš„å‡½æ•°æœ‰ä¸å®šé•¿å‚æ•°" class="headerlink" title="è¢«è£…é¥°çš„å‡½æ•°æœ‰ä¸å®šé•¿å‚æ•°"></a>è¢«è£…é¥°çš„å‡½æ•°æœ‰ä¸å®šé•¿å‚æ•°</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_func</span>(<span class="hljs-params">func</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">call_func</span>(<span class="hljs-params">*args, **kwargs</span>):</span><br>        <br>        <span class="hljs-comment"># func(args, kwargs),æ­¤æ—¶å¾—åˆ°çš„æ˜¯å…ƒç»„å’Œå­—å…¸</span><br>        <span class="hljs-comment"># func(*args, **kwargs),æ­¤æ—¶åˆ™æ˜¯æŠŠå…ƒç´ æ‹†åŒ…ä¸ºå•ä¸ªæ•°å€¼å’Œé”®å€¼å¯¹</span><br>        <span class="hljs-keyword">return</span> func(*args, **kwargs)<br><br>    <span class="hljs-keyword">return</span> call_func<br><br><span class="hljs-meta">@set_func</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s</span>(<span class="hljs-params">a, b, *args, **kwargs</span>):</span><br><br>    print(a, b, args, kwargs)<br><br><br>s(<span class="hljs-number">12</span>, <span class="hljs-number">50</span>, <span class="hljs-number">34</span>, c=<span class="hljs-number">20</span>, d=<span class="hljs-number">56</span>)<br></code></pre></div></td></tr></table></figure><ul><li>å½¢å‚<ul><li>*argsï¼šæ¥æ”¶å¤šä½™çš„å‚æ•°ï¼Œå¾—åˆ°å…ƒç»„(args)</li><li>**kwargs:æ¥æ”¶å¤šä½™çš„å…³é”®å­—å‚æ•°ï¼Œå¾—åˆ°å­—å…¸(kwargs)</li></ul></li><li>å®å‚<ul><li>*argsï¼šå¯¹å…ƒç»„(args)è¿›è¡Œæ‹†åŒ…ï¼Œå¾—åˆ°å•ä¸ªæ•°å€¼</li><li>**kwargsï¼šå¯¹å­—å…¸(kwargs)æ‹†åŒ…ï¼Œå¾—åˆ°å•ä¸ªçš„é”®å€¼å¯¹</li></ul></li></ul><h4 id="å¤šä¸ªè£…é¥°å™¨è£…é¥°å‡½æ•°"><a href="#å¤šä¸ªè£…é¥°å™¨è£…é¥°å‡½æ•°" class="headerlink" title="å¤šä¸ªè£…é¥°å™¨è£…é¥°å‡½æ•°"></a>å¤šä¸ªè£…é¥°å™¨è£…é¥°å‡½æ•°</h4><ul><li><p>å¤šä¸ªè£…é¥°å™¨è£…é¥°åŒä¸€ä¸ªå‡½æ•°ï¼Œè£…é¥°é¡ºåºå’Œæ‰§è¡Œé¡ºåºæ­£å¥½ç›¸å</p></li><li><p>è£…é¥°å™¨å‡½æ•°çš„æ‰§è¡Œé¡ºåºå’Œè£…é¥°å™¨çš„é¡ºåºæœ‰å…³</p></li></ul><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_func1</span>(<span class="hljs-params">func</span>):</span><br>    print(<span class="hljs-string">&quot;è¿™æ˜¯æµ‹è¯•1...&quot;</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">call_func1</span>():</span><br>        print(<span class="hljs-string">&quot;è¿™æ˜¯è£…é¥°å™¨1...&quot;</span>)<br>        <span class="hljs-keyword">return</span> func()<br><br>    <span class="hljs-keyword">return</span> call_func1<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_func2</span>(<span class="hljs-params">func</span>):</span><br>    print(<span class="hljs-string">&quot;è¿™æ˜¯æµ‹è¯•2...&quot;</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">call_func2</span>():</span><br>        print(<span class="hljs-string">&quot;è¿™æ˜¯è£…é¥°å™¨2...&quot;</span>)<br>        <span class="hljs-keyword">return</span> func()<br><br>    <span class="hljs-keyword">return</span> call_func2<br><br><br><span class="hljs-meta">@set_func1</span><br><span class="hljs-meta">@set_func2</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s</span>():</span><br>    print(<span class="hljs-string">&quot;hello...&quot;</span>)<br><br><br>s()<br><br></code></pre></div></td></tr></table></figure><ul><li><p>ä»£ç ä»ä¸Šåˆ°ä¸‹ï¼Œä¾æ¬¡æ‰§è¡Œï¼ŒåŒæ—¶è£…é¥°å™¨æ˜¯ç”¨æ¥è£…é¥°å‡½æ•°çš„</p><ul><li><p>æ‰§è¡Œåˆ°è£…é¥°å™¨set_func1æ—¶ï¼Œæ— æ³•è£…é¥°ï¼Œå…ˆè·³è¿‡</p></li><li><p>æ‰§è¡Œè£…é¥°å™¨set_func2æ—¶ï¼Œè£…é¥°åŸå§‹å‡½æ•°sï¼Œ</p><ul><li>å…ˆæ‰§è¡Œset_func2,è¾“å‡ºâ€è¿™æ˜¯æµ‹è¯•2â€¦â€ï¼Œ</li><li>ç„¶åå¾—åˆ°s = call_func2(s)ï¼Œæ­¤æ—¶çš„sæ˜¯åŸå§‹å‡½æ•°s</li></ul></li><li><p>ç„¶åè£…é¥°å™¨set_func1è£…é¥°æ–°å¾—åˆ°çš„å‡½æ•°s = call_func2(s)</p><ul><li>å…ˆæ‰§è¡Œset_func1,è¾“å‡ºâ€è¿™æ˜¯æµ‹è¯•1â€¦â€</li><li>ç„¶åå¾—åˆ°s = call_func1(s)ï¼Œæ­¤æ—¶çš„sæ˜¯æ–°å¾—åˆ°çš„å‡½æ•°s = call_func2(s)</li></ul></li><li><p>æœ€åå¾—åˆ°å‡½æ•°s = call_func1(call_func(s))</p></li><li><p>æœ€åæ‰§è¡Œå‡½æ•°s</p><ul><li>å…ˆæ‰§è¡Œcall_func1,è¾“å‡ºâ€è¿™æ˜¯è£…é¥°å™¨1â€¦â€</li><li>å†æ‰§è¡Œcall_func2,è¾“å‡ºâ€è¿™æ˜¯è£…é¥°å™¨2â€¦â€</li><li>æœ€åæ‰§è¡ŒåŸå§‹å‡½æ•°sï¼Œè¾“å‡ºâ€helloâ€¦â€</li></ul></li></ul></li></ul><h4 id="è£…é¥°å™¨å¸¦å‚"><a href="#è£…é¥°å™¨å¸¦å‚" class="headerlink" title="è£…é¥°å™¨å¸¦å‚"></a>è£…é¥°å™¨å¸¦å‚</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_pars</span>(<span class="hljs-params">pars</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_func</span>(<span class="hljs-params">func</span>):</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">call_func</span>():</span><br>            print(<span class="hljs-string">&quot;é€™æ˜¯æ¸¬è©¦ç´šåˆ¥%d&quot;</span> % pars)<br>            <span class="hljs-keyword">return</span> func()<br>        <span class="hljs-keyword">return</span> call_func<br>    <span class="hljs-keyword">return</span> set_func<br><br><span class="hljs-meta">@set_pars(<span class="hljs-params"><span class="hljs-number">10</span></span>) </span><span class="hljs-comment"># è£…é¥°åˆ†ä¸¤æ­¥</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s</span>():</span><br>    print(<span class="hljs-string">&quot;hello...&quot;</span>)<br><br>s()<br><br></code></pre></div></td></tr></table></figure><ul><li>è£…é¥°å™¨å¸¦å‚æ—¶ï¼Œè£…é¥°å‡½æ•°è¿‡ç¨‹åˆ†ä¸¤æ­¥ï¼š<ul><li>å°†å‚æ•°ä¼ ç»™å‡½æ•°set_parsï¼Œè¿›è¡Œæ‰§è¡Œ</li><li>å°†å‡½æ•°è¿”å›ç»“æœä½œä¸ºå‡½æ•°sçš„è£…é¥°å™¨è¿›è¡Œè£…é¥°</li></ul></li></ul><h4 id="ç±»è£…é¥°å™¨"><a href="#ç±»è£…é¥°å™¨" class="headerlink" title="ç±»è£…é¥°å™¨"></a>ç±»è£…é¥°å™¨</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, func</span>):</span><br>        self.func = func<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__call__</span>(<span class="hljs-params">self, *args, **kwargs</span>):</span>  <br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        é­”æ³•æ–¹æ³•__call__å¯ä»¥å°†å¯¹è±¡è®¾ç½®ä¸ºå¯è°ƒç”¨å¯¹è±¡ï¼ˆcallableï¼‰,å…è®¸ä¸€ä¸ªç±»çš„å®ä¾‹åƒå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨ </span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        print(<span class="hljs-string">&quot;è¿™æ˜¯ç±»è£…é¥°å™¨...&quot;</span>)<br>        <span class="hljs-keyword">return</span> self.func(*args, **kwargs)<br><br><span class="hljs-meta">@Test  </span><span class="hljs-comment"># s = Test(s)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s</span>(<span class="hljs-params">*args, **kwargs</span>):</span><br>    print(<span class="hljs-string">&quot;hello python...&quot;</span>)<br><br>s()<br><br></code></pre></div></td></tr></table></figure><ul><li>è‡ªå®šä¹‰çš„å‡½æ•°ã€å†…ç½®å‡½æ•°å’Œç±»éƒ½å±äºå¯è°ƒç”¨å¯¹è±¡ï¼Œä½†å‡¡æ˜¯å¯ä»¥æŠŠä¸€å¯¹æ‹¬å·()åº”ç”¨åˆ°æŸä¸ªå¯¹è±¡èº«ä¸Šéƒ½å¯ç§°ä¹‹ä¸ºå¯è°ƒç”¨å¯¹è±¡</li><li>åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºå¯è°ƒç”¨å¯¹è±¡å¯ä»¥ç”¨å‡½æ•° callable</li><li>å¦‚æœåœ¨ç±»ä¸­å®ç°äº† <strong>call</strong> æ–¹æ³•ï¼Œé‚£ä¹ˆå®ä¾‹å¯¹è±¡ä¹Ÿå°†æˆä¸ºä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡</li></ul><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><h4 id="è£…é¥°å™¨å¤„ç†å“åº”å€¼"><a href="#è£…é¥°å™¨å¤„ç†å“åº”å€¼" class="headerlink" title="è£…é¥°å™¨å¤„ç†å“åº”å€¼"></a>è£…é¥°å™¨å¤„ç†å“åº”å€¼</h4><p>å‡½æ•°input_strä¸­ï¼Œä¼šè·å–ç”¨æˆ·è¾“å…¥å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›å…¶ç»“æœï¼Œåˆ©ç”¨è£…é¥°å™¨å°†å…¶å­—ç¬¦ä¸²å…ˆåŠ ä¸Š<code>&lt;b&gt;&lt;/b&gt;</code>æ ‡ç­¾ï¼Œå†æ·»åŠ <code>&lt;i&gt;&lt;/i&gt;</code>æ ‡ç­¾ï¼Œå¦‚ï¼š<code>&lt;i&gt;&lt;b&gt;hello&lt;/b&gt;&lt;/&gt;</code>ã€‚æ³¨æ„ï¼š<strong>åˆ©ç”¨åŒå±‚è£…é¥°å™¨å®ç°</strong>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_func_b</span>(<span class="hljs-params">func</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">call_func</span>():</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;b&gt;&quot;</span> + func() + <span class="hljs-string">&quot;&lt;/b&gt;&quot;</span><br><br>    <span class="hljs-keyword">return</span> call_func<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_func_i</span>(<span class="hljs-params">func</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">call_func</span>():</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;i&gt;&quot;</span> + func() + <span class="hljs-string">&quot;&lt;/i&gt;&quot;</span><br><br>    <span class="hljs-keyword">return</span> call_func<br><br><span class="hljs-meta">@set_func_i</span><br><span class="hljs-meta">@set_func_b</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">input_str</span>():</span><br>    <span class="hljs-built_in">str</span> = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¾“å…¥ï¼š&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span><br><br>print(input_str())<br></code></pre></div></td></tr></table></figure><h4 id="è£…é¥°å™¨é™é¢‘"><a href="#è£…é¥°å™¨é™é¢‘" class="headerlink" title="è£…é¥°å™¨é™é¢‘"></a>è£…é¥°å™¨é™é¢‘</h4><p>è¯·å®ç°ä¸€ä¸ªè£…é¥°å™¨,é™åˆ¶è¯¥å‡½æ•°è¢«è°ƒç”¨çš„é¢‘ç‡,å¦‚10ç§’ä¸€æ¬¡</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_time</span>(<span class="hljs-params">t</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_num</span>(<span class="hljs-params">func</span>):</span><br>        dic = &#123;<span class="hljs-string">&quot;last_time&quot;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&quot;time_interval&quot;</span>: t&#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">call_func</span>():</span><br>            now_time = time.time()<br><br>            finall_time = dic[<span class="hljs-string">&quot;last_time&quot;</span>] + dic[<span class="hljs-string">&quot;time_interval&quot;</span>]<br>            <span class="hljs-keyword">if</span> finall_time &lt;= now_time:<br>                dic[<span class="hljs-string">&quot;last_time&quot;</span>] = now_time<br>                ret = func()<br><br>                <span class="hljs-keyword">return</span> ret<br>            <span class="hljs-keyword">else</span>:<br>                print(<span class="hljs-string">&quot;è¿˜æœ‰%.2fsæ‰èƒ½è°ƒç”¨è¯¥å‡½æ•°&quot;</span> % (finall_time - now_time))<br><br>        <span class="hljs-keyword">return</span> call_func<br>    <span class="hljs-keyword">return</span> set_num<br><br><span class="hljs-meta">@set_time(<span class="hljs-params"><span class="hljs-number">5</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s</span>():</span><br>    print(<span class="hljs-string">&quot;hello...&quot;</span>)<br></code></pre></div></td></tr></table></figure><p>è¯·å®ç°ä¸€ä¸ªè£…é¥°å™¨,é™åˆ¶è¯¥å‡½æ•°æ¯ä¸ªé—´éš”è¢«è°ƒç”¨çš„é¢‘ç‡,å¦‚1åˆ†é’Ÿ5æ¬¡</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_time</span>(<span class="hljs-params">t, n</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_num</span>(<span class="hljs-params">func</span>):</span><br>        dic = &#123;<span class="hljs-string">&quot;last_time&quot;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&quot;time_interval&quot;</span>: t, <span class="hljs-string">&quot;num&quot;</span>: <span class="hljs-number">0</span>&#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">call_func</span>():</span><br>            now_time = time.time()<br><br>            finall_time = dic[<span class="hljs-string">&quot;last_time&quot;</span>] + dic[<span class="hljs-string">&quot;time_interval&quot;</span>] <span class="hljs-comment"># ä»£è¡¨å¯ä»¥é‡æ–°è°ƒç”¨çš„æ—¶é—´</span><br>            finall_num = dic[<span class="hljs-string">&quot;num&quot;</span>] <span class="hljs-comment"># ä»£è¡¨è°ƒç”¨çš„æ¬¡æ•°</span><br><br>            <span class="hljs-keyword">if</span> finall_num &lt; n: <span class="hljs-comment"># å½“æ¬¡æ•°ä¸æ»¡è¶³æ—¶ï¼Œå¯ä»¥ç»§ç»­è°ƒç”¨</span><br>                <span class="hljs-keyword">if</span> finall_num == <span class="hljs-number">0</span>:<br>                    dic[<span class="hljs-string">&quot;last_time&quot;</span>] = now_time<br>                dic[<span class="hljs-string">&quot;num&quot;</span>] += <span class="hljs-number">1</span><br><br>                <span class="hljs-keyword">return</span> func()<br><br>            <span class="hljs-keyword">elif</span> now_time &gt;= finall_time: <span class="hljs-comment"># å·²ç»è¶…å‡ºæ—¶é—´ï¼Œå¯ä»¥é‡æ–°è°ƒç”¨</span><br>                dic[<span class="hljs-string">&quot;num&quot;</span>] = <span class="hljs-number">0</span><br>                dic[<span class="hljs-string">&quot;last_time&quot;</span>] = <span class="hljs-number">0</span><br><br>                <span class="hljs-keyword">return</span> func()<br>            <span class="hljs-keyword">else</span>:<br>                print(<span class="hljs-string">&quot;è¿˜æœ‰%.2fsæ‰èƒ½è°ƒç”¨è¯¥å‡½æ•°&quot;</span> % (finall_time - now_time))<br>        <span class="hljs-keyword">return</span> call_func<br>    <span class="hljs-keyword">return</span> set_num<br><br><span class="hljs-meta">@set_time(<span class="hljs-params"><span class="hljs-number">60</span>, <span class="hljs-number">5</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s</span>():</span><br>    print(<span class="hljs-string">&quot;hello...&quot;</span>)<br><br>s()<br>s()<br>s()<br>time.sleep(<span class="hljs-number">2</span>)<br>s()<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é—­åŒ… </tag>
            
            <tag> è£…é¥°å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitæ“ä½œ</title>
      <link href="2019/03/31/gong-ju-git-cao-zuo/"/>
      <url>2019/03/31/gong-ju-git-cao-zuo/</url>
      
        <content type="html"><![CDATA[<p>Gitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥æœ‰æ•ˆã€é«˜é€Ÿçš„å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚ä¹Ÿå°±æ˜¯ç”¨æ¥ç®¡ç†ä½ çš„hexoåšå®¢æ–‡ç« ï¼Œä¸Šä¼ åˆ°GitHubçš„å·¥å…·ã€‚Gitéå¸¸å¼ºå¤§ï¼Œå¼€å‘äººå‘˜å¿…å¤‡æŠ€èƒ½ã€‚</p><h2 id="1-å®‰è£…Git"><a href="#1-å®‰è£…Git" class="headerlink" title="1. å®‰è£…Git"></a>1. å®‰è£…Git</h2><ul><li><p>windowsï¼šåˆ°gitå®˜ç½‘ä¸Šä¸‹è½½, <a href="https://gitforwindows.org/">Download</a> git,ä¸‹è½½åä¼šæœ‰ä¸€ä¸ªGit Bashçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œä»¥åå°±ç”¨è¿™ä¸ªå·¥å…·æ¥ä½¿ç”¨gitã€‚</p></li><li><p>linuxï¼šå¯¹linuxæ¥è¯´å®åœ¨æ˜¯å¤ªç®€å•äº†ï¼Œå› ä¸ºæœ€æ—©çš„gitå°±æ˜¯åœ¨linuxä¸Šç¼–å†™çš„ï¼Œåªéœ€è¦ä¸€è¡Œä»£ç </p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">sudo apt-get install git<br></code></pre></div></td></tr></table></figure><p>å®‰è£…å¥½åï¼Œç”¨<code>git --version</code> æ¥æŸ¥çœ‹ä¸€ä¸‹ç‰ˆæœ¬</p></li></ul><h2 id="2-åŸºæœ¬æ“ä½œ"><a href="#2-åŸºæœ¬æ“ä½œ" class="headerlink" title="2. åŸºæœ¬æ“ä½œ"></a>2. åŸºæœ¬æ“ä½œ</h2><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/Git%E6%93%8D%E4%BD%9C%20.jpg" alt="Gitæ“ä½œ"></p><h2 id="3-è¿œç¨‹ä»“åº“å¯†é’¥é…ç½®"><a href="#3-è¿œç¨‹ä»“åº“å¯†é’¥é…ç½®" class="headerlink" title="3. è¿œç¨‹ä»“åº“å¯†é’¥é…ç½®"></a>3. è¿œç¨‹ä»“åº“å¯†é’¥é…ç½®</h2><h3 id="1-GitHubå¯†é’¥é…ç½®"><a href="#1-GitHubå¯†é’¥é…ç½®" class="headerlink" title="1. GitHubå¯†é’¥é…ç½®"></a>1. GitHubå¯†é’¥é…ç½®</h3><h4 id="1-1-è®¾ç½®èº«ä»½ä¿¡æ¯"><a href="#1-1-è®¾ç½®èº«ä»½ä¿¡æ¯" class="headerlink" title="1.1. è®¾ç½®èº«ä»½ä¿¡æ¯"></a>1.1. è®¾ç½®èº«ä»½ä¿¡æ¯</h4><p>gitè®¾ç½®èº«ä»½ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">git config --global user.name &quot;yourname&quot;<br><br>git config --global user.email &quot;your@email.com&quot;<br></code></pre></div></td></tr></table></figure><h4 id="1-2-åˆ é™¤-sshæ–‡ä»¶å¤¹"><a href="#1-2-åˆ é™¤-sshæ–‡ä»¶å¤¹" class="headerlink" title="1.2. åˆ é™¤.sshæ–‡ä»¶å¤¹"></a>1.2. åˆ é™¤.sshæ–‡ä»¶å¤¹</h4><p>ï¼ˆç›´æ¥æœç´¢è¯¥æ–‡ä»¶å¤¹ï¼‰ä¸‹çš„known_hosts(æ‰‹åŠ¨åˆ é™¤å³å¯ï¼Œä¸éœ€è¦gitï¼‰</p><h4 id="1-3-åˆ›å»ºå¯†é’¥"><a href="#1-3-åˆ›å»ºå¯†é’¥" class="headerlink" title="1.3. åˆ›å»ºå¯†é’¥"></a>1.3. åˆ›å»ºå¯†é’¥</h4><p>ç»ˆç«¯è¾“å…¥å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">ssh-keygen -t rsa -C &quot;your@email.com&quot;ï¼ˆè¯·å¡«ä½ è®¾ç½®çš„é‚®ç®±åœ°å€ï¼‰<br></code></pre></div></td></tr></table></figure><p>æ¥ç€å‡ºç°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">Generating public/private rsa key pair.<br><br>Enter file in which to save the key (/Users/your_user_directory/.ssh/id_rsa):<br></code></pre></div></td></tr></table></figure><p>è¯·ç›´æ¥æŒ‰ä¸‹å›è½¦</p><p>ç„¶åç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨.sshæ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼Œid_rsaå’Œid_rsa.pubï¼Œç”¨è®°äº‹æœ¬æ‰“id_rsa.pub</p><p>å°†å…¨éƒ¨çš„å†…å®¹å¤åˆ¶</p><h4 id="1-4-æ·»åŠ å…¬é’¥"><a href="#1-4-æ·»åŠ å…¬é’¥" class="headerlink" title="1.4. æ·»åŠ å…¬é’¥"></a>1.4. æ·»åŠ å…¬é’¥</h4><p>æ‰“å¼€<a href="https://github.com/">https://github.com/</a>ï¼Œç™»é™†ä½ çš„è´¦æˆ·ï¼Œè¿›å…¥è®¾ç½®</p><p>è¿›å…¥sshè®¾ç½®</p><p>ç‚¹å‡» <code>New SSH key</code></p><p>åœ¨keyä¸­å°†åˆšåˆšå¤åˆ¶çš„ç²˜è´´è¿›å»</p><p>æœ€åç‚¹å‡»<code>Add SSH key</code></p><h4 id="1-5-æµ‹è¯•"><a href="#1-5-æµ‹è¯•" class="headerlink" title="1.5. æµ‹è¯•"></a>1.5. æµ‹è¯•</h4><p>åœ¨ç»ˆç«¯è¾“å…¥</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">ssh -T git@github.com<br></code></pre></div></td></tr></table></figure><p>ä½ å°†ä¼šçœ‹åˆ°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">The authenticity of host &#x27;github.com (207.97.227.239)&#x27; can&#x27;t be established.<br>RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.<br>Are you sure you want to continue connecting (yes/no)?<br></code></pre></div></td></tr></table></figure><p>è¾“å…¥ yes</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">Hi humingx! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.<br></code></pre></div></td></tr></table></figure><p>å¦‚æœçœ‹åˆ°Hiåé¢æ˜¯ä½ çš„ç”¨æˆ·åï¼Œå°±è¯´æ˜æˆåŠŸäº†ã€‚</p><h3 id="2-Giteeä»“åº“å¯†é’¥é…ç½®ç±»ä¼¼"><a href="#2-Giteeä»“åº“å¯†é’¥é…ç½®ç±»ä¼¼" class="headerlink" title="2. Giteeä»“åº“å¯†é’¥é…ç½®ç±»ä¼¼"></a>2. Giteeä»“åº“å¯†é’¥é…ç½®ç±»ä¼¼</h3><blockquote><p>é‡è£…ç³»ç»Ÿä¹‹å,git pushçš„æ—¶å€™ä¼šå‡ºç°é—®é¢˜:<code>The authenticity of host &#39;github.com (13.229.188.59)&#39; can&#39;t be established.</code>ï¼ŒåŸå› æ˜¯æœ¬åœ°ä»“åº“å’Œè¿œç¨‹çš„SSHä¸åŒ¹é…</p><p>è§£å†³åŠæ³•ï¼šé‡æ–°é…ç½®ä»“åº“å¯†é’¥å³å¯ã€‚</p></blockquote><h2 id="4-æœ¬åœ°ä»“åº“å…³è”è¿œç¨‹ä»“åº“"><a href="#4-æœ¬åœ°ä»“åº“å…³è”è¿œç¨‹ä»“åº“" class="headerlink" title="4. æœ¬åœ°ä»“åº“å…³è”è¿œç¨‹ä»“åº“"></a>4. æœ¬åœ°ä»“åº“å…³è”è¿œç¨‹ä»“åº“</h2><ol><li><p>å·²æœ‰ä»“åº“</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> existing_git_repo<br>git remote add origin https://gitee.com/bookandmusic/test.git<br></code></pre></div></td></tr></table></figure><p> æ·»åŠ åï¼Œè¿œç¨‹åº“çš„åå­—å°±æ˜¯originï¼Œè¿™æ˜¯Gité»˜è®¤çš„å«æ³•ï¼Œä¹Ÿå¯ä»¥æ”¹æˆåˆ«çš„ï¼Œä½†æ˜¯originè¿™ä¸ªåå­—ä¸€çœ‹å°±çŸ¥é“æ˜¯è¿œç¨‹åº“ã€‚</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">git push -u origin master<br></code></pre></div></td></tr></table></figure><p> æŠŠæœ¬åœ°åº“çš„å†…å®¹æ¨é€åˆ°è¿œç¨‹ï¼Œç”¨git pushå‘½ä»¤ï¼Œå®é™…ä¸Šæ˜¯æŠŠå½“å‰åˆ†æ”¯sourceæ¨é€åˆ°è¿œç¨‹ã€‚</p><p> ç”±äºè¿œç¨‹åº“æ˜¯ç©ºçš„ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¨é€masteråˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Šäº†-uå‚æ•°ï¼ŒGitä¸ä½†ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å†…å®¹æ¨é€çš„è¿œç¨‹æ–°çš„masteråˆ†æ”¯ï¼Œè¿˜ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å’Œè¿œç¨‹çš„masteråˆ†æ”¯å…³è”èµ·æ¥ï¼Œåœ¨ä»¥åçš„æ¨é€æˆ–è€…æ‹‰å–æ—¶å°±å¯ä»¥ç®€åŒ–å‘½ä»¤ã€‚</p></li><li><p>æ–°å»ºgitä»“åº“ï¼Œå¹¶å…³è”è¿œç¨‹ä»“åº“</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">mkdir <span class="hljs-built_in">test</span><br><span class="hljs-built_in">cd</span> <span class="hljs-built_in">test</span><br>git init<br>touch README.md<br>git add README.md<br>git commit -m <span class="hljs-string">&quot;first commit&quot;</span><br>git remote add origin https://gitee.com/bookandmusic/test.git<br>git push -u origin master<br></code></pre></div></td></tr></table></figure></li><li><p>ç”¨gitè¿›è¡Œpushæ“ä½œçš„æ—¶å€™ï¼ŒæŠ¥<code>fatal: TaskCanceledException encountered.</code>çš„è§£å†³æ–¹æ³•<br> è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š</p> <figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">git config --global credential.helper manager<br></code></pre></div></td></tr></table></figure><p> ä¹‹åå†pushä¸€åˆ‡æ­£å¸¸</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> å¯†é’¥ </tag>
            
            <tag> è¿œç¨‹ä»“åº“å…³è” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node.jsç¯å¢ƒé…ç½®</title>
      <link href="2019/03/31/gong-ju-nodejs-huan-jing-pei-zhi/"/>
      <url>2019/03/31/gong-ju-nodejs-huan-jing-pei-zhi/</url>
      
        <content type="html"><![CDATA[<p>ç®€å•çš„è¯´ Node.js å°±æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ JavaScriptã€‚</p><p>Node.js æ˜¯ä¸€ä¸ªåŸºäºChrome JavaScript è¿è¡Œæ—¶å»ºç«‹çš„ä¸€ä¸ªå¹³å°ã€‚</p><p>Node.jsæ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨I/OæœåŠ¡ç«¯JavaScriptç¯å¢ƒï¼ŒåŸºäºGoogleçš„V8å¼•æ“ï¼ŒV8å¼•æ“æ‰§è¡ŒJavascriptçš„é€Ÿåº¦éå¸¸å¿«ï¼Œæ€§èƒ½éå¸¸å¥½ã€‚</p><h2 id="Node-jsç‰ˆæœ¬ç®¡ç†"><a href="#Node-jsç‰ˆæœ¬ç®¡ç†" class="headerlink" title="Node.jsç‰ˆæœ¬ç®¡ç†"></a>Node.jsç‰ˆæœ¬ç®¡ç†</h2><ol><li><p>æ‰‹åŠ¨å®‰è£…nvm</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.2/install.sh | bash<br></code></pre></div></td></tr></table></figure> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.2/install.sh | bash<br></code></pre></div></td></tr></table></figure><p> è¿è¡Œä»¥ä¸Šä»»ä¸€å‘½ä»¤å°†ä¸‹è½½ä¸€ä¸ªè„šæœ¬å¹¶è¿è¡Œå®ƒã€‚<br> è¯¥è„šæœ¬ä¼šå°†nvmå­˜å‚¨åº“å…‹éš†åˆ°<code>~/.nvm</code>,å¹¶å°è¯•å°†ä»¥ä¸‹ä»£ç æ®µä¸­çš„æºä»£ç è¡Œæ·»åŠ åˆ°æ­£ç¡®çš„é…ç½®æ–‡ä»¶ï¼ˆ<code>~/.bash_profile</code>, <code>~/.zshrc</code>, <code>~/.profile</code>, æˆ– <code>~/.bashrc</code>ï¼‰</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> NVM_DIR=<span class="hljs-string">&quot;<span class="hljs-subst">$([ -z <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;XDG_CONFIG_HOME-&#125;</span>&quot;</span> ] &amp;&amp; printf %s <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOME&#125;</span>/.nvm&quot;</span> || printf %s <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;XDG_CONFIG_HOME&#125;</span>/nvm&quot;</span>)</span>&quot;</span><br>[ -s <span class="hljs-string">&quot;<span class="hljs-variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="hljs-string">&quot;<span class="hljs-variable">$NVM_DIR</span>/nvm.sh&quot;</span> <span class="hljs-comment"># This loads nvm</span><br></code></pre></div></td></tr></table></figure></li><li><p>ä¿®æ”¹nvmé»˜è®¤é•œåƒæº</p><p> ç”¨å›½å†…é•œåƒå¿«é€Ÿå®‰è£…node,æŠŠç¯å¢ƒå˜é‡ NVM_NODEJS_ORG_MIRRORåŠ å…¥åˆ°æ­£ç¡®çš„é…ç½®æ–‡ä»¶ï¼ˆ<code>~/.bash_profile</code>,<code>~/.zshrc</code>, <code>~/.profile</code>, æˆ– <code>~/.bashrc</code>ï¼‰</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node<br></code></pre></div></td></tr></table></figure></li><li><p>nvmå‘½ä»¤</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">nvm version <span class="hljs-comment"># æŸ¥çœ‹å½“å‰çš„ç‰ˆæœ¬</span><br>nvm ls-remote <span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰å¯ä»¥å®‰è£…çš„nodeç‰ˆæœ¬å·</span><br><br>nvm install stable <span class="hljs-comment"># å®‰è£…æœ€æ–°ç¨³å®šç‰ˆæœ¬</span><br>nvm install  &lt;version&gt; <span class="hljs-comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬å·çš„node</span><br>nvm use &lt;version&gt; <span class="hljs-comment"># åˆ‡æ¢ä½¿ç”¨æŒ‡å®šçš„ç‰ˆæœ¬node</span><br><br>nvm ls  <span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰å·²ç»å®‰è£…çš„nodeç‰ˆæœ¬</span><br>nvm current <span class="hljs-comment"># å½“å‰nodeç‰ˆæœ¬</span><br><br>nvm <span class="hljs-built_in">alias</span> default &lt;version&gt;  <span class="hljs-comment"># æŒ‡å®šé»˜è®¤çš„nodeç‰ˆæœ¬</span><br>nvm <span class="hljs-built_in">alias</span> &lt;name&gt; &lt;version&gt; <span class="hljs-comment"># ç»™ä¸åŒçš„ç‰ˆæœ¬å·æ·»åŠ åˆ«å</span><br>nvm <span class="hljs-built_in">unalias</span> &lt;name&gt; <span class="hljs-comment">## åˆ é™¤å·²å®šä¹‰çš„åˆ«å</span><br><br>nvm uninstall &lt;version&gt; å¸è½½æŒ‡å®šçš„ç‰ˆæœ¬<br></code></pre></div></td></tr></table></figure><h2 id="Node-jsåŒ…ç®¡ç†"><a href="#Node-jsåŒ…ç®¡ç†" class="headerlink" title="Node.jsåŒ…ç®¡ç†"></a>Node.jsåŒ…ç®¡ç†</h2></li><li><p>å®‰è£…åŒ…ç®¡ç†å·¥å…·: npmã€cnpmã€yarn</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm -g install npm@next  <span class="hljs-comment"># npmå‡çº§</span><br>npm install -g cnpm --registry=https://registry.npm.taobao.org  <span class="hljs-comment"># cnpmå®‰è£…</span><br>npm install -g yarn  <span class="hljs-comment"># yarnå®‰è£…</span><br></code></pre></div></td></tr></table></figure></li><li><p>æŸ¥çœ‹å·²å®‰è£…çš„æ‰€æœ‰å…¨å±€åŒ…</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm list -g --depth=0<br><br>cnpm list -g --depth=0<br><br>yarn global list<br></code></pre></div></td></tr></table></figure></li><li><p>å®‰è£…åŒ…</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm install -g &lt;package&gt;<br><br>cnpm install -g &lt;package&gt;<br><br>yarn global add &lt;package&gt;<br></code></pre></div></td></tr></table></figure></li><li><p>å¸è½½åŒ…</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm uninstall -g &lt;package&gt;<br><br>cnpm uninstall -g &lt;package&gt;<br><br>yarn global remove &lt;package&gt;<br></code></pre></div></td></tr></table></figure></li><li><p>æ›´æ–°åŒ…</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm update &lt;package&gt;<br></code></pre></div></td></tr></table></figure></li><li><p>æ›´æ–°æœ¬åœ°åŒ…</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm upgrade --save<br>yarn upgrade<br></code></pre></div></td></tr></table></figure></li><li><p>å…¶ä»–ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm config get registry  <span class="hljs-comment"># æŸ¥çœ‹npmå½“å‰é•œåƒæº</span><br><br>npm config <span class="hljs-built_in">set</span> registry https://registry.npm.taobao.org/  <span class="hljs-comment"># è®¾ç½®npmé•œåƒæºä¸ºæ·˜å®é•œåƒ</span><br><br>yarn config get registry  <span class="hljs-comment"># æŸ¥çœ‹yarnå½“å‰é•œåƒæº</span><br><br>yarn config <span class="hljs-built_in">set</span> registry https://registry.npm.taobao.org/  <span class="hljs-comment"># è®¾ç½®yarné•œåƒæºä¸ºæ·˜å®é•œåƒ</span><br></code></pre></div></td></tr></table></figure><h2 id="Node-jsé•œåƒç®¡ç†"><a href="#Node-jsé•œåƒç®¡ç†" class="headerlink" title="Node.jsé•œåƒç®¡ç†"></a>Node.jsé•œåƒç®¡ç†</h2></li><li><p>ç›´æ¥ç¼–è¾‘npmçš„é…ç½®æ–‡ä»¶</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm config edit<br></code></pre></div></td></tr></table></figure><p> ç›´æ¥ä¿®æ”¹registryçš„åœ°å€</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sass_binary_site=https://npm.taobao.org/mirrors/node-sass/<br>phantomjs_cdnurl=https://npm.taobao.org/mirrors/phantomjs/<br>electron_mirror=https://npm.taobao.org/mirrors/electron/<br>registry=https://registry.npm.taobao.org<br></code></pre></div></td></tr></table></figure></li><li><p>ç”¨ä»£ç æ›´æ”¹npmçš„é…ç½®æ–‡ä»¶</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm config <span class="hljs-built_in">set</span> registry http://registry.npm.taobao.org<br></code></pre></div></td></tr></table></figure><p> è¿™æ®µä»£ç å³å°†é•œåƒæ”¹ä¸ºæ·˜å®é•œåƒ</p></li><li><p>ä½¿ç”¨nrmç®¡ç†registryåœ°å€</p><ul><li><p>å®‰è£…nrm</p>  <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm install -g nrm<br></code></pre></div></td></tr></table></figure></li><li><p>æŸ¥çœ‹é•œåƒåˆ—è¡¨</p>  <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">nrm ls<br></code></pre></div></td></tr></table></figure></li><li><p>åˆ‡æ¢é•œåƒ</p>  <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">nrm use taobao<br></code></pre></div></td></tr></table></figure></li><li><p>åœ¨nrmæ·»åŠ è‡ªå·±çš„é•œåƒåœ°å€</p>  <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">nrm add r_name r_url<br><span class="hljs-comment"># r_nameé•œåƒåå­—  </span><br><span class="hljs-comment"># r_urlé•œåƒåœ°å€</span><br></code></pre></div></td></tr></table></figure></li><li><p>åˆ é™¤</p>  <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">nrm del r_name<br></code></pre></div></td></tr></table></figure></li><li><p>æµ‹è¯•é•œåƒçš„ç›¸åº”é€Ÿåº¦</p>  <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">nrm <span class="hljs-built_in">test</span> r_name<br></code></pre></div></td></tr></table></figure><h2 id="ç¬¬ä¸‰æ–¹è„šæ‰‹æ¶"><a href="#ç¬¬ä¸‰æ–¹è„šæ‰‹æ¶" class="headerlink" title="ç¬¬ä¸‰æ–¹è„šæ‰‹æ¶"></a>ç¬¬ä¸‰æ–¹è„šæ‰‹æ¶</h2></li></ul></li><li><p>vue 3.0(Nodeæœ€æ–°ç‰ˆ)</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm install -g @vue/cli<br><span class="hljs-comment"># OR</span><br>yarn global add @vue/cli<br></code></pre></div></td></tr></table></figure></li><li><p>vue2.0</p><p> Vue CLI &gt;= 3 å’Œæ—§ç‰ˆä½¿ç”¨äº†ç›¸åŒçš„ vue å‘½ä»¤ï¼Œæ‰€ä»¥ Vue CLI 2 (vue-cli) è¢«è¦†ç›–äº†ã€‚å¦‚æœä½ ä»ç„¶éœ€è¦ä½¿ç”¨æ—§ç‰ˆæœ¬çš„ vue init åŠŸèƒ½ï¼Œä½ å¯ä»¥å…¨å±€å®‰è£…ä¸€ä¸ªæ¡¥æ¥å·¥å…·ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm install -g @vue/cli-init<br></code></pre></div></td></tr></table></figure><p> æˆ–è€…ç›´æ¥å®‰è£…vue-cliè„šæ‰‹æ¶</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">cnpm install -g vue-cli<br></code></pre></div></td></tr></table></figure></li><li><p>http-server</p><p> åˆ©ç”¨http-serverï¼Œå¼€å¯æœ¬åœ°æœåŠ¡</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">cnpm install -g http-server<br></code></pre></div></td></tr></table></figure> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">http-server -c-1   ï¼ˆâš ï¸åªè¾“å…¥http-serverçš„è¯ï¼Œæ›´æ–°äº†ä»£ç åï¼Œé¡µé¢ä¸ä¼šåŒæ­¥æ›´æ–°ï¼‰<br>Starting up http-server, serving ./<br>Available on:<br>  http://127.0.0.1:8080<br>  http://192.168.8.196:8080<br>Hit CTRL-C to stop the server<br></code></pre></div></td></tr></table></figure></li><li><p>hexo-cli</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">cnpm install -g hexo-cli<br></code></pre></div></td></tr></table></figure></li><li><p>gitbook-cli</p> <figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">cnpm install -g gitbook-cli<br></code></pre></div></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> NodeJs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJs </tag>
            
            <tag> npm </tag>
            
            <tag> nvm </tag>
            
            <tag> yarn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitBookæ•™ç¨‹</title>
      <link href="2019/03/31/jiao-cheng-gitbook-jiao-cheng/"/>
      <url>2019/03/31/jiao-cheng-gitbook-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<blockquote><p>GitBook æ˜¯ä¸€ä¸ªåŸºäº<code>Node.js</code>çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨<code>Markdown</code>æ¥åˆ¶ä½œç”µå­ä¹¦ï¼Œå¹¶åˆ©ç”¨<code>Git/Github</code>å‘å¸ƒã€‚</p></blockquote><p>æ”¯æŒè¾“å‡º<code>é™æ€ç«™ç‚¹</code>ã€<code>PDF</code>ã€<code>eBook</code>ã€<code>HTMLç½‘é¡µ</code>ç­‰æ ¼å¼ã€‚</p><p>å®‰è£… GitBook éœ€è¦ Node ç¯å¢ƒï¼Œå…·ä½“æ€ä¹ˆå®‰è£… Node è¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚</p><h2 id="å®‰è£…-GitBook"><a href="#å®‰è£…-GitBook" class="headerlink" title="å®‰è£… GitBook"></a>å®‰è£… GitBook</h2><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm install -g gitbook-cli<br><span class="hljs-comment"># OR</span><br>yarn global add gitbook-cli<br></code></pre></div></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">gitbook -V<br></code></pre></div></td></tr></table></figure><h2 id="å¯¼å‡ºç”µå­ä¹¦"><a href="#å¯¼å‡ºç”µå­ä¹¦" class="headerlink" title="å¯¼å‡ºç”µå­ä¹¦"></a>å¯¼å‡ºç”µå­ä¹¦</h2><p>æ‰“å¼€åˆ° gitbook çš„ç›®å½•ä¸‹</p><h3 id="1ã€è¾“å‡ºé™æ€ç½‘é¡µ"><a href="#1ã€è¾“å‡ºé™æ€ç½‘é¡µ" class="headerlink" title="1ã€è¾“å‡ºé™æ€ç½‘é¡µ"></a>1ã€è¾“å‡ºé™æ€ç½‘é¡µ</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ gitbook serve .<br>Press CTRL+C to quit ...<br><br>Starting build ...<br>Successfuly built !<br><br>Starting server ...<br>Serving book on http://localhost:4000   <br></code></pre></div></td></tr></table></figure><p>è¿™æ—¶å€™å°±å¯ä»¥æ‰“å¼€ <a href="http://localhost:4000/">http://localhost:4000</a>ï¼šè¿›è¡Œé¢„è§ˆ</p><p>åŒæ—¶åœ¨é¡¹ç›®çš„ç›®å½•ä¸­å¤šäº†ä¸€ä¸ª <code>_book</code> çš„æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­çš„æ–‡ä»¶å°±æ˜¯ç”Ÿæˆçš„é™æ€ç½‘é¡µçš„å†…å®¹ã€‚</p><h3 id="2ã€å¯¼å‡º-PDF"><a href="#2ã€å¯¼å‡º-PDF" class="headerlink" title="2ã€å¯¼å‡º PDF"></a>2ã€å¯¼å‡º PDF</h3><p>åœ¨é¡¹ç›®çš„ç›®å½•ä¸­æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">gitbook pdf .<br></code></pre></div></td></tr></table></figure><p>é¡¹ç›®ç›®å½•ä¸‹å°±ä¼šç”Ÿæˆ <code>book.pdf</code></p><h3 id="3ã€å¯¼å‡º-epub"><a href="#3ã€å¯¼å‡º-epub" class="headerlink" title="3ã€å¯¼å‡º epub"></a>3ã€å¯¼å‡º epub</h3><p>åœ¨é¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">gitbook epub .  <br></code></pre></div></td></tr></table></figure><p>é¡¹ç›®ç›®å½•ä¸‹å°±ä¼šç”Ÿæˆ <code>book.epub</code></p><h2 id="è§£å†³é™æ€ç½‘é¡µä¸èƒ½è·³è½¬é—®é¢˜"><a href="#è§£å†³é™æ€ç½‘é¡µä¸èƒ½è·³è½¬é—®é¢˜" class="headerlink" title="è§£å†³é™æ€ç½‘é¡µä¸èƒ½è·³è½¬é—®é¢˜"></a>è§£å†³é™æ€ç½‘é¡µä¸èƒ½è·³è½¬é—®é¢˜</h2><ul><li><p>åœ¨å¯¼å‡ºçš„æ–‡ä»¶å¤¹ç›®å½•ä¸‹æ‰¾åˆ°gitbook-&gt;theme.jsæ–‡ä»¶</p></li><li><p>æ‰¾åˆ°ä¸‹é¢çš„ä»£ç æœç´¢<code>if(m)for(n.handler&amp;&amp;</code></p></li><li><p>å°†if(m)æ”¹æˆif(false)</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">if</span>(<span class="hljs-literal">false</span>)<span class="hljs-keyword">for</span>(n.handler&amp;&amp;(i=n,n=i.handler,o=i.selector),o&amp;&amp;de.find.matchesSelector(Ye,o),n.guid||(n.guid=de.guid++),(u=m.events)||(u=m.events=&#123;&#125;),(a=m.handle)||(a=m.handle=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>&#123;<span class="hljs-keyword">return</span><span class="hljs-string">&quot;undefined&quot;</span>!=<span class="hljs-keyword">typeof</span> de&amp;&amp;de.event.triggered!==t.type?de.event.dispatch.apply(e,<span class="hljs-built_in">arguments</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>&#125;),t=(t||<span class="hljs-string">&quot;&quot;</span>).match(qe)||[<span class="hljs-string">&quot;&quot;</span>],l=t.length;l--;)s=Ze.exec(t[l])||[],h=g=s[<span class="hljs-number">1</span>],d=(s[<span class="hljs-number">2</span>]||<span class="hljs-string">&quot;&quot;</span>).split(<span class="hljs-string">&quot;.&quot;</span>).sort(),h&amp;&amp;(f=de.event.special[h]||&#123;&#125;,h=(o?f.delegateType:f.bindType)||h,f=de.event.special[h]||&#123;&#125;,c=de.extend(&#123;<span class="hljs-attr">type</span>:h,<span class="hljs-attr">origType</span>:g,<span class="hljs-attr">data</span>:r,<span class="hljs-attr">handler</span>:n,<span class="hljs-attr">guid</span>:n.guid,<span class="hljs-attr">selector</span>:o,<span class="hljs-attr">needsContext</span>:o&amp;&amp;de.expr.match.needsContext.test(o),<span class="hljs-attr">namespace</span>:d.join(<span class="hljs-string">&quot;.&quot;</span>)&#125;,i),(p=u[h])||(p=u[h]=[],p.delegateCount=<span class="hljs-number">0</span>,f.setup&amp;&amp;f.setup.call(e,r,d,a)!==!<span class="hljs-number">1</span>||e.addEventListener&amp;&amp;e.addEventListener(h,a)),f.add&amp;&amp;(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?p.splice(p.delegateCount++,<span class="hljs-number">0</span>,c):p.push(c),de.event.global[h]=!<span class="hljs-number">0</span>)&#125;<br></code></pre></div></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitBook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°æ•…äº‹</title>
      <link href="2019/03/23/sheng-huo-xiao-gu-shi/"/>
      <url>2019/03/23/sheng-huo-xiao-gu-shi/</url>
      
        <content type="html"><![CDATA[<p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190517210307-%E8%8C%B6%20.jpg" alt="20190517210307-èŒ¶"></p><h3 id="å…³äºæ™šå®‰çš„äº‹"><a href="#å…³äºæ™šå®‰çš„äº‹" class="headerlink" title="å…³äºæ™šå®‰çš„äº‹"></a>å…³äºæ™šå®‰çš„äº‹</h3><p>æœ‰ä¸€å¤©ï¼Œå¤©å ‚æ”¾å‡ï¼Œä¸€ä¸ªå¤©ä½¿æ¥åˆ°äººé—´ï¼Œä¸ºäº†åŒ–è§£è‡ªå·±çš„æ— èŠï¼Œå¯¹ä¸€ä¸ªå¥³å­©è¯´ï¼Œæˆ‘å¯ä»¥å®ç°ä½ ä¸€ä¸ªæ„¿æœ›ï¼Œæƒåˆ©ï¼Œé‡‘é’±ï¼Œç¾è²Œï¼Œçˆ±æƒ…â€¦â€¦å¥³å­©æƒ³å¾—å¾ˆè®¤çœŸï¼Œå¤©ä½¿æœ‰äº›å®³æ€•ï¼Œå¦‚æœå¥¹è¯´ä¸€äº›ä»–å®ç°ä¸äº†çš„æ„¿æœ›ï¼Œä¼šå¾ˆæ²¡é¢å­ã€‚æ€»ä¹‹ä¸€å®šè¦è®©å¥¹çœ‹åˆ°å¤©ä½¿æ˜¯å¤šä¹ˆå‰å®³ï¼Œæˆ‘è¦å¥¹å´‡æ‹œæˆ‘ï¼Œæˆ‘è¦è®©å¥¹æ„Ÿæ¿€æˆ‘ã€‚â€œæˆ‘æƒ³æ¯å¤©ç¡å‰éƒ½èƒ½å¬åˆ°ä½ å¯¹æˆ‘è¯´æ™šå®‰ï¼â€å¤©ä½¿æƒŠè®¶äºå¦‚æ­¤ç®€å•çš„æ„¿æœ›ï¼Œå¿½ç„¶æœ‰ä¸€ç§å¤§æå°ç”¨çš„æ„Ÿæ…¨ã€‚â€œå¥½ï¼Œè¿™å¾ˆå®¹æ˜“ï¼â€å¤©ä½¿æ ¹æœ¬æ²¡æœ‰å¤šæƒ³ï¼Œå°±å¦‚æ­¤è½»æ˜“çš„ç­”åº”äº†ã€‚å¥³å­©ä¹Ÿå°±æ¬¢æ¬£é›€è·ƒï¼Œæ»¡å¿ƒæœŸå¾…ç€æ„¿æœ›ä¸€å¤©ä¸€å¤©å®ç°ã€‚æ™šä¸Šï¼Œåœ¨qqä¸Šï¼Œå¤©ä½¿å¯¹å¥³å­©è¯´ï¼šâ€œæ™šå®‰ï¼â€è¿˜ç”»äº†ä¸€ä¸ªï¼šâ€*â€ï¼Œè¯´è¿™æ˜¯ç»™å¥¹çš„æ™šå®‰kissã€‚å¥³å­©ä¹Ÿå°±æ»¡è¶³çš„ç¡å»ï¼Œæ¢¦éƒ½æ•£å‘ç€ç”œç”œçš„å‘³é“ã€‚ä¹Ÿå¶å°”ï¼Œç½‘å…³æ–­äº†ï¼Œå¤©ä½¿ä¹Ÿä¼šæ‰“ä¸ªç”µè¯ç»™å¥¹ï¼Œå¯¹å¥¹è¯´æ™šå®‰ï¼Œå¹¶åœ¨ç”µè¯çš„å¦ä¸€ç«¯äº²å¥¹çš„é¢å¤´ï¼Œç¥å¥¹å¥½æ¢¦ã€‚ä¸çŸ¥æ˜¯ä»ä½•æ—¶å¼€å§‹ï¼Œå¤©ä½¿è¦å¼€å§‹å¿™è‡ªå·±çš„äº‹æƒ…äº†ï¼Œä»–æˆ–è®¸æ˜¯å¤ªå¿™äº†ï¼Œè¿è¯´æ™šå®‰çš„æ—¶é—´éƒ½æ²¡æœ‰äº†ã€‚äºæ˜¯ï¼Œæ¯å¤©æ™šä¸Šï¼Œå¥³å­©éƒ½æ»¡æ€€æœŸå¾…çš„ç­‰ç€è‡ªå·±çš„æ™šå®‰ï¼Œå´æ¯æ™šéƒ½åœ¨å¤±è½ä¸­å…¥ç¡ï¼Œæ¢¦é‡Œï¼Œå¥³å­©ç«™åœ¨è¿œè¿œçš„åœ°æ–¹ï¼Œçœ‹ç€å¿™ç¢Œçš„å¤©ä½¿ï¼Œä»–æˆ–è®¸å¿™å¾—å¿˜è®°äº†æ™šå®‰çš„çº¦å®šï¼Œæˆ–è®¸ç­‰ä»–æœ‰ç©ºäº†ï¼Œä»–ä¼šæŠŠäºæ¬ çš„æ™šå®‰éƒ½è¡¥ç»™å¥¹ã€‚æœ€ç»ˆï¼Œå¤©ä½¿å¿™å¾—éƒ½å¿˜è®°äº†å¥³å­©ï¼Œç»ˆäºæ°¸è¿œçš„é£èµ°äº†ï¼Œå¸¦ç€é‚£è®¸å¤šäºæ¬ çš„æ™šå®‰ã€‚å¾ˆä¹…ä¹‹åï¼Œå¤©å ‚æ”¾å‡çš„æ—¥å­ï¼Œä¸€å¤§ç¾¤å¤©ä½¿æ¥åˆ°äººé—´ï¼Œä»–ä»¬é—®å¥³å­©ï¼Œæˆ‘ä»¬å¯ä»¥æ¯äººå¸®ä½ å®ç°ä¸€ä¸ªæ„¿æœ›ï¼Œæƒåˆ©ï¼Œé‡‘é’±ï¼Œç¾è²Œï¼Œçˆ±æƒ…ã€‚â€¦â€¦å¥³å­©å´æ²¡æœ‰è¯´å‡ºè‡ªå·±çš„æ„¿æœ›ï¼Œå¥¹çŸ¥é“ï¼Œè¿™æ˜¯ä¸ªç®€å•åˆ°æ— æ³•å®ç°çš„æ„¿æœ›ï¼Œå“ªæ€•æ˜¯å¤©ä½¿ï¼Œä¹Ÿä¸èƒ½ã€‚</p><h3 id="äººç”Ÿ"><a href="#äººç”Ÿ" class="headerlink" title="äººç”Ÿ"></a>äººç”Ÿ</h3><h5 id="26å²"><a href="#26å²" class="headerlink" title="26å²"></a>26å²</h5><p>ä½ çœ‹ç€èº«è¾¹çš„äººéƒ½ç»“äº†å©šï¼Œå©šç¤¼çš„ä»½å­é’±é€å¹´é€’å¢ã€‚æ˜¥èŠ‚å›å®¶ï¼Œçˆ¶æ¯ä»å¸¦ä½ ä¸²äº²æˆšï¼Œå˜æˆäº†å¸¦ä½ å»è§ç›¸äº²å¯¹è±¡ï¼Œè§äº†åå‡ ä¸ªå§‘å¨˜ï¼Œä½ æ¯æ¬¡éƒ½è§‰å¾—å’Œé‚£ä¸ªå¥¹ï¼Œå·®äº†ä¸€ç‚¹ã€‚</p><h5 id="28å²"><a href="#28å²" class="headerlink" title="28å²"></a>28å²</h5><p>ä½ é‡åˆ°äº†ä¸€ä¸ªå’Œä½ é­é‡å·®ä¸å¤šçš„å§‘å¨˜ï¼Œä½ ä»¬æœ‰ä¸€æ­æ²¡ä¸€æ­åœ°èŠç€ã€‚å¥¹è¯´ï¼šä½ è¿˜ä¸é”™ï¼Œä½ å–äº†ä¸€å£å¯ä¹è¯´ï¼šä½ ä¹Ÿæ˜¯ã€‚<br>ä½ è¿˜ä¸ç¡®å®šå–œä¸å–œæ¬¢å¥¹ï¼ŒåŒæ–¹å®¶é•¿å°±å·²ç»æ‘†å¥½äº†è®¢å©šå®´ã€‚<br>ç»“å©šçš„å‰ä¸€å‘¨ï¼Œä½ å’Œæœ‹å‹å‡ºå»å–é…’ã€‚ä½ è¯´ï¼šä¸æƒ³ç»“å©šï¼Œæœ‹å‹è¯´ï¼šä½ å•Šï¼Œå°±æ˜¯æƒ³å¤ªå¤šï¼Œè°ä¸æ˜¯è¿™ä¹ˆè¿‡æ¥çš„ï¼Ÿ</p><h5 id="29å²"><a href="#29å²" class="headerlink" title="29å²"></a>29å²</h5><p>ä½ ä»¬ç»ˆäºç»“äº†å©šï¼Œå©šç¤¼åŠå¾—ä¸å¤§ä¸å°ï¼Œæœ‹å‹æ¥å¾—ä¸å¤šä¸å°‘ã€‚æ”’äº†å‡ å¹´æƒ³è¦å»å®ç°ç†æƒ³çš„é’±ï¼Œæ­åœ¨äº†è¿™ä¸€åœºç™¾äººçš„ç§äººåº™ä¼šä¸Šã€‚<br>å©šç¤¼è¿›è¡Œåˆ°ä¸­é—´ï¼Œå¸ä»ªå¸¦ç€æ ‡å‡†çš„å•†ä¸šåŒ–å¾®ç¬‘ï¼Œå¯¹ç€å°ä¸‹çš„äº²æœ‹å–Šé“ï¼Œè¦ä¸è¦è®©ä»–ä»¬äº²ä¸€ä¸ªï¼Œå°ä¸‹é‚£äº›äººè·Ÿç€ä¸€èµ·èµ·å“„ã€‚<br>ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œä½ ç®€ç®€å•å•åœ°äº²äº†ä¸€å£ï¼Œä¿©äººæ¢å¤åˆ°äº†ä¸€å¼€å§‹çš„ç«™ä½ã€‚<br>ä½ å°å£°è¯´äº†ä¸€å¥ï¼šæˆ‘çˆ±ä½ ã€‚é‚£ä¸ªæ˜¨å¤©è¿˜çœ‹ä¸æƒ¯ä½ å€’è…¾æ¨¡å‹çš„æ–°å¨˜ï¼Œæ„£äº†ä¸€ä¸‹è¯´ï¼šæˆ‘ä¹Ÿçˆ±ä½ ã€‚<br>ä½ ä¸ç¡®å®šå¥¹æ˜¯ä¸æ˜¯å¯¹ä½ è¯´çš„ï¼Œå°±åƒä½ ä¸ç¡®å®šæ˜¯ä¸æ˜¯å¯¹å¥¹è¯´çš„ä¸€æ ·ã€‚<br>å©šç¤¼ç»“æŸåï¼Œå¹¶æ²¡æœ‰ä½ æƒ³è±¡å¾—æµªæ¼«ï¼Œä½ å¬ç€å¤–å±‹çš„æ–°å¨˜ä¸€ç¬”ä¸€ç¬”åœ°ç®—ç€ä»½å­é’±ã€‚æƒ³ç€ä¸è¿‡æ‰ä¸¤å¹´ï¼Œæ€ä¹ˆå°±å˜æˆè¿™æ ·äº†ã€‚<br>æƒ³ç€æƒ³ç€ï¼Œæ´æˆ¿å¤œå°±ç¡ç€äº†</p><h5 id="30å²"><a href="#30å²" class="headerlink" title="30å²"></a>30å²</h5><p>å¥¹æ€€å­•äº†ï¼Œè¾æ‰äº†å·¥ä½œï¼Œåœ¨å®¶å…»èƒã€‚ä½ åœ¨å…¬å¸é€æ¸æœ‰äº†ç‚¹åœ°ä½ï¼Œæ‰‹é‡Œç®¡ç€åæ¥ä¸ªäººï¼Œç‹¬ç«‹è´Ÿè´£ä¸€ä¸ªé¡¹ç›®ã€‚<br>ç»“å©šå‰é™ªå«çš„é‚£è¾†20ä¸‡å·¦å³çš„è½¦ä¹Ÿå˜æˆäº†ä½ ä¸€ä¸ªäººçš„ç‹¬äº«ï¼Œä½†ä½ ä¾ç„¶ä¸æ•¢æ”¾æ¾ã€‚<br>æ¯æ¬¡åŠ ç­ï¼Œç”µè¯é‚£å¤´éƒ½æ˜¯æŠ±æ€¨ä¸å§”å±ˆã€‚ä½†ä½ ä¸èƒ½äº‰è¾©ä»€ä¹ˆï¼Œè°è®©å¥¹æ€€äº†ä½ çš„å­©å­ã€‚<br>åœ¨è¿™ä¸€åˆ»ï¼Œä¸è®ºæ˜¯å¥¹çš„çˆ¶æ¯è¿˜æ˜¯ä½ çš„çˆ¶æ¯ï¼Œéƒ½æ— æ¡ä»¶åœ°ç«™åœ¨è¿™ä¸€è¾¹ã€‚</p><h5 id="31å²"><a href="#31å²" class="headerlink" title="31å²"></a>31å²</h5><p>å­©å­è½åœ°äº†ï¼Œå‰å‰ååè¿å­•æ£€åŠ ä¸Šä½é™¢è´¹èŠ±äº†10ä¸‡å—é’±ï¼Œä¸è¿‡æ— æ‰€è°“ï¼Œä½ çœ‹ç€ä½ çš„å­©å­ï¼Œæ€ä¹ˆçœ‹æ€ä¹ˆå–œæ¬¢ã€‚é«˜å…´å¾—ä»¿ä½›è¿™æ˜¯ä½ çš„æ–°ç”Ÿã€‚</p><h5 id="32å²"><a href="#32å²" class="headerlink" title="32å²"></a>32å²</h5><p>è¿™æ˜¯äººç”Ÿæœ€ä¸æ„¿æ„é‡å¤çš„ä¸€å¹´ï¼Œå¹³å‡ç¡çœ 3å°æ—¶ï¼Œå­©å­æ¯ä¸€ä¸ªå°æ—¶éƒ½è¦é—¹è…¾ä¸€æ¬¡ï¼Œç¬¬äºŒå¤©æ‹–ç€ç¡ä¸é†’çš„çœ¼ç›å»ä¸Šç­ã€‚<br>è€æ¿è¯´ä½ ä¸Šç­ä¸å¹²æ´»ï¼Œå›å®¶åª³å¦‡è¯´ä½ ä¸å¹²æ´»ã€‚ä½ æƒ³äº†åŠå¤©ä¸æ˜ç™½ï¼Œé‚£è°å¹²æ´»å‘¢ï¼Ÿ<br>é‚£è¾†å¼€äº†3å¹´çš„è½¦ï¼Œæˆä¸ºäº†ä½ çœŸæ­£çš„å®¶ï¼Œä½ ä¸åœ¨æŠ±æ€¨è·¯ä¸Šæ‹¥å µçš„äº¤é€šï¼Œä½ ç”šè‡³å¼€å§‹å¸Œæœ›å†å¤šå µä¸€ä¼šã€‚<br>å›åˆ°å®¶ï¼Œä½ å…³äº†å‘åŠ¨æœºï¼Œåœ¨è½¦ä¸Šç‚¹äº†ä¸€æ ¹çƒŸã€‚è¿™æ˜¯ä½ æ¯å¤©æœ€å¹¸ç¦çš„ååˆ†é’Ÿï¼Œè½¦å‰æ˜¯åŠŸååˆ©ç¦„ï¼Œè½¦å°¾æ˜¯æŸ´ç±³æ²¹ç›ã€‚<br>35å²<br>ä½ å› ä¸ºèº«ä½“è¶Šæ¥è¶Šå·®ï¼ŒåŠ ç­è¶Šæ¥è¶Šå°‘ï¼Œæ™‹å‡çš„é€Ÿåº¦ä¹Ÿè¶Šæ¥è¶Šç¼“æ…¢ ã€‚<br>é‚£å¤©ä¸‹ç­ï¼Œåª³å¦‡å‘Šè¯‰ä½ ï¼Œå­©å­è¦ä¸Šå¹¼å„¿å›­äº†ï¼ŒåŒè¯­çš„ä¸€ä¸ªæœˆ3000ï¼Œä½ çš±äº†çš±çœ‰å¤´ï¼Œé‚£è¾¹å°±å·²ç»ä¸è€çƒ¦äº†ã€‚<br>â€œå››å•å…ƒçš„è€ç‹å®¶å­©å­ï¼Œä¸€ä¸ªæœˆ6000â€â€œä½ å·²ç»è¿™æ ·äº†ï¼Œä½ æƒ³è®©å­©å­ä¹Ÿè¾“ï¼Ÿâ€<br>ä½ æ²¡è¯´è¯ï¼Œå›å±‹ç»™åª³å¦‡è½¬äº†6000å—é’±ã€‚è¿™ç¬”é’±ï¼Œä½ åŸæœ¬æ‰“ç®—ï¼Œç»™è‡ªå·±è¿‡ä¸ªç”Ÿæ—¥ï¼Œä¹°å°æ–°ç”µè„‘ã€‚</p><h5 id="38å²"><a href="#38å²" class="headerlink" title="38å²"></a>38å²</h5><p>å­©å­ä¸Šäº†ä¸€å¹´çº§ï¼Œè€å¸ˆè¯´ä¸€å¹´çº§æœ€å…³é”®ï¼Œæ‰“å¥½åŸºç¡€å¾ˆé‡è¦ã€‚ä½ ç¬‘ç€è¯´ï¼Œæ˜¯æ˜¯æ˜¯ï¼Œè€å¸ˆæ‚¨å¤šç…§é¡¾ã€‚<br>æ–°ç”Ÿæ¥å¾…çš„è€å¸ˆçœ‹ç€ä½ ä¸æ˜äº‹ç†çš„è„¸ï¼Œç»™ä½ æŒ‡äº†ä¸€æ¡æ˜è·¯ï¼Œè¯¾å¤–è¾…å¯¼ç­ï¼Œä¸€ä¸ªæœˆ2200ã€‚</p><h5 id="40å²"><a href="#40å²" class="headerlink" title="40å²"></a>40å²</h5><p>å­©å­ä¸Šäº†ä¸‰å¹´çº§ï¼Œè€å¸ˆè¯´ï¼Œä¸‰å¹´çº§ï¼Œæœ€å…³é”®ï¼Œæ‰¿ä¸Šå¯ä¸‹å¾ˆé‡è¦ã€‚ä½ ç¬‘ç€è¯´ï¼šæ˜¯æ˜¯æ˜¯ï¼Œæ­£æ‰“ç®—å†æŠ¥ä¸ªè¡¥ä¹ ç­ã€‚</p><h5 id="44å²"><a href="#44å²" class="headerlink" title="44å²"></a>44å²</h5><p>å­©å­ä¸Šäº†åˆä¸­ï¼Œæœ‰ä¸€å¤©å›åˆ°å®¶ï¼Œä»–å¯¹ä½ è¯´ï¼Œçˆ¸çˆ¸ï¼Œæˆ‘æƒ³å­¦é’¢ç´ã€‚ä½ æ²¡ä»€ä¹ˆçŠ¹è±«çš„ï¼Œä½ ä»¥ä¸ºè¿™äº›å¹´ï¼Œä½ å·²ç»ä¹ æƒ¯äº†ã€‚<br>ä½†é‚£å¥â€œçˆ¸çˆ¸ç°åœ¨ä¹°ä¸èµ·â€ä½ å§‹ç»ˆè¯´ä¸å‡ºå£ï¼Œå¥½åœ¨å­©å­æ¯”è¾ƒæ‡‚äº‹ã€‚ä»–è¯´ï¼šçˆ¸çˆ¸æ²¡äº‹ï¼Œè¦ä¸æˆ‘å…ˆå­¦é™¶ç¬›ä¹Ÿå¯ä»¥ï¼Œä½ çœ‹ç€è¿™ä¹ˆæ‡‚äº‹çš„å­©å­ï¼Œå´å¼€å¿ƒä¸èµ·æ¥ã€‚</p><h5 id="46å²"><a href="#46å²" class="headerlink" title="46å²"></a>46å²</h5><p>å­©å­ä¸Šäº†ä¸€ä¸ªä¸å¥½ä¸å·®çš„é«˜ä¸­ï¼Œæœ‰ä¸€å¤©ä½ åœ¨å¼€ä¼šï¼Œæ¥åˆ°äº†è€å¸ˆçš„ç”µè¯ï¼Œç”µè¯é‡Œè¯´ä½ çš„å­©å­åœ¨å­¦æ ¡æ‰“æ¶äº†ï¼Œå«ä½ å»ä¸€è¶Ÿã€‚ä½ å”¯å”¯è¯ºè¯ºåœ°å’Œé‚£ä¸ªæ¯”ä½ è¿˜å°5å²çš„é¢†å¯¼è¯·äº†ä¸ªå‡ã€‚<br>åˆ°å­¦æ ¡åˆè¢«è€å¸ˆè®­äº†ä¸€é€šï¼Œæ— éå°è¯å°±æ˜¯é‚£ä¸€å¥ï¼Œä½ ä»¬åšå®¶é•¿çš„å°±çŸ¥é“å·¥ä½œï¼Œèƒ½ä¸èƒ½é™ªé™ªå­©å­ã€‚<br>ä½ çœ‹ç€è¿™ä¸ªè€å¸ˆï¼Œæœ‰ç‚¹å¯ç¬‘ã€‚å¥½åƒå½“æ—¶è¯´ï¼Œå®¶é•¿åœ¨å¤–è¾›è‹¦ç‚¹ï¼Œå¤šèµšç‚¹é’±è®©å­©å­å¤šè¡¥è¡¥è¯¾çš„å’Œä»–ä¸æ˜¯ä¸€ä¸ªäººã€‚</p><h5 id="50å²"><a href="#50å²" class="headerlink" title="50å²"></a>50å²</h5><p>å­©å­ä¸Šäº†å¤§å­¦ï¼Œå¾ˆäº‰æ°”ï¼Œæ˜¯ä¸€ä¸ªä¸€æœ¬ã€‚ä»–å­¦çš„ä¸“ä¸šä½ æœ‰ç‚¹çœ‹ä¸æ‡‚ï¼Œä½ åªçŸ¥é“å·¥ä½œä¸ä¸€å®šå¥½æ‰¾è€Œä¸”å­¦è´¹è¿˜æ­»è´µã€‚<br>ä½ å’Œä»–æ·±å¤œæƒ³èŠèŠï¼Œå‡†å¤‡äº†åŠæ–¤ç™½é…’ï¼Œä¸€ç¢ŸèŠ±ç”Ÿç±³ï¼Œä½ è¯´ç€é‚£äº›æ›¾ç»ä½ æœ€è®¨åŒçš„è¯ã€‚â€•â€•è¿˜æ˜¯è¦ä¸ºä»¥åå·¥ä½œç€æƒ³ï¼ŒæŒ‘ä¸ªçƒ­é—¨çš„ä¸“ä¸šï¼Œæ´»ç€æ¯”çƒ­çˆ±é‡è¦ã€‚<br>ä½ ä»¬ä»äº¤æµå˜æˆäº†äº‰åµï¼Œä½ å‘ç°ï¼Œä½ è€äº†ï¼Œè€åˆ°å¯èƒ½éƒ½æ‰“ä¸è¿‡è¿™ä¸ª18å²çš„å­©å­ï¼Œä½ è¯´ä¸è¿‡ä»–ï¼Œåªèƒ½è¯´ä¸€å¥ï¼šæˆ‘æ˜¯ä½ çˆ¸çˆ¸ï¼<br>å­©å­çœ‹ç€ä½ ï¼ŒçŸ¥é“å†æ€ä¹ˆäº‰è¾©éƒ½æ²¡ç”¨ï¼Œè¿™åœºç¡®ç«‹ä½ æœ€åå¨ä¸¥çš„é…’å±€ä¸æ¬¢è€Œæ•£ã€‚<br>ä½ å¬å¾—ä¸çœŸåˆ‡ï¼Œåœ¨å­©å­å›è‡ªå·±å±‹çš„è·¯ä¸Šå¥½åƒå¨å¨äº†ä¸€å¥ï¼Œæˆ‘ä¸æƒ³æ´»å¾—åƒä½ ä¸€æ ·ã€‚<br>æ€ä¹ˆå°±å“­äº†å‘¢ï¼Ÿ50å²çš„äººäº†ã€‚<br>ä¸€å®šæ˜¯é…’å¤ªè¾£äº†ï¼Œå¯¹ä¸å¯¹ï¼Œä¸€å®šæ˜¯é…’å¤ªè¾£äº†ã€‚</p><h5 id="55å²"><a href="#55å²" class="headerlink" title="55å²"></a>55å²</h5><p>å­©å­å·¥ä½œäº†ï¼Œä¼¼ä¹æœ‰ä¸€ç‚¹ç†è§£ä½ äº†ï¼Œä½†ä½ å´åäº†è¿‡æ¥ï¼Œä½ è¯´ä¸è¦å¦¥åã€‚</p><h5 id="56å²"><a href="#56å²" class="headerlink" title="56å²"></a>56å²</h5><p>å­©å­ä¹Ÿç»“å©šäº†ï¼Œä½ é—®ä»–å–œæ¬¢é‚£ä¸ªå§‘å¨˜ä¹ˆã€‚ä»–æ„£äº†æ„£è¯´ï¼šå–œæ¬¢å§</p><h5 id="60å²"><a href="#60å²" class="headerlink" title="60å²"></a>60å²</h5><p>è¾›è‹¦äº†ä¸€è¾ˆå­ï¼Œæƒ³å‡ºå»èµ°èµ°ï¼Œèº«è¾¹çš„é‚£ä¸ªäººè¿‡äº†30å¹´ï¼Œä½ ä¾æ—§åˆ†ä¸æ¸…åˆ°åº•å–œä¸å–œæ¬¢ã€‚<br>ä½ ä»¬å¼€å§‹è§„åˆ’æ—…æ¸¸è·¯çº¿ï¼Œè¿™ä¹ˆå¤šå¹´äº†ï¼Œä½ ä»¬è¿˜æ˜¯å­˜åœ¨åˆ†æ­§ï¼Œè¿˜æ˜¯åœ¨äº‰åµã€‚æŸä¸ªç¬é—´ï¼Œä½ è§‰å¾—ï¼Œè¿™æ ·å¯èƒ½ä¹ŸæŒºå¥½ã€‚<br>ä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº†ï¼Œå„¿å­è¯´ï¼šçˆ¸å¦ˆï¼Œæˆ‘å·¥ä½œå¤ªå¿™äº†ï¼Œå¯ä»¥å¸®æˆ‘ç…§é¡¾ä¸€ä¸‹å­©å­ä¹ˆã€‚<br>ä½ ä»¬é€€äº†æœºç¥¨ï¼Œåˆå›åˆ°äº†30å¹´å‰ã€‚</p><h5 id="70å²"><a href="#70å²" class="headerlink" title="70å²"></a>70å²</h5><p>å­©å­çš„å­©å­ä¹Ÿé•¿å¤§äº†ï¼Œä¸ç”¨å¤©å¤©æ“å¿ƒäº†ï¼Œä½ ä¸‹å®šå†³å¿ƒè¯´ï¼šä¸€å®šè¦å»ç©ä¸€è¶Ÿã€‚å¯æ˜¯æ‰‹è¾¹çš„æ‹æ–ï¼Œåªèƒ½æ”¯æŒä½ èµ°åˆ°æ¥¼ä¸‹çš„èŠ±å›­ã€‚</p><h5 id="75å²"><a href="#75å²" class="headerlink" title="75å²"></a>75å²</h5><p>ä½ åœ¨åŒ»é™¢çš„ç—…åºŠä¸Šï¼Œèº«è¾¹èšæ»¡äº†äººï¼Œä½ è¿·è¿·ç³Šç³Šçš„çœ‹è§åŒ»ç”Ÿæ‘‡äº†æ‘‡å¤´ã€‚<br>å‘¨å›´é‚£äº›äººç¥æƒ…è‚ƒç©†ï¼Œä½ æ˜ç™½äº†ï¼Œä½ è¦æ­»æ‰äº†ã€‚ä½ æ²¡æœ‰æ„Ÿåˆ°ä¸€ä¸å®³æ€•ï¼Œä½ çªç„¶é—®è‡ªå·±ï¼Œæˆ‘åˆ°åº•æ˜¯ä»€ä¹ˆæ—¶å€™æ­»æ‰çš„å‘¢ï¼Ÿ<br>ä½ æƒ³èµ·æ¥30å²çš„é‚£åœºå©šç¤¼ï¼ŒåŸæ¥ï¼Œé‚£æ—¶å€™ä½ å°±æ­»æ‰äº†å§ã€‚<br>ä¾ç…§æƒ¯ä¾‹ï¼Œæ­»å‰çš„3ç§’ï¼Œä½ çš„å¤§è„‘è¦èµ°é©¬ç¯ï¼Œå€’å™ä½ è¿™75ä¸ªå¹´å¤´çš„ä¸€ç”Ÿï¼Œç”»é¢ä¸€å¼ ä¸€å¼ åœ°è¿‡ã€‚<br>1ç§’<br>2ç§’<br>ä¸¤ç§’è¿‡å»äº†ï¼Œä½ é¢æ— è¡¨æƒ…åœ°çœ‹ç€è¿™ä¸¤ç§’å†…çš„å›å¿†ã€‚<br>ç¬¬3ç§’ï¼Œçªç„¶ä½ ç¬‘äº†ï¼ŒåŸæ¥å·²ç»å›åˆ°äº†15å²çš„é‚£ä¸€å¹´ã€‚<br>ä½ çœ‹è§ä¸€ä¸ªç”·å­©ï¼Œä»–å¼ç€ä¸€è¢‹ç‰›å¥¶ï¼ŒèƒŒç€ä¹¦åŒ…ã€‚ä»å¦ä¸€ä¸ªå¥³å­©å®¶çš„é˜³å°ä¸‹è·‘è¿‡ï¼Œé‚£ä¸ªç”·å­©æœçª—æˆ·é‡Œçœ‹äº†çœ‹ã€‚<br>é‚£æ˜¯15å²çš„ä½ æš—æ‹çš„é‚£ä¸ªå¥³å­©å­ï¼Œä½ æƒ³ä¸èµ·æ¥å¥¹é•¿ä»€ä¹ˆæ ·å­äº†ï¼Œæœ€åä¸€ç§’ä½ åŠªåŠ›åœ°å›å¿†ç€ï¼Œç„¶åç»ˆäºç¬‘äº†å‡ºæ¥ã€‚<br>3ç§’è¿‡å»äº†<br>èº«è¾¹çš„äººçªç„¶é—´å¼€å§‹åšå••å¤§å“­ï¼Œä½ å¯èƒ½å¬ä¸æ¸…äº†ï¼Œä½ æœ€åå¬åˆ°çš„å˜ˆæ‚çš„å£°éŸ³ï¼Œæ˜¯ä¸€ç¾¤åäº”å…­çš„å°‘å¹´èµ·ç€å“„è¯´çš„â€•â€•<br>ç­”åº”ä»–ï¼Œç­”åº”ä»–ï¼Œç­”åº”ä»–ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
          <category> æ„Ÿæ‚Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ„Ÿæ‚Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¥æ¥æ¥ï¼Œä½ èƒ½çŒœå‡ºæ¥å—</title>
      <link href="2019/03/23/sheng-huo-xiao-hua-yi/"/>
      <url>2019/03/23/sheng-huo-xiao-hua-yi/</url>
      
        <content type="html"><![CDATA[<p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/20190517210413-%E5%91%BD%20.jpg" alt="20190517210413-å‘½"></p><a id="more"></a><h3 id="æ¥æ¥æ¥ï¼Œä½ èƒ½çŒœå‡ºæ¥å—"><a href="#æ¥æ¥æ¥ï¼Œä½ èƒ½çŒœå‡ºæ¥å—" class="headerlink" title="æ¥æ¥æ¥ï¼Œä½ èƒ½çŒœå‡ºæ¥å—"></a>æ¥æ¥æ¥ï¼Œä½ èƒ½çŒœå‡ºæ¥å—</h3><p> è€ƒè¯•å‰ï¼Œå°çº¢å¯¹å°æ˜è¯´ï¼Œå¦‚æœè¿™æ¬¡ä½ èƒ½è€ƒå…¨ç­ç¬¬ä¸€ï¼Œç°åœ¨å°±å’Œä½ å•ªå•ªå•ªã€‚å…¨ç­åŒå­¦éƒ½å¬åˆ°äº†ï¼Œè€ƒå·å‘ä¸‹æ¥åï¼Œå¤§å®¶éƒ½é»˜é»˜çš„æŠŠç¬”æ”¾ä¸‹ï¼Œæ‰“ç®—äº¤ç™½å·ã€‚å°æ˜çœ¼æ³›æ³ªå…‰ï¼Œçœ‹ç€è™èƒŒç†Šè…°200æ–¤çš„å°çº¢ï¼Œé»˜é»˜çš„æŠŠè¯•å·æ’•ç¢åƒäº†ï¼å°çº¢å¾®å¾®ä¸€ç¬‘ï¼Œåœ¨è‡ªå·±çš„è¯•å·ä¸Šå†™ä¸‹äº†å°æ˜çš„åå­—ã€‚è€å¸ˆæ”¹å·çš„æ—¶å€™æŠŠå”¯ä¸€ä¸€ä»½å†™ç­”æ¡ˆçš„è¯•å·æ‰”è¿›äº†ç¢çº¸æœºï¼Œæ¯•ç«Ÿå¥¹æ˜¯å°æ˜çš„æ¯äº²ï¼Œæ ¡é•¿åœ¨é—¨ç¼é‡Œçœ‹åˆ°äº†ï¼Œå·å·æŠŠä¸€å¼ è¯•å·å†™æ»¡ï¼Œå†™ä¸Šäº†å°æ˜çš„åå­—ï¼Œæ¯•ç«Ÿä»–å’Œå°çº¢å¦ˆå¦ˆçš„è‰ºæœ¯ç…§è¿˜åœ¨å°çº¢æ‰‹é‡Œï¼Œæ•™è‚²å±€é•¿å‘ç°äº†è¯•å·ï¼ŒæŠŠå®ƒç‚¹ç€çƒ§äº†ï¼Œä»–æ»¡æ„çš„çœ‹ç€ç«å…‰æƒ³èµ·äº†å°æ˜å«©æ»‘æ»‘çš„èº«ä½“ã€‚å¸‚é•¿æ”¶åˆ°æ¶ˆæ¯ï¼Œå·å¤©æ¢æ—¥èˆ¬çš„æŠŠå°åˆšçš„è¯•å·æ¢æˆå°æ˜çš„ï¼Œæ¯•ç«Ÿå°çº¢æœ‰äº†å°æ˜å°±ä¸ä¼šå†æ¥æ‰“æ‰°ä»–äº†ã€‚çœé•¿ååœ¨åŠå…¬å®¤é»˜é»˜çš„æ³¨è§†ç€å±å¹•ä¸Šæ˜¾ç¤ºå‡ºæ¥çš„å¸‚é•¿çš„ä¸€ä¸¾ä¸€åŠ¨ï¼Œä¸€é“å‘½ä»¤ä¸‹å»ï¼Œå­¦æ ¡åŠå…¬å®¤ç€ç«äº†ï¼Œæ¯•ç«Ÿå°æ˜å¯æ˜¯ä»–çš„å„¿å­ã€‚ç„¶è€Œå¤§å®¶éƒ½ä¸çŸ¥é“å‰¯æ ¡é•¿æ—©å°±æŠŠè¯•å·å·å·çš„æ‹¿åˆ°äº†è‡ªå·±çš„åŠå…¬å®¤ç„¶åèµ°å‘ä¹¦æ¶åé¢çš„æš—é—¨è·ªåœ¨äº†å°çº¢çš„é¢å‰ï¼Œå°çº¢ä¸€è¾¹è„±ä¸‹å‡é¢å…·å’Œçœ‹èµ·æ¥ä¸¤ç™¾æ–¤çš„åšçš„è¡£æœéœ²å‡ºäº†å€¾å›½å€¾åŸçš„é¢å®¹å’Œè‹—æ¡çš„èº«æä¸€è¾¹ç”¨é£é“ƒèˆ¬çš„å£°éŸ³è¯´ç€â€œå…³äºçˆ±æƒ…æˆ‘ä»¬æ°¸è¿œéƒ½ä¸çŸ¥é“ä»–ä¼šå‘ç”Ÿäº›ä»€ä¹ˆâ€å‰¯æ ¡é•¿é¡ºä»çš„è¯´ç€â€œæ˜¯å•Šæ˜¯å•Šâ€éšå³å«ä½äº†å°çº¢é‚£æ¯”è‡ªå·±è¿˜å¤§çš„ä¸ä¸ï¼Œé™¶é†‰çš„é—­ä¸Šäº†çœ¼</p>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
          <category> ç¬‘è¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬‘è¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoåšå®¢é…ç½®æ•™ç¨‹</title>
      <link href="2019/03/23/jiao-cheng-hexo-bo-ke-pei-zhi-jiao-cheng/"/>
      <url>2019/03/23/jiao-cheng-hexo-bo-ke-pei-zhi-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<p>å®ç°Hexo + GitHub æ­å»ºåšå®¢ã€‚</p><h2 id="Hexoç®€ä»‹"><a href="#Hexoç®€ä»‹" class="headerlink" title="Hexoç®€ä»‹"></a>Hexoç®€ä»‹</h2><p>Hexoæ˜¯ä¸€æ¬¾åŸºäºNode.jsçš„é™æ€åšå®¢æ¡†æ¶ï¼Œä¾èµ–å°‘æ˜“äºå®‰è£…ä½¿ç”¨ï¼Œå¯ä»¥æ–¹ä¾¿çš„ç”Ÿæˆé™æ€ç½‘é¡µæ‰˜ç®¡åœ¨GitHubå’ŒCodingä¸Šï¼Œæ˜¯æ­å»ºåšå®¢çš„é¦–é€‰æ¡†æ¶ã€‚å¤§å®¶å¯ä»¥è¿›å…¥hexoå®˜ç½‘è¿›è¡Œè¯¦ç»†æŸ¥çœ‹ï¼Œå› ä¸ºHexoçš„åˆ›å»ºè€…æ˜¯å°æ¹¾äººï¼Œå¯¹ä¸­æ–‡çš„æ”¯æŒå¾ˆå‹å¥½ï¼Œå¯ä»¥é€‰æ‹©ä¸­æ–‡è¿›è¡ŒæŸ¥çœ‹ã€‚</p><blockquote><p>æ³¨æ„: æŸ¥çœ‹<a href="https://hexo.io/docs/">æ–‡æ¡£</a>ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚å¦‚æœä½¿ç”¨Hexoæ—¶é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥åœ¨<a href="https://hexo.io/docs/troubleshooting.html">æ•…éšœæ’é™¤</a>ä¸­æ‰¾åˆ°ç­”æ¡ˆï¼Œæˆ–è€…å¯ä»¥åœ¨<a href="https://github.com/hexojs/hexo/issues">GitHub</a>ä¸Šè¯¢é—®ã€‚</p></blockquote><h2 id="hexoæ•™ç¨‹"><a href="#hexoæ•™ç¨‹" class="headerlink" title="hexoæ•™ç¨‹"></a>hexoæ•™ç¨‹</h2><ol><li><p>gitå’Œnodejså®‰è£…å¥½åï¼Œå°±å¯ä»¥å®‰è£…hexoäº†</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">npm install hexo-cli -g<br>npm install hexo --save<br></code></pre></div></td></tr></table></figure><p>ä¾æ—§ç”¨hexo -væŸ¥çœ‹ä¸€ä¸‹ç‰ˆæœ¬</p><p>è‡³æ­¤å°±å…¨éƒ¨å®‰è£…å®Œäº†ã€‚</p></li><li><p>æ¥ä¸‹æ¥åˆå§‹åŒ–ä¸€ä¸‹hexo</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">hexo init<br></code></pre></div></td></tr></table></figure></li><li><p>åˆ›å»ºä¸€ä¸ªæ–°å¸–å­</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;æˆ‘çš„æ–°å¸–å­&quot;</span><br></code></pre></div></td></tr></table></figure><p>æ›´å¤šä¿¡æ¯ï¼š<a href="https://hexo.io/docs/writing.html">å†™ä½œ</a></p></li><li><p>è¿è¡ŒæœåŠ¡å™¨</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ hexo server<br></code></pre></div></td></tr></table></figure><p>æ›´å¤šä¿¡æ¯ï¼š<a href="https://hexo.io/docs/server.html">æœåŠ¡å™¨</a></p></li><li><p>ç”Ÿæˆé™æ€æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ hexo generate<br></code></pre></div></td></tr></table></figure><p>æ›´å¤šä¿¡æ¯ï¼š<a href="https://hexo.io/docs/generating.html">ç”Ÿæˆ</a></p></li><li><p>éƒ¨ç½²åˆ°è¿œç¨‹ç«™ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></div></td></tr></table></figure><p>æ›´å¤šä¿¡æ¯ï¼š<a href="https://hexo.io/docs/deployment.html">éƒ¨ç½²</a></p></li></ol><h2 id="Hexoä¸­æ·»åŠ æœ¬åœ°å›¾ç‰‡"><a href="#Hexoä¸­æ·»åŠ æœ¬åœ°å›¾ç‰‡" class="headerlink" title="Hexoä¸­æ·»åŠ æœ¬åœ°å›¾ç‰‡"></a>Hexoä¸­æ·»åŠ æœ¬åœ°å›¾ç‰‡</h2><ol><li><p>æŠŠä¸»é¡µé…ç½®æ–‡ä»¶<code>_config.yml</code> é‡Œçš„<code>post_asset_folder:</code>è¿™ä¸ªé€‰é¡¹è®¾ç½®ä¸º<code>true</code></p></li><li><p>åœ¨ä½ çš„hexoç›®å½•ä¸‹æ‰§è¡Œè¿™æ ·ä¸€å¥è¯<code>npm install hexo-asset-image --save</code>ï¼Œè¿™æ˜¯ä¸‹è½½å®‰è£…ä¸€ä¸ªå¯ä»¥ä¸Šä¼ æœ¬åœ°å›¾ç‰‡çš„æ’ä»¶</p></li><li><p>ç­‰å¾…ä¸€å°æ®µæ—¶é—´åï¼Œå†è¿è¡Œ<code>hexo n &quot;xxxx&quot;</code>æ¥ç”Ÿæˆmdåšæ–‡æ—¶ï¼Œ<code>/source/_posts</code>æ–‡ä»¶å¤¹å†…é™¤äº†<code>xxxx.md</code>æ–‡ä»¶è¿˜æœ‰ä¸€ä¸ªåŒåçš„æ–‡ä»¶å¤¹</p></li><li><p>æœ€ååœ¨<code>xxxx.md</code>ä¸­æƒ³å¼•å…¥å›¾ç‰‡æ—¶ï¼Œå…ˆæŠŠå›¾ç‰‡å¤åˆ¶åˆ°<code>xxxx</code>è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œç„¶ååªéœ€è¦åœ¨<code>xxxx.md</code>ä¸­æŒ‰ç…§markdownçš„æ ¼å¼å¼•å…¥å›¾ç‰‡ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs markdown">![<span class="hljs-string">ä½ æƒ³è¾“å…¥çš„æ›¿ä»£æ–‡å­—</span>](<span class="hljs-link">xxxx/å›¾ç‰‡å.jpg</span>)<br></code></pre></div></td></tr></table></figure><blockquote><p><code>xxxx</code>æ˜¯è¿™ä¸ªmdæ–‡ä»¶çš„åå­—ï¼Œä¹Ÿæ˜¯åŒåæ–‡ä»¶å¤¹çš„åå­—ã€‚åªéœ€è¦æœ‰æ–‡ä»¶å¤¹åå­—å³å¯ï¼Œä¸éœ€è¦æœ‰ä»€ä¹ˆç»å¯¹è·¯å¾„ã€‚ä½ æƒ³å¼•å…¥çš„å›¾ç‰‡å°±åªéœ€è¦æ”¾å…¥<code>xxxx</code>è¿™ä¸ªæ–‡ä»¶å¤¹å†…å°±å¥½äº†ï¼Œå¾ˆåƒå¼•ç”¨ç›¸å¯¹è·¯å¾„ã€‚</p></blockquote></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flaskæ˜“é”™ç‚¹</title>
      <link href="2019/03/22/flask-yi-cuo-dian/"/>
      <url>2019/03/22/flask-yi-cuo-dian/</url>
      
        <content type="html"><![CDATA[<h4 id="1-withä¸Šä¸‹æ–‡ç®¡ç†å™¨"><a href="#1-withä¸Šä¸‹æ–‡ç®¡ç†å™¨" class="headerlink" title="1 withä¸Šä¸‹æ–‡ç®¡ç†å™¨"></a>1 withä¸Šä¸‹æ–‡ç®¡ç†å™¨</h4><p>å¸¸ç”¨ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;file_name&quot;</span>,<span class="hljs-string">&quot;wb&quot;</span>) <span class="hljs-keyword">as</span> f:<br>f.write(<span class="hljs-string">&quot;hello flask&quot;</span>)<br></code></pre></div></td></tr></table></figure><p>è‡ªå®šä¹‰ï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span>(<span class="hljs-params">gbiect</span>):</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__enter__</span>(<span class="hljs-params">self</span>):</span><br><span class="hljs-string">&quot;&quot;&quot;è¿›å…¥withè¯­å¥çš„æ—¶å€™è¢«withè°ƒç”¨&quot;&quot;&quot;</span><br>print(<span class="hljs-string">&quot;enter called&quot;</span>)<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__exit_</span>(<span class="hljs-params">self, exc_type, exc_val, exc_tb</span>):</span><br><span class="hljs-string">&quot;&quot;&quot;ç¦»å¼€withè¯­å¥çš„æ—¶å€™è¢«withè°ƒç”¨&quot;&quot;&quot;</span><br>        print(<span class="hljs-string">&quot;exit called&quot;</span>)<br>        print(<span class="hljs-string">&quot;exc_type:%s&quot;</span> % exc_type)<br>        print(<span class="hljs-string">&quot;exc_val:9%s&quot;</span> % exc_val)<br>print(<span class="hljs-string">&quot;exc_tb:%s&quot;</span>%exc_tb)<br><br><span class="hljs-keyword">with</span> Foo() <span class="hljs-keyword">as</span> foo:<br>    print(<span class="hljs-string">&quot;helto python&quot;</span>)<br>    a=<span class="hljs-number">1</span>/<span class="hljs-number">0</span><br>    print(<span class="hljs-string">&quot;hello end&quot;</span>)<br></code></pre></div></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><blockquote><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">enter called <br>Traceback (most recent call last): <br>hello python <br>File<span class="hljs-string">&quot;/Users/delron/Desktop/code/03 with. py&quot;</span>, line 39, <span class="hljs-keyword">in</span> &lt;module&gt;<br><span class="hljs-built_in">exit</span> called<br>     a=1/0<br>ZeroDivisionError: <span class="hljs-built_in">integer</span> division or modulo by zero <br>exc_type:&lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27; exceptions. ZeroDivisionError&#x27;</span>&gt;<br>exc_val: <span class="hljs-built_in">integer</span> division or modulo by zero <br>exc_tb:&lt;traceback object at 0x1097bc440&gt;<br><br>Process finished with <span class="hljs-built_in">exit</span> code 1<br></code></pre></div></td></tr></table></figure></blockquote><h4 id="2-jsonæ¨¡å—"><a href="#2-jsonæ¨¡å—" class="headerlink" title="2 jsonæ¨¡å—"></a>2 jsonæ¨¡å—</h4><p>dumps  â€”&gt; å¯ä»¥å°†å­—å…¸è½¬æ¢ä¸ºå­—ç¬¦ä¸²</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br>data = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;python&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">18</span>&#125;<br>json_str = json.dumps(data)<br>print(<span class="hljs-built_in">type</span>(json_str), json_str)<br></code></pre></div></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">str</span>      &#123;<span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">18</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;python&quot;</span>&#125;<br></code></pre></div></td></tr></table></figure><p>loads â€”â€”&gt; å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—å…¸</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br>a = <span class="hljs-string">&#x27;&#123;&quot;city&quot;: &quot;sz&quot;, &quot;country&quot;: &quot;china&quot;&#125;&#x27;</span><br>b = json.loads(a)<br>print(<span class="hljs-built_in">type</span>(b), b)<br></code></pre></div></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">dict</span>      &#123;<span class="hljs-string">&quot;city&quot;</span>: <span class="hljs-string">&quot;sz&quot;</span>, <span class="hljs-string">&quot;country&quot;</span>: <span class="hljs-string">&quot;china&quot;</span>&#125;<br></code></pre></div></td></tr></table></figure><h4 id="3-xssæ”»å‡»"><a href="#3-xssæ”»å‡»" class="headerlink" title="3 xssæ”»å‡»"></a>3 xssæ”»å‡»</h4><p>å½“å‰æ®µä¼ é€è¿‡æ¥çš„æ•°æ®é»˜è®¤è¿›è¡Œè½¬ä¹‰ï¼Œå¦åˆ™ï¼Œåˆ™ä¼šé»˜è®¤æ‰§è¡Œå‰ç«¯ä¼ é€çš„æ•°æ®ï¼Œåˆ™ç§°ä¸ºxssæ”»å‡»</p><h4 id="4-flask-å’Œmysql"><a href="#4-flask-å’Œmysql" class="headerlink" title="4 flask å’Œmysql"></a>4 flask å’Œmysql</h4><p><strong>Linuxï¼š</strong></p><p><em>flaskä½¿ç”¨mysqlæ•°æ®åº“éœ€è¦ï¼š</em></p><ol><li><strong>pymysql</strong></li><li><strong>sqlalchemy</strong></li><li><strong>flask_sqlalchemy</strong></li></ol><p><strong>windowsï¼š</strong></p><p><strong><em>Flaskåˆ©ç”¨pymysqlå‡ºç°Warningï¼š1366çš„è§£å†³åŠæ³•</em></strong></p><p><em>flaskä½¿ç”¨mysqlæ•°æ®åº“éœ€è¦ï¼š</em></p><ol><li><p><strong>mysql-connector-python</strong></p></li><li><p><strong>sqlalchemy</strong></p></li><li><p><strong>flask_sqlalchemy</strong></p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">SQLALCHEMY_DATABASE_URI = <span class="hljs-string">&quot;mysql+mysqlconnector://root:mysql@localhost/ihome01&quot;</span><br></code></pre></div></td></tr></table></figure><h4 id="5-è£…é¥°å™¨"><a href="#5-è£…é¥°å™¨" class="headerlink" title="5 è£…é¥°å™¨"></a>5 è£…é¥°å™¨</h4></li></ol><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>():</span><br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;index page&quot;</span><br></code></pre></div></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>():</span><br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;index page&quot;</span><br>app.route(<span class="hljs-string">&quot;/)(index)</span><br></code></pre></div></td></tr></table></figure><p>è£…é¥°å™¨ä¸ä»…ä»…æ˜¯å®šä¹‰æ—¶å¯ä»¥ç”¨ï¼Œè¿˜å¯ä»¥åœ¨å®šä¹‰å®Œå†ä½¿ç”¨</p><h4 id="6-è‡ªå®šä¹‰æ­£åˆ™è½¬æ¢å™¨åŠè“å›¾"><a href="#6-è‡ªå®šä¹‰æ­£åˆ™è½¬æ¢å™¨åŠè“å›¾" class="headerlink" title="6 è‡ªå®šä¹‰æ­£åˆ™è½¬æ¢å™¨åŠè“å›¾"></a>6 è‡ªå®šä¹‰æ­£åˆ™è½¬æ¢å™¨åŠè“å›¾</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> werkzeug.routing <span class="hljs-keyword">import</span> BaseConverter<br><br><span class="hljs-comment"># å®šä¹‰æ­£åˆ™è½¬æ¢å™¨</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReConverter</span>(<span class="hljs-params">BaseConverter</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, url_map, regex</span>):</span><br>        <span class="hljs-comment"># è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–æ–¹æ³•</span><br>        <span class="hljs-built_in">super</span>(ReConverter, self).__init__(url_map)<br>        <span class="hljs-comment"># é‡æ–°èµ‹å€¼</span><br>        self.regex = regex<br></code></pre></div></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># æ·»åŠ è‡ªå®šä¹‰çš„è½¬æ¢å™¨</span><br>  app.url_map.converters[<span class="hljs-string">&quot;re&quot;</span>] = ReConverter<br></code></pre></div></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Blueprint, current_app<br><br>html = Blueprint(<span class="hljs-string">&quot;web_html&quot;</span>, __name__)<br><br><span class="hljs-meta">@html.route(<span class="hljs-params"><span class="hljs-string">&quot;/&lt;re(r&#x27;.*&#x27;):file_name&gt;&quot;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">web_html</span>(<span class="hljs-params">file_name</span>):</span><br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> file_name:<br>        file_name = <span class="hljs-string">&quot;index.html&quot;</span><br><br>    <span class="hljs-keyword">if</span> file_name != <span class="hljs-string">&quot;favicon.ico&quot;</span>:<br>        file_name = <span class="hljs-string">&quot;html/&quot;</span> + file_name<br><br>    <span class="hljs-keyword">return</span> current_app.send_static_file(file_name)<br></code></pre></div></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># æ³¨å†Œè“å›¾</span><br>app.register_blueprint(html)<br></code></pre></div></td></tr></table></figure><h4 id="7-ç™»å½•è£…é¥°å™¨"><a href="#7-ç™»å½•è£…é¥°å™¨" class="headerlink" title="7 ç™»å½•è£…é¥°å™¨"></a>7 ç™»å½•è£…é¥°å™¨</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># å®šä¹‰éªŒè¯ç™»å½•çŠ¶æ€çš„è£…é¥°å™¨</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">login_required</span>(<span class="hljs-params">view_func</span>):</span><br>    <span class="hljs-comment"># wrapså‡½æ•°çš„ä½œç”¨æ˜¯å°†wrapperå†…å±‚å‡½æ•°çš„å±æ€§è®¾ç½®ä¸ºè¢«è£…é¥°å‡½æ•°view_funcçš„å±æ€§</span><br><span class="hljs-meta">    @functools.wraps(<span class="hljs-params">view_func</span>)</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):</span><br>        <span class="hljs-comment"># åˆ¤æ–­ç”¨æˆ·ç™»å½•çŠ¶æ€</span><br>        user_id = session.get(<span class="hljs-string">&quot;user_id&quot;</span>)<br><br>        <span class="hljs-comment"># å¦‚æœç”¨æˆ·æ˜¯ç™»å½•çŠ¶æ€ï¼Œåˆ™æ‰§è¡Œç™»å½•çŠ¶æ€</span><br>        <span class="hljs-keyword">if</span> user_id <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-comment"># å°†user_idä¿å­˜åˆ°gå¯¹è±¡ä¸­ï¼Œåœ¨è§†å›¾å‡½æ•°ä¸­ï¼Œå¯ä»¥é€šè¿‡gå¯¹è±¡è·å–ä¿å­˜æ•°æ®</span><br>            g.user_id = user_id<br>            <span class="hljs-keyword">return</span> view_func(*args, **kwargs)<br>        <span class="hljs-comment"># å¦‚æœæœªç™»å½•ï¼Œåˆ™è¿”å›æœªç™»å½•ä¿¡æ¯</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> jsonify(errno=RET.SESSIONERR, errmsg=<span class="hljs-string">&quot;ç”¨æˆ·æœªç™»å½•&quot;</span>)<br>    <span class="hljs-keyword">return</span> wrapper<br></code></pre></div></td></tr></table></figure><h4 id="8-è§†å›¾å‡½æ•°"><a href="#8-è§†å›¾å‡½æ•°" class="headerlink" title="8 è§†å›¾å‡½æ•°"></a>8 è§†å›¾å‡½æ•°</h4><ol><li>è·¯ç”±åŒ¹é…ä¸èƒ½å‡ºç°ç›¸åŒçš„åœ°å€ï¼Œå³åŒä¸€åœ°å€ï¼Œä¸èƒ½å‡ºç°ä¸¤ä¸ªè§†å›¾å‡½æ•°</li><li>è·¯ç”±åŒ¹é…ä¸èƒ½å‡ºç°ä¸åŒçš„å‡½æ•°ï¼Œå³ä¸åŒçš„åœ°å€ï¼Œä¸èƒ½å‡ºç°ç›¸åŒçš„å‡½æ•°å</li></ol><h4 id="9-å‚æ•°è·å–"><a href="#9-å‚æ•°è·å–" class="headerlink" title="9 å‚æ•°è·å–"></a>9 å‚æ•°è·å–</h4><ol><li><p>ç›´æ¥ä»requestä¸­è·å–jsonæ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå­—å…¸</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">house_data = request.get_json()<br></code></pre></div></td></tr></table></figure></li><li><p>ä»requestä¸­è·å–æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">image_file = request.files.get(<span class="hljs-string">&quot;house_image&quot;</span>)<br></code></pre></div></td></tr></table></figure></li><li><p>ä»requestä¸­çš„formè¡¨å•ä¸­è·å–é”®å€¼å¯¹</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">house_id = request.form.get(<span class="hljs-string">&quot;house_id&quot;</span>)<br></code></pre></div></td></tr></table></figure><h4 id="10-æ•°æ®åº“æ“ä½œ"><a href="#10-æ•°æ®åº“æ“ä½œ" class="headerlink" title="10 æ•°æ®åº“æ“ä½œ"></a>10 æ•°æ®åº“æ“ä½œ</h4></li></ol><p>â€‹    åœ¨åŒä¸€è§†å›¾å‡½æ•°ä¸­ï¼Œå¯ä»¥å¯¹å¯¹è±¡å¤šæ¬¡ä¿®æ”¹ï¼Œåªæäº¤ä¸€æ¬¡å³å¯</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">db.session.add(house_image)<br>db.session.add(house)<br><br><span class="hljs-keyword">try</span>:<br>    db.session.commit()<br><span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>    current_app.logger.error(e)<br>    db.session.rollback()<br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ˜“é”™ç‚¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DjangoåŸºç¡€(ä¸€)-é¡¹ç›®æµç¨‹</title>
      <link href="2019/03/22/django-1-xiang-mu-liu-cheng/"/>
      <url>2019/03/22/django-1-xiang-mu-liu-cheng/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬æµç¨‹"><a href="#åŸºæœ¬æµç¨‹" class="headerlink" title="åŸºæœ¬æµç¨‹"></a>åŸºæœ¬æµç¨‹</h2><p>ä½¿ç”¨å‘½ä»¤<code>django-admin startproject djangodemo</code>,åˆ›å»ºDjangoé¡¹ç›®</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">|-- djangodemo<br>|    |-- __init__.py  <span class="hljs-comment"># è¯´æ˜booktestæ˜¯ä¸€ä¸ªpythonåŒ…ã€‚</span><br>|    |-- settings.py <span class="hljs-comment"># é¡¹ç›®çš„é…ç½®æ–‡ä»¶ã€‚</span><br>|    |-- urls.py  <span class="hljs-comment"># è¿›è¡Œurlè·¯ç”±çš„é…ç½®ã€‚</span><br>|    |-- wsgi.py  <span class="hljs-comment"># webæœåŠ¡å™¨å’ŒDjangoäº¤äº’çš„å…¥å£ã€‚</span><br>|<br>|-- manage.py  <span class="hljs-comment"># é¡¹ç›®çš„ç®¡ç†æ–‡ä»¶ã€‚</span><br><br></code></pre></div></td></tr></table></figure><p>ä½¿ç”¨å‘½ä»¤<code>python manage.py startapp books</code>, åˆ›å»ºDjangoApp</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">|- books<br>    |- __init__.py  <span class="hljs-comment"># è¯´æ˜ç›®å½•æ˜¯ä¸€ä¸ªPythonæ¨¡å—ã€‚</span><br>    |- models.py  <span class="hljs-comment"># å†™å’Œæ•°æ®åº“é¡¹ç›®çš„å†…å®¹, è®¾è®¡æ¨¡å‹ç±»ã€‚</span><br>    |- views.py  <span class="hljs-comment"># æ¥æ”¶è¯·æ±‚ï¼Œè¿›è¡Œå¤„ç†ï¼Œä¸Må’ŒTè¿›è¡Œäº¤äº’ï¼Œè¿”å›åº”ç­”ã€‚å®šä¹‰å¤„ç†å‡½æ•°ï¼Œè§†å›¾å‡½æ•°ã€‚</span><br>    |- tests.py  <span class="hljs-comment"># å†™æµ‹è¯•ä»£ç çš„æ–‡ä»¶ã€‚</span><br>    |- admin.py  <span class="hljs-comment"># ç½‘ç«™åå°ç®¡ç†ç›¸å…³çš„æ–‡ä»¶ã€‚</span><br></code></pre></div></td></tr></table></figure><h2 id="é¡¹ç›®é…ç½®"><a href="#é¡¹ç›®é…ç½®" class="headerlink" title="é¡¹ç›®é…ç½®"></a>é¡¹ç›®é…ç½®</h2><blockquote><p>ä¿®æ”¹é¡¹ç›®æ ¹ç›®ä¸‹çš„<code>settings.py</code>æ–‡ä»¶</p></blockquote><h3 id="æ³¨å†ŒApp"><a href="#æ³¨å†ŒApp" class="headerlink" title="æ³¨å†ŒApp"></a>æ³¨å†ŒApp</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">INSTALLED_APPS = [<br>    <span class="hljs-string">&#x27;django.contrib.admin&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.auth&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.contenttypes&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.sessions&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.messages&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.staticfiles&#x27;</span>,<br>    <span class="hljs-string">&#x27;books&#x27;</span>, <span class="hljs-comment"># åº”ç”¨å</span><br>  ]<br></code></pre></div></td></tr></table></figure><h3 id="é…ç½®æ•°æ®åº“"><a href="#é…ç½®æ•°æ®åº“" class="headerlink" title="é…ç½®æ•°æ®åº“"></a>é…ç½®æ•°æ®åº“</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">DATABASES = &#123;<br>      <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>          <span class="hljs-comment"># &#x27;ENGINE&#x27;: &#x27;django.db.backends.sqlite3&#x27;,</span><br>          <span class="hljs-comment"># &#x27;NAME&#x27;: os.path.join(BASE_DIR, &#x27;db.sqlite3&#x27;),</span><br><br>          <span class="hljs-string">&#x27;ENGINE&#x27;</span>: <span class="hljs-string">&#x27;django.db.backends.mysql&#x27;</span>,<br>          <span class="hljs-string">&#x27;NAME&#x27;</span>: <span class="hljs-string">&#x27;djangodemo&#x27;</span>,  <span class="hljs-comment"># ä½¿ç”¨çš„æ•°æ®åº“åå­—ï¼Œæ•°æ®åº“å¿…é¡»æ‰‹åŠ¨åˆ›å»º</span><br>          <span class="hljs-string">&#x27;USER&#x27;</span>: <span class="hljs-string">&#x27;root&#x27;</span>,  <span class="hljs-comment"># è¿æ¥mysqlçš„ç”¨æˆ·å</span><br>          <span class="hljs-string">&#x27;PASSWORD&#x27;</span>: <span class="hljs-string">&#x27;mysql&#x27;</span>,  <span class="hljs-comment"># ç”¨æˆ·åå¯¹åº”çš„å¯†ç </span><br>          <span class="hljs-string">&#x27;HOST&#x27;</span>: <span class="hljs-string">&#x27;localhost&#x27;</span>,  <span class="hljs-comment"># æŒ‡å®šmysqlæ•°æ®åº“æ‰€åœ¨ç”µè„‘çš„IP</span><br>          <span class="hljs-string">&#x27;PORT&#x27;</span>: <span class="hljs-number">3306</span>,  <span class="hljs-comment"># mysqlæœåŠ¡å™¨çš„ç«¯å£å·</span><br>      &#125;<br>  &#125;<br></code></pre></div></td></tr></table></figure><blockquote><p><strong>æ³¨æ„:</strong>  mysqlæ•°æ®åº“<strong>é“¾æ¥é©±åŠ¨</strong>ï¼Œdjango2.xä¹‹åï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨ <code>mysqlclient</code>,è‹¥éè¦ä½¿ç”¨ <code>pymysql</code>ï¼Œè¿˜éœ€è¦å¦‚ä¸‹é…ç½®</p></blockquote><p>åœ¨ä¸<code>settings.py</code>åŒçº§çš„<code>__init__.py</code>æ–‡ä»¶ä¸­æ·»åŠ :</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pymysql<br>pymysql.install_as_MySQLdb()<br></code></pre></div></td></tr></table></figure><h3 id="é…ç½®æ¨¡æ¿ç›®å½•"><a href="#é…ç½®æ¨¡æ¿ç›®å½•" class="headerlink" title="é…ç½®æ¨¡æ¿ç›®å½•"></a>é…ç½®æ¨¡æ¿ç›®å½•</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹, æ–°å»ºæ¨¡æ¿ç›®å½• templates</span><br>TEMPLATES = [<br>  &#123;<br>      <span class="hljs-string">&#x27;BACKEND&#x27;</span>: <span class="hljs-string">&#x27;django.template.backends.django.DjangoTemplates&#x27;</span>,<br>      <span class="hljs-string">&#x27;DIRS&#x27;</span>: [os.path.join(BASE_DIR, <span class="hljs-string">&quot;templates&quot;</span>)],<br>      <span class="hljs-string">&#x27;APP_DIRS&#x27;</span>: <span class="hljs-literal">True</span>,<br>      <span class="hljs-string">&#x27;OPTIONS&#x27;</span>: &#123;<br>          <span class="hljs-string">&#x27;context_processors&#x27;</span>: [<br>              <span class="hljs-string">&#x27;django.template.context_processors.debug&#x27;</span>,<br>              <span class="hljs-string">&#x27;django.template.context_processors.request&#x27;</span>,<br>              <span class="hljs-string">&#x27;django.contrib.auth.context_processors.auth&#x27;</span>,<br>              <span class="hljs-string">&#x27;django.contrib.messages.context_processors.messages&#x27;</span>,<br>          ],<br>      &#125;,<br>  &#125;,<br>]<br></code></pre></div></td></tr></table></figure><h3 id="é…ç½®é™æ€èµ„æº"><a href="#é…ç½®é™æ€èµ„æº" class="headerlink" title="é…ç½®é™æ€èµ„æº"></a>é…ç½®é™æ€èµ„æº</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># é™æ€èµ„æºå±•ç¤ºçš„urlå‰ç¼€</span><br>STATIC_URL = <span class="hljs-string">&#x27;/static/&#x27;</span><br><span class="hljs-comment"># é™æ€èµ„æºå­˜æ”¾çš„ç›®å½•ï¼Œéœ€è¦å…ˆåˆ›å»ºstaticç›®å½•</span><br>STATICFILES_DIRS = [os.path.join(BASE_DIR, <span class="hljs-string">&#x27;static&#x27;</span>)]<br></code></pre></div></td></tr></table></figure><h3 id="æœ¬åœ°åŒ–é…ç½®"><a href="#æœ¬åœ°åŒ–é…ç½®" class="headerlink" title="æœ¬åœ°åŒ–é…ç½®"></a>æœ¬åœ°åŒ–é…ç½®</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">LANGUAGE_CODE = <span class="hljs-string">&#x27;zh-hans&#x27;</span><br><br>TIME_ZONE = <span class="hljs-string">&#x27;Asia/Shanghai&#x27;</span><br><br>USE_TZ = <span class="hljs-literal">True</span> <span class="hljs-comment"># è®¾ç½®ä¸ºTrueï¼Œ æ•°æ®åº“å­˜å‚¨é»˜è®¤ä½¿ç”¨UTCæ—¶åŒºï¼Œè®¾ç½®ä¸ºFalseï¼Œ ä½¿ç”¨æœ¬åœ°æ—¶åŒº</span><br></code></pre></div></td></tr></table></figure><h3 id="é…ç½®HOSTåœ°å€"><a href="#é…ç½®HOSTåœ°å€" class="headerlink" title="é…ç½®HOSTåœ°å€"></a>é…ç½®HOSTåœ°å€</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">ALLOWED_HOSTS = [<span class="hljs-string">&quot;*&quot;</span>] <span class="hljs-comment"># å…è®¸å®¢æˆ·ç«¯é€šè¿‡æœåŠ¡å™¨çš„ä»»ä½•ip(æœ¬åœ°ipå’Œç½‘ç»œip)è®¿é—®æœåŠ¡å™¨</span><br></code></pre></div></td></tr></table></figure><h2 id="åˆ›å»ºåå°è¶…çº§ç®¡ç†å‘˜"><a href="#åˆ›å»ºåå°è¶…çº§ç®¡ç†å‘˜" class="headerlink" title="åˆ›å»ºåå°è¶…çº§ç®¡ç†å‘˜"></a>åˆ›å»ºåå°è¶…çº§ç®¡ç†å‘˜</h2><ul><li><p>è¿›å…¥manage.pyç›®å½•ä¸‹ï¼Œä½¿ç”¨å‘½ä»¤<code>python manage.py createsuperuser</code>æ¥è¿›è¡Œåˆ›å»º</p></li><li><p>æ¥ä¸‹æ¥è¾“å…¥ç”¨æˆ·åç§° : <code>Username(leave bkank to use &#39;administrator&#39;): root</code></p></li><li><p>ç„¶åæ˜¯è¾“å…¥é‚®ç®±ï¼ˆQQemailç­‰éƒ½å¯ä»¥ï¼‰: <code>Email addressï¼šxxxx@xxx.com</code></p></li><li><p>è¾“å…¥å¯†ç ï¼ˆè¾“å…¥å¯†ç æ—¶ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œå¹¶ä¸”é•¿åº¦å¿…é¡»è¶…è¿‡å…«ä½æ‰è¡Œï¼‰: <code>Passwordï¼š********</code></p></li><li><p>ç¡®è®¤å¯†ç  : <code>Password(again)ï¼š********</code></p></li><li><p>å½“ä¸¤æ¬¡å¯†ç è¾“å…¥ç›¸åŒä¸”è¶…è¿‡å…«ä½çš„æ—¶å€™ï¼Œå°±ä¼šæç¤ºåˆ›å»ºè¶…çº§ç”¨æˆ·æˆåŠŸ : <code>Superuser created successfully</code></p></li></ul><h2 id="æ•°æ®æ¨¡å‹"><a href="#æ•°æ®æ¨¡å‹" class="headerlink" title="æ•°æ®æ¨¡å‹"></a>æ•°æ®æ¨¡å‹</h2><h3 id="åˆ›å»ºæ¨¡å‹ç±»"><a href="#åˆ›å»ºæ¨¡å‹ç±»" class="headerlink" title="åˆ›å»ºæ¨¡å‹ç±»"></a>åˆ›å»ºæ¨¡å‹ç±»</h3><p>åœ¨åº”ç”¨<code>books</code>ç›®å½•ä¸‹çš„<code>models.py</code>æ–‡ä»¶ä¸­åˆ›å»ºæ¨¡å‹ç±»</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-comment"># Create your models here.</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BookInfo</span>(<span class="hljs-params">models.Model</span>):</span><br>    title = models.CharField(max_length=<span class="hljs-number">20</span>)<br>    pub_date = models.DateField()<br>    read = models.IntegerField(default=<span class="hljs-number">0</span>)<br>    comment = models.IntegerField(default=<span class="hljs-number">0</span>)<br>    <span class="hljs-comment"># åˆ é™¤æ ‡è®°</span><br>    isDelete = models.BooleanField(default=<span class="hljs-literal">False</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">&#x27;tb_books&#x27;</span>  <span class="hljs-comment"># æŒ‡å®šè¡¨å</span><br>        verbose_name = <span class="hljs-string">&#x27;å›¾ä¹¦&#x27;</span>  <span class="hljs-comment"># åå°æ˜¾ç¤ºè¡¨å</span><br>        verbose_name_plural = verbose_name<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.title  <span class="hljs-comment"># æŸ¥è¯¢å¯¹è±¡æ—¶ï¼Œæ˜¾ç¤ºä¿¡æ¯</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HeroInfo</span>(<span class="hljs-params">models.Model</span>):</span><br>    name = models.CharField(max_length=<span class="hljs-number">20</span>)<br>    gender = models.BooleanField(default=<span class="hljs-literal">False</span>)<br>    comment = models.CharField(max_length=<span class="hljs-number">200</span>)<br>    book = models.ForeignKey(<span class="hljs-string">&#x27;BookInfo&#x27;</span>, on_delete=models.CASCADE)<br>    isDelete = models.BooleanField(default=<span class="hljs-literal">False</span>)<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><br>        db_table = <span class="hljs-string">&#x27;tb_heros&#x27;</span>  <span class="hljs-comment"># æŒ‡å®šè¡¨å</span><br>        verbose_name = <span class="hljs-string">&#x27;è‹±é›„&#x27;</span>  <span class="hljs-comment"># åå°æ˜¾ç¤ºè¡¨å</span><br>        verbose_name_plural = verbose_name<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.name  <span class="hljs-comment"># æŸ¥è¯¢å¯¹è±¡æ—¶ï¼Œæ˜¾ç¤ºä¿¡æ¯</span><br></code></pre></div></td></tr></table></figure><h3 id="æ¨¡å‹ç±»ç”Ÿæˆè¡¨"><a href="#æ¨¡å‹ç±»ç”Ÿæˆè¡¨" class="headerlink" title="æ¨¡å‹ç±»ç”Ÿæˆè¡¨"></a>æ¨¡å‹ç±»ç”Ÿæˆè¡¨</h3><ul><li><p>ç”Ÿæˆè¿ç§»æ–‡ä»¶<code>python manage.py makemigrations</code></p></li><li><p>è¿ç§»æ–‡ä»¶ç”Ÿæˆè¡¨<code>python manage.py migrate</code>,ç”Ÿæˆè¡¨åçš„é»˜è®¤æ ¼å¼ï¼šåº”ç”¨å_æ¨¡å‹ç±»åå°å†™,å¯ä»¥æŒ‡å®šè¡¨å</p></li></ul><h3 id="Adminåå°ç®¡ç†"><a href="#Adminåå°ç®¡ç†" class="headerlink" title="Adminåå°ç®¡ç†"></a>Adminåå°ç®¡ç†</h3><p>åœ¨åº”ç”¨bookä¸‹çš„admin.pyä¸­æ³¨å†Œæ¨¡å‹ç±»ã€‚</p><p>å‘Šè¯‰djangæ¡†æ¶æ ¹æ®æ³¨å†Œçš„æ¨¡å‹ç±»æ¥ç”Ÿæˆå¯¹åº”è¡¨ç®¡ç†é¡µé¢ã€‚</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> book.models <span class="hljs-keyword">import</span> BookInfo<br><span class="hljs-keyword">from</span> book.models <span class="hljs-keyword">import</span> HeroInfo<br><br><span class="hljs-comment"># åå°ç®¡ç†ç›¸å…³æ–‡ä»¶</span><br><span class="hljs-comment"># Register your models here.</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BookInfoAdmin</span>(<span class="hljs-params">admin.ModelAdmin</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;å›¾ä¹¦æ¨¡å‹ç®¡ç†ç±»&quot;&quot;&quot;</span><br>    list_display = [<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;book_title&#x27;</span>, <span class="hljs-string">&#x27;book_pub_date&#x27;</span>]<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HeroInfoAdmin</span>(<span class="hljs-params">admin.ModelAdmin</span>):</span><br>    list_display = [<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;hero_name&#x27;</span>, <span class="hljs-string">&#x27;hero_sex&#x27;</span>, <span class="hljs-string">&#x27;hero_comment&#x27;</span>, <span class="hljs-string">&#x27;hero_book&#x27;</span>]<br><br><span class="hljs-comment"># æ³¨å†Œæ¨¡å‹ç±»</span><br>admin.site.register(BookInfo, BookInfoAdmin)<br>admin.site.register(HeroInfo, HeroInfoAdmin)<br></code></pre></div></td></tr></table></figure><h2 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h2><p>åœ¨ <code>templates</code>ç›®å½•ä¸‹ åˆ›å»º  <code>hero_list.html</code>, å±•ç¤ºæ‰€æœ‰ è‹±é›„ä¿¡æ¯</p><figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python">&lt;!DOCTYPE html&gt;<br>&lt;html lang=<span class="hljs-string">&quot;zh&quot;</span>&gt;<br>&lt;head&gt;<br>    &lt;meta charset=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;<br>    &lt;title&gt;è‹±é›„åˆ—è¡¨&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;table&gt;<br>    &#123;% <span class="hljs-keyword">for</span> hero <span class="hljs-keyword">in</span> heroes %&#125;   <span class="hljs-comment"># ç±»ä¼¼pythonçš„forå¾ªç¯å’Œifåˆ¤æ–­</span><br>        &#123;% <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> hero.isDelete %&#125;<br>            &lt;tr&gt;<br>                &lt;td&gt;&#123;&#123; hero.id &#125;&#125;&lt;/td&gt;<br>                &lt;td&gt;&#123;&#123; hero.name &#125;&#125;&lt;/td&gt;<br>                &lt;td&gt;&#123;&#123; hero.gender &#125;&#125;&lt;/td&gt;<br>                &lt;td&gt;&#123;&#123; hero.comment &#125;&#125;&lt;/td&gt;<br>                &lt;td&gt;&#123;&#123; hero.book &#125;&#125;&lt;/td&gt;<br>            &lt;/tr&gt;<br>        &#123;% endif %&#125;<br>    &#123;% endfor %&#125;<br>&lt;/table&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></div></td></tr></table></figure><h2 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h2><p>åœ¨ <code>books</code> APPç›®å½•ä¸‹çš„ <code>views.py</code>ä¸­åˆ›å»ºè‡ªå·±çš„ è§†å›¾å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render<br><span class="hljs-keyword">from</span> books.models <span class="hljs-keyword">import</span> *<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hero_list_view</span>(<span class="hljs-params">request</span>):</span><br>    heros = HeroInfo.objects.<span class="hljs-built_in">all</span>()  <span class="hljs-comment"># åˆ©ç”¨æ¨¡å‹ç±»æŸ¥è¯¢å…¨éƒ¨æ•°æ®</span><br>    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;hero_list.html&#x27;</span>, context=&#123;<span class="hljs-string">&#x27;heros&#x27;</span>: heros&#125;)  <span class="hljs-comment"># åˆ©ç”¨renderå‡½æ•°æ¸²æŸ“æ¨¡æ¿</span><br></code></pre></div></td></tr></table></figure><h2 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h2><p>åœ¨ é¡¹ç›®åŒåç›®å½•çš„ <code>urls.py</code>ä¸­é…ç½®è·¯ç”±</p><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> book.views <span class="hljs-keyword">import</span> *<br><br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;heroes/&#x27;</span>, hero_list_view)<br>]<br></code></pre></div></td></tr></table></figure><h2 id="é¡¹ç›®å¯åŠ¨"><a href="#é¡¹ç›®å¯åŠ¨" class="headerlink" title="é¡¹ç›®å¯åŠ¨"></a>é¡¹ç›®å¯åŠ¨</h2><ul><li><p>åªèƒ½é€šè¿‡æœ¬åœ°ipè®¿é—® : <code>python manage.py runserver</code> </p><p>æµè§ˆå™¨è¾“å…¥<code>127.0.0.1:8000</code>è®¿é—®æœåŠ¡å™¨</p></li><li><p>å¯ä»¥é€šè¿‡ç½‘ç»œipè®¿é—® : <code>python manage.py runserver 0.0.0.0:8000</code></p><p>æµè§ˆå™¨è¾“å…¥<code>ç½‘ç»œip:8000</code>è®¿é—®æœåŠ¡å™¨ï¼ŒåŒæ—¶éœ€è¦æ­é… <code>settings.py</code>ä¸­çš„é…ç½®å‚æ•°ä½¿ç”¨</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¥é—¨æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå¼‚å¸¸</title>
      <link href="2019/03/22/python-gao-ji-yi-chang/"/>
      <url>2019/03/22/python-gao-ji-yi-chang/</url>
      
        <content type="html"><![CDATA[<p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2006/20190517210629-%E5%BC%82%E5%B8%B8%E7%B1%BB%E5%9E%8B%20.png" alt="20190517210629-å¼‚å¸¸ç±»å‹"></p><h3 id="è‡ªå®šä¹‰å¼‚å¸¸ç±»å‹"><a href="#è‡ªå®šä¹‰å¼‚å¸¸ç±»å‹" class="headerlink" title="è‡ªå®šä¹‰å¼‚å¸¸ç±»å‹"></a>è‡ªå®šä¹‰å¼‚å¸¸ç±»å‹</h3><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># è‡ªå®šä¹‰é”™è¯¯ç±»å‹</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArgsException</span>(<span class="hljs-params">Exception</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, num, num_type</span>):</span><br>        self.num = num  <span class="hljs-comment"># ç”¨æ¥æè¿°å‚æ•°ä¸ªæ•°</span><br>        self.num_type = num_type  <span class="hljs-comment"># ç”¨æˆ·æè¿°å‚æ•°ç±»å‹</span><br><br><br>num1 = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¾“å…¥æ•°å­—:&quot;</span>)<br>num2 = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¾“å…¥æ•°å­—:&quot;</span>)<br><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-keyword">if</span> num1.isdigit() <span class="hljs-keyword">is</span> <span class="hljs-literal">False</span> <span class="hljs-keyword">or</span> num2.isdigit() <span class="hljs-keyword">is</span> <span class="hljs-literal">False</span>:<br>             <span class="hljs-comment"># é”™è¯¯ç±»å‹çš„å®ä¾‹å¯¹è±¡</span><br>        <span class="hljs-keyword">raise</span> ArgsException(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;int&quot;</span>)  <span class="hljs-comment"># raise å¼‚å¸¸ç±»å‹  -&gt; ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸</span><br><span class="hljs-keyword">except</span> ArgsException <span class="hljs-keyword">as</span> ret:<br>    print(<span class="hljs-string">&quot;éœ€è¦%dä¸ª%så‚æ•°&quot;</span> % (ret.num, ret.num_type))<br><br></code></pre></div></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼‚å¸¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythoné­”æ³•æ–¹æ³•</title>
      <link href="2019/03/22/python-mian-xiang-dui-xiang-mo-fa-fang-fa/"/>
      <url>2019/03/22/python-mian-xiang-dui-xiang-mo-fa-fang-fa/</url>
      
        <content type="html"><![CDATA[<p>æ®è¯´ï¼ŒPython çš„å¯¹è±¡å¤©ç”Ÿæ‹¥æœ‰ä¸€äº›ç¥å¥‡çš„æ–¹æ³•ï¼Œå®ƒä»¬æ€»è¢«åŒä¸‹åˆ’çº¿æ‰€åŒ…å›´ï¼Œä»–ä»¬æ˜¯é¢å‘å¯¹è±¡çš„ Python çš„ä¸€åˆ‡ã€‚</p><p>ä»–ä»¬æ˜¯å¯ä»¥ç»™ä½ çš„ç±»å¢åŠ é­”åŠ›çš„ç‰¹æ®Šæ–¹æ³•ï¼Œå¦‚æœä½ çš„å¯¹è±¡å®ç°ï¼ˆé‡è½½ï¼‰äº†è¿™äº›æ–¹æ³•ä¸­çš„æŸä¸€ä¸ªï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±ä¼šåœ¨ç‰¹æ®Šçš„æƒ…å†µä¸‹è¢« Python æ‰€è°ƒç”¨ï¼Œä½ å¯ä»¥å®šä¹‰è‡ªå·±æƒ³è¦çš„è¡Œä¸ºï¼Œè€Œè¿™ä¸€åˆ‡éƒ½æ˜¯è‡ªåŠ¨å‘ç”Ÿçš„ã€‚</p><p>Python çš„é­”æœ¯æ–¹æ³•éå¸¸å¼ºå¤§ï¼Œç„¶è€Œéšä¹‹è€Œæ¥çš„åˆ™æ˜¯è´£ä»»ã€‚äº†è§£æ­£ç¡®çš„æ–¹æ³•å»ä½¿ç”¨éå¸¸é‡è¦ï¼</p><p><img src="https://gitee.com/bookandmusic/imgs/raw/master/uPic/2020%2005/%E9%AD%94%E6%B3%95%E6%96%B9%E6%B3%95%20.png" alt="é­”æ³•æ–¹æ³•"></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
          <category> python </category>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é­”æ³•æ–¹æ³• </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
